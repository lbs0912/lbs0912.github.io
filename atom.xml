<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Liu Baoshuai&#39;s Blog</title>
  
  <subtitle>Do one thing at a time and do well</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://lbs0912.github.io/"/>
  <updated>2020-04-21T22:52:36.232Z</updated>
  <id>https://lbs0912.github.io/</id>
  
  <author>
    <name>Liu Baoshuai</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ</title>
    <link href="https://lbs0912.github.io/2020/04/22/hive-basic-1/"/>
    <id>https://lbs0912.github.io/2020/04/22/hive-basic-1/</id>
    <published>2020-04-22T00:35:26.000Z</published>
    <updated>2020-04-21T22:52:36.232Z</updated>
    
    <content type="html"><![CDATA[<ul><li>æœ¬æ–‡ä¸ºHiveå…¥é—¨ç¯‡ï¼Œä¸»è¦è®°å½•Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨å’Œè¡¨æ“ä½œã€‚</li></ul><a id="more"></a><h2 id="å­¦ä¹ èµ„æ–™æ±‡æ€»"><a href="#å­¦ä¹ èµ„æ–™æ±‡æ€»" class="headerlink" title="å­¦ä¹ èµ„æ–™æ±‡æ€»"></a>å­¦ä¹ èµ„æ–™æ±‡æ€»</h2><ul><li><a href="http://hive.apache.org/" target="_blank" rel="noopener">Hiveå®˜ç½‘</a></li><li><a href="https://cwiki.apache.org/confluence/display/Hive#Home-UserDocumentation" target="_blank" rel="noopener">User Documentation - Apache Hive</a></li><li><a href="http://blog.fens.me/hadoop-hive-roadmap/" target="_blank" rel="noopener">Hiveå­¦ä¹ è·¯çº¿å›¾è°± | ç²‰ä¸æ—¥å¿—</a></li><li><a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a></li></ul><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><blockquote><p>Hiveæ˜¯å»ºç«‹åœ¨ Hadoop ä¸Šçš„æ•°æ®ä»“åº“åŸºç¡€æ„æ¶ã€‚</p></blockquote><p>Hive æ˜¯ Hadoop å®¶æ—ä¸­ä¸€æ¬¾æ•°æ®ä»“åº“äº§å“ï¼ŒHive æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æä¾›äº†ç±» SQL çš„è¯­æ³•ï¼Œå°è£…äº†åº•å±‚çš„ MapReduce è¿‡ç¨‹ï¼Œè®©æœ‰ SQL åŸºç¡€çš„ä¸šåŠ¡äººå‘˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ Hadoop è¿›è¡Œå¤§æ•°æ®çš„æ“ä½œã€‚å°±æ˜¯è¿™ä¸€ä¸ªç‚¹ï¼Œè§£å†³äº†åŸæ•°æ®åˆ†æäººå‘˜å¯¹äºå¤§æ•°æ®åˆ†æçš„ç“¶é¢ˆã€‚</p><p><strong>Hive å¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›å®Œæ•´çš„ SQL æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°† SQL è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿è¡Œã€‚Hive å®šä¹‰äº†ç®€å•çš„ç±» SQL æŸ¥è¯¢è¯­è¨€ï¼Œç§°ä¸º HQL</strong>ã€‚</p><p>Hive çš„çŸ¥è¯†å›¾è°±å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hive-roadmap.png" alt=""></p><p>Hive å·²ç»ç”¨ç±» SQL çš„è¯­æ³•å°è£…äº† MapReduce è¿‡ç¨‹ï¼Œè¿™ä¸ªå°è£…è¿‡ç¨‹å°±æ˜¯ MapReduce çš„æ ‡å‡†åŒ–çš„è¿‡ç¨‹ã€‚</p><p>æˆ‘ä»¬åœ¨åšä¸šåŠ¡æˆ–è€…å·¥å…·æ—¶ï¼Œä¼šé’ˆå¯¹åœºæ™¯ç”¨é€»è¾‘å°è£…ï¼Œè¿™é‡Œçš„ç¬¬2å±‚å°è£…æ˜¯åœ¨Hiveä¹‹ä¸Šçš„å°è£…ã€‚åœ¨ç¬¬2å±‚å°è£…æ—¶ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½å¤šçš„å±è”½ Hive çš„ç»†èŠ‚ï¼Œè®©æ¥å£å•ä¸€åŒ–ï¼Œä½å°‘çµæ´»æ€§ï¼Œå†æ¬¡ç²¾ç®€ HQL çš„è¯­æ³•ç»“æ„ã€‚åªæ»¡è¶³æˆ‘ä»¬çš„ç³»ç»Ÿè¦æ±‚ï¼Œä¸“ç”¨çš„æ¥å£ã€‚</p><p>åœ¨ä½¿ç”¨äºŒæ¬¡å°è£…çš„æ¥å£æ—¶ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä¸ç”¨çŸ¥é“ Hive æ˜¯ä»€ä¹ˆ, æ›´ä¸ç”¨çŸ¥é“ Hadoop æ˜¯ä»€ä¹ˆã€‚åªéœ€è¦çŸ¥é“ï¼ŒSQLæŸ¥è¯¢(SQL92æ ‡å‡†)ï¼Œæ€ä¹ˆå†™æ•ˆç‡é«˜ï¼Œæ€ä¹ˆå†™å¯ä»¥å®Œæˆä¸šåŠ¡éœ€è¦å°±å¯ä»¥äº†ã€‚</p><p>å½“æˆ‘ä»¬å®Œæˆäº† Hive çš„äºŒæ¬¡å°è£…åï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºæ ‡å‡†åŒ–çš„ MapReduce å¼€å‘è¿‡ç¨‹ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hive-architect-2.jpg" alt=""></p><p>Hive ä¸é€‚åˆç”¨äºè”æœºï¼ˆ<code>online</code>ï¼‰äº‹åŠ¡å¤„ç†ï¼Œä¹Ÿä¸æä¾›å®æ—¶æŸ¥è¯¢åŠŸèƒ½ã€‚å®ƒæœ€é€‚åˆç”¨åœ¨åŸºäºå¤§é‡ä¸å¯å˜æ•°æ®çš„æ‰¹å¤„ç†ä½œä¸šã€‚Hiveç‰¹ç‚¹æ˜¯å¯ä¼¸ç¼©ï¼ˆåœ¨Hadoopçš„é›†ç¾¤ä¸ŠåŠ¨æ€åœ°æ·»åŠ è®¾å¤‡ï¼‰ï¼Œå¯æ‰©å±•ï¼Œå®¹é”™ï¼Œè¾“å…¥æ ¼å¼çš„æ¾æ•£è€¦åˆã€‚</p><p>Hive çš„æœ€ä½³ä½¿ç”¨åœºåˆæ˜¯å¤§æ•°æ®é›†çš„æ‰¹å¤„ç†ä½œä¸šï¼Œä¾‹å¦‚ï¼Œç½‘ç»œæ—¥å¿—åˆ†æã€‚</p><h3 id="Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«"><a href="#Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«" class="headerlink" title="Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«"></a>Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«</h3><p>Hive åœ¨å¾ˆå¤šæ–¹é¢ä¸ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ç±»ä¼¼ï¼ˆä¾‹å¦‚æ”¯æŒ SQL æ¥å£ï¼‰ï¼Œä½†æ˜¯å…¶åº•å±‚å¯¹ HDFS å’Œ MapReduce çš„ä¾èµ–æ„å‘³ç€å®ƒçš„ä½“ç³»ç»“æ„æœ‰åˆ«äºä¼ ç»Ÿå…³ç³»æ•°æ®åº“ï¼Œè€Œè¿™äº›åŒºåˆ«åˆå½±å“ç€ Hive æ‰€æ”¯æŒçš„ç‰¹æ€§ï¼Œè¿›è€Œå½±å“ç€ Hive çš„ä½¿ç”¨ã€‚</p><p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›ç®€å•åŒºåˆ«</p><ul><li>Hive å’Œå…³ç³»æ•°æ®åº“å­˜å‚¨æ–‡ä»¶çš„ç³»ç»Ÿä¸åŒï¼ŒHive ä½¿ç”¨çš„æ˜¯ Hadoop çš„HDFSï¼ˆHadoopçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå…³ç³»æ•°æ®åº“åˆ™æ˜¯æœåŠ¡å™¨æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿ</li><li>Hive ä½¿ç”¨çš„è®¡ç®—æ¨¡å‹æ˜¯ MapReduceï¼Œè€Œå…³ç³»æ•°æ®åº“åˆ™æ˜¯è‡ªå·±è®¾è®¡çš„è®¡ç®—æ¨¡å‹</li><li>å…³ç³»æ•°æ®åº“éƒ½æ˜¯ä¸ºå®æ—¶æŸ¥è¯¢çš„ä¸šåŠ¡è¿›è¡Œè®¾è®¡çš„ï¼Œè€Œ Hive åˆ™æ˜¯ä¸ºæµ·é‡æ•°æ®åšæ•°æ®æŒ–æ˜è®¾è®¡çš„ï¼Œå®æ—¶æ€§å¾ˆå·®ï¼›å®æ—¶æ€§çš„åŒºåˆ«å¯¼è‡´ Hive çš„åº”ç”¨åœºæ™¯å’Œå…³ç³»æ•°æ®åº“æœ‰å¾ˆå¤§çš„ä¸åŒ</li><li>Hive å¾ˆå®¹æ˜“æ‰©å±•è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›å’Œè®¡ç®—èƒ½åŠ›ï¼Œè¿™ä¸ªæ˜¯ç»§æ‰¿ Hadoop çš„ï¼Œè€Œå…³ç³»æ•°æ®åº“åœ¨è¿™ä¸ªæ–¹é¢è¦å·®å¾ˆå¤š</li></ul><h2 id="Hive-å®‰è£…é…ç½®"><a href="#Hive-å®‰è£…é…ç½®" class="headerlink" title="Hive å®‰è£…é…ç½®"></a>Hive å®‰è£…é…ç½®</h2><p>Hive å®‰è£…å‚è€ƒèµ„æ–™å¦‚ä¸‹</p><ul><li><a href="https://www.cnblogs.com/micrari/p/7067968.html" target="_blank" rel="noopener">Mac ä¸Š Hive ç¯å¢ƒæ­å»º | blog</a></li><li><a href="https://zhuanlan.zhihu.com/p/70601668" target="_blank" rel="noopener">MacOS ä¸‹hiveçš„å®‰è£…ä¸é…ç½® | çŸ¥ä¹</a></li><li><a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a></li><li><a href="https://jyzhangchn.github.io/hive.html" target="_blank" rel="noopener">macä¸‹Hive+MySqlç¯å¢ƒé…ç½® | blog</a></li><li><a href="https://www.jianshu.com/p/5c11073d19d3" target="_blank" rel="noopener">Mac Hive é…ç½®å’Œå®‰è£… | ç®€ä¹¦</a></li></ul><p>æ­¤å¤„ï¼Œç®€å•è®°å½•Hiveçš„å®‰è£…å’Œé…ç½®æ­¥éª¤</p><h3 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h3><ol><li>é€šè¿‡ Homebrew å®‰è£… mysql</li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>mysql</span><br></pre></td></tr></table></figure><p>å®‰è£…ç»“æŸåï¼Œä¼šæœ‰å¦‚ä¸‹æç¤º</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">We<span class="comment">'ve installed your MySQL database without a root password. To secure it run:</span></span><br><span class="line">    mysql_secure_installation</span><br><span class="line"></span><br><span class="line">MySQL <span class="keyword">is</span> configured <span class="keyword">to</span> only allow connections <span class="keyword">from</span> localhost <span class="keyword">by</span> <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> connect run:</span><br><span class="line">    mysql -uroot</span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> have launchd start mysql now <span class="keyword">and</span> restart at login:</span><br><span class="line">  brew services start mysql</span><br><span class="line"><span class="keyword">Or</span>, <span class="keyword">if</span> you don<span class="comment">'t want/need a background service you can just run:</span></span><br><span class="line">  mysql.server start</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä¿¡æ¯æç¤ºï¼Œ</p><ul><li>è¿è¡Œ <code>brew services start mysql</code>ï¼Œå¯ä»¥åœ¨åå°å¯åŠ¨ mysql</li><li>è¿è¡Œ <code>mysql.server start</code>ï¼Œå¯ä»¥åœ¨å‰å°å¯åŠ¨ mysqlï¼ˆå…³é—­æ§åˆ¶å°ï¼ŒæœåŠ¡åœæ­¢ï¼‰</li><li>è¿è¡Œ <code>mysql_secure_installation</code>ï¼Œå¯ä»¥è¿›è¡Œå¯†ç è®¾ç½®</li></ul><ol start="2"><li>ä½¿ç”¨ <code>mysql --version</code> æ ¡éªŒ mysql ç‰ˆæœ¬å·</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="comment">--version</span></span><br><span class="line"></span><br><span class="line">// mysql  Ver <span class="number">8.0</span><span class="number">.19</span> <span class="keyword">for</span> osx10<span class="number">.15</span> <span class="keyword">on</span> x86_64 (Homebrew)</span><br></pre></td></tr></table></figure><ol start="3"><li>è®¾ç½®mysqlç§˜å¯†ï¼Œè®¾å®šå¯†ç ä¸º <code>mysql113459</code></li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew services <span class="built_in">start</span> mysql  <span class="comment"> //è®¾å®šå¯†ç å‰éœ€è¦å…ˆå¯åŠ¨mysql</span></span><br><span class="line"></span><br><span class="line">mysql_secure_installation</span><br><span class="line">//å¯†ç è®¾å®šä¸º mysql113459</span><br></pre></td></tr></table></figure><p>MySQL æ–°ç‰ˆæœ¬ä¸­å¼•å…¥äº†å¯†ç å®‰å…¨çº§åˆ«çš„æ¦‚å¿µï¼Œè®¾ç½®ä½å¼ºåº¦çš„å¯†ç æœ‰æ—¶ä¼šè¢«ç¦æ­¢ã€‚ä¸ºæ­¤å¯ä»¥ç›´æ¥æŒ‡å®šå¯†ç å®‰å…¨å¼ºåº¦ï¼Œæ‰§è¡Œä¸‹è¿°å‘½ä»¤ã€‚</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global validate_password_policy=0;  //è®¾ç½®å¯†ç å¼ºåº¦çº§åˆ«ä¸ºlow</span><br><span class="line">mysql&gt; set global validate_password_length=1;   //è®¾ç½®å¯†ç æœ€å°é•¿åº¦ä¸º4</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW VARIABLES LIKE 'validate_password%';    //æŸ¥çœ‹å¯†ç ç›¸å…³å‚æ•°è®¾ç½®</span><br><span class="line"></span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">|<span class="string"> Variable_name                        </span>|<span class="string"> Value  </span>|</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">|<span class="string"> validate_password.check_user_name    </span>|<span class="string"> ON     </span>|</span><br><span class="line">|<span class="string"> validate_password.dictionary_file    </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string"> validate_password.length             </span>|<span class="string"> 8      </span>|</span><br><span class="line">|<span class="string"> validate_password.mixed_case_count   </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password.number_count       </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password.policy             </span>|<span class="string"> MEDIUM </span>|</span><br><span class="line">|<span class="string"> validate_password.special_char_count </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_check_user_name    </span>|<span class="string"> ON     </span>|</span><br><span class="line">|<span class="string"> validate_password_dictionary_file    </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string"> validate_password_length             </span>|<span class="string"> 4      </span>|</span><br><span class="line">|<span class="string"> validate_password_mixed_case_count   </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_number_count       </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_policy             </span>|<span class="string"> LOW    </span>|</span><br><span class="line">|<span class="string"> validate_password_special_char_count </span>|<span class="string"> 1      </span>|</span><br><span class="line">+--------------------------------------+--------+</span><br></pre></td></tr></table></figure><p>è‹¥æ‰§è¡Œ <code>SHOW VARIABLES LIKE &#39;validate_password%&#39;;</code> é‡åˆ° <code>Unknown system variable &#39;validate_password_policy&#39;</code> æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒ <a href="https://stackoverflow.com/questions/55237257/mysql-validate-password-policy-unknown-system-variable" target="_blank" rel="noopener">MySQL validate_password_policy unknown system variable | StackOverflow</a> è¿›è¡Œå¤„ç†ã€‚</p><blockquote><p>This problem has happened because validate_password plugin is by default NOT activated. </p></blockquote><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> plugin_name, plugin_status <span class="keyword">from</span> information_schema.plugins <span class="keyword">where</span> plugin_name <span class="keyword">like</span> <span class="string">'validate%'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; install plugin validate_password soname <span class="string">'validate_password.so'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> plugin_name, plugin_status <span class="keyword">from</span> information_schema.plugins <span class="keyword">where</span> plugin_name <span class="keyword">like</span> <span class="string">'validate%'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">'validate_password%'</span>;</span><br></pre></td></tr></table></figure><ol start="4"><li>mysqlå¯åŠ¨</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew services <span class="built_in">start</span> mysql  <span class="comment"> //åå°å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">sudo mysql.server <span class="built_in">start</span>    <span class="comment"> //å‰å°å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">//è‹¥é‡åˆ°æƒé™é—®é¢˜ï¼Œå¯æ‰§è¡Œä¸‹è¿°å‘½ä»¤</span><br><span class="line">sudo chmod -R <span class="keyword">a</span>+rwx /usr/<span class="built_in">local</span>/var/mysql</span><br></pre></td></tr></table></figure><ol start="5"><li>mysqlå…³é—­</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql<span class="selector-class">.server</span> stop</span><br></pre></td></tr></table></figure><ol start="6"><li>mysqlé‡å¯</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql.<span class="keyword">server</span> <span class="keyword">restart</span></span><br></pre></td></tr></table></figure><ol start="7"><li>æŸ¥çœ‹é»˜è®¤æ•°æ®åº“</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p    <span class="regexp">//</span>å¯†ç   mysql113459</span><br><span class="line"></span><br><span class="line">show databases</span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span>  <span class="regexp">//</span>é€€å‡ºmysqläº¤äº’CI</span><br></pre></td></tr></table></figure><h3 id="Hive-å®‰è£…"><a href="#Hive-å®‰è£…" class="headerlink" title="Hive å®‰è£…"></a>Hive å®‰è£…</h3><ol><li>é€šè¿‡ Homebrew å®‰è£… Hive</li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>hive</span><br></pre></td></tr></table></figure><p>å®‰è£…ç»“æŸåï¼Œä¼šæœ‰å¦‚ä¸‹æç¤º</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">==&gt; Caveats</span><br><span class="line">Hadoop must be <span class="keyword">in</span> your path <span class="keyword">for</span> hive executable <span class="keyword">to</span> work.</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> you want <span class="keyword">to</span> use HCatalog with Pig, <span class="builtin-name">set</span> <span class="variable">$HCAT_HOME</span> <span class="keyword">in</span> your profile:</span><br><span class="line">  <span class="builtin-name">export</span> <span class="attribute">HCAT_HOME</span>=/usr/local/opt/hive/libexec/hcatalog</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/hive/3.1.2: 1,126 files, 231.8MB, built <span class="keyword">in</span> 7 seconds</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ <code>hive --version</code> æ ¡éªŒ hive ç‰ˆæœ¬å·</li></ol><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lbsMacBook-<span class="string">Pro:</span>~ lbs$ hive --version</span><br><span class="line"><span class="string">SLF4J:</span> Class path contains multiple SLF4J bindings.</span><br><span class="line"><span class="string">SLF4J:</span> Found binding <span class="keyword">in</span> [<span class="string">jar:</span><span class="string">file:</span><span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>hive<span class="regexp">/3.1.2/</span>libexec<span class="regexp">/lib/</span>log4j-slf4j-impl<span class="number">-2.10</span><span class="number">.0</span>.jar!<span class="regexp">/org/</span>slf4j<span class="regexp">/impl/</span>StaticLoggerBinder.<span class="keyword">class</span>]</span><br><span class="line"><span class="string">SLF4J:</span> Found binding <span class="keyword">in</span> [<span class="string">jar:</span><span class="string">file:</span><span class="regexp">/Library/</span>hadoop<span class="number">-2.10</span><span class="number">.0</span><span class="regexp">/share/</span>hadoop<span class="regexp">/common/</span>lib<span class="regexp">/slf4j-log4j12-1.7.25.jar!/</span>org<span class="regexp">/slf4j/</span>impl/StaticLoggerBinder.<span class="keyword">class</span>]</span><br><span class="line"><span class="string">SLF4J:</span> See <span class="string">http:</span><span class="comment">//www.slf4j.org/codes.html#multiple_bindings for an explanation.</span></span><br><span class="line"><span class="string">SLF4J:</span> Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Hive <span class="number">3.1</span><span class="number">.2</span></span><br><span class="line">Git <span class="string">git:</span><span class="comment">//HW13934/Users/gates/tmp/hive-branch-3.1/hive -r 8190d2be7b7165effa62bd21b7d60ef81fb0e4af</span></span><br><span class="line">Compiled by gates on Thu Aug <span class="number">22</span> <span class="number">15</span>:<span class="number">01</span>:<span class="number">18</span> PDT <span class="number">2019</span></span><br><span class="line">From source with checksum <span class="number">0492</span>c08f784b188c349f6afb1d8d9847</span><br></pre></td></tr></table></figure><ol start="3"><li>hive ç¯å¢ƒå˜é‡é…ç½®</li></ol><p>(1) æ‰“å¼€é…ç½®æ–‡ä»¶</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~<span class="string">/.bash_profile</span></span><br></pre></td></tr></table></figure><p>(2) æ›´æ–°é…ç½®æ–‡ä»¶</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HIVE_HOME</span>=/usr/local/Cellar/hive/3.1.2 </span><br><span class="line"><span class="attribute">HCAT_HOME</span>=/usr/local/opt/hive/libexec/hcatalog</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$&#123;HIVE_HOME&#125;/bin</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> HIVE_HOME</span><br><span class="line"><span class="builtin-name">export</span> HCAT_HOME</span><br></pre></td></tr></table></figure><p>(3) ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹-Hive-é»˜è®¤å…ƒæ•°æ®åº“"><a href="#ä¿®æ”¹-Hive-é»˜è®¤å…ƒæ•°æ®åº“" class="headerlink" title="ä¿®æ”¹ Hive é»˜è®¤å…ƒæ•°æ®åº“"></a>ä¿®æ”¹ Hive é»˜è®¤å…ƒæ•°æ®åº“</h3><blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHive å…ƒæ•°æ®ä¿å­˜åœ¨å†…åµŒçš„ Derby æ•°æ®åº“ä¸­ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªä¼šè¯è¿æ¥ï¼Œåªé€‚åˆç®€å•çš„æµ‹è¯•ã€‚å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä½¿ç”¨ï¼Œä¸ºäº†æ”¯æŒå¤šç”¨æˆ·ä¼šè¯ï¼Œåˆ™éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å…ƒæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ MySQL ä½œä¸ºå…ƒæ•°æ®åº“ï¼ŒHive å†…éƒ¨å¯¹ MySQL æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p></blockquote><ol><li>Hive é»˜è®¤å…ƒæ•°æ®åº“æ˜¯ derbyã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œç»™å‡ºç”¨ mysql å‚¨å­˜å…ƒæ•°æ®çš„é…ç½®</li></ol><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//åˆ›å»ºæ•°æ®åº“metastore</span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">database</span> metastore; </span><br><span class="line"></span><br><span class="line">//åˆ›å»ºç”¨æˆ·åä¸ºhiveï¼Œç™»å½•å¯†ç ä¸ºHive113459...çš„è´¦æˆ·</span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'hive'</span>@<span class="string">'localhost'</span> identified <span class="keyword">by</span> <span class="string">'Hive113459...'</span>; </span><br><span class="line"></span><br><span class="line">//ç»™å»ºå¥½çš„æ•°æ®åº“æ·»åŠ æƒé™</span><br><span class="line">grant <span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">update</span>,<span class="keyword">delete</span>,<span class="keyword">alter</span>,<span class="keyword">create</span>,<span class="keyword">index</span>,references <span class="keyword">on</span> metastore.* <span class="keyword">to</span> <span class="string">'hive'</span>@<span class="string">'localhost'</span>; </span><br><span class="line"></span><br><span class="line">// åˆ·æ–°æƒé™</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure><h3 id="Hive-é…ç½®"><a href="#Hive-é…ç½®" class="headerlink" title="Hive é…ç½®"></a>Hive é…ç½®</h3><ol><li>è¿›å…¥ Hive çš„å®‰è£…ç›®å½•ï¼Œåˆ›å»º <code>hive-site.xml</code> æ–‡ä»¶</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/Cellar/hive/<span class="number">3.1</span>.<span class="number">2</span>/libexec/conf</span><br><span class="line">$ cp hive-default<span class="selector-class">.xml</span><span class="selector-class">.template</span> hive-site<span class="selector-class">.xml</span>    <span class="comment">//å¤åˆ¶æä¾›çš„æ¨¡æ¿æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯¹ä»¥ä¸‹å‡ ä¸ªå±æ€§è¿›è¡Œä¿®æ”¹ã€‚</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionURL<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>jdbc:mysql:<span class="comment">//localhost/metastore&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionDriverName<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>com.mysql.jdbc.Driver<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionUserName<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>hive(ä¸Šè¿°mysqlä¸­åˆ›å»ºçš„ç”¨æˆ·å)<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionPassword<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>Hive113459...(ä¸Šè¿°mysqlä¸­åˆ›å»ºçš„ç”¨æˆ·å¯†ç )<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.exec.local.scratchdir<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.querylog.location<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.downloaded.resources.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.server2.logging.operation.log.location<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive/operation_logs<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æ‹·è´ <code>mysql-connector</code> åˆ° hive çš„å®‰è£…ç›®å½•ä¸‹</li></ol><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L <span class="string">'http://www.mysql.com/get/Downloads/Connector-J/mysql-connector-java-8.0.15.tar.gz/from/http://mysql.he.net/'</span> | tar xz</span><br><span class="line"></span><br><span class="line">$ cp mysql-connector-java-<span class="number">8.0</span>.<span class="number">15</span>/mysql-connector-java-<span class="number">8.0</span>.<span class="number">15</span>-bin.jar /usr/local/Cellar/hive/<span class="number">3.1</span>.<span class="number">2</span>/libexec/<span class="class"><span class="keyword">lib</span>/</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åˆå§‹åŒ– metastore æ•°æ®åº“</li></ol><p>ç›®å‰ç›´æ¥æŸ¥çœ‹ <code>metastore</code> æ•°æ®åº“ï¼Œå¯ä»¥å‘ç°æ•°æ®åº“æ˜¯ç©ºçš„ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">show </span>databases<span class="comment">;</span></span><br><span class="line">mysql&gt; use metastore<span class="comment">;</span></span><br><span class="line">mysql&gt; <span class="keyword">show </span>tables<span class="comment">;   // empty</span></span><br></pre></td></tr></table></figure><p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆémysql CLIï¼‰ä¸‹æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼Œåˆå§‹åŒ– metastore æ•°æ®åº“</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> schematool -initSchema -dbType mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">//Initialization script completed</span></span><br><span class="line"><span class="comment">//schemaTool completed</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæ¯•åï¼Œå†æ¬¡æŸ¥çœ‹æ•°æ®åº“ï¼Œä¼šå‘ç°å¦‚ä¸‹ä¿¡æ¯</p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+-------------------------------+</span><br><span class="line">|<span class="string"> Tables_in_metastore           </span>|</span><br><span class="line">+-------------------------------+</span><br><span class="line">|<span class="string"> AUX_TABLE                     </span>|</span><br><span class="line">|<span class="string"> BUCKETING_COLS                </span>|</span><br><span class="line">|<span class="string"> CDS                           </span>|</span><br><span class="line">|<span class="string"> COLUMNS_V2                    </span>|</span><br><span class="line">|<span class="string"> COMPACTION_QUEUE              </span>|</span><br><span class="line">|<span class="string"> COMPLETED_COMPACTIONS         </span>|</span><br><span class="line">|<span class="string"> COMPLETED_TXN_COMPONENTS      </span>|</span><br><span class="line">|<span class="string"> CTLGS                         </span>|</span><br><span class="line">|<span class="string"> DATABASE_PARAMS               </span>|</span><br><span class="line">|<span class="string"> DB_PRIVS                      </span>|</span><br><span class="line">|<span class="string"> DBS                           </span>|</span><br><span class="line">|<span class="string"> DELEGATION_TOKENS             </span>|</span><br><span class="line">|<span class="string"> FUNC_RU                       </span>|</span><br><span class="line">|<span class="string"> FUNCS                         </span>|</span><br><span class="line">|<span class="string"> GLOBAL_PRIVS                  </span>|</span><br><span class="line">|<span class="string"> HIVE_LOCKS                    </span>|</span><br><span class="line">|<span class="string"> I_SCHEMA                      </span>|</span><br><span class="line">|<span class="string"> IDXS                          </span>|</span><br><span class="line">|<span class="string"> INDEX_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> KEY_CONSTRAINTS               </span>|</span><br><span class="line">|<span class="string"> MASTER_KEYS                   </span>|</span><br><span class="line">|<span class="string"> MATERIALIZATION_REBUILD_LOCKS </span>|</span><br><span class="line">|<span class="string"> METASTORE_DB_PROPERTIES       </span>|</span><br><span class="line">|<span class="string"> MIN_HISTORY_LEVEL             </span>|</span><br><span class="line">|<span class="string"> MV_CREATION_METADATA          </span>|</span><br><span class="line">|<span class="string"> MV_TABLES_USED                </span>|</span><br><span class="line">|<span class="string"> NEXT_COMPACTION_QUEUE_ID      </span>|</span><br><span class="line">|<span class="string"> NEXT_LOCK_ID                  </span>|</span><br><span class="line">|<span class="string"> NEXT_TXN_ID                   </span>|</span><br><span class="line">|<span class="string"> NEXT_WRITE_ID                 </span>|</span><br><span class="line">|<span class="string"> NOTIFICATION_LOG              </span>|</span><br><span class="line">|<span class="string"> NOTIFICATION_SEQUENCE         </span>|</span><br><span class="line">|<span class="string"> NUCLEUS_TABLES                </span>|</span><br><span class="line">|<span class="string"> PART_COL_PRIVS                </span>|</span><br><span class="line">|<span class="string"> PART_COL_STATS                </span>|</span><br><span class="line">|<span class="string"> PART_PRIVS                    </span>|</span><br><span class="line">|<span class="string"> PARTITION_EVENTS              </span>|</span><br><span class="line">|<span class="string"> PARTITION_KEY_VALS            </span>|</span><br><span class="line">|<span class="string"> PARTITION_KEYS                </span>|</span><br><span class="line">|<span class="string"> PARTITION_PARAMS              </span>|</span><br><span class="line">|<span class="string"> PARTITIONS                    </span>|</span><br><span class="line">|<span class="string"> REPL_TXN_MAP                  </span>|</span><br><span class="line">|<span class="string"> ROLE_MAP                      </span>|</span><br><span class="line">|<span class="string"> ROLES                         </span>|</span><br><span class="line">|<span class="string"> RUNTIME_STATS                 </span>|</span><br><span class="line">|<span class="string"> SCHEMA_VERSION                </span>|</span><br><span class="line">|<span class="string"> SD_PARAMS                     </span>|</span><br><span class="line">|<span class="string"> SDS                           </span>|</span><br><span class="line">|<span class="string"> SEQUENCE_TABLE                </span>|</span><br><span class="line">|<span class="string"> SERDE_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> SERDES                        </span>|</span><br><span class="line">|<span class="string"> SKEWED_COL_NAMES              </span>|</span><br><span class="line">|<span class="string"> SKEWED_COL_VALUE_LOC_MAP      </span>|</span><br><span class="line">|<span class="string"> SKEWED_STRING_LIST            </span>|</span><br><span class="line">|<span class="string"> SKEWED_STRING_LIST_VALUES     </span>|</span><br><span class="line">|<span class="string"> SKEWED_VALUES                 </span>|</span><br><span class="line">|<span class="string"> SORT_COLS                     </span>|</span><br><span class="line">|<span class="string"> TAB_COL_STATS                 </span>|</span><br><span class="line">|<span class="string"> TABLE_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> TBL_COL_PRIVS                 </span>|</span><br><span class="line">|<span class="string"> TBL_PRIVS                     </span>|</span><br><span class="line">|<span class="string"> TBLS                          </span>|</span><br><span class="line">|<span class="string"> TXN_COMPONENTS                </span>|</span><br><span class="line">|<span class="string"> TXN_TO_WRITE_ID               </span>|</span><br><span class="line">|<span class="string"> TXNS                          </span>|</span><br><span class="line">|<span class="string"> TYPE_FIELDS                   </span>|</span><br><span class="line">|<span class="string"> TYPES                         </span>|</span><br><span class="line">|<span class="string"> VERSION                       </span>|</span><br><span class="line">|<span class="string"> WM_MAPPING                    </span>|</span><br><span class="line">|<span class="string"> WM_POOL                       </span>|</span><br><span class="line">|<span class="string"> WM_POOL_TO_TRIGGER            </span>|</span><br><span class="line">|<span class="string"> WM_RESOURCEPLAN               </span>|</span><br><span class="line">|<span class="string"> WM_TRIGGER                    </span>|</span><br><span class="line">|<span class="string"> WRITE_SET                     </span>|</span><br><span class="line">+-------------------------------+</span><br><span class="line">74 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨-Hive"><a href="#å¯åŠ¨-Hive" class="headerlink" title="å¯åŠ¨ Hive"></a>å¯åŠ¨ Hive</h3><p>å¯åŠ¨Hiveå‰ï¼Œéœ€è¦å…ˆè¿è¡ŒHadoopã€‚ä¹‹åè¿è¡Œ <code>hive</code> æˆ–è€… <code>hive shell</code> å¯ä»¥è¿›å…¥Hive Shell</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive </span><br><span class="line"></span><br><span class="line">//or</span><br><span class="line"> hive <span class="keyword">shell</span><span class="bash"></span></span><br><span class="line"><span class="bash"> </span></span><br><span class="line"> </span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure><h3 id="å¯è§†åŒ–å·¥å…·-DbVisualizer"><a href="#å¯è§†åŒ–å·¥å…·-DbVisualizer" class="headerlink" title="å¯è§†åŒ–å·¥å…· DbVisualizer"></a>å¯è§†åŒ–å·¥å…· DbVisualizer</h3><ul><li><a href="https://www.dbvis.com/download/11.0" target="_blank" rel="noopener">DbVisualizer Software</a></li><li><a href="http://confluence.dbvis.com/display/UG110/Installing" target="_blank" rel="noopener">DbVisualizer User Guide</a></li><li><a href="http://confluence.dbvis.com/display/UG110/Installing+a+JDBC+Driver" target="_blank" rel="noopener">Installing a JDBC Driver</a></li><li><a href="https://www.dbvis.com/features/database-drivers/" target="_blank" rel="noopener">Supported databases and JDBC drivers Download</a></li><li><a href="https://juejin.im/post/5d04675051882518e845cb8f" target="_blank" rel="noopener">åœ¨macä¸ŠDbVisualizerå›¾å½¢åŒ–å®¢æˆ·ç«¯é…ç½®è¿æ¥Hive | Blog</a></li><li><a href="https://github.com/timveil/hive-jdbc-uber-jar/releases" target="_blank" rel="noopener">hive-jdbc-uber-jar | github</a></li></ul><ol><li><p>ä¸‹è½½ <code>dbvis_macos_11_0_jre.dmg</code> å¹¶æ‰§è¡Œå®‰è£…</p></li><li><p>ä¹Ÿå¯ä»¥ä¸‹è½½ <code>.tar.gz</code> åŒ…è¿›è¡Œå®‰è£… </p></li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gunzip</span> <span class="selector-tag">dbvis_unix_11_0</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xf</span> <span class="selector-tag">dbvis_unix_11_0</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ç‚¹å‡» Docker ä¸­ DbVisualizerå›¾æ ‡å¯åŠ¨ï¼Œæˆ–ä½¿ç”¨å¦‚ä¸‹è„šæœ¬å¯åŠ¨</li></ol><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DbVisualizer/dbvis.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><ol start="4"><li>ä» <a href="https://github.com/timveil/hive-jdbc-uber-jar/releases" target="_blank" rel="noopener">hive-jdbc-uber-jar | github</a> ä¸‹è½½ <code>hive-jdbc-uber-jar</code>ï¼Œæ”¾ç½®åˆ° <code>/Users/lbs/.dbvis/jdbc</code> è·¯å¾„ä¸‹ï¼Œå¹¶å¯¼å…¥åˆ° DbVisualizer é…ç½®ä¸­</li></ol><ol start="5"><li>åœ¨ DbVisualizer çš„åå¥½è®¾ç½®ä¸­çš„ <code>Specify overridden Java VM Prperties here</code> ä¸­æ·»åŠ å¦‚ä¸‹è®¾ç½®</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Dsun<span class="selector-class">.security</span><span class="selector-class">.krb5</span><span class="selector-class">.debug</span>=true</span><br><span class="line">-Djavax<span class="selector-class">.security</span><span class="selector-class">.auth</span><span class="selector-class">.useSubjectCredsOnly</span>=false</span><br></pre></td></tr></table></figure><h2 id="Hiveäº¤äº’å¼æ¨¡å¼-CLI"><a href="#Hiveäº¤äº’å¼æ¨¡å¼-CLI" class="headerlink" title="Hiveäº¤äº’å¼æ¨¡å¼ CLI"></a>Hiveäº¤äº’å¼æ¨¡å¼ CLI</h2><p>è¿è¡Œ <code>hive</code> æˆ–è€… <code>hive shell</code> å¯ä»¥è¿›å…¥Hive Shellã€‚Hiveçš„äº¤äº’æ¨¡å¼éµå¾ªä¸‹è¿°è§„åˆ™ã€‚</p><ol><li><code>quit</code>,<code>exit</code>:  é€€å‡ºäº¤äº’å¼shell</li><li><code>reset</code>: é‡ç½®é…ç½®ä¸ºé»˜è®¤å€¼</li><li><code>set &lt;key&gt;=&lt;value&gt;</code> : ä¿®æ”¹ç‰¹å®šå˜é‡çš„å€¼(å¦‚æœå˜é‡åæ‹¼å†™é”™è¯¯ï¼Œä¸ä¼šæŠ¥é”™)</li><li><code>set</code> :  è¾“å‡ºç”¨æˆ·è¦†ç›–çš„ hiveé…ç½®å˜é‡</li><li><code>set -v</code> : è¾“å‡ºæ‰€æœ‰Hadoopå’ŒHiveçš„é…ç½®å˜é‡</li><li><code>add FILE[S] *</code>, <code>add JAR[S] *</code>, <code>add ARCHIVE[S] *</code> : æ·»åŠ  ä¸€ä¸ªæˆ–å¤šä¸ª file, jar, archivesåˆ°åˆ†å¸ƒå¼ç¼“å­˜</li><li><code>list FILE[S]</code>, <code>list JAR[S]</code>, <code>list ARCHIVE[S]</code> : è¾“å‡ºå·²ç»æ·»åŠ åˆ°åˆ†å¸ƒå¼ç¼“å­˜çš„èµ„æº</li><li><code>list FILE[S] *</code>, <code>list JAR[S] *</code>,<code>list ARCHIVE[S] *</code> : æ£€æŸ¥ç»™å®šçš„èµ„æºæ˜¯å¦æ·»åŠ åˆ°åˆ†å¸ƒå¼ç¼“å­˜</li><li><code>delete FILE[S] *</code>, <code>delete JAR[S] *</code>, <code>delete ARCHIVE[S] *</code> : ä»åˆ†å¸ƒå¼ç¼“å­˜åˆ é™¤æŒ‡å®šçš„èµ„æº</li><li><code>! &lt;command&gt;</code> :  ä» Hive shell æ‰§è¡Œä¸€ä¸ª shell å‘½ä»¤</li><li><code>dfs &lt;dfs command&gt;</code> :  ä» Hive shell æ‰§è¡Œä¸€ä¸ª dfs å‘½ä»¤</li><li><code>&lt;query string&gt;</code> : æ‰§è¡Œä¸€ä¸ª Hive æŸ¥è¯¢ï¼Œç„¶åè¾“å‡ºç»“æœåˆ°æ ‡å‡†è¾“å‡º</li><li><code>source FILE &lt;filepath&gt;</code>:  åœ¨ CLI é‡Œæ‰§è¡Œä¸€ä¸ª hive è„šæœ¬æ–‡ä»¶</li><li><code>!clear;</code>: æ¸…é™¤å‘½ä»¤è¡Œ</li><li><code>show tables;</code>ï¼š å±•ç¤ºæ•°æ®è¡¨</li><li><code>desc tableName</code>ï¼šå±•ç¤ºä¸€ä¸ªæ•°æ®è¡¨çš„ç»“æ„</li></ol><p>å’ŒSQLç±»ä¼¼ï¼ŒHiveQLä¸€èˆ¬æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼ˆé™¤äº†å­—ç¬¦ä¸²æ¯”è¾ƒä»¥å¤–ï¼‰ï¼Œå› æ­¤ <code>show tables;</code> ç­‰åŒäº <code>SHOW TABLES;</code>ã€‚åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰ä¼šè‡ªåŠ¨è¡¥å…¨ Hive çš„å…³é”®å­—å’Œå‡½æ•°ã€‚</p><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ Hive Shell æ“ä½œ Demoï¼Œè¯¦æƒ…å‚è€ƒ <a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a>ã€‚</p><ul><li>åˆ›å»ºæœ¬åœ°æ•°æ®æ–‡ä»¶(æ–‡æœ¬ä»¥tabåˆ†éš”)</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~ vi /home/cos/demo/t_hive.txt</span><br><span class="line"></span><br><span class="line"><span class="number">16</span>      <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">61</span>      <span class="number">12</span>      <span class="number">13</span></span><br><span class="line"><span class="number">41</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">17</span>      <span class="number">21</span>      <span class="number">3</span></span><br><span class="line"><span class="number">71</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">1</span>       <span class="number">12</span>      <span class="number">34</span></span><br><span class="line"><span class="number">11</span>      <span class="number">2</span>       <span class="number">34</span></span><br></pre></td></tr></table></figure><ul><li>è¿›å…¥Hive Shellï¼Œåˆ›å»ºæ–°è¡¨</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºæ–°è¡¨</span><br><span class="line">hive&gt; <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_hive (a <span class="type">int</span>, b <span class="type">int</span>, c <span class="type">int</span>) <span class="keyword">ROW</span> <span class="keyword">FORMAT</span> DELIMITED FIELDS TERMINATED <span class="keyword">BY</span> <span class="string">'\t'</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.489</span> seconds</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¡¨</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line">OK</span><br><span class="line">t_hive</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.099</span> seconds</span><br></pre></td></tr></table></figure><ul><li>æ­£åˆ™åŒ¹é…è¡¨å</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;<span class="keyword">show</span> <span class="keyword">tables</span> <span class="string">'*t*'</span>;</span><br><span class="line">OK</span><br><span class="line">t_hive</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.065</span> seconds</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¡¨æ•°æ®</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span> t_hive;</span><br><span class="line">OK</span><br><span class="line"><span class="number">16</span>      <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">61</span>      <span class="number">12</span>      <span class="number">13</span></span><br><span class="line"><span class="number">41</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">17</span>      <span class="number">21</span>      <span class="number">3</span></span><br><span class="line"><span class="number">71</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">1</span>       <span class="number">12</span>      <span class="number">34</span></span><br><span class="line"><span class="number">11</span>      <span class="number">2</span>       <span class="number">34</span></span><br><span class="line">Time taken: <span class="number">0.264</span> seconds</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¡¨ç»“æ„</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">desc</span> t_hive;</span><br><span class="line">OK</span><br><span class="line">a       <span class="type">int</span></span><br><span class="line">b       <span class="type">int</span></span><br><span class="line">c       <span class="type">int</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.1</span> seconds</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹è¡¨ï¼Œå¢åŠ ä¸€ä¸ªå­—æ®µ</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_hive <span class="keyword">ADD</span> <span class="keyword">COLUMNS</span> (new_col String);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.186</span> seconds</span><br><span class="line">hive&gt; <span class="keyword">desc</span> t_hive;</span><br><span class="line">OK</span><br><span class="line">a       <span class="type">int</span></span><br><span class="line">b       <span class="type">int</span></span><br><span class="line">c       <span class="type">int</span></span><br><span class="line">new_col string</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.086</span> seconds</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤è¡¨</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">DROP</span> <span class="keyword">TABLE</span> t_hadoop;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.767</span> seconds</span><br><span class="line"></span><br><span class="line">hive&gt; <span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.064</span> seconds</span><br></pre></td></tr></table></figure><h2 id="Beeline"><a href="#Beeline" class="headerlink" title="Beeline"></a>Beeline</h2><h3 id="HiveServer2"><a href="#HiveServer2" class="headerlink" title="HiveServer2"></a>HiveServer2</h3><p>Hive å†…ç½®äº† <code>HiveServer</code> å’Œ <code>HiveServer2</code> æœåŠ¡ï¼Œä¸¤è€…éƒ½å…è®¸å®¢æˆ·ç«¯ä½¿ç”¨å¤šç§ç¼–ç¨‹è¯­è¨€è¿›è¡Œè¿æ¥ï¼Œä½†æ˜¯ HiveServer ä¸èƒ½å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è¯·æ±‚ï¼Œæ‰€ä»¥äº§ç”Ÿäº† <code>HiveServer2</code>ã€‚</p><p><code>HiveServer2</code>ï¼ˆ<code>HS2</code>ï¼‰å…è®¸è¿œç¨‹å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨å„ç§ç¼–ç¨‹è¯­è¨€å‘ Hive æäº¤è¯·æ±‚å¹¶æ£€ç´¢ç»“æœï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯å¹¶å‘è®¿é—®å’Œèº«ä»½éªŒè¯ã€‚HS2 æ˜¯ç”±å¤šä¸ªæœåŠ¡ç»„æˆçš„å•ä¸ªè¿›ç¨‹ï¼Œå…¶åŒ…æ‹¬åŸºäº Thrift çš„ Hive æœåŠ¡ï¼ˆTCP æˆ– HTTPï¼‰å’Œç”¨äº Web UI çš„ Jetty Web æœåŠ¡å™¨ã€‚</p><p>HiveServer2 æ‹¥æœ‰è‡ªå·±çš„ CLI(<code>Beeline</code>)ï¼ŒBeeline æ˜¯ä¸€ä¸ªåŸºäº SQLLine çš„ JDBC å®¢æˆ·ç«¯ã€‚ç”±äº HiveServer2 æ˜¯ Hive å¼€å‘ç»´æŠ¤çš„é‡ç‚¹ (Hive0.15 åå°±ä¸å†æ”¯æŒ hiveserver)ï¼Œæ‰€ä»¥ Hive CLI å·²ç»ä¸æ¨èä½¿ç”¨äº†ï¼Œå®˜æ–¹æ›´åŠ æ¨èä½¿ç”¨ Beelineã€‚</p><ul><li><a href="https://juejin.im/post/5d8593905188254009777049" target="_blank" rel="noopener">Hive CLI å’Œ Beeline å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨</a></li></ul><h3 id="Beeline-å‚æ•°"><a href="#Beeline-å‚æ•°" class="headerlink" title="Beeline å‚æ•°"></a>Beeline å‚æ•°</h3><p>Beeline æ‹¥æœ‰æ›´å¤šå¯ä½¿ç”¨å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>beeline --help</code> æŸ¥çœ‹ï¼Œå®Œæ•´å‚æ•°å¦‚ä¸‹</p><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"> // ...</span></span><br><span class="line"><span class="comment"> // ...</span></span><br><span class="line"> </span><br><span class="line">Example:</span><br><span class="line"> <span class="number">1.</span> Connect <span class="keyword">using</span> simple authentication <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">localhost</span>:<span class="title">10000</span></span><br><span class="line"> $ beeline -u jdbc:hive2://localhost:<span class="number">10000</span> username password</span><br><span class="line"></span><br><span class="line"> <span class="number">2.</span> Connect <span class="keyword">using</span> simple authentication <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">hs</span>.<span class="title">local</span>:<span class="title">10000</span> <span class="title">using</span> -<span class="title">n</span> <span class="title">for</span> <span class="title">username</span> <span class="title">and</span> -<span class="title">p</span> <span class="title">for</span> <span class="title">password</span></span><br><span class="line"> $ beeline -n username -p password -u jdbc:hive2://hs2.<span class="built_in">local</span>:<span class="number">10012</span></span><br><span class="line"></span><br><span class="line"> <span class="number">3.</span> Connect <span class="keyword">using</span> Kerberos authentication <span class="keyword">with</span> hive/localhost@mydomain.com <span class="keyword">as</span> HiveServer2 principal</span><br><span class="line"> $ beeline -u <span class="string">"jdbc:hive2://hs2.local:10013/default;principal=hive/localhost@mydomain.com"</span></span><br><span class="line"></span><br><span class="line"> <span class="number">4.</span> Connect <span class="keyword">using</span> SSL connection <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">localhost</span> <span class="title">at</span> <span class="title">10000</span></span><br><span class="line"> $ beeline <span class="string">"jdbc:hive2://localhost:10000/default;ssl=true;sslTrustStore=/usr/local/truststore;trustStorePassword=mytruststorepassword"</span></span><br><span class="line"></span><br><span class="line"> <span class="number">5.</span> Connect <span class="keyword">using</span> LDAP authentication</span><br><span class="line"> $ beeline -u jdbc:hive2://hs2.<span class="built_in">local</span>:<span class="number">10013</span>/default &lt;ldap-username&gt; &lt;ldap-password&gt;</span><br></pre></td></tr></table></figure><p>åœ¨ Hive CLI ä¸­æ”¯æŒçš„å‚æ•°ï¼ŒBeeline éƒ½æ”¯æŒï¼Œå¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ã€‚æ›´å¤šå‚æ•°è¯´æ˜å¯ä»¥å‚è§å®˜æ–¹æ–‡æ¡£ <a href="https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93NewCommandLineShell" target="_blank" rel="noopener">Beeline Command Options</a>ã€‚</p><table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>-u <database URL></td><td>æ•°æ®åº“åœ°å€</td></tr><tr><td>-n <username></td><td>ç”¨æˆ·å</td></tr><tr><td>-p <password></td><td>å¯†ç </td></tr><tr><td>-d <driver class></td><td>é©±åŠ¨ (å¯é€‰)</td></tr><tr><td>-e <query></td><td>æ‰§è¡Œ SQL å‘½ä»¤</td></tr><tr><td>-f <file></td><td>æ‰§è¡Œ SQL è„šæœ¬</td></tr></tbody></table><p>ä¾‹å¦‚ï¼Œä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¿æ¥ Hive</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $ beeline -u jdbc:hive2://localhost:10000  -n username -p password </span></span><br><span class="line">$ beeline -u <span class="string">jdbc:</span><span class="string">hive2:</span><span class="comment">//localhost:10000  -n hive -p Hive113459...</span></span><br></pre></td></tr></table></figure><h2 id="Ambari"><a href="#Ambari" class="headerlink" title="Ambari"></a>Ambari</h2><ul><li><a href="http://ambari.apache.org/1.2.2/installing-hadoop-using-ambari/content/index.html" target="_blank" rel="noopener">Ambari User Guide</a></li><li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-bigdata-ambari/index.html" target="_blank" rel="noopener">Ambariâ€”â€”å¤§æ•°æ®å¹³å°çš„æ­å»ºåˆ©å™¨</a></li><li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-bigdata-ambari2/" target="_blank" rel="noopener">Ambariâ€”â€”å¤§æ•°æ®å¹³å°çš„æ­å»ºåˆ©å™¨ä¹‹è¿›é˜¶ç¯‡</a></li></ul><p>å’ŒHiveè¿›è¡Œäº¤äº’çš„æ–¹å¼ä¸»è¦æœ‰2ç§ï¼šå‘½ä»¤è¡Œå’ŒAmbariè§†å›¾ã€‚</p><p>å°± Ambari çš„ä½œç”¨æ¥è¯´ï¼Œå°±æ˜¯åˆ›å»ºã€ç®¡ç†ã€ç›‘è§† Hadoop çš„é›†ç¾¤ï¼Œä½†æ˜¯è¿™é‡Œçš„ Hadoop æ˜¯å¹¿ä¹‰ï¼ŒæŒ‡çš„æ˜¯ Hadoop æ•´ä¸ªç”Ÿæ€åœˆï¼ˆä¾‹å¦‚ Hiveï¼ŒHbaseï¼ŒSqoopï¼ŒZookeeper ç­‰ï¼‰ï¼Œè€Œå¹¶ä¸ä»…æ˜¯ç‰¹æŒ‡ Hadoopã€‚ç”¨ä¸€å¥è¯æ¥è¯´ï¼ŒAmbari å°±æ˜¯ä¸ºäº†è®© Hadoop ä»¥åŠç›¸å…³çš„å¤§æ•°æ®è½¯ä»¶æ›´å®¹æ˜“ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚</p><p>Ambari è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶æ„çš„è½¯ä»¶ï¼Œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>Ambari Server</code> å’Œ <code>Ambari Agent</code>ã€‚ç®€å•æ¥è¯´ï¼Œ</p><ul><li>ç”¨æˆ·é€šè¿‡ Ambari Server é€šçŸ¥ Ambari Agent å®‰è£…å¯¹åº”çš„è½¯ä»¶</li><li>Agent ä¼šå®šæ—¶åœ°å‘é€å„ä¸ªæœºå™¨æ¯ä¸ªè½¯ä»¶æ¨¡å—çš„çŠ¶æ€ç»™ Ambari Server</li><li>æœ€ç»ˆè¿™äº›çŠ¶æ€ä¿¡æ¯ä¼šå‘ˆç°åœ¨ Ambari çš„ GUIï¼Œæ–¹ä¾¿ç”¨æˆ·äº†è§£åˆ°é›†ç¾¤çš„å„ç§çŠ¶æ€ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ç»´æŠ¤</li></ul><h2 id="Hiveå®æˆ˜Demo"><a href="#Hiveå®æˆ˜Demo" class="headerlink" title="Hiveå®æˆ˜Demo"></a>Hiveå®æˆ˜Demo</h2><ul><li><a href="http://blog.fens.me/hadoop-hive-10g/" target="_blank" rel="noopener">Hiveå¯¼å…¥10Gæ•°æ®çš„æµ‹è¯• | ç²‰ä¸æ—¥å¿—</a></li><li><a href="http://blog.fens.me/finance-rhive-repurchase/" target="_blank" rel="noopener">ç”¨RHiveä»å†å²æ•°æ®ä¸­æå–é€†å›è´­ä¿¡æ¯ | ç²‰ä¸æ—¥å¿—</a></li></ul><h2 id="Hiveæ¶æ„"><a href="#Hiveæ¶æ„" class="headerlink" title="Hiveæ¶æ„"></a>Hiveæ¶æ„</h2><p>å°½ç®¡Hiveä½¿ç”¨èµ·æ¥ç±»ä¼¼SQLï¼Œä½†å®ƒä»ç„¶ä¸æ˜¯SQLï¼Œå°¤å…¶ä½“ç°åœ¨å¤„ç†é€Ÿåº¦æ–¹é¢ã€‚åº•å±‚çš„HiveæŸ¥è¯¢ä»ç„¶æ˜¯ä»¥ MapReduce ä½œä¸šçš„å½¢å¼è¿è¡Œã€‚MapReduceæ˜¯æ‰¹å¤„ç†ï¼Œè€ŒSQLåˆ™æ˜¯ä¸€ç§äº¤äº’å¼å¤„ç†è¯­éŸ³ã€‚</p><h3 id="HCatalog"><a href="#HCatalog" class="headerlink" title="HCatalog"></a>HCatalog</h3><p>HCatalog æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å…ƒæ•°æ®æœåŠ¡ï¼Œå…è®¸ä¸åŒçš„å·¥å…·å¦‚ Pigã€MapReduce ç­‰é€šè¿‡ HCatalog ç›´æ¥è®¿é—®å­˜å‚¨åœ¨ HDFS ä¸Šçš„åº•å±‚æ–‡ä»¶ã€‚</p><p>HCatalog æœ¬è´¨ä¸Šæ˜¯æ•°æ®è®¿é—®å·¥å…·ï¼ˆå¦‚Hiveæˆ–Pigï¼‰å’Œåº•å±‚æ–‡ä»¶ä¹‹é—´çš„æŠ½è±¡å±‚ã€‚</p><h2 id="Hive-æ•°æ®ç±»å‹"><a href="#Hive-æ•°æ®ç±»å‹" class="headerlink" title="Hive æ•°æ®ç±»å‹"></a>Hive æ•°æ®ç±»å‹</h2><ul><li><a href="https://cwiki.apache.org/confluence/display/Hive#Home-UserDocumentation" target="_blank" rel="noopener">User Documentation - Apache Hive</a></li></ul><h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><ul><li>tinyint/smallint/int/bigintï¼šæ•´æ•°ç±»å‹</li><li>float/doubleï¼šæµ®ç‚¹æ•°ç±»å‹</li><li>booleanï¼šå¸ƒå°”ç±»å‹</li><li>stringï¼šå­—ç¬¦ä¸²ç±»å‹</li></ul><p><code>string</code> ç±»å‹ä¸‹åˆåŒ…æ‹¬ å˜é•¿å­—ç¬¦ä¸² <code>VARCHAR</code> å’Œ å®šé•¿å­—ç¬¦ä¸² <code>CHAR</code>ã€‚ä¸‹é¢ç»™å‡ºä¾‹å­ï¼Œè¯´æ˜ä¸¤è€…åŒºåˆ«</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive &gt; <span class="keyword">create</span> <span class="keyword">table</span> test1</span><br><span class="line">     &gt; (vname <span class="type">varchar</span>(<span class="number">20</span>), cname <span class="type">char</span>(<span class="number">20</span>));</span><br><span class="line">     &gt; <span class="keyword">desc</span> test1;</span><br><span class="line">     </span><br><span class="line">vname   <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">cname   <span class="type">char</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>varchar(20)</code> è¡¨ç¤ºæœ€å¤§é•¿åº¦ä¸º20ï¼Œå®é™…é•¿åº¦å¯èƒ½ä¸è¶³20ã€‚<code>char(20)</code> è¡¨ç¤ºé•¿åº¦å›ºå®šä¸º20ã€‚</p><h3 id="å¤æ‚æ•°æ®ç±»å‹"><a href="#å¤æ‚æ•°æ®ç±»å‹" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹"></a>å¤æ‚æ•°æ®ç±»å‹</h3><ul><li>Arrayï¼šæ•°ç»„ï¼Œç”±ä¸€ç³»åˆ—ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ç»„æˆ</li><li>Mapï¼šé›†åˆï¼ŒåŒ…å« <code>key-&gt;value</code> é”®å€¼å¯¹ï¼Œå¯ä»¥é€šè¿‡ <code>key</code> æ¥è®¿é—®å…ƒç´ </li><li>Structï¼šç»“æ„ç±»å‹ï¼Œå¯ä»¥åŒ…å«ä¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å¯ä»¥é€šè¿‡ â€œç‚¹è¯­æ³•â€ çš„æ–¹å¼è®¿é—®</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; create table student</span><br><span class="line">    &gt; (sid <span class="built_in">int</span>,</span><br><span class="line">    &gt; sname <span class="built_in">string</span>,</span><br><span class="line">    &gt; grade1 <span class="built_in">array<span class="keyword">&lt;<span class="built_in">float</span>&gt;</span></span>,</span><br><span class="line">    &gt; grade2 map&lt;<span class="built_in">string</span>,<span class="built_in">float</span>&gt;</span><br><span class="line">    &gt; info struct&lt;name:<span class="built_in">string</span>, age:<span class="built_in">int</span>&gt;);</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">0.246</span> seconds</span><br><span class="line"></span><br><span class="line">hive&gt; desc student;</span><br><span class="line">OK</span><br><span class="line">sid                 <span class="built_in">int</span></span><br><span class="line">sname               <span class="built_in">string</span></span><br><span class="line">grade1               <span class="built_in">array<span class="keyword">&lt;<span class="built_in">float</span>&gt;</span></span></span><br><span class="line">grade2                  map&lt;<span class="built_in">string</span>,<span class="built_in">float</span>&gt;</span><br><span class="line">info                    struct&lt;name:<span class="built_in">string</span>, age:<span class="built_in">int</span>&gt;</span><br><span class="line">Time taken: <span class="number">0.077</span> seconds, Fetched: <span class="number">5</span> row(s)</span><br></pre></td></tr></table></figure><h3 id="æ—¶é—´ç±»å‹"><a href="#æ—¶é—´ç±»å‹" class="headerlink" title="æ—¶é—´ç±»å‹"></a>æ—¶é—´ç±»å‹</h3><ul><li>Dateï¼šä» Hive 0.12.0 å¼€å§‹æ”¯æŒ</li><li>Timestampï¼šä» Hive 0.8.0 å¼€å§‹æ”¯æŒ</li></ul><h2 id="Hive-æ–‡ä»¶æ ¼å¼"><a href="#Hive-æ–‡ä»¶æ ¼å¼" class="headerlink" title="Hive æ–‡ä»¶æ ¼å¼"></a>Hive æ–‡ä»¶æ ¼å¼</h2><p>Hive æ”¯æŒ4ç§æ–‡ä»¶æ ¼å¼</p><ol><li><code>TextFile</code> ï¼ˆé»˜è®¤æ ¼å¼ï¼‰ï¼šåŸºäºè¡Œåˆ—æ··åˆçš„æ€æƒ³</li><li><code>SequenceFile</code> ï¼šåŸºäºè¡Œå­˜å‚¨</li><li><code>RCFile</code> ï¼šåŸºäºè¡Œå­˜å‚¨</li><li>è‡ªå®šä¹‰</li></ol><p>åŸºäº HDFS çš„è¡Œå­˜å‚¨å…·å¤‡å¿«é€Ÿæ•°æ®åŠ è½½å’ŒåŠ¨æ€è´Ÿè½½çš„é«˜é€‚åº”èƒ½åŠ›ï¼Œå› ä¸ºè¡Œå­˜å‚¨ä¿è¯äº†ç›¸åŒè®°å½•çš„æ‰€æœ‰åŸŸéƒ½åœ¨åŒä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹ã€‚ä½†æ˜¯å®ƒä¸èƒ½æ»¡è¶³å¿«é€Ÿçš„æŸ¥è¯¢å“åº”æ—¶é—´çš„è¦æ±‚ï¼Œå› ä¸ºå½“æŸ¥è¯¢ä»…ä»…é’ˆå¯¹æ‰€æœ‰åˆ—ä¸­çš„å°‘æ•°å‡ åˆ—æ—¶ï¼Œä»–å°±ä¸èƒ½è·³è¿‡ä¸éœ€è¦çš„åˆ—ï¼Œç›´æ¥å®šä½åˆ°æ‰€éœ€çš„åˆ—ã€‚æ­¤å¤–ï¼Œè¡Œå­˜å‚¨ä¹Ÿä¸æ˜“è·å¾—ä¸€ä¸ªè¾ƒé«˜çš„å‹ç¼©æ¯”ã€‚</p><h3 id="TextFile"><a href="#TextFile" class="headerlink" title="TextFile"></a>TextFile</h3><p>TextFile æ˜¯é»˜è®¤æ ¼å¼ï¼Œæ•°æ®ä¸åšå‹ç¼©ï¼Œç£ç›˜å¼€é”€å¤§ï¼Œæ•°æ®è§£æå¼€é”€å¤§ã€‚å¯ç»“åˆ Gzipï¼ŒBzip2ä½¿ç”¨ã€‚ä½†ä½¿ç”¨è¿™æ–¹å¼ï¼ŒHive ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œä»è€Œæ— æ³•å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œæ“ä½œã€‚</p><h3 id="SequenceFile"><a href="#SequenceFile" class="headerlink" title="SequenceFile"></a>SequenceFile</h3><p>SequenceFile æ˜¯Hadoop API æä¾›çš„ä¸€ç§äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒï¼Œå…¶å…·æœ‰ä½¿ç”¨æ–¹ä¾¿ï¼Œå¯åˆ†å‰²ï¼Œå¯å‹ç¼©çš„ç‰¹ç‚¹ã€‚ SequenceFile æ”¯æŒä¸‰ç§å‹ç¼©é€‰æ‹©ï¼š<code>NONE</code>, <code>RECORD</code>, <code>BLOCK</code>ã€‚<code>RECORD</code> å‹ç¼©ç‡è¾ƒä½ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨ <code>BLOCK</code> å‹ç¼©ã€‚</p><h3 id="RCFile"><a href="#RCFile" class="headerlink" title="RCFile"></a>RCFile</h3><p>RCFile æ˜¯ Facebook å¼€å‘çš„ä¸€ä¸ªé›†è¡Œå­˜å‚¨å’Œåˆ—å­˜å‚¨çš„ä¼˜ç‚¹äºä¸€èº«ï¼Œå‹ç¼©æ¯”æ›´é«˜ï¼Œè¯»å–åˆ—æ›´å¿«ã€‚</p><p>RCFile å­˜å‚¨ç»“æ„éµå¾ªâ€œå…ˆæ°´å¹³åˆ’åˆ†ï¼Œå†å‚ç›´åˆ’åˆ†â€çš„è®¾è®¡ç†å¿µã€‚RCFileä¿è¯åŒä¸€è¡Œçš„æ•°æ®ä½äºåŒä¸€èŠ‚ç‚¹ï¼Œå› æ­¤å…ƒç»„é‡æ„çš„å¼€é”€å¾ˆä½ã€‚å…¶æ¬¡ï¼Œåƒåˆ—å­˜å‚¨ä¸€æ ·ï¼ŒRCFile èƒ½å¤Ÿåˆ©ç”¨åˆ—ç»´åº¦çš„æ•°æ®å‹ç¼©ï¼Œå¹¶ä¸”èƒ½è·³è¿‡ä¸å¿…è¦çš„åˆ—è¯»å–ã€‚</p><blockquote><p>åœ¨ RC File çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æ”¹è¿›ï¼Œå¼•å…¥äº† ORC ï¼ˆ<code>Optimized Record Columnar</code>ï¼‰ï¼ŒORC ä¸»è¦åœ¨å‹ç¼©ç¼–ç ã€æŸ¥è¯¢æ€§èƒ½ä¸Šè¿›è¡Œäº†å‡çº§ã€‚</p></blockquote><h3 id="è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼"><a href="#è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼" class="headerlink" title="è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼"></a>è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼</h3><p>å½“ç”¨æˆ·çš„æ•°æ®æ–‡ä»¶æ ¼å¼ä¸èƒ½è¢«å½“å‰Hiveè¯†åˆ«çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼ï¼Œé€šè¿‡å®ç° <code>InputFormat</code> å’Œ <code>OutputFormat</code> è‡ªå®šä¹‰è¾“å…¥/è¾“å‡ºæ ¼å¼ã€‚</p><h2 id="Hiveçš„æ•°æ®å­˜å‚¨"><a href="#Hiveçš„æ•°æ®å­˜å‚¨" class="headerlink" title="Hiveçš„æ•°æ®å­˜å‚¨"></a>Hiveçš„æ•°æ®å­˜å‚¨</h2><p>Hive çš„å­˜å‚¨æ˜¯å»ºç«‹åœ¨ Hadoop æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„ã€‚Hive æœ¬èº«æ²¡æœ‰ä¸“é—¨çš„æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œä¹Ÿä¸èƒ½ä¸ºæ•°æ®å»ºç«‹ç´¢å¼•ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥éå¸¸è‡ªç”±åœ°ç»„ç»‡ Hive ä¸­çš„è¡¨ï¼Œåªéœ€è¦åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å‘Šè¯‰ Hive æ•°æ®ä¸­çš„åˆ—åˆ†éš”ç¬¦å°±å¯ä»¥è§£ææ•°æ®äº†ã€‚</p><p>ä¾‹å¦‚ï¼Œæ‰“å¼€ <code>http://localhost:50070/</code>ï¼Œé€‰æ‹©é¡¶éƒ¨åˆ†ç±»æ ä¸­çš„ <code>Utilities -&gt; Browse the file system</code>ï¼Œå¯ä»¥æŸ¥çœ‹åˆ° Hive ä¸­åˆ›å»ºçš„æ•°æ®åº“è¡¨å¯¹åº”çš„æ–‡ä»¶ï¼ˆå­˜å‚¨åœ¨ <code>/user/hive/warehouse</code> è·¯å¾„ä¸‹ï¼‰ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hive-hdfs-1.png" alt=""></p><h3 id="Hiveçš„æ•°æ®æ¨¡å‹"><a href="#Hiveçš„æ•°æ®æ¨¡å‹" class="headerlink" title="Hiveçš„æ•°æ®æ¨¡å‹"></a>Hiveçš„æ•°æ®æ¨¡å‹</h3><p>Hive ä¸­ä¸»è¦åŒ…æ‹¬ 4 ç§æ•°æ®æ¨¡å‹</p><ol><li>è¡¨ï¼ˆTableï¼‰</li><li>å¤–éƒ¨è¡¨ï¼ˆExternal Tableï¼‰</li><li>åˆ†åŒºï¼ˆPartitionï¼‰</li><li>æ¡¶ï¼ˆBucketï¼‰</li></ol><p>Hive çš„è¡¨å’Œæ•°æ®åº“ä¸­çš„è¡¨åœ¨æ¦‚å¿µä¸Šæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œåœ¨ Hive ä¸­æ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å­˜å‚¨ç›®å½•ã€‚è€Œå¤–éƒ¨è¡¨æŒ‡å‘å·²ç»åœ¨ HDFS ä¸­å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåˆ†åŒºã€‚</p><p>Hive ä¸­çš„æ¯ä¸ªåˆ†åŒºéƒ½å¯¹åº”æ•°æ®åº“ä¸­ç›¸åº”åˆ†åŒºåˆ—çš„ä¸€ä¸ªç´¢å¼•ï¼Œä½†æ˜¯å…¶å¯¹åˆ†åŒºçš„ç»„ç»‡æ–¹å¼å’Œä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸åŒã€‚</p><p>æ¡¶åœ¨æŒ‡å®šåˆ—è¿›è¡Œ Hash è®¡ç®—æ—¶ï¼Œä¼šæ ¹æ®å“ˆå¸Œå€¼åˆ‡åˆ†æ•°æ®ï¼Œä½¿æ¯ä¸ªæ¡¶å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ã€‚</p><h4 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h4><p>è¡¨å¯ä»¥ç»†åˆ†ä¸º</p><ol><li>Table å†…éƒ¨è¡¨</li><li>Partition åˆ†åŒºè¡¨</li><li>External Table å¤–éƒ¨è¡¨</li><li>Bucket Table æ¡¶è¡¨</li></ol><h4 id="è§†å›¾-View"><a href="#è§†å›¾-View" class="headerlink" title="è§†å›¾ View"></a>è§†å›¾ View</h4><ul><li>è§†å›¾æ˜¯ä¸€ç§è™šè¡¨ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼ŒHive æš‚ä¸æ”¯æŒç‰©åŒ–è§†å›¾</li><li>è§†å›¾å¯ä»¥è·¨è¶Šå¤šå¼ è¡¨</li><li>è§†å›¾å»ºç«‹åœ¨å·²æœ‰è¡¨çš„åŸºç¡€ä¸Šï¼Œè§†å›¾èµ–ä»¥å»ºç«‹çš„è¿™äº›è¡¨ç§°ä¸ºåŸºè¡¨</li><li>è§†å›¾å¯ä»¥ç®€åŒ–å¤æ‚çš„æŸ¥è¯¢</li><li>è§†å›¾ VIEW æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒ <code>LOAD/INSERT/ALTER</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>ALTER VIEW</code> æ”¹å˜ VIEW å®šä¹‰</li><li>Hive æ”¯æŒè¿­ä»£è§†å›¾</li></ul><h2 id="Hive-æ•°æ®æ“ä½œ"><a href="#Hive-æ•°æ®æ“ä½œ" class="headerlink" title="Hive æ•°æ®æ“ä½œ"></a>Hive æ•°æ®æ“ä½œ</h2><blockquote><p>åœ¨æ‰§è¡Œæ“ä½œå‰ï¼Œè¯·ç¡®ä¿ <code>localhost:50070</code> é¡µé¢è®¿é—®åˆ°çš„ <code>Live Node</code> ä¸ªæ•°å¤§äº0ã€‚</p></blockquote><h3 id="å‘è¡¨ä¸­è£…è½½æ•°æ®"><a href="#å‘è¡¨ä¸­è£…è½½æ•°æ®" class="headerlink" title="å‘è¡¨ä¸­è£…è½½æ•°æ®"></a>å‘è¡¨ä¸­è£…è½½æ•°æ®</h3><ul><li><a href="https://blog.csdn.net/jclian91/article/details/78481673" target="_blank" rel="noopener">Hiveä¹‹å¯¼å…¥å¤–éƒ¨æ•°æ® | CSDN</a></li><li><a href="http://www.tracefact.net/tech/067.html" target="_blank" rel="noopener">Hive å†™å…¥æ•°æ®åˆ°Hiveè¡¨(å‘½ä»¤è¡Œ)</a></li></ul><h4 id="Demo-Insertæ’å…¥æ•°æ®"><a href="#Demo-Insertæ’å…¥æ•°æ®" class="headerlink" title="Demo-Insertæ’å…¥æ•°æ®"></a>Demo-Insertæ’å…¥æ•°æ®</h4><ol><li>åˆ›å»º <code>hiveDemo</code> æ•°æ®åº“å¹¶ä½¿ç”¨è¯¥æ•°æ®åº“</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> datbase <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> hiveDemo;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"><span class="keyword">use</span> hiveDemo;</span><br></pre></td></tr></table></figure><ol start="2"><li>å»ºè¡¨/æŸ¥çœ‹/åˆ é™¤ æ•°æ®è¡¨</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span>;</span><br><span class="line"></span><br><span class="line">hive&gt; show tables;</span><br><span class="line"></span><br><span class="line">hive&gt; drop table golds_log;</span><br><span class="line"></span><br><span class="line">hive&gt; desc golds_log;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ <code>Insert...Values</code> è¯­å¥å†™å…¥æ•°æ®</li></ol><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert into table golds_log values</span><br><span class="line">(<span class="number">3645356</span>,'wds<span class="number">765432</span>1(<span class="number">417175</span>2)','æ–°äººæ³¨å†Œå¥–åŠ±',<span class="number">1700</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">2016869</span>,'dqyx<span class="number">12345678</span>9(<span class="number">237669</span>9)','å‚åŠ ä¸€åœºæ¯”èµ›',<span class="number">1140</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">3630468</span>,'dke<span class="number">377661</span>1(<span class="number">415606</span>4)','å¤§è½¬ç›˜å¥–åŠ±',<span class="number">1200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">995267</span>,'a<span class="number">25441318</span>9(<span class="number">122941</span>7)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">795276</span>,'li<span class="number">876286</span>6(<span class="number">971402</span>)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">1200</span>,<span class="number">1526027152</span>);</span><br></pre></td></tr></table></figure><p>æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœè¾“å‡ºï¼Œè¯´æ˜åœ¨æ‰§è¡Œ <code>Insert...values</code> è¯­å¥æ—¶ï¼Œåº•å±‚æ˜¯åœ¨æ‰§è¡Œ MapReduce ä½œä¸šã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Query ID = lbs_20200422053833_55b98d5a-ba4c<span class="number">-470</span>d<span class="number">-909</span>a<span class="number">-098213</span>d1d937</span><br><span class="line">Total jobs = <span class="number">3</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> of <span class="number">3</span></span><br><span class="line">Number of reduce tasks determined at compile time: <span class="number">1</span></span><br><span class="line">In order to change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span><br><span class="line">In order to limit the maximum number of reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max=&lt;number&gt;</span><br><span class="line">In order to <span class="keyword">set</span> a constant number of reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces=&lt;number&gt;</span><br><span class="line">Starting Job = job_1587504428431_0001, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0001/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0001</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">14</span>,<span class="number">966</span> Stage<span class="number">-1</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">21</span>,<span class="number">154</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">27</span>,<span class="number">296</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">100</span>%</span><br><span class="line">Ended Job = job_1587504428431_0001</span><br><span class="line">Stage<span class="number">-4</span> <span class="keyword">is</span> selected by condition resolver.</span><br><span class="line">Stage<span class="number">-3</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Stage<span class="number">-5</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Moving data to directory hdfs:<span class="comment">//localhost:9000/user/hive/warehouse/hivedemo.db/golds_log/.hive-staging_hive_2020-04-22_05-38-33_916_330193107719508203-1/-ext-10000</span></span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   HDFS Read: <span class="number">20647</span> HDFS Write: <span class="number">764</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">54.82</span> seconds</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶åœ¨ <code>http://localhost:50070/</code> é¡µé¢æŸ¥çœ‹ <code>Utillities -&gt; Browser the file system</code>ï¼Œåœ¨ <code>/user/hive/warehouse/hivedemo.db/golds_log</code> è·¯å¾„ä¸‹å¯ä»¥çœ‹åˆ°ä¸€ä¸ª <code>000000_0</code> çš„æ–‡ä»¶ï¼Œä¸‹è½½åˆ°æœ¬åœ°ï¼ŒæŸ¥çœ‹å…¶å†…å®¹ä¸º</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-1.png" alt=""></p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">3645356 </span>wds7654321(<span class="number">4171752</span>) æ–°äººæ³¨å†Œå¥–åŠ± <span class="number">1700</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">2016869 </span>dqyx123456789(<span class="number">2376699</span>) å‚åŠ ä¸€åœºæ¯”èµ› <span class="number">1140</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">3630468 </span>dke3776611(<span class="number">4156064</span>) å¤§è½¬ç›˜å¥–åŠ± <span class="number">1200</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">995267 </span>a254413189(<span class="number">1229417</span>) å¦å¦æ‹¼åç¿»ç‰Œ <span class="number">200</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">795276 </span>li8762866(<span class="number">971402</span>) å¦å¦æ‹¼åç¿»ç‰Œ <span class="number">1200</span> <span class="number">1526027152</span></span><br></pre></td></tr></table></figure><blockquote><p><code>000000_0</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼ˆHiveä¸­é»˜è®¤çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼ï¼‰ï¼Œå¯ä»¥ç”¨ VSCode æ‰“å¼€ã€‚</p></blockquote><ol start="4"><li>ç»§ç»­æ‰§è¡Œ2æ¬¡ <code>Insert...values</code> å‘½ä»¤ï¼Œå†æ¬¡è®¿é—® <code>http://localhost:50070/explorer.html#/user/hive/warehouse/hivedemo.db/golds_log</code> é¡µé¢ï¼Œå¯ä»¥å‘ç°æœ‰3ä¸ªæ–‡ä»¶ï¼Œå³<strong>æ¯æ¬¡ä»»åŠ¡éƒ½ç”Ÿæˆäº†å•ç‹¬çš„æ•°æ®æ–‡ä»¶ã€‚</strong></li></ol><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-2.png" alt=""></p><p><strong>Hiveä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œ <code>Insert</code> è¯­å¥ï¼ˆåº•å±‚æ‰§è¡Œ MapReduce ä»»åŠ¡ï¼‰éƒ½ä¼šç”Ÿæˆç‹¬ç«‹çš„æ•°æ®æ–‡ä»¶ã€‚å¯¹äº HDFS æ¥è¯´ï¼Œä¼˜åŠ¿æ˜¯å­˜å‚¨å°‘é‡å¤§æ–‡ä»¶ï¼Œä¸æ˜¯å­˜å‚¨å¤§é‡å°æ–‡ä»¶ã€‚</strong></p><p>è€Œå¯¹äºæˆ‘ä»¬çš„åº”ç”¨è€Œè¨€ï¼Œæ¯ 10 åˆ†é’Ÿå°±ä¼šåŒæ­¥ä¸€æ¬¡æ•°æ®åˆ° Hive ä»“åº“ï¼Œå¦‚æ­¤ä¸€æ¥ä¼šç”Ÿæˆæ— æ•°çš„å°æ–‡ä»¶ï¼Œç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šå¦‚ä½•åˆå¹¶å°æ–‡ä»¶ï¼Ÿ</p><h4 id="Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶"><a href="#Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶" class="headerlink" title="Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶"></a>Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶</h4><p>åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šè¡¨å­˜å‚¨çš„æ–‡ä»¶ç±»å‹ï¼ˆ<code>file format</code>ï¼‰ï¼Œé»˜è®¤çš„æ–‡ä»¶ç±»å‹æ˜¯ <code>Textfile</code>ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä¸‹è½½ç”Ÿæˆçš„ <code>000000_0</code> æ–‡ä»¶åï¼Œä½¿ç”¨ç¼–è¾‘å™¨å¯ä»¥ç›´æ¥æŸ¥çœ‹å…¶å†…å®¹ã€‚</p><p>Hive æä¾›äº†ä¸€ä¸ª <code>ALTER TABLE table_name CONCATENATE</code> è¯­å¥ï¼Œç”¨äºåˆå¹¶å°æ–‡ä»¶ã€‚ä½†æ˜¯åªæ”¯æŒ <code>RCFILE</code> å’Œ <code>ORC</code>æ–‡ä»¶ç±»å‹ã€‚</p><p>å› æ­¤ï¼Œå¦‚æœæƒ³åˆå¹¶å°æ–‡ä»¶ï¼Œå¯ä»¥åˆ é™¤è¡¨ï¼Œç„¶åå†ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡å»º</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; drop <span class="keyword">table</span> golds_log;</span><br></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">STORED AS RCFile;</span><br></pre></td></tr></table></figure><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert into table golds_log values</span><br><span class="line">(<span class="number">3645356</span>,'wds<span class="number">765432</span>1(<span class="number">417175</span>2)','æ–°äººæ³¨å†Œå¥–åŠ±',<span class="number">1700</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">2016869</span>,'dqyx<span class="number">12345678</span>9(<span class="number">237669</span>9)','å‚åŠ ä¸€åœºæ¯”èµ›',<span class="number">1140</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">3630468</span>,'dke<span class="number">377661</span>1(<span class="number">415606</span>4)','å¤§è½¬ç›˜å¥–åŠ±',<span class="number">1200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">995267</span>,'a<span class="number">25441318</span>9(<span class="number">122941</span>7)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">795276</span>,'li<span class="number">876286</span>6(<span class="number">971402</span>)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">1200</span>,<span class="number">1526027152</span>);</span><br></pre></td></tr></table></figure><p>é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæ‰§è¡Œ 3 æ¬¡ <code>insert</code> è¯­å¥ï¼Œæ¯æ¬¡æ’å…¥ 5 æ¡æ•°æ®ã€‚åˆ·æ–° WebUIï¼Œä¼šçœ‹åˆ°å’Œå‰é¢ä¸€æ ·äº§ç”Ÿ 3 ä¸ªæ–‡ä»¶ã€‚</p><blockquote><p>Tip: å¦‚æœæ­¤æ—¶å†å°† <code>000000_0</code> æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€… VSCode æ‰“å¼€æŸ¥çœ‹ï¼Œå‘ç°å·²ç»æ˜¯ä¹±ç äº†ã€‚å› ä¸ºå®ƒå·²ç»ä¸å†æ˜¯æ–‡æœ¬æ–‡ä»¶äº†ã€‚</p></blockquote><p>æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œåˆå¹¶</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter <span class="keyword">table</span> golds_log <span class="comment">concatenate</span>;</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœå¦‚ä¸‹</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Starting Job = job_1587504428431_0006, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0006/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0006</span><br><span class="line">Hadoop job information <span class="keyword">for</span> <span class="literal">null</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">0</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">10</span>:<span class="number">40</span>,<span class="number">875</span> <span class="literal">null</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">10</span>:<span class="number">47</span>,<span class="number">012</span> <span class="literal">null</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line">Ended Job = job_1587504428431_0006</span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-<span class="literal">null</span>: Map: <span class="number">1</span>   HDFS Read: <span class="number">3137</span> HDFS Write: <span class="number">632</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">43.978</span> seconds</span><br></pre></td></tr></table></figure><p>åˆ·æ–°WebUIï¼Œä¼šå‘ç°æ–‡ä»¶å·²ç»åˆå¹¶äº†ï¼Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶å­˜åœ¨ã€‚</p><p>æœ€åï¼Œä½¿ç”¨ <code>SELECT</code> è¯­å¥æŸ¥çœ‹æ•°æ®è¡¨çš„å†…å®¹ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span>  golds_log;</span><br><span class="line"></span><br><span class="line">OK</span><br><span class="line"><span class="number">3645356</span>wds7654321(<span class="number">4171752</span>)æ–°äººæ³¨å†Œå¥–åŠ±<span class="number">1700</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>dqyx123456789(<span class="number">2376699</span>)å‚åŠ ä¸€åœºæ¯”èµ›<span class="number">1140</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>dke3776611(<span class="number">4156064</span>)å¤§è½¬ç›˜å¥–åŠ±<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>a254413189(<span class="number">1229417</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>li8762866(<span class="number">971402</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3645356</span>wds7654321(<span class="number">4171752</span>)æ–°äººæ³¨å†Œå¥–åŠ±<span class="number">1700</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>dqyx123456789(<span class="number">2376699</span>)å‚åŠ ä¸€åœºæ¯”èµ›<span class="number">1140</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>dke3776611(<span class="number">4156064</span>)å¤§è½¬ç›˜å¥–åŠ±<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>a254413189(<span class="number">1229417</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>li8762866(<span class="number">971402</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3645356</span>wds7654321(<span class="number">4171752</span>)æ–°äººæ³¨å†Œå¥–åŠ±<span class="number">1700</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>dqyx123456789(<span class="number">2376699</span>)å‚åŠ ä¸€åœºæ¯”èµ›<span class="number">1140</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>dke3776611(<span class="number">4156064</span>)å¤§è½¬ç›˜å¥–åŠ±<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>a254413189(<span class="number">1229417</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>li8762866(<span class="number">971402</span>)å¦å¦æ‹¼åç¿»ç‰Œ<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line">Time taken: <span class="number">0.133</span> seconds, Fetched: <span class="number">15</span> row(s)</span><br></pre></td></tr></table></figure><h4 id="Demo-Load-å¯¼å…¥å¤–éƒ¨æ•°æ®"><a href="#Demo-Load-å¯¼å…¥å¤–éƒ¨æ•°æ®" class="headerlink" title="Demo-Load å¯¼å…¥å¤–éƒ¨æ•°æ®"></a>Demo-Load å¯¼å…¥å¤–éƒ¨æ•°æ®</h4><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªå®ä¾‹ï¼Œå¦‚ä½•å°†æœ¬åœ°æ•°æ®æ–‡ä»¶ <code>test.txt</code> å¯¼å…¥åˆ° Hive æ•°æ®è¡¨ä¸­ã€‚</p><ol><li>æœ¬åœ°æ•°æ®æ–‡ä»¶ <code>test.txt</code> å†…å®¹å¦‚ä¸‹</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3645356</span>|wds7654321(<span class="number">4171752</span>)|æ–°äººæ³¨å†Œå¥–åŠ±|<span class="number">1700</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>|dqyx123456789(<span class="number">2376699</span>)|å‚åŠ ä¸€åœºæ¯”èµ›|<span class="number">1140</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>|dke3776611(<span class="number">4156064</span>)|å¤§è½¬ç›˜å¥–åŠ±|<span class="number">1200</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">3642022</span>|é»‘å¨ƒ<span class="number">123456</span>(<span class="number">4168266</span>)|æ–°äººæ³¨å†Œå¥–åŠ±|<span class="number">500</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>|dqyx123456789(<span class="number">2376699</span>)|å¤§è½¬ç›˜å¥–åŠ±|<span class="number">1500</span>|<span class="number">1526027152</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ›å»ºæ•°æ®è¡¨ï¼Œä¸æœ¬åœ° <code>test.txt</code> çš„æ•°æ®ç±»å‹ä¸€è‡´</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY <span class="character">'|'</span>;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æœ€é‡è¦çš„ä¸€å¥å°±æ˜¯ <code>ROW FORMAT DELIMITED FIELDS TERMINATED BY &#39;|&#39;</code>ï¼Œè¯´æ˜è¡¨çš„å­—æ®µç”±ç¬¦å· <code>&quot;|&quot;</code> è¿›è¡Œåˆ†éš”ã€‚</p><blockquote><p>Tip: <code>test.txt</code> ä¸­åŒ…å«æœ‰ä¸­æ–‡ï¼Œç¡®ä¿æ–‡ä»¶æ ¼å¼æ˜¯ <code>utf-8</code>ï¼ˆ<code>GB2312</code> å¯¼å…¥åä¼šæœ‰ä¹±ç ï¼‰</p></blockquote><ol start="3"><li>æŸ¥çœ‹æ•°æ®è¡¨çš„ç»“æ„</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">describe</span> golds_log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">describe</span> formatted student1;</span><br></pre></td></tr></table></figure><ol start="4"><li>æŸ¥çœ‹æ•°æ®è¡¨å†…å®¹ï¼ˆæ­¤æ—¶ä¸ºç©ºï¼‰</li></ol><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student1;</span><br></pre></td></tr></table></figure><ol start="5"><li>å¯¼å…¥æœ¬åœ°æ•°æ®</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">load</span> data <span class="keyword">local</span> inpath <span class="string">'/Users/lbs/Downloads/test.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> golds_log;</span><br><span class="line"></span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> hivedemo.golds_log</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.139</span> seconds</span><br></pre></td></tr></table></figure><p>ä½ ä¼šå‘ç°ä½¿ç”¨ <code>load</code> è¯­å¥å†™å…¥æ•°æ®æ¯” <code>insert</code> è¯­å¥è¦å¿«è®¸å¤šå€ï¼Œå› ä¸º HIVE å¹¶ä¸å¯¹ <code>scheme</code> è¿›è¡Œæ ¡éªŒï¼Œä»…ä»…æ˜¯å°†æ•°æ®æ–‡ä»¶æŒªåˆ° HDFS ç³»ç»Ÿä¸Šï¼Œä¹Ÿæ²¡æœ‰æ‰§è¡Œ MapReduce ä½œä¸šã€‚æ‰€ä»¥ä»å¯¼å…¥æ•°æ®çš„è§’åº¦è€Œè¨€ï¼Œä½¿ç”¨ load è¦ä¼˜äºä½¿ç”¨ insertâ€¦valuesã€‚</p><ol start="6"><li>å†æ¬¡æ•°æ®è¡¨å†…å®¹</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span> golds_log;</span><br><span class="line">OK</span><br><span class="line"><span class="number">3645356</span>wds7654321(<span class="number">4171752</span>)æ–°äººæ³¨å†Œå¥–åŠ±<span class="number">1700</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>dqyx123456789(<span class="number">2376699</span>)å‚åŠ ä¸€åœºæ¯”èµ›<span class="number">1140</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>dke3776611(<span class="number">4156064</span>)å¤§è½¬ç›˜å¥–åŠ±<span class="number">1200</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">3642022</span>é»‘å¨ƒ<span class="number">123456</span>(<span class="number">4168266</span>)æ–°äººæ³¨å†Œå¥–åŠ±<span class="number">500</span><span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>dqyx123456789(<span class="number">2376699</span>)å¤§è½¬ç›˜å¥–åŠ±<span class="number">1500</span><span class="number">1526027152</span></span><br><span class="line">Time taken: <span class="number">0.087</span> seconds, Fetched: <span class="number">5</span> row(s)</span><br></pre></td></tr></table></figure><ol start="7"><li>åå¤å¯¼å…¥ 3 æ¬¡åï¼Œæ‰“å¼€ Web UIï¼Œåˆ·æ–°åï¼Œå‘ç°å’Œä½¿ç”¨ Insert è¯­å¥æ—¶ä¸€æ ·ï¼Œæ¯æ¬¡ load è¯­å¥éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼ŒåŒæ ·å­˜åœ¨å°æ–‡ä»¶çš„é—®é¢˜ã€‚</li></ol><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-3.png" alt=""></p><p>å’Œå‰é¢çš„æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨çš„å­˜å‚¨ç±»å‹æ”¹ä¸º RCFileï¼Œç„¶åå†è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨ load è¯­å¥çš„æ—¶å€™ï¼Œè¦å¯¼å…¥çš„æ–‡ä»¶ç±»å‹æ˜¯ txtï¼Œå’Œè¡¨çš„å­˜å‚¨ç±»å‹ä¸ä¸€è‡´ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p><p>è¿™æ—¶å€™ï¼Œåªèƒ½æ›²çº¿æ•‘å›½äº†ï¼šå°†ä¸»è¡¨åˆ›å»ºä¸º RCFile ç±»å‹ï¼Œå†åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œç±»å‹æ˜¯ Textfileï¼Œç„¶å load æ—¶å¯¼å…¥åˆ°ä¸´æ—¶è¡¨ï¼Œç„¶åå†ä½¿ç”¨ä¸‹ä¸€èŠ‚è¦ä»‹ç»çš„ <code>Insert...select</code> è¯­å¥ï¼Œå°†æ•°æ®ä»ä¸´æ—¶è¡¨å¯¼å…¥åˆ°ä¸»è¡¨ã€‚</p><h4 id="Demo-ä½¿ç”¨-Insertâ€¦Select-è¯­å¥å†™å…¥æ•°æ®"><a href="#Demo-ä½¿ç”¨-Insertâ€¦Select-è¯­å¥å†™å…¥æ•°æ®" class="headerlink" title="Demo-ä½¿ç”¨ Insertâ€¦Select è¯­å¥å†™å…¥æ•°æ®"></a>Demo-ä½¿ç”¨ Insertâ€¦Select è¯­å¥å†™å…¥æ•°æ®</h4><ol><li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œä¸´æ—¶è¡¨çš„åç§°ä¸º <code>golds_log_tmp</code>ã€‚ä¸´æ—¶è¡¨åœ¨å½“å‰ä¼šè¯(<code>session</code>)ç»“æŸåä¼šè¢« HIVE è‡ªåŠ¨åˆ é™¤ï¼Œä¸´æ—¶è¡¨å¯ä»¥ä¿å­˜åœ¨SSDã€å†…å­˜æˆ–è€…æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create TEMPORARY Table golds<span class="constructor">_log_tmp(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">ROW FORMAT DELIMITED  FIELDS TERMINATED BY <span class="character">'|'</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥åˆ›å»ºä¸»è¡¨</li></ol><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; drop <span class="keyword">table</span> golds_log;</span><br></pre></td></tr></table></figure><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">STORED AS RCFile;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å°†æ•°æ®å¯¼å…¥åˆ°ä¸´æ—¶è¡¨</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">load</span> data <span class="keyword">local</span> inpath <span class="string">'/Users/lbs/Downloads/test.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> golds_log_tmp;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨insertâ€¦selectè¯­å¥å°†æ•°æ®ä»ä¸´æ—¶è¡¨è½¬ç§»åˆ°ä¸»è¡¨</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert <span class="built_in">int</span>o table golds_log select * <span class="keyword">from</span> golds_log_tmp;</span><br><span class="line"></span><br><span class="line">Query ID = lbs_20200422063734_475e168a<span class="number">-5016</span><span class="number">-4</span>ba7-a67f<span class="number">-9</span>c7f76373f98</span><br><span class="line">Total jobs = <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> of <span class="number">1</span></span><br><span class="line">Number of reduce tasks determined at compile time: <span class="number">1</span></span><br><span class="line">In order to change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span><br><span class="line">In order to limit the maximum number of reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max=&lt;number&gt;</span><br><span class="line">In order to <span class="keyword">set</span> a constant number of reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces=&lt;number&gt;</span><br><span class="line">Starting Job = job_1587504428431_0007, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0007/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0007</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">10</span>,<span class="number">330</span> Stage<span class="number">-1</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">16</span>,<span class="number">479</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">21</span>,<span class="number">572</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">100</span>%</span><br><span class="line">Ended Job = job_1587504428431_0007</span><br><span class="line">Stage<span class="number">-4</span> <span class="keyword">is</span> selected by condition resolver.</span><br><span class="line">Stage<span class="number">-3</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Stage<span class="number">-5</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Moving data to directory hdfs:<span class="comment">//localhost:9000/user/hive/warehouse/hivedemo.db/golds_log/.hive-staging_hive_2020-04-22_06-37-34_112_939503175258871139-1/-ext-10000</span></span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   HDFS Read: <span class="number">18494</span> HDFS Write: <span class="number">794</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">48.647</span> seconds</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>insert...select</code> è¯­å¥åº•å±‚ä¹Ÿä¼šæ‰§è¡Œä¸€ä¸ª MapReduce ä½œä¸šï¼Œé€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚</p><ol start="5"><li>åœ¨å¤šæ¬¡æ‰§è¡Œ <code>insert...select</code> åï¼Œ<code>golds_log</code> ä¸‹ä»ç„¶ä¼šç”Ÿæˆå¤šä¸ªå°æ–‡ä»¶ï¼Œæ­¤æ—¶ï¼Œåªè¦æ‰§è¡Œä¸€ä¸‹åˆå¹¶å°æ–‡ä»¶çš„è¯­å¥å°±å¯ä»¥äº†</li></ol><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter <span class="keyword">table</span> golds_log <span class="comment">concatenate</span>;</span><br></pre></td></tr></table></figure><h2 id="Hive-æ•°æ®æŸ¥è¯¢"><a href="#Hive-æ•°æ®æŸ¥è¯¢" class="headerlink" title="Hive æ•°æ®æŸ¥è¯¢"></a>Hive æ•°æ®æŸ¥è¯¢</h2><h3 id="è¡¨æ“ä½œ"><a href="#è¡¨æ“ä½œ" class="headerlink" title="è¡¨æ“ä½œ"></a>è¡¨æ“ä½œ</h3><p>Hiveçš„æ•°æ®è¡¨åˆ†ä¸º2ç§ï¼šå†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨</p><ol><li>å†…éƒ¨è¡¨ï¼šHiveåˆ›å»ºå¹¶é€šè¿‡ LOAD DATA INPATH è¿›æ•°æ®åº“çš„è¡¨ï¼Œè¿™ç§è¡¨å¯ä»¥ç†è§£ä¸ºæ•°æ®å’Œè¡¨ç»“æ„éƒ½ä¿å­˜åœ¨ä¸€èµ·çš„æ•°æ®è¡¨ã€‚å½“é€šè¿‡ <code>DROP TABLE table_name</code> åˆ é™¤å…ƒæ•°æ®ä¸­è¡¨ç»“æ„çš„åŒæ—¶ï¼Œè¡¨ä¸­çš„æ•°æ®ä¹ŸåŒæ ·ä¼šä» HDFS ä¸­è¢«åˆ é™¤ã€‚</li><li>å¤–éƒ¨è¡¨ï¼šåœ¨è¡¨ç»“æ„åˆ›å»ºä»¥å‰ï¼Œæ•°æ®å·²ç»ä¿å­˜åœ¨HDFSä¸­ï¼Œé€šè¿‡åˆ›å»ºè¡¨ç»“æ„ï¼Œå°†æ•°æ®æ ¼å¼åŒ–åˆ°è¡¨çš„ç»“æ„é‡Œã€‚å½“é€šè¿‡ <code>DROP TABLE table_name</code> æ“ä½œçš„æ—¶å€™ï¼ŒHive ä»…ä»…åˆ é™¤å…ƒæ•°æ®çš„è¡¨ç»“æ„ï¼Œè€Œä¸åˆ é™¤HDFSä¸Šçš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œç›¸æ¯”å†…éƒ¨è¡¨ï¼Œå¤–éƒ¨è¡¨å¯ä»¥æ›´æ”¾å¿ƒåœ°å¤§èƒ†ä½¿ç”¨ã€‚</li></ol><ul><li>åˆ›å»ºè¡¨æ—¶ï¼Œ<code>LIKE</code> å…è®¸ç”¨æˆ·å¤åˆ¶ç°æœ‰çš„è¡¨ç»“æ„ï¼Œä½†ä¸æ˜¯å¤åˆ¶æ•°æ®</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LIKE</span> existing_table_name</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»ºè¡¨æ—¶ï¼Œä½¿ç”¨ <code>EXTERNAL</code> å£°æ˜å¤–éƒ¨è¡¨</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> tablename <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tablename</span><br></pre></td></tr></table></figure><ul><li>æ•°æ®è¡¨åœ¨åˆ é™¤æ—¶å€™ï¼Œå†…éƒ¨è¡¨ä¼šè¿æ•°æ®ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–éƒ¨è¡¨åªåˆ é™¤è¡¨ç»“æ„ï¼Œæ•°æ®è¿˜æ˜¯ä¿ç•™çš„ã€‚</li></ul><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="built_in">table_name</span></span><br></pre></td></tr></table></figure><ul><li>åœ¨è¡¨æŸ¥è¯¢æ—¶å€™ï¼Œä½¿ç”¨ <code>ALL</code> å’Œ <code>DISTINCT</code> é€‰é¡¹åŒºåˆ†å¯¹é‡å¤è®°å½•çš„å¤„ç†ã€‚é»˜è®¤æ˜¯ <code>ALL</code>,è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼Œ<code>DISTINCT</code> è¡¨ç¤ºå»æ‰é‡å¤çš„è®°å½•ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ALL</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br></pre></td></tr></table></figure><ul><li>Hive ä¸æ”¯æŒ <code>HAVING</code> å­å¥ï¼Œå¯ä»¥å°† HAVING å­å¥è½¬åŒ–ä¸ºä¸€ä¸ªå­æŸ¥è¯¢ã€‚</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//Hive ä¸æ”¯æŒ HAVING å­å¥</span><br><span class="line"><span class="keyword">SELECT</span>  col1 <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> col1 <span class="keyword">HAVING</span> <span class="keyword">SUM</span>(col2) &gt; <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å¯ä»¥æ”¹ä¸ºä¸‹è¿°å­æŸ¥è¯¢æ ¼å¼  Hiveæ”¯æŒä¸‹è¿°å‘½å</span><br><span class="line"><span class="keyword">SELECT</span>  col1 <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> col1, <span class="keyword">SUM</span>(col2) <span class="keyword">AS</span> col2 <span class="keyword">sum</span> <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">GROUP</span> BU col1) table2 <span class="keyword">WHERE</span> table2.col2sum &gt; <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h3 id="è§†å›¾æ“ä½œ"><a href="#è§†å›¾æ“ä½œ" class="headerlink" title="è§†å›¾æ“ä½œ"></a>è§†å›¾æ“ä½œ</h3><p>è§†å›¾ VIEW æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒ <code>LOAD/INSERT/ALTER</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>ALTER VIEW</code> æ”¹å˜ VIEW å®šä¹‰</p><p>ä¸‹é¢ä»‹ç»ä¸‹è§†å›¾VIEWå¸¸è§çš„æ“ä½œè¯­å¥</p><ul><li>åˆ›å»º VIEW </li></ul><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] view_name</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤ VIEW </li></ul><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] view_name</span><br></pre></td></tr></table></figure><h3 id="ç´¢å¼•æ“ä½œ"><a href="#ç´¢å¼•æ“ä½œ" class="headerlink" title="ç´¢å¼•æ“ä½œ"></a>ç´¢å¼•æ“ä½œ</h3><p>ç´¢å¼•æ˜¯æ ‡å‡†çš„æ•°æ®åº“æŠ€æœ¯ã€‚Hive 0.7 ç‰ˆæœ¬ä¹‹åæ”¯æŒç´¢å¼•ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;æœ¬æ–‡ä¸ºHiveå…¥é—¨ç¯‡ï¼Œä¸»è¦è®°å½•Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨å’Œè¡¨æ“ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Hadoop" scheme="https://lbs0912.github.io/categories/Hadoop/"/>
    
    
      <category term="BigData" scheme="https://lbs0912.github.io/tags/BigData/"/>
    
      <category term="Hadoop" scheme="https://lbs0912.github.io/tags/Hadoop/"/>
    
      <category term="Hive" scheme="https://lbs0912.github.io/tags/Hive/"/>
    
  </entry>
  
  <entry>
    <title>Hadoopå…¥é—¨ç¯‡â€”â€”ä¼ªåˆ†å¸ƒæ¨¡å¼å®‰è£… &amp; WordCountè¯é¢‘ç»Ÿè®¡</title>
    <link href="https://lbs0912.github.io/2020/04/21/hadoop-basic-1/"/>
    <id>https://lbs0912.github.io/2020/04/21/hadoop-basic-1/</id>
    <published>2020-04-21T06:35:26.000Z</published>
    <updated>2020-04-21T17:13:23.954Z</updated>
    
    <content type="html"><![CDATA[<ul><li>æœ¬æ–‡ä¸»è¦è®°å½•Macä¸‹å¦‚ä½•è¿›è¡ŒHadoopä¼ªåˆ†å¸ƒæ¨¡å¼å®‰è£…ï¼Œå¹¶é€šè¿‡è¯é¢‘ç»Ÿè®¡Demoç¨‹åº(WordCount)ç†è§£MapReduceçš„åŸç†ã€‚</li></ul><a id="more"></a><h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul><li>2020/03/23ï¼Œæ’°å†™</li><li>2020/03/28ï¼Œæ·»åŠ ã€ŠHadoop æƒå¨æŒ‡å—ã€‹é˜…è¯»ç¬”è®°</li><li>2020/03/29ï¼Œæ·»åŠ ã€ŠHadoop åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹é˜…è¯»ç¬”è®°</li><li>2020/04/21ï¼Œæ·»åŠ  Hadoop ä¼ªåˆ†å¸ƒå¼é…ç½®</li></ul><h2 id="å­¦ä¹ èµ„æ–™æ±‡æ€»"><a href="#å­¦ä¹ èµ„æ–™æ±‡æ€»" class="headerlink" title="å­¦ä¹ èµ„æ–™æ±‡æ€»"></a>å­¦ä¹ èµ„æ–™æ±‡æ€»</h2><ul><li><a href="https://hadoop.apache.org/" target="_blank" rel="noopener">Hadoopå®˜ç½‘</a></li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ul><li><a href="https://www.zhihu.com/question/19795366" target="_blank" rel="noopener">é›¶åŸºç¡€å­¦ä¹  Hadoop è¯¥å¦‚ä½•ä¸‹æ‰‹ï¼Ÿ | çŸ¥ä¹</a></li><li><a href="http://blog.fens.me/hadoop-family-roadmap/" target="_blank" rel="noopener">Hadoopå®¶æ—å­¦ä¹ è·¯çº¿å›¾ | Blog</a></li><li><a href="https://fuhailin.github.io/Hadoop-on-MacOS/" target="_blank" rel="noopener">åœ¨Macä¸Šé…ç½®Hadoopå¨±ä¹ç¯å¢ƒ | Blog</a></li></ul><h3 id="ã€ŠHadoopæƒå¨æŒ‡å—ã€‹éšä¹¦èµ„æ–™"><a href="#ã€ŠHadoopæƒå¨æŒ‡å—ã€‹éšä¹¦èµ„æ–™" class="headerlink" title="ã€ŠHadoopæƒå¨æŒ‡å—ã€‹éšä¹¦èµ„æ–™"></a>ã€ŠHadoopæƒå¨æŒ‡å—ã€‹éšä¹¦èµ„æ–™</h3><ul><li>éšä¹¦æºç ï¼š<a href="http://www.hadoopbook.com/code.html" target="_blank" rel="noopener">Source Code</a></li><li>éšä¹¦æ•°æ®é›†ï¼š<a href="http://www.hadoopbook.com/code.html" target="_blank" rel="noopener">Full Dataset</a></li></ul><h2 id="HadoopåŸºç¡€"><a href="#HadoopåŸºç¡€" class="headerlink" title="HadoopåŸºç¡€"></a>HadoopåŸºç¡€</h2><h3 id="Hadoopå’ŒSpark"><a href="#Hadoopå’ŒSpark" class="headerlink" title="Hadoopå’ŒSpark"></a>Hadoopå’ŒSpark</h3><p>Hadoopå’ŒSparkæ˜¯ä¸¤ç§ä¸åŒçš„å¤§æ•°æ®å¤„ç†æ¡†æ¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/bigdata-basic-0.png" alt=""></p><ul><li>ä¸Šå›¾ä¸­çš„è“è‰²éƒ¨åˆ†æ˜¯Hadoopç”Ÿæ€ç³»ç»Ÿç»„ä»¶ï¼Œé»„è‰²éƒ¨åˆ†æ˜¯Sparkç”Ÿæ€ç»„ä»¶ã€‚</li><li>è™½ç„¶å®ƒä»¬æ˜¯ä¸¤ç§ä¸åŒçš„å¤§æ•°æ®å¤„ç†æ¡†æ¶ï¼Œä½†å®ƒä»¬ä¸æ˜¯äº’æ–¥çš„ã€‚Sparkä¸Hadoop ä¸­çš„ MapReduce æ˜¯ä¸€ç§ç›¸äº’å…±ç”Ÿçš„å…³ç³»ã€‚</li><li>Hadoop æä¾›äº† Spark è®¸å¤šæ²¡æœ‰çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œ Spark æä¾›äº†å®æ—¶å†…å­˜è®¡ç®—ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚</li></ul><p>Hadoop é€šå¸¸åŒ…æ‹¬2ä¸ªéƒ¨åˆ†ï¼šå­˜å‚¨å’Œå¤„ç†ã€‚å­˜å‚¨éƒ¨åˆ†å°±æ˜¯Hadoopçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆHDFSï¼‰ï¼Œå¤„ç†æŒ‡çš„æ˜¯MapReduceï¼ˆMPï¼‰ã€‚</p><h3 id="Hadoop-å®‰è£…å’Œé…ç½®"><a href="#Hadoop-å®‰è£…å’Œé…ç½®" class="headerlink" title="Hadoop å®‰è£…å’Œé…ç½®"></a>Hadoop å®‰è£…å’Œé…ç½®</h3><ul><li>ref-1ï¼š<a href="https://fuhailin.github.io/Hadoop-on-MacOS/" target="_blank" rel="noopener">åœ¨Macä¸Šé…ç½®Hadoopå¨±ä¹ç¯å¢ƒ | Blog</a></li><li>ref-2ï¼š<a href="https://zhuanlan.zhihu.com/p/33117305" target="_blank" rel="noopener">Mac OS X ä¸Šæ­å»º Hadoop å¼€å‘ç¯å¢ƒæŒ‡å— | çŸ¥ä¹</a></li><li>ref-3: <a href="https://segmentfault.com/a/1190000009103629" target="_blank" rel="noopener">Macç¯å¢ƒä¸‹Hadoopçš„å®‰è£…ä¸é…ç½® | Segmentfault</a></li></ul><h4 id="Hadoop-å®‰è£…æ¨¡å¼"><a href="#Hadoop-å®‰è£…æ¨¡å¼" class="headerlink" title="Hadoop å®‰è£…æ¨¡å¼"></a>Hadoop å®‰è£…æ¨¡å¼</h4><p>Hadoop å®‰è£…æ¨¡å¼åˆ†ä¸º3ç§ï¼Œåˆ†åˆ«æ˜¯å•æœºæ¨¡å¼ï¼Œä¼ªåˆ†å¸ƒæ¨¡å¼å’Œå…¨åˆ†å¸ƒæ¨¡å¼ã€‚é»˜è®¤å®‰è£…æ˜¯å•æœºæ¨¡å¼ã€‚å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ <code>core-site.xml</code>ï¼Œå°†é»˜è®¤çš„å•æœºæ¨¡å¼æ›´æ”¹ä¸ºä¼ªåˆ†å¸ƒæ¨¡å¼ã€‚</p><blockquote><p>å…³äºHadoop 3ç§å®‰è£…æ¨¡å¼å’Œå¦‚ä½•ä½¿ç”¨è™šæ‹Ÿæœºè¿›è¡Œåˆ†å¸ƒå¼å®‰è£…ï¼Œå¯ä»¥å‚è€ƒã€ŠHadoopåº”ç”¨æŠ€æœ¯è¯¦è§£ã€‹ä¹¦ç±çš„ç¬¬2ç« èŠ‚â€”â€”Hadoopå®‰è£…ã€‚</p></blockquote><blockquote><p>Hadoop çš„è¿è¡Œæ–¹å¼æ˜¯ç”±é…ç½®æ–‡ä»¶å†³å®šçš„ï¼Œå› æ­¤å¦‚æœéœ€è¦ä»ä¼ªåˆ†å¸ƒå¼æ¨¡å¼åˆ‡æ¢å›éåˆ†å¸ƒå¼æ¨¡å¼ï¼Œéœ€è¦åˆ é™¤ <code>core-site.xml</code> ä¸­çš„é…ç½®é¡¹ã€‚</p></blockquote><p>ä¸‹é¢ç®€å•è®°å½•ï¼Œå¦‚ä½•é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œåœ¨ Mac ä¸Šæ­å»ºä¼ªåˆ†å¸ƒæ¨¡å¼ Hadoop ç¯å¢ƒã€‚</p><h4 id="Hadoop-å®‰è£…æ­¥éª¤"><a href="#Hadoop-å®‰è£…æ­¥éª¤" class="headerlink" title="Hadoop å®‰è£…æ­¥éª¤"></a>Hadoop å®‰è£…æ­¥éª¤</h4><p>Hadoopçš„å®‰è£…å’Œé…ç½®æ­¥éª¤å¦‚ä¸‹ï¼ˆå…·ä½“ç»†èŠ‚å‚è€ƒä¸Šè¿°å‚è€ƒé“¾æ¥ï¼‰</p><ol><li>å®‰è£…Javaã€‚</li><li>Macè®¾ç½®ä¸­ï¼Œè¿›å…¥â€œå…±äº«â€è®¾ç½®é¡µé¢ï¼Œå…è®¸è¿œç¨‹ç™»å½•ï¼Œä½¿ç”¨ <code>ssh localhost</code> è¿›è¡ŒéªŒè¯ã€‚</li><li>ä¸‹è½½Hadoopæºç ï¼Œåœ¨ <a href="https://hadoop.apache.org/" target="_blank" rel="noopener">Hadoopå®˜ç½‘</a> å¯ä¸‹è½½ï¼Œæ­¤å¤„é€‰æ‹©ä¸‹è½½ <code>hadoop 2.10.0</code>ã€‚å°†ä¸‹è½½çš„ <code>.tar.gz</code> å‹ç¼©åŒ…è§£å‹å¹¶æ”¾ç½®åˆ° <code>/Library/hadoop-2.10.0</code> è·¯å¾„ã€‚</li><li>è®¾ç½®Hadoopç¯å¢ƒå˜é‡</li></ol><p>(1) æ‰“å¼€é…ç½®æ–‡ä»¶</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~<span class="string">/.bash_profile</span></span><br></pre></td></tr></table></figure><p>(2) è®¾ç½®ç¯å¢ƒå˜é‡</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HADOOP_HOME</span>=/Library/hadoop-2.10.0</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$&#123;HADOOP_HOME&#125;/bin</span><br><span class="line"></span><br><span class="line"><span class="attribute">HADOOP_CONF_DIR</span>=/Library/hadoop-2.10.0/etc/hadoop</span><br><span class="line"></span><br><span class="line"><span class="attribute">HADOOP_COMMON_LIB_NATIVE_DIR</span>=/Library/hadoop-2.10.0/lib/native</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> HADOOP_HOME</span><br><span class="line"><span class="builtin-name">export</span> PATH</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> HADOOP_CONF_DIR</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> HADOOP_COMMON_LIB_NATIVE_DIR</span><br></pre></td></tr></table></figure><p>(3) ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œå¹¶éªŒè¯Hadoopç‰ˆæœ¬å·</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">source ~<span class="string">/.bash_profile</span></span><br><span class="line"></span><br><span class="line">hadoop <span class="keyword">version</span></span><br></pre></td></tr></table></figure><ol start="5"><li>ä¿®æ”¹ Hadoop çš„é…ç½®æ–‡ä»¶</li></ol><p>éœ€è¦ä¿®æ”¹çš„ Hadoop é…ç½®æ–‡ä»¶éƒ½åœ¨ç›®å½• <code>etc/hadoop</code> ä¸‹ï¼ŒåŒ…æ‹¬</p><ul><li><code>hadoop-env.sh</code></li><li><code>core-site.xml</code></li><li><code>hdfs-site.xml</code></li><li><code>mapred-site.xml</code></li><li><code>yarn-site.xml</code></li></ul><p>ä¸‹é¢é€æ­¥è¿›è¡Œä¿®æ”¹</p><p>(1) ä¿®æ”¹ <code>hadoop-env.sh</code> æ–‡ä»¶</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_HOME</span>=/Library/hadoop-2.10.0</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">HADOOP_CONF_DIR</span>=/Library/hadoop-2.10.0/etc/hadoop</span><br></pre></td></tr></table></figure><p>(2) ä¿®æ”¹ <code>core-site.xml</code> æ–‡ä»¶</p><p>è®¾ç½® Hadoop çš„ä¸´æ—¶ç›®å½•å’Œæ–‡ä»¶ç³»ç»Ÿï¼Œ<code>localhost:9000</code> è¡¨ç¤ºæœ¬åœ°ä¸»æœºã€‚å¦‚æœä½¿ç”¨è¿œç¨‹ä¸»æœºï¼Œè¦ç”¨ç›¸åº”çš„ IP åœ°å€æ¥ä»£æ›¿ï¼Œå¡«å†™è¿œç¨‹ä¸»æœºçš„åŸŸåï¼Œåˆ™éœ€è¦åˆ° <code>/etc/hosts</code> æ–‡ä»¶ä¸­åš DNS æ˜ å°„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--localhost:9000 è¡¨ç¤ºæœ¬åœ°ä¸»æœº--&gt;</span>&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--ç”¨æ¥æŒ‡å®šhadoopè¿è¡Œæ—¶äº§ç”Ÿæ–‡ä»¶çš„å­˜æ”¾ç›®å½•  è‡ªå·±åˆ›å»º--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/Users/lbs/devfiles/hadoop/hadoop-2.10.0/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Directories for software develop and save temporary files.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(3) ä¿®æ”¹ <code>hdfs-site.xml</code> æ–‡ä»¶</p><p><code>hdfs-site.xml</code> æŒ‡å®šäº† HDFS çš„é»˜è®¤å‚æ•°å‰¯æœ¬æ•°ï¼Œå› ä¸ºä»…è¿è¡Œåœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ˆä¼ªåˆ†å¸ƒæ¨¡å¼ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œçš„å‰¯æœ¬æ•°ä¸º1ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ä¸æ˜¯rootç”¨æˆ·ä¹Ÿå¯ä»¥å†™æ–‡ä»¶åˆ°hdfs--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span>    <span class="comment">&lt;!--å…³é—­é˜²ç«å¢™--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">&lt;!--æŠŠè·¯å¾„æ¢æˆæœ¬åœ°çš„nameä½ç½®--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/Users/lbs/devfiles/hadoop/hadoop-2.10.0/tmp/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">  <span class="comment">&lt;!--åœ¨æœ¬åœ°æ–°å»ºä¸€ä¸ªå­˜æ”¾hadoopæ•°æ®çš„æ–‡ä»¶å¤¹ï¼Œç„¶åå°†è·¯å¾„åœ¨è¿™é‡Œé…ç½®ä¸€ä¸‹--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/Users/lbs/devfiles/hadoop/hadoop-2.10.0/tmp/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(4) ä¿®æ”¹ <code>mapred-site.xml</code> æ–‡ä»¶</p><p>å¤åˆ¶ <code>mapred-site.xml.template</code> æ¨¡æ¿æ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹ä¸º <code>mapred-site.xml</code> æ–‡ä»¶ï¼Œç„¶åå°† <code>yarn</code> è®¾ç½®æˆæ•°æ®å¤„ç†æ¡†æ¶ï¼Œå¹¶è®¾ç½® JobTracker çš„ä¸»æœºåä¸ç«¯å£ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æŒ‡å®šmapreduceè¿è¡Œåœ¨yarnä¸Š--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>(5) ä¿®æ”¹ <code>yarn-site.xml</code> æ–‡ä»¶</p><p>é…ç½®æ•°æ®çš„å¤„ç†æ¡†æ¶ <code>yarn</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>localhost:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å¯åŠ¨Hadoop"><a href="#å¯åŠ¨Hadoop" class="headerlink" title="å¯åŠ¨Hadoop"></a>å¯åŠ¨Hadoop</h4><p>(1) ç¬¬ä¸€æ¬¡å¯åŠ¨Hadoopï¼Œéœ€è¦å¯¹ NameNode è¿›è¡Œæ ¼å¼åŒ–ï¼Œåç»­å¯åŠ¨ä¸å†éœ€è¦æ‰§è¡Œæ­¤æ­¥éª¤ã€‚</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop namenode -<span class="built_in">format</span></span><br></pre></td></tr></table></figure><p>(2) å¯åŠ¨ HDFSï¼šè¿›å…¥Hadoop å®‰è£…ç›®å½•ä¸‹çš„ <code>sbin</code> ç›®å½•ï¼Œå¹¶å¯åŠ¨HDFSï¼ˆéœ€è¦è®¾ç½®Macå…è®¸è¿œç¨‹ç™»å½•ï¼Œè¿‡ç¨‹ä¸­å…±éœ€è¦3æ¬¡è¾“å…¥å¯†ç ï¼‰</p><blockquote><p>Tip: åˆæ¬¡å®‰è£…å’Œå¯åŠ¨æ—¶ï¼Œå¯ä»¥æ‰§è¡Œ <code>./start-all.sh</code>ï¼Œè¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–å®‰è£…</p></blockquote><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/Library/hadoop-2.10.0/sbin</span></span><br><span class="line"></span><br><span class="line"><span class="string">./start-dfs.sh</span></span><br></pre></td></tr></table></figure><p>è‹¥å‡ºç°ä¸‹è¿°ä¿¡æ¯ï¼Œè¡¨ç¤ºå¯åŠ¨æˆåŠŸ</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lbsMacBook-Pro:sbin lbs$ ./start-dfs.sh</span><br><span class="line">Starting namenodes on [localhost]</span><br><span class="line">Password:</span><br><span class="line">localhost: namenode running as process 12993. Stop it first.</span><br><span class="line">Password:</span><br><span class="line">localhost: datanode running as process 32400. Stop it first.</span><br><span class="line">Starting secondary namenodes [0.0.0.0]</span><br><span class="line">Password:</span><br><span class="line">0.0.0.0:<span class="built_in"> Connection </span>closed by 127.0.0.1<span class="built_in"> port </span>22</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨<code>log</code>ä¸­ä¼šæ˜¾ç¤ºè­¦å‘Š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARN util.NativeCodeLoader: Unable to <span class="keyword">load</span> <span class="keyword">native</span>-hadoop <span class="keyword">library</span> <span class="keyword">for</span> your platform... <span class="keyword">using</span> builtin-<span class="keyword">java</span> classes <span class="keyword">where</span> applicabledçš„</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æé†’æ˜¯å…³äº Hadoop æœ¬åœ°åº“çš„â€”â€”Hadoopæœ¬åœ°åº“æ˜¯ä¸ºäº†æé«˜æ•ˆç‡æˆ–è€…æŸäº›ä¸èƒ½ç”¨Javaå®ç°çš„åŠŸèƒ½ç»„ä»¶åº“ã€‚å¯ä»¥å‚è€ƒ <a href="http://rockyfeng.me/hadoop_native_library_mac.html" target="_blank" rel="noopener">Mac OSX ä¸‹ Hadoop ä½¿ç”¨æœ¬åœ°åº“æé«˜æ•ˆç‡</a> äº†è§£è¯¦æƒ…ã€‚</p><p>åœæ­¢ Hadoop æ–¹æ³•å¦‚ä¸‹</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/Library/hadoop-2.10.0/sbin</span></span><br><span class="line"></span><br><span class="line"><span class="string">./sbin/stop-dfs.sh</span></span><br></pre></td></tr></table></figure><p>(3) åœ¨ç»ˆç«¯æ‰§è¡Œ <code>jps</code>ï¼Œè‹¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼Œè¯æ˜ Hadoop å¯ä»¥æˆåŠŸå¯åŠ¨ã€‚<strong>çœ‹åˆ° <code>DataNode</code>ï¼Œ<code>NameNode</code> å’Œ <code>SecondaryNameNode</code> ä¿¡æ¯ï¼Œè¡¨æ˜å¯åŠ¨çš„æ˜¯ä¸€ä¸ªä¼ªåˆ†å¸ƒæ¨¡å¼Hadoopã€‚</strong></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lbsMacBook-Pro:sbin lbs$ jps</span><br><span class="line"></span><br><span class="line"><span class="number">32400</span> DataNode</span><br><span class="line"><span class="number">12993</span> NameNode</span><br><span class="line"><span class="number">30065</span> BootLanguagServerBootApp</span><br><span class="line"><span class="number">13266</span> SecondaryNameNode</span><br><span class="line"><span class="number">30039</span> org.eclipse.equinox.launcher_1<span class="number">.5</span><span class="number">.700</span>.v20200207<span class="number">-2156.</span>jar</span><br><span class="line"><span class="number">35019</span> ResourceManager</span><br><span class="line"><span class="number">35117</span> NodeManager</span><br><span class="line"><span class="number">32926</span> RunJar</span><br><span class="line"><span class="number">35199</span> Jps</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥è®¿é—® <code>http://localhost:50070/dfshealth.html#tab-overview</code> æ¥æŸ¥çœ‹ Hadoopçš„å¯åŠ¨æƒ…å†µã€‚<strong>çœ‹åˆ° <code>Live Node</code> å‚æ•°ï¼Œè¯æ˜ä¼ªåˆ†å¸ƒæ¨¡å¼ Hadoop å¯åŠ¨æˆåŠŸã€‚</strong></p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-jps-live-node-1.png" alt=""></p><p>(4) å¯åŠ¨ yarnï¼šè¿›å…¥Hadoop å®‰è£…ç›®å½•ä¸‹çš„ <code>sbin</code> ç›®å½•ï¼Œå¹¶å¯åŠ¨ yarn</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/Library/hadoop-2.10.0/sbin</span></span><br><span class="line"></span><br><span class="line"><span class="string">./start-yarn.sh</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒHadoopçš„å®‰è£…ï¼Œé…ç½®å’Œå¯åŠ¨å°±å®Œæˆå•¦ï¼æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡ä¸€äº› shell å‘½ä»¤æ¥æ“ä½œ Hadoop ä¸‹çš„æ–‡ä»¶äº†ï¼Œä¾‹å¦‚</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hadoop <span class="built_in">fs</span> -ls /ã€€ã€€ã€€ã€€ã€€ã€€ã€€ æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„æ–‡ä»¶åŠæ–‡ä»¶å¤¹</span><br><span class="line">hadoop <span class="built_in">fs</span> -<span class="built_in">mkdir</span> /test      åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ testdata</span><br><span class="line">hadoop <span class="built_in">fs</span> -rm /.../...      ç§»é™¤æŸä¸ªæ–‡ä»¶</span><br><span class="line">hadoop <span class="built_in">fs</span> -rmr /...         ç§»é™¤æŸä¸ªç©ºçš„æ–‡ä»¶å¤¹</span><br></pre></td></tr></table></figure><h4 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h4><h5 id="Unable-to-load-native-hadoop-library-for-your-platform"><a href="#Unable-to-load-native-hadoop-library-for-your-platform" class="headerlink" title="Unable to load native-hadoop library for your platform"></a>Unable to load native-hadoop library for your platform</h5><p>åœ¨å¯åŠ¨ HDFSæ—¶ï¼Œè‹¥çœ‹åˆ°å¦‚ä¸‹è­¦å‘Š</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./<span class="literal">start</span>-dfs.sh</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">lbsMacBook-Pro:~ lbs$ cd /Library/hadoop-2.10.0/sbin</span><br><span class="line"></span><br><span class="line">lbsMacBook-Pro:sbin lbs$ ./<span class="keyword">start</span>-dfs.sh</span><br><span class="line"></span><br><span class="line"><span class="number">20</span>/<span class="number">03</span>/<span class="number">23</span> <span class="number">08</span>:<span class="number">46</span>:<span class="number">43</span> WARN util.NativeCodeLoader: Unable <span class="keyword">to</span> <span class="keyword">load</span> <span class="keyword">native</span>-hadoop <span class="keyword">library</span> <span class="keyword">for</span> your platform... <span class="keyword">using</span> builtin-<span class="keyword">java</span> classes <span class="keyword">where</span> applicable</span><br><span class="line"><span class="keyword">Starting</span> namenodes <span class="keyword">on</span> [localhost]</span><br><span class="line"><span class="keyword">Password</span>:</span><br><span class="line">localhost: namenode running <span class="keyword">as</span> process <span class="number">93155.</span> <span class="keyword">Stop</span> it first.</span><br><span class="line"><span class="keyword">Password</span>:</span><br><span class="line">localhost: datanode running <span class="keyword">as</span> process <span class="number">93262.</span> <span class="keyword">Stop</span> it first.</span><br><span class="line"><span class="keyword">Starting</span> secondary namenodes [<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>]</span><br><span class="line"><span class="keyword">Password</span>:</span><br><span class="line"><span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>: secondarynamenode running <span class="keyword">as</span> process <span class="number">93404.</span> <span class="keyword">Stop</span> it first.</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æé†’æ˜¯å…³äº Hadoop æœ¬åœ°åº“çš„â€”â€”Hadoopæœ¬åœ°åº“æ˜¯ä¸ºäº†æé«˜æ•ˆç‡æˆ–è€…æŸäº›ä¸èƒ½ç”¨Javaå®ç°çš„åŠŸèƒ½ç»„ä»¶åº“ã€‚å¯ä»¥å‚è€ƒ <a href="http://rockyfeng.me/hadoop_native_library_mac.html" target="_blank" rel="noopener">Mac OSX ä¸‹ Hadoop ä½¿ç”¨æœ¬åœ°åº“æé«˜æ•ˆç‡</a> äº†è§£è¯¦æƒ…ã€‚</p><h2 id="ã€ŠHadoop-åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹-å­¦ä¹ ç¬”è®°"><a href="#ã€ŠHadoop-åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹-å­¦ä¹ ç¬”è®°" class="headerlink" title="ã€ŠHadoop åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹ å­¦ä¹ ç¬”è®°"></a>ã€ŠHadoop åº”ç”¨å¼€å‘æŠ€æœ¯è¯¦è§£ã€‹ å­¦ä¹ ç¬”è®°</h2><h3 id="MapReduceå¿«é€Ÿå…¥é—¨-WordCount"><a href="#MapReduceå¿«é€Ÿå…¥é—¨-WordCount" class="headerlink" title="MapReduceå¿«é€Ÿå…¥é—¨-WordCount"></a>MapReduceå¿«é€Ÿå…¥é—¨-WordCount</h3><ul><li><a href="https://www.jianshu.com/p/35ef70dfb651" target="_blank" rel="noopener">Intellij å¼€å‘Hadoopç¯å¢ƒæ­å»º - WordCount | ç®€ä¹¦</a></li><li><a href="https://www.cnblogs.com/airnew/p/9540982.html" target="_blank" rel="noopener">ä½¿ç”¨IDEAç¼–å†™ç¬¬ä¸€ä¸ªMapReduceç¨‹åº</a></li><li><a href="https://www.polarxiong.com/archives/Hadoop-Intellij%E7%BB%93%E5%90%88Maven%E6%9C%AC%E5%9C%B0%E8%BF%90%E8%A1%8C%E5%92%8C%E8%B0%83%E8%AF%95MapReduce%E7%A8%8B%E5%BA%8F-%E6%97%A0%E9%9C%80%E6%90%AD%E8%BD%BDHadoop%E5%92%8CHDFS%E7%8E%AF%E5%A2%83.html" target="_blank" rel="noopener">Intellijç»“åˆMavenæœ¬åœ°è¿è¡Œå’Œè°ƒè¯•MapReduceç¨‹åº</a></li><li><a href="https://zhuanlan.zhihu.com/p/43042078" target="_blank" rel="noopener">ä¸€èµ·å­¦Hadoopâ€”â€”ç¬¬ä¸€ä¸ªMapReduceç¨‹åº</a></li></ul><h4 id="å·¥ç¨‹åˆ›å»º"><a href="#å·¥ç¨‹åˆ›å»º" class="headerlink" title="å·¥ç¨‹åˆ›å»º"></a>å·¥ç¨‹åˆ›å»º</h4><ol><li>ä½¿ç”¨IDEAåˆ›å»ºä¸€ä¸ªåŸºäºMavençš„å·¥ç¨‹â€”â€”WordCount</li><li>åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.lbs0912<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>wordcount<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  apache é•œåƒæº--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>apache<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ å¦‚ä¸‹ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.hadoop<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hadoop-common<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ›å»º <code>WordMapper</code> ç±»</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">package wordcount;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.StringTokenizer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.IntWritable;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.Text;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> WordMapper extends Mapper&lt;<span class="keyword">Object</span>, <span class="type">Text</span>, <span class="type">Text</span>, IntWritable&gt; &#123;</span><br><span class="line">    IntWritable one = <span class="built_in">new</span> IntWritable(<span class="number">1</span>);</span><br><span class="line">    <span class="type">Text</span> word = <span class="built_in">new</span> Text();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">public</span> <span class="type">void</span> map(<span class="keyword">Object</span> key, <span class="type">Text</span> <span class="keyword">value</span>, Context context) throws IOException, InterruptedException &#123;</span><br><span class="line">        StringTokenizer itr = <span class="built_in">new</span> StringTokenizer(<span class="keyword">value</span>.toString());</span><br><span class="line">        <span class="keyword">while</span> (itr.hasMoreTokens()) &#123;</span><br><span class="line">            word.<span class="keyword">set</span>(itr.nextToken());</span><br><span class="line">            context.<span class="keyword">write</span>(word, one);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>åˆ›å»º <code>WordReducer</code> ç±»</li></ol><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> wordcount;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="type">IOException</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.<span class="type">IntWritable</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.io.<span class="type">Text</span>;</span><br><span class="line"><span class="keyword">import</span> org.apache.hadoop.mapreduce.<span class="type">Reducer</span>;</span><br><span class="line"></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">WordReducer</span> <span class="keyword">extends</span> <span class="title">Reducer&lt;Text</span>, <span class="title">IntWritable</span>, <span class="title">Text</span>, <span class="title">IntWritable&gt;</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">IntWritable</span> result = <span class="keyword">new</span> <span class="type">IntWritable</span>();</span><br><span class="line"></span><br><span class="line">    public void reduce(<span class="type">Text</span>key, <span class="type">Iterable</span>&lt;<span class="type">IntWritable</span>&gt; values, <span class="type">Context</span> context) <span class="keyword">throws</span> <span class="type">IOException</span>,<span class="type">InterruptedException</span> &#123;</span><br><span class="line">        int sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">IntWritable</span> <span class="keyword">val</span>:values) &#123;</span><br><span class="line">            sum += <span class="keyword">val</span>.get();</span><br><span class="line">        &#125;</span><br><span class="line">        result.set(sum);</span><br><span class="line">        context.write(key,result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ›å»º <code>WordMain</code> é©±åŠ¨ç±»</li></ol><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">package wordcount;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import org.apache.hadoop.conf.Configuration;</span><br><span class="line">import org.apache.hadoop.fs.Path;</span><br><span class="line">import org.apache.hadoop.io.IntWritable;</span><br><span class="line">import org.apache.hadoop.io.Text;</span><br><span class="line">import org.apache.hadoop.mapreduce.Job;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;</span><br><span class="line">import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;</span><br><span class="line">import org.apache.hadoop.util.GenericOptionsParser;</span><br><span class="line"></span><br><span class="line">public <span class="keyword">class</span> WordMain &#123;</span><br><span class="line">    public static void main(String<span class="literal">[]</span> args) throws Exception &#123;</span><br><span class="line">        Configuration conf = <span class="keyword">new</span> <span class="constructor">Configuration()</span>;</span><br><span class="line">        String<span class="literal">[]</span> otherArgs = <span class="keyword">new</span> <span class="constructor">GenericOptionsParser(<span class="params">conf</span>, <span class="params">args</span>)</span>.get<span class="constructor">RemainingArgs()</span>;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * è¿™é‡Œå¿…é¡»æœ‰è¾“å…¥/è¾“å‡º</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> (otherArgs.length != <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>err.println(<span class="string">"Usage: WordCount &lt;in&gt; &lt;out&gt;"</span>);</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>exit(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Job job = <span class="keyword">new</span> <span class="constructor">Job(<span class="params">conf</span>, <span class="string">"wordcount"</span>)</span>;</span><br><span class="line">        job.set<span class="constructor">JarByClass(WordMain.<span class="params">class</span>)</span>;       <span class="comment">//ä¸»ç±»</span></span><br><span class="line">        job.set<span class="constructor">MapperClass(WordMapper.<span class="params">class</span>)</span>;     <span class="comment">//Mapper</span></span><br><span class="line">        job.set<span class="constructor">CombinerClass(WordReducer.<span class="params">class</span>)</span>;  <span class="comment">//ä½œä¸šåˆæˆç±»</span></span><br><span class="line">        job.set<span class="constructor">ReducerClass(WordReducer.<span class="params">class</span>)</span>;    <span class="comment">//Reducer</span></span><br><span class="line">        job.set<span class="constructor">OutputKeyClass(Text.<span class="params">class</span>)</span>;       <span class="comment">//è®¾ç½®ä½œä¸šè¾“å‡ºæ•°æ®çš„å…³é”®ç±»</span></span><br><span class="line">        job.set<span class="constructor">OutputValueClass(IntWritable.<span class="params">class</span>)</span>;  <span class="comment">//è®¾ç½®ä½œä¸šè¾“å‡ºå€¼ç±»</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">FileInputFormat</span>.</span></span>add<span class="constructor">InputPath(<span class="params">job</span>, <span class="params">new</span> Path(<span class="params">otherArgs</span>[0])</span>);   <span class="comment">//æ–‡ä»¶è¾“å…¥</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">FileOutputFormat</span>.</span></span>set<span class="constructor">OutputPath(<span class="params">job</span>, <span class="params">new</span> Path(<span class="params">otherArgs</span>[1])</span>);  <span class="comment">//æ–‡ä»¶è¾“å‡º</span></span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>exit(job.wait<span class="constructor">ForCompletion(<span class="params">true</span>)</span> ? <span class="number">0</span> : <span class="number">1</span>);   <span class="comment">//ç­‰å¾…å®Œæˆé€€å‡º</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="IDEAä¸­ç›´æ¥è¿è¡Œç¨‹åº"><a href="#IDEAä¸­ç›´æ¥è¿è¡Œç¨‹åº" class="headerlink" title="IDEAä¸­ç›´æ¥è¿è¡Œç¨‹åº"></a>IDEAä¸­ç›´æ¥è¿è¡Œç¨‹åº</h4><ul><li><a href="https://www.jianshu.com/p/35ef70dfb651" target="_blank" rel="noopener">Intellij å¼€å‘Hadoopç¯å¢ƒæ­å»º - WordCount | ç®€ä¹¦</a></li></ul><p>é€‰æ‹© <code>Run -&gt; Edit Configurations</code>, åœ¨ç¨‹åºå‚æ•°æ ç›®ä¸­è¾“å…¥ <code>input/ output</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-wordcount-2.png" alt=""></p><p>åœ¨ <code>input</code> ç›®å½•ä¸­æ·»åŠ ç»Ÿè®¡å•è¯ä¸ªæ•°çš„æµ‹è¯•çš„æ–‡ä»¶ <code>wordcount1.txt</code></p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Helloï¼Œi love coding</span><br><span class="line">are you ok?</span><br><span class="line">Hello, i love hadoop</span><br><span class="line">are you ok?</span><br></pre></td></tr></table></figure><p>å†æ¬¡è¿è¡Œç¨‹åºï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹çš„ <code>output</code> ç›®å½•ç»“æ„</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- input</span><br><span class="line">- output</span><br><span class="line">    <span class="string">| - ._SUCCESS.crc</span></span><br><span class="line">    <span class="string">| - .part-r-00000.crc</span></span><br><span class="line">    <span class="string">| - ._SUCCESS</span></span><br><span class="line">    <span class="string">| - part-r-00000</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <code>part-r-00000</code> æ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°å•è¯å‡ºç°æ¬¡æ•°çš„ç»Ÿè®¡ç»“æœ</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Hello,<span class="number">1</span></span><br><span class="line">Helloï¼Œi<span class="number">1</span></span><br><span class="line">are<span class="number">2</span></span><br><span class="line">coding<span class="number">1</span></span><br><span class="line">hadoop<span class="number">1</span></span><br><span class="line">i<span class="number">1</span></span><br><span class="line">love<span class="number">2</span></span><br><span class="line">ok?<span class="number">2</span></span><br><span class="line">you<span class="number">2</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºHadoopçš„è®¾å®šï¼Œä¸‹æ¬¡è¿è¡Œç¨‹åºå‰ï¼Œéœ€è¦å…ˆåˆ é™¤outputæ–‡ä»¶ç›®å½•ã€‚</p><h4 id="å¯¼å‡ºjaråŒ…è¿è¡Œç¨‹åº"><a href="#å¯¼å‡ºjaråŒ…è¿è¡Œç¨‹åº" class="headerlink" title="å¯¼å‡ºjaråŒ…è¿è¡Œç¨‹åº"></a>å¯¼å‡ºjaråŒ…è¿è¡Œç¨‹åº</h4><ol><li>åœ¨ <code>File -&gt; Project Structure</code> é€‰é¡¹ä¸­ï¼Œä¸ºå·¥ç¨‹æ·»åŠ  <code>Artifacts</code>ï¼Œé€‰æ‹© <code>WordMain</code> ç±»</li></ol><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-wordcount-0.png" alt=""></p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-wordcount-1.png" alt=""></p><ol start="2"><li>é€‰æ‹© <code>Build -&gt; Build Artifacts...</code>ï¼Œç”Ÿæˆ <code>.jar</code> æ–‡ä»¶</li></ol><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-wordcount-3.png" alt=""></p><ol start="3"><li>è¿›å…¥HDFSç³»ç»Ÿç›®å½•(ä¸æ˜¯å…¶ä½™æ–‡ä»¶ç³»ç»Ÿç›®å½•)ï¼Œæ‰§è¡Œä¸‹è¿°å‘½ä»¤</li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hadoop jar WordCount.jar <span class="keyword">input</span>/ <span class="keyword">out</span>/</span><br></pre></td></tr></table></figure><h3 id="HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿè¯¦è§£"><a href="#HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿè¯¦è§£" class="headerlink" title="HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿè¯¦è§£"></a>HDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿè¯¦è§£</h3><h4 id="è®¤è¯†HDFS"><a href="#è®¤è¯†HDFS" class="headerlink" title="è®¤è¯†HDFS"></a>è®¤è¯†HDFS</h4><p>HDFSï¼ˆ<code>Hadoop Distributed File System</code>ï¼‰æ˜¯ä¸€ä¸ªç”¨åœ¨æ™®é€šç¡¬ä»¶è®¾å¤‡ä¸Šçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ HDFS å…·æœ‰é«˜å®¹é”™æ€§ï¼ˆ<code>fault-tolerant</code>ï¼‰å’Œé«˜ååé‡ï¼ˆ<code>high throughput</code>ï¼‰ï¼Œé€‚åˆæœ‰è¶…å¤§æ•°æ®é›†çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥å®ç°é€šè¿‡æµçš„å½¢å¼è®¿é—®æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ•°æ®ã€‚</p><p>è¿è¡Œåœ¨HDFSä¹‹ä¸Šçš„åº”ç”¨ç¨‹åºå¿…é¡»æµå¼åœ°è®¿é—®å®ƒä»¬çš„æ•°æ®é›†ï¼Œå®ƒä¸æ˜¯å…¸å‹çš„è¿è¡Œåœ¨å¸¸è§„çš„æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„å¸¸è§„ç¨‹åºã€‚HDFSçš„è®¾è®¡é€‚åˆæ‰¹é‡å¤„ç†ï¼Œè€Œä¸æ˜¯ç”¨æˆ·äº¤äº’å¼çš„ï¼Œé‡ç‚¹æ˜¯æ•°æ®ååé‡ï¼Œè€Œä¸æ˜¯æ•°æ®è®¿é—®çš„ååº”æ—¶é—´ã€‚</p><p>HDFSä»¥å—åºåˆ—çš„å½¢å¼å­˜å‚¨æ¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶ä¸­é™¤äº†æœ€åä¸€ä¸ªå—çš„å…¶ä»–å—éƒ½æ˜¯ç›¸åŒçš„å¤§å°ã€‚</p><h4 id="HDFSæ¶æ„"><a href="#HDFSæ¶æ„" class="headerlink" title="HDFSæ¶æ„"></a>HDFSæ¶æ„</h4><p>HDFS ä¸ºHadoop è¿™ä¸ªåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶ä¸€å…±é«˜æ€§èƒ½ï¼Œé«˜å¯é ï¼Œé«˜å¯æ‰©å±•çš„å­˜å‚¨æœåŠ¡ã€‚HDFSæ˜¯ä¸€ä¸ªå…¸å‹çš„ä¸»ä»æ¶æ„ï¼Œä¸€ä¸ªHDFSé›†ç¾¤æ˜¯ç”±ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆ<code>Namenode</code>ï¼‰å’Œä¸€å®šæ•°ç›®çš„ä»èŠ‚ç‚¹ï¼ˆ<code>Datanodes</code>ï¼‰ç»„æˆã€‚</p><ul><li>Namenode æ˜¯ä¸€ä¸ªä¸­å¿ƒæœåŠ¡å™¨ï¼Œè´Ÿè´£ç®¡ç†æ–‡ä»¶ç³»ç»Ÿçš„åå­—ç©ºé—´ï¼ˆ<code>namespace</code>ï¼‰ä»¥åŠå®¢æˆ·ç«¯å¯¹æ–‡ä»¶çš„è®¿é—®ã€‚åŒæ—¶ç¡®å®šå—å’Œæ•°æ®èŠ‚ç‚¹çš„æ˜ å°„ã€‚<ul><li>æä¾›åç§°æŸ¥è¯¢æœåŠ¡ï¼Œå®ƒæ˜¯ä¸€ä¸ª Jetty æœåŠ¡å™¨</li><li>ä¿å­˜ <code>metadata</code> ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶ <code>owership</code> å’Œ <code>permissions</code>ï¼Œæ–‡ä»¶åŒ…å«æœ‰å“ªäº›å—ï¼Œ<code>Block</code> ä¿å­˜åœ¨å“ªä¸ª <code>DataNode</code> ç­‰</li><li>NameNode çš„ <code>metadata</code> ä¿¡æ¯åœ¨å¯åŠ¨åä¼šåŠ è½½åˆ°å†…å­˜ä¸­</li></ul></li><li>Datanodeä¸€èˆ¬æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸€ä¸ªï¼Œè´Ÿè´£ç®¡ç†å®ƒæ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„å­˜å‚¨ã€‚<strong>DataNode é€šå¸¸ä»¥æœºæ¶çš„å½¢å¼ç»„ç»‡ï¼Œæœºæ¶é€šè¿‡ä¸€ä¸ªäº¤æ¢æœºå°†æ‰€æœ‰ç³»ç»Ÿè¿æ¥èµ·æ¥ã€‚</strong> DataNodeçš„åŠŸèƒ½åŒ…æ‹¬<ul><li>ä¿å­˜Blockï¼Œæ¯ä¸ªå—å¯¹åº”ä¸€ä¸ªå…ƒæ•°æ®ä¿¡æ¯æ–‡ä»¶</li><li>å¯åŠ¨DataNodeçº¿ç¨‹çš„æ—¶å€™ä¼šå‘NameNodeæ±‡æŠ¥Blockä¿¡æ¯</li><li>é€šè¿‡å‘NameNodeå‘é€å¿ƒè·³ä¿æŒä¸å…¶è”ç³»ï¼ˆ3ç§’ä¸€æ¬¡ï¼‰</li></ul></li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hdfs-architecture-1.png" alt=""></p><ul><li>æœºæ¶ï¼ˆ<code>Rack</code>ï¼‰ï¼šä¸€ä¸ª Block çš„ä¸‰ä¸ªå‰¯æœ¬é€šå¸¸ä¼šä¿å­˜åˆ°ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„æœºæ¶ä¸­ï¼Œè¿›è¡Œé˜²ç¾å®¹é”™</li><li>æ•°æ®å—ï¼ˆ<code>Block</code>ï¼‰æ˜¯ HDFS æ–‡ä»¶ç³»ç»ŸåŸºæœ¬çš„å­˜å‚¨å•ä½ï¼ŒHadoop 1.X é»˜è®¤å¤§å°æ˜¯ 64MBï¼ŒHadoop 2.X é»˜è®¤å¤§å°æ˜¯ 128MBã€‚HDFSä¸Šçš„æ–‡ä»¶ç³»ç»Ÿè¢«åˆ’åˆ†ä¸ºå—å¤§å°çš„å¤šä¸ªåˆ†å—ï¼ˆ<code>Chunk</code>ï¼‰ä½œä¸ºç‹¬ç«‹çš„å­˜å‚¨å•å…ƒã€‚å’Œå…¶ä»–æ–‡ä»¶ç³»ç»Ÿä¸åŒçš„æ˜¯ï¼ŒHDFSä¸Šå°äºä¸€ä¸ªå—å¤§å°çš„æ–‡ä»¶ä¸ä¼šå æ®æ•´ä¸ªå—çš„ç©ºé—´ã€‚ä½¿ç”¨å—æŠ½è±¡è€Œéæ•´ä¸ªæ–‡ä»¶ä½œä¸ºå­˜å‚¨å•å…ƒï¼Œå¤§å¤§ç®€åŒ–äº†å­˜å‚¨å­ç³»ç»Ÿçš„è®¾è®¡ã€‚</li><li>è¾…åŠ©å…ƒæ•°æ®èŠ‚ç‚¹ï¼ˆ<code>SecondaryNameNode</code>ï¼‰è´Ÿè´£é•œåƒå¤‡ä»½ï¼Œæ—¥å¿—å’Œé•œåƒçš„å®šæœŸåˆå¹¶ã€‚</li></ul><blockquote><p>ä½¿ç”¨ <code>hadoop fsk / -files -blocks</code> å¯ä»¥æ˜¾ç¤ºå—çš„ä¿¡æ¯ã€‚</p></blockquote><p>Block æ•°æ®å—å¤§å°è®¾ç½®çš„è€ƒè™‘å› ç´ åŒ…æ‹¬</p><ol><li>å‡å°‘æ–‡ä»¶å¯»å€æ—¶é—´</li><li>å‡å°‘ç®¡ç†å¿«çš„æ•°æ®å¼€é”€ï¼Œå› æ¯ä¸ªå¿«éƒ½éœ€è¦åœ¨ NameNode ä¸Šæœ‰å¯¹åº”çš„è®°å½•</li><li>å¯¹æ•°æ®å—è¿›è¡Œè¯»å†™ï¼Œå‡å°‘å»ºç«‹ç½‘ç»œçš„è¿æ¥æˆæœ¬</li></ol><h4 id="å—å¤‡ä»½åŸç†"><a href="#å—å¤‡ä»½åŸç†" class="headerlink" title="å—å¤‡ä»½åŸç†"></a>å—å¤‡ä»½åŸç†</h4><p>Block æ˜¯ HDFS æ–‡ä»¶ç³»ç»Ÿçš„æœ€å°ç»„æˆå•å…ƒï¼Œå®ƒé€šè¿‡ä¸€ä¸ª <code>Long</code> æ•´æ•°è¢«å”¯ä¸€æ ‡è¯†ã€‚æ¯ä¸ª Block ä¼šæœ‰å¤šä¸ªå‰¯æœ¬ï¼Œé»˜è®¤æœ‰3ä¸ªå‰¯æœ¬ã€‚ä¸ºäº†æ•°æ®çš„å®‰å…¨å’Œé«˜æ•ˆï¼ŒHadoop é»˜è®¤å¯¹3ä¸ªå‰¯æœ¬çš„å­˜æ”¾ç­–ç•¥å¦‚ä¸‹å›¾æ‰€ç¤º</p><ul><li>ç¬¬1å—ï¼šåœ¨æœ¬åœ°æœºå™¨çš„HDFSç›®å½•ä¸‹å­˜å‚¨ä¸€ä¸ª Block</li><li>ç¬¬2å—ï¼šä¸åŒ Rack çš„æŸä¸ª DataNode ä¸Šå­˜å‚¨ä¸€ä¸ª Block</li><li>ç¬¬3å—ï¼šåœ¨è¯¥æœºå™¨çš„åŒä¸€ä¸ª Rack ä¸‹çš„æŸå°æœºå™¨ä¸Šå­˜å‚¨ä¸€ä¸ªBlock</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hdfs-architecture-block-1.png" alt=""></p><p>è¿™æ ·çš„ç­–ç•¥å¯ä»¥ä¿è¯å¯¹è¯¥ Block æ‰€å±æ–‡ä»¶çš„è®¿é—®èƒ½å¤Ÿä¼˜å…ˆåœ¨æœ¬ Rack ä¸‹æ‰¾åˆ°ã€‚å¦‚æœæ•´ä¸ª Rack å‘ç”Ÿäº†å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥åœ¨å¦å¤–çš„ Rack æ‰¾åˆ°è¯¥ Block çš„å‰¯æœ¬ã€‚è¿™æ ·è¶³å¤Ÿé«˜æ•ˆï¼Œå¹¶ä¸”åŒæ—¶åšåˆ°äº†æ•°æ®çš„å®¹é”™ã€‚</p><h4 id="Hadoopçš„RPCæœºåˆ¶"><a href="#Hadoopçš„RPCæœºåˆ¶" class="headerlink" title="Hadoopçš„RPCæœºåˆ¶"></a>Hadoopçš„RPCæœºåˆ¶</h4><p>RPCï¼ˆ<code>Remote Procedure Call</code>ï¼‰å³è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœºåˆ¶ä¼šé¢ä¸´2ä¸ªé—®é¢˜</p><ol><li>å¯¹è±¡è°ƒç”¨æ–¹å¼</li><li>åºåˆ—/ååºåˆ—åŒ–æœºåˆ¶</li></ol><p>RPC æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚Hadoop è‡ªå·±å®ç°äº†ç®€å•çš„ RPC ç»„ä»¶ï¼Œä¾èµ–äº <code>Hadoop Writable</code> ç±»å‹çš„æ”¯æŒã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hdfs-architecture-rpc-1.png" alt=""></p><p><code>Hadoop Writable</code> æ¥å£è¦æ±‚æ¯ä¸ªå®ç°ç±»å¤šè¦ç¡®ä¿å°†æœ¬ç±»çš„å¯¹è±¡æ­£ç¡®åºåˆ—åŒ–ï¼ˆ<code>writeObject</code>ï¼‰å’Œååºåˆ—åŒ–ï¼ˆ<code>readObject</code>ï¼‰ã€‚å› æ­¤ï¼ŒHadoop RPC ä½¿ç”¨ Java åŠ¨æ€ä»£ç†å’Œåå°„å®ç°å¯¹è±¡è°ƒç”¨æ–¹å¼ï¼Œå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨æ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ç”± Hadoopæ¡†æ¶æˆ–ç”¨æˆ·è‡ªå·±æ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ç»„è£…å®šåˆ¶çš„ã€‚</p><blockquote><p>Hadoop RPC = åŠ¨æ€ä»£ç† + å®šåˆ¶çš„äºŒè¿›åˆ¶æµ</p></blockquote><h3 id="å¼€æºæ•°æ®åº“HBase"><a href="#å¼€æºæ•°æ®åº“HBase" class="headerlink" title="å¼€æºæ•°æ®åº“HBase"></a>å¼€æºæ•°æ®åº“HBase</h3><h4 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h4><ul><li>HBase æ˜¯ä¸€ä¸ªå¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼çš„ï¼Œé¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ï¼Œæ˜¯ä¸€ä¸ªé€‚åˆäºéç»“æ„åŒ–æ•°æ®å­˜å‚¨çš„æ•°æ®åº“ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHBase æ˜¯åŸºäºåˆ—çš„è€Œä¸æ˜¯åŸºäºè¡Œçš„æ¨¡å¼ã€‚</li><li>åˆ©ç”¨ HBase æŠ€æœ¯å¯ä»¥åœ¨å»‰ä»· PC Serverä¸Šæ­å»ºå¤§è§„æ¨¡ç»“æ„åŒ–å­˜å‚¨é›†ç¾¤ã€‚</li><li>HBase æ˜¯ Google Bigtable çš„å¼€æºå®ç°ï¼Œä¸ Google Bigtable åˆ©ç”¨GFSä½œä¸ºå…¶æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿç±»ä¼¼ï¼Œ HBase åˆ©ç”¨ Hadoop HDFS ä½œä¸ºå…¶æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿã€‚Google è¿è¡Œ MapReduce æ¥å¤„ç† Bigtable ä¸­çš„æµ·é‡æ•°æ®ï¼ŒHBase åŒæ ·åˆ©ç”¨ Hadoop MapReduce æ¥å¤„ç†æµ·é‡æ•°æ®ã€‚Google Bigtable åˆ©ç”¨ Chubby ä½œä¸ºååŒæœåŠ¡ï¼ŒHBase åˆ©ç”¨ Zookeeper ä½œä¸ºå¯¹åº”ã€‚</li></ul><p>HBase çš„ç‰¹ç‚¹å¦‚ä¸‹</p><ol><li>å¤§ï¼šä¸€ä¸ªè¡¨å¯ä»¥æœ‰ä¸Šäº¿è¡Œï¼Œä¸Šç™¾ä¸‡åˆ—</li><li>é¢å‘åˆ—ï¼šé¢å‘åˆ—ï¼ˆæ—ï¼‰çš„å­˜å‚¨å’Œæƒé™æ§åˆ¶ï¼Œåˆ—ï¼ˆæ—ï¼‰ç‹¬ç«‹æ£€ç´¢</li><li>ç¨€ç–ï¼šå¯¹äºä¸ºç©ºï¼ˆNULLï¼‰çš„åˆ—ï¼Œå¹¶ä¸å ç”¨å­˜å‚¨ç©ºé—´ï¼Œå› æ­¤ï¼Œè¡¨å¯ä»¥è®¾è®¡çš„éå¸¸ç¨€ç–ã€‚</li><li></li></ol><h2 id="Hadoop-å®æˆ˜Demo"><a href="#Hadoop-å®æˆ˜Demo" class="headerlink" title="Hadoop å®æˆ˜Demo"></a>Hadoop å®æˆ˜Demo</h2><blockquote><p>æœ‰å¥è¯è¯´å¾—å¥½ï¼Œâ€œå¤§æ•°æ®èƒœäºç®—æ³•â€ï¼Œæ„æ€æ˜¯è¯´å¯¹äºæŸäº›åº”ç”¨ï¼ˆä¾‹å¦‚æ ¹æ®ä»¥å¾€çš„åå¥½æ¥æ¨èç”µå½±å’ŒéŸ³ä¹ï¼‰ï¼Œä¸è®ºç®—æ³•æœ‰å¤šç‰›ï¼ŒåŸºäºå°æ•°æ®çš„æ¨èæ•ˆæœå¾€å¾€éƒ½ä¸å¦‚åŸºäºå¤§é‡å¯ç”¨æ•°æ®çš„ä¸€èˆ¬ç®—æ³•çš„æ¨èæ•ˆæœã€‚ â€”â€” ã€ŠHadoop æƒå¨æŒ‡å—ã€‹</p></blockquote><ul><li><a href="http://blog.fens.me/hadoop-mapreduce-recommend/" target="_blank" rel="noopener">ç”¨Hadoopæ„å»ºç”µå½±æ¨èç³»ç»Ÿ | ç²‰ä¸æ—¥å¿—</a></li><li><a href="http://blog.fens.me/hadoop-mahout-recommend-job/" target="_blank" rel="noopener">ç”¨Mahoutæ„å»ºèŒä½æ¨èå¼•æ“ | ç²‰ä¸æ—¥å¿—</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;æœ¬æ–‡ä¸»è¦è®°å½•Macä¸‹å¦‚ä½•è¿›è¡ŒHadoopä¼ªåˆ†å¸ƒæ¨¡å¼å®‰è£…ï¼Œå¹¶é€šè¿‡è¯é¢‘ç»Ÿè®¡Demoç¨‹åº(WordCount)ç†è§£MapReduceçš„åŸç†ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Hadoop" scheme="https://lbs0912.github.io/categories/Hadoop/"/>
    
    
      <category term="BigData" scheme="https://lbs0912.github.io/tags/BigData/"/>
    
      <category term="Hadoop" scheme="https://lbs0912.github.io/tags/Hadoop/"/>
    
  </entry>
  
  <entry>
    <title>LeetCodeé¢˜è§£-003</title>
    <link href="https://lbs0912.github.io/2020/02/23/leetcode-003/"/>
    <id>https://lbs0912.github.io/2020/02/23/leetcode-003/</id>
    <published>2020-02-23T06:35:26.000Z</published>
    <updated>2020-02-23T08:48:04.365Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•</li></ul><a id="more"></a><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li><a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode-191. Number of 1 Bits ï¼ˆä½1çš„ä¸ªæ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener">LeetCode-338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/longest-palindrome/" target="_blank" rel="noopener">LeetCode-409. Longest Palindrome ï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰</a></li><li><a href="https://leetcode.com/problems/rectangle-area/?tab=Description" target="_blank" rel="noopener">LeetCode-223. Rectangle Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰</a></li><li><a href="https://leetcode.com/problems/number-complement/" target="_blank" rel="noopener">LeetCode-476. Number Complementï¼ˆæ•°å­—çš„è¡¥æ•°ï¼‰</a></li></ul><h2 id="191-Number-of-1-Bitsï¼ˆä½1çš„ä¸ªæ•°ï¼‰"><a href="#191-Number-of-1-Bitsï¼ˆä½1çš„ä¸ªæ•°ï¼‰" class="headerlink" title="191. Number of 1 Bitsï¼ˆä½1çš„ä¸ªæ•°ï¼‰"></a>191. Number of 1 Bitsï¼ˆä½1çš„ä¸ªæ•°ï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode-191. Number of 1 Bitsï¼ˆä½1çš„ä¸ªæ•°ï¼‰</a></li></ul><p>æœ¬é—®é¢˜ä¸­ï¼Œè®¡æ•°äº†ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°çš„ä½ï¼Œç»“æœç§°ä¸º <code>pop count</code>ï¼Œæˆ– <a href="https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E9%87%8D%E9%87%8F/7110799?fr=aladdin" target="_blank" rel="noopener">æ±‰æ˜æƒé‡</a>ã€‚</p><h3 id="Approach-1ï¼šé™¤Kå–ä½™æ³•"><a href="#Approach-1ï¼šé™¤Kå–ä½™æ³•" class="headerlink" title="Approach 1ï¼šé™¤Kå–ä½™æ³•"></a>Approach 1ï¼šé™¤Kå–ä½™æ³•</h3><h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>é™¤Kå–ä½™æ³•ï¼Œåˆ©ç”¨ <code>num%2</code> å’Œ <code>num/2</code> ä¸æ–­å–å‡ºæ•°å­—çš„äºŒè¿›åˆ¶æ•°å€¼ã€‚</li><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¦‚Javaè¯­è¨€ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ <code>while(num&gt;0)</code> è¿›è¡Œåˆ¤æ–­ã€‚å› ä¸ºJavaç¼–è¯‘å™¨ä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚ä¾‹å¦‚è¾“å…¥ <code>11111111111111111111111111111101</code>ï¼Œ ä¼šè¢«ä½œä¸º <code>-3</code> å¤„ç†ã€‚</li><li>å› æ­¤ï¼Œåœ¨Javaä¸­åº”è¯¥é¿å…å–æ¨¡å’Œé™¤æ³•æ“ä½œï¼Œä½¿ç”¨ <code>(num&amp;1) == 1</code> ä»£æ›¿ <code>num%2</code>ï¼›ä½¿ç”¨æ— ç¬¦å·å³ç§» <code>num &gt;&gt;&gt; 1</code> ä»£æ›¿ <code>num/2</code>ã€‚</li><li>åœ¨C++ä¸­ï¼Œè‹¥ä½¿ç”¨æ— ç¬¦å·ç±»å‹ <code>uint32_t</code> ä½œä¸ºè¾“å…¥ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>while(num&gt;0)</code> ä½œä¸ºå¾ªç¯åˆ¤æ–­ã€‚</li></ul><blockquote><p>Java ä¸­ï¼Œ<code>&gt;&gt;&gt;</code> ä¸ºæ— ç¬¦å·å³ç§»ï¼Œ<code>&gt;&gt;</code> ä¸ºæœ‰ç¬¦å·å³ç§»ã€‚</p></blockquote><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(1)</code>ã€‚è¿è¡Œæ—¶é—´ä¾èµ–äºæ•°å­— <code>n</code> çš„ä½æ•°ã€‚æœ¬é¢˜ä¸­æ˜¯ä¸€ä¸ª32ä½æ•°å­—ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä½ä¸º <code>O(1)</code>ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code>ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚</li></ul><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hammingWeight</span><span class="params">(<span class="keyword">uint32_t</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n&gt;<span class="number">0</span>)&#123; <span class="comment">//è¾“å…¥ç±»å‹ä¸ºæ— ç¬¦å·ç±»å‹ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨n&gt;0è¿›è¡Œåˆ¤æ–­</span></span><br><span class="line">            total += n%<span class="number">2</span>;</span><br><span class="line">            n /=<span class="number">2</span>;</span><br><span class="line">            <span class="comment">//  n = n &gt;&gt;1; //ä¹Ÿå¯ä½¿ç”¨ç§»ä½æ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="comment">// you need to treat n as an unsigned value</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> hammingWeight(<span class="built_in">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">int</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>((n&amp;<span class="number">1</span>) == <span class="number">1</span>)&#123;</span><br><span class="line">                total++; <span class="comment">//ä¸è¦ä½¿ç”¨å–æ¨¡æ“ä½œ</span></span><br><span class="line">            &#125;</span><br><span class="line">            n = n &gt;&gt;&gt; <span class="number">1</span>; <span class="comment">//ä¼šæœ‰è´Ÿæ•°æƒ…å†µï¼Œå› æ­¤åº”è¯¥ä½¿ç”¨æ— ç¬¦å·å³ç§»</span></span><br><span class="line">            <span class="comment">//Java ä¸­ï¼Œ`&gt;&gt;&gt;` ä¸ºæ— ç¬¦å·å³ç§»ï¼Œ`&gt;&gt;` ä¸ºæœ‰ç¬¦å·å³ç§»ã€‚</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…é‡‡ç”¨å¦‚ä¸‹å®ç°</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">int</span> hammingWeight(<span class="built_in">int</span> n) &#123;</span><br><span class="line">    <span class="built_in">int</span> bits = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> mask = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++) &#123; <span class="comment">//æœ€å¤§32ä½</span></span><br><span class="line">        <span class="keyword">if</span> ((n &amp; mask) != <span class="number">0</span>) &#123;</span><br><span class="line">            bits++;</span><br><span class="line">        &#125;</span><br><span class="line">        mask &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> bits;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-2ï¼šä½æ“ä½œå°æŠ€å·§-n-amp-n-1"><a href="#Approach-2ï¼šä½æ“ä½œå°æŠ€å·§-n-amp-n-1" class="headerlink" title="Approach 2ï¼šä½æ“ä½œå°æŠ€å·§ - n&amp;(n-1)"></a>Approach 2ï¼šä½æ“ä½œå°æŠ€å·§ - n&amp;(n-1)</h3><h4 id="Analysis-1"><a href="#Analysis-1" class="headerlink" title="Analysis"></a>Analysis</h4><p>å¯¹å‰é¢çš„ç®—æ³•è¿›è¡Œä¼˜åŒ–ã€‚</p><p>ä¸å†æ£€æŸ¥æ•°å­—çš„æ¯ä¸€ä¸ªä½ï¼Œè€Œæ˜¯ä¸æ–­æŠŠæ•°å­—æœ€åä¸€ä¸ª <code>1</code> åè½¬ï¼Œå¹¶æŠŠè®¡æ•°åŠ 1ã€‚å½“æ•°å­—å˜æˆ <code>0</code> çš„æ—¶å€™å¶ï¼Œæˆ‘ä»¬å°±çŸ¥é“å®ƒæ²¡æœ‰ <code>1</code> çš„ä½äº†ï¼Œæ­¤æ—¶è¿”å›è®¡æ•°ã€‚</p><p>è¿™é‡Œå…³é”®çš„æƒ³æ³•æ˜¯<strong>å¯¹äºä»»æ„æ•°å­— <code>n</code> ï¼Œå°† <code>n</code> å’Œ <code>n - 1</code> åšä¸è¿ç®—ï¼Œä¸æ–­å¾ªç¯ï¼Œæœ€åä¸€å®šä¼šæŠŠ <code>1</code> çš„ä½å˜æˆ <code>0</code>ã€‚</strong></p><p>ä¸ºä»€ä¹ˆï¼Ÿè€ƒè™‘ <code>n</code> å’Œ <code>n - 1</code> çš„äºŒè¿›åˆ¶è¡¨ç¤ºã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/leetcode/leetcode-191-method-1.png" alt=""></p><p><strong>åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œæ•°å­— <code>n</code> ä¸­æœ€ä½ä½çš„ <code>1</code> æ€»æ˜¯å¯¹åº” <code>n - 1</code> ä¸­çš„ <code>0</code>ã€‚å› æ­¤ï¼Œå°† <code>n</code> å’Œ <code>n - 1</code> ä¸è¿ç®—æ€»æ˜¯èƒ½æŠŠ <code>n</code> ä¸­æœ€ä½ä½çš„ <code>1</code> å˜æˆ <code>0</code> ï¼Œå¹¶ä¿æŒå…¶ä»–ä½ä¸å˜ã€‚</strong></p><p>ä½¿ç”¨è¿™ä¸ªå°æŠ€å·§ï¼Œä»£ç å˜å¾—éå¸¸ç®€å•ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(1)</code>ã€‚è¿è¡Œæ—¶é—´ä¾èµ–äºæ•°å­— <code>n</code> çš„ä½æ•°ã€‚æœ¬é¢˜ä¸­æ˜¯ä¸€ä¸ª32ä½æ•°å­—ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦ä½ä¸º <code>O(1)</code>ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code>ï¼Œæ²¡æœ‰ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚</li></ul><h4 id="Method"><a href="#Method" class="headerlink" title="Method"></a>Method</h4><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="comment">// you need to treat n as an unsigned value</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> hammingWeight(<span class="built_in">int</span> n) &#123;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(n!=<span class="number">0</span>)&#123;</span><br><span class="line">            sum++;</span><br><span class="line">            n = n&amp;(n<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-3ï¼šå­—ç¬¦ä¸²é•¿åº¦-æ­£åˆ™åŒ¹é…"><a href="#Approach-3ï¼šå­—ç¬¦ä¸²é•¿åº¦-æ­£åˆ™åŒ¹é…" class="headerlink" title="Approach 3ï¼šå­—ç¬¦ä¸²é•¿åº¦+æ­£åˆ™åŒ¹é…"></a>Approach 3ï¼šå­—ç¬¦ä¸²é•¿åº¦+æ­£åˆ™åŒ¹é…</h3><h4 id="Analysic"><a href="#Analysic" class="headerlink" title="Analysic"></a>Analysic</h4><blockquote><p>JSä¸­ï¼Œ<code>toString(radix)</code> æ–¹æ³•å¯ä»¥å°†æ•°å­—è½¬æ¢ä¸ºåŸºäº <code>radix</code> çš„è¿›åˆ¶æ•°ï¼ˆè‹¥ <code>radix</code> ç¼ºçœï¼Œåˆ™é»˜è®¤è½¬æ¢ä¸º 10 è¿›åˆ¶æ•°ï¼‰ã€‚</p></blockquote><ul><li>é¦–å…ˆï¼Œä½¿ç”¨ <code>toString(2)</code> æ–¹æ³•ï¼Œå°†æ•°å­—è½¬æ¢ä¸º 2 è¿›åˆ¶å­—ç¬¦ä¸²</li><li>ç„¶åï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…ï¼Œæ»¤é™¤å­—ç¬¦ä¸²ä¸­çš„ <code>0</code>ï¼Œå¾—åˆ°æ–°çš„å­—ç¬¦ä¸²</li><li>æœ€åï¼Œæ–°å­—ç¬¦ä¸²çš„é•¿åº¦å³æ•°å­—ä¸­ <code>1</code> çš„ä¸ªæ•°</li></ul><h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h4><ul><li>JS</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;number&#125; n - a positive integer</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hammingWeight = <span class="function"><span class="keyword">function</span><span class="params">(n)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> n.toString(<span class="number">2</span>).replace(/<span class="number">0</span>/g,<span class="string">''</span>).length; </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Approach-4ï¼šä½¿ç”¨å†…ç½®å‡½æ•°"><a href="#Approach-4ï¼šä½¿ç”¨å†…ç½®å‡½æ•°" class="headerlink" title="Approach 4ï¼šä½¿ç”¨å†…ç½®å‡½æ•°"></a>Approach 4ï¼šä½¿ç”¨å†…ç½®å‡½æ•°</h3><h4 id="Analysis-2"><a href="#Analysis-2" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li><p>Javaä¸­ï¼Œå‡½æ•° <a href="https://www.tutorialspoint.com/java/lang/integer_bitcount.htm" target="_blank" rel="noopener">Integer.bitCount()</a> å¯ä»¥è¿”å›æ•°å­—ä¸­2è¿›åˆ¶æ ¼å¼ä¸‹ <code>1</code> çš„ä¸ªæ•°ã€‚</p><blockquote><p>The <code>java.lang.Integer.bitCount()</code> method returns the number of one-bits in the twoâ€™s complement binary representation of the specified int value i. This is sometimes referred to as the <code>population count</code>.</p></blockquote></li><li><p>ç±»ä¼¼çš„ï¼ŒC++å†…ç½®çš„ <code>__builtin_popcount()</code> å‡½æ•°ä¹Ÿå¯ä»¥è¿”å›æ•°å­—ä¸­2è¿›åˆ¶æ ¼å¼ä¸‹ <code>1</code> çš„ä¸ªæ•°ã€‚</p></li></ul><h4 id="Method-1"><a href="#Method-1" class="headerlink" title="Method"></a>Method</h4><ul><li>C++</li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">class</span> <span class="selector-tag">Solution</span> &#123;</span><br><span class="line"><span class="attribute">public</span>:</span><br><span class="line">    int <span class="built_in">hammingWeight</span>(uint32_t n) &#123;</span><br><span class="line">       return <span class="built_in">__builtin_popcount</span>(n);        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="comment">// you need to treat n as an unsigned value</span></span><br><span class="line">    public <span class="built_in">int</span> hamming<span class="constructor">Weight(<span class="params">int</span> <span class="params">n</span>)</span> &#123;</span><br><span class="line">        return <span class="module-access"><span class="module"><span class="identifier">Integer</span>.</span></span>bit<span class="constructor">Count(<span class="params">n</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="338-Counting-Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰"><a href="#338-Counting-Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰" class="headerlink" title="338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰"></a>338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener">LeetCode-338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</a></li></ul><h3 id="Approach-1-Pop-count"><a href="#Approach-1-Pop-count" class="headerlink" title="Approach 1-Pop count"></a>Approach 1-Pop count</h3><h4 id="Analysis-3"><a href="#Analysis-3" class="headerlink" title="Analysis"></a>Analysis</h4><p>æœ¬é—®é¢˜å¯ä»¥çœ‹åš <a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode- 191. Number of 1 Bits</a> çš„åç»­ã€‚</p><p><code>191. Number of 1 Bits</code> é—®é¢˜ä¸­ï¼Œè®¡æ•°äº†ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°çš„ä½ï¼Œç»“æœç§°ä¸º <code>pop count</code>ï¼Œæˆ– <a href="https://baike.baidu.com/item/%E6%B1%89%E6%98%8E%E9%87%8D%E9%87%8F/7110799?fr=aladdin" target="_blank" rel="noopener">æ±‰æ˜æƒé‡</a>ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å…ˆé»˜è®¤è¿™ä¸ªæ¦‚å¿µã€‚å‡è®¾æˆ‘ä»¬æœ‰å‡½æ•° <code>int popcount(int x)</code>ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªç»™å®šéè´Ÿæ•´æ•°çš„ä½è®¡æ•°ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨ <code>[0, num]</code> èŒƒå›´å†…å¾ªç¯å¹¶å°†ç»“æœå­˜åˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(nk)</code>ã€‚å¯¹äºæ¯ä¸ªæ•´æ•° <code>x</code>ï¼Œæˆ‘ä»¬éœ€è¦ <code>O(k)</code> æ¬¡æ“ä½œï¼Œå…¶ä¸­ <code>k</code> æ˜¯ <code>x</code> çš„ä½æ•°ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€‚ </li></ul><h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>[] countBits(<span class="built_in">int</span> num) &#123;</span><br><span class="line">        <span class="built_in">int</span>[] ans = new <span class="built_in">int</span>[num+<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;= num;i++)&#123;</span><br><span class="line">            ans[i] = popCount(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> popCount(<span class="built_in">int</span> x) &#123;</span><br><span class="line">        <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(x!=<span class="number">0</span>)&#123;</span><br><span class="line">            count++;</span><br><span class="line">            x = x&amp;(x<span class="number">-1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    vector&lt;<span class="built_in">int</span>&gt; countBits(<span class="built_in">int</span> num) &#123;</span><br><span class="line">        vector&lt;<span class="built_in">int</span>&gt; res(num+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;=num;i++)&#123;</span><br><span class="line">            res[i] = popCount(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="built_in">int</span> popCount(<span class="built_in">int</span> num)&#123;</span><br><span class="line">        <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(num)&#123;</span><br><span class="line">            count ++;</span><br><span class="line">            num &amp;= num<span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-åŠ¨æ€è§„åˆ’-æœ€é«˜æœ‰æ•ˆä½"><a href="#Approach-2-åŠ¨æ€è§„åˆ’-æœ€é«˜æœ‰æ•ˆä½" class="headerlink" title="Approach 2-åŠ¨æ€è§„åˆ’+æœ€é«˜æœ‰æ•ˆä½"></a>Approach 2-åŠ¨æ€è§„åˆ’+æœ€é«˜æœ‰æ•ˆä½</h3><h4 id="Analysis-4"><a href="#Analysis-4" class="headerlink" title="Analysis"></a>Analysis</h4><p>åˆ©ç”¨å·²æœ‰çš„è®¡æ•°ç»“æœæ¥ç”Ÿæˆæ–°çš„è®¡æ•°ç»“æœã€‚</p><p>å‡è®¾æœ‰ä¸€ä¸ªæ•´æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x = (1001011101)_2 = (605)_&#123;10&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å·²ç»è®¡ç®—äº†ä» <code>0</code> åˆ° <code>x - 1</code> çš„å…¨éƒ¨ç»“æœã€‚</p><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>x</code> ä¸ æˆ‘ä»¬è®¡ç®—è¿‡çš„ä¸€ä¸ªæ•°åªæœ‰ä¸€ä½ä¹‹å·®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x&apos; = (1011101)_2 = (93)_&#123;10&#125;</span><br></pre></td></tr></table></figure><p>å®ƒä»¬åªåœ¨æœ€é«˜æœ‰æ•ˆä½ä¸Šä¸åŒã€‚</p><p>è®©æˆ‘ä»¬ä»¥äºŒè¿›åˆ¶å½¢å¼æ£€æŸ¥ <code>[0, 3]</code> çš„èŒƒå›´</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(0) = (0)_2</span><br><span class="line"></span><br><span class="line">(1) = (1)_2</span><br><span class="line"></span><br><span class="line">(2) = (10)_2</span><br><span class="line"></span><br><span class="line">(3) = (11)_2</span><br><span class="line"></span><br><span class="line">(4) = (100)_2</span><br><span class="line"></span><br><span class="line">(5) = (101)_2</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹å‡ºï¼Œ <code>2</code> å’Œ <code>3</code> çš„äºŒè¿›åˆ¶å½¢å¼å¯ä»¥é€šè¿‡ç»™ <code>0</code> å’Œ <code>1</code> çš„äºŒè¿›åˆ¶å½¢å¼åœ¨å‰é¢åŠ ä¸Š <code>1</code> æ¥å¾—åˆ°ã€‚å› æ­¤ï¼Œå®ƒä»¬çš„ <code>pop count</code> åªç›¸å·® 1ã€‚</p><p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>[0, 3]</code> ä½œä¸ºè“æœ¬æ¥å¾—åˆ° <code>[4, 7]</code>ï¼Œä½¿ç”¨ <code>[0, 7]</code> ä½œä¸ºè“æœ¬æ¥å¾—åˆ° <code>[8, 15]</code>ï¼Œå³æ ¹æ®åŒºé—´ <code>[0, b)</code> çš„ç»“æœå»äº§ç”ŸåŒºé—´ <code>[b, 2b)</code> çš„ç»“æœï¼Œå…¶ä¸­ <code>b</code> ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b = 2^m &gt; x ï¼ˆm=0,1,2...ï¼‰</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œå¯¹äº <code>pop count P(x)</code>ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹çš„çŠ¶æ€è½¬ç§»å‡½æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P(x + b) = P(x) + 1, b = 2^m &gt; x ï¼ˆm=0,1,2...ï¼‰</span><br></pre></td></tr></table></figure><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€‚å¯¹æ¯ä¸ªæ•´æ•° <code>x</code>ï¼Œåªéœ€è¦å¸¸æ•°æ—¶é—´ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ã€‚éœ€è¦ <code>O(n)</code> çš„ç©ºé—´æ¥å­˜å‚¨ç»“æœã€‚</li></ul><h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>[] countBits(<span class="built_in">int</span> num) &#123;</span><br><span class="line">        <span class="built_in">int</span>[] res = new <span class="built_in">int</span>[num+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">int</span> i=<span class="number">0</span>,b=<span class="number">1</span>; <span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">while</span>(b&lt;=num)&#123;</span><br><span class="line">            <span class="comment">// generate [b, 2b) or [b, num) from [0, b)</span></span><br><span class="line">            <span class="keyword">while</span>(i&lt;b &amp;&amp; i+b &lt;= num)&#123;</span><br><span class="line">                res[i+b] = res[i]+<span class="number">1</span>;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            i = <span class="number">0</span>;   <span class="comment">// reset i</span></span><br><span class="line">            b &lt;&lt;= <span class="number">1</span>; <span class="comment">// b = 2b</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-3-åŠ¨æ€è§„åˆ’-æœ€ä½æœ‰æ•ˆä½"><a href="#Approach-3-åŠ¨æ€è§„åˆ’-æœ€ä½æœ‰æ•ˆä½" class="headerlink" title="Approach 3-åŠ¨æ€è§„åˆ’+æœ€ä½æœ‰æ•ˆä½"></a>Approach 3-åŠ¨æ€è§„åˆ’+æœ€ä½æœ‰æ•ˆä½</h3><h4 id="Analysis-5"><a href="#Analysis-5" class="headerlink" title="Analysis"></a>Analysis</h4><p>åªè¦ <code>x&#39;</code> å°äº <code>x</code>ï¼Œä¸”å®ƒä»¬çš„ <code>pop count</code> ä¹‹é—´å­˜åœ¨å‡½æ•°å…³ç³»ï¼Œå°±å¯ä»¥å†™å‡ºçŠ¶æ€è½¬ç§»å‡½æ•°ã€‚</p><p>éµå¾ªä¸Šä¸€æ–¹æ³•çš„ç›¸åŒåŸåˆ™ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æœ€ä½æœ‰æ•ˆä½æ¥è·å¾—çŠ¶æ€è½¬ç§»å‡½æ•°ã€‚</p><p>è§‚å¯Ÿ <code>x</code> å’Œ <code>x&#39; = x / 2</code> çš„å…³ç³»</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x=(1001011101)_2=(605)_&#123;10&#125;</span><br><span class="line"></span><br><span class="line">x&apos; = (100101110)_2 = (302)_&#123;10&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç° <code>x&#39;</code> ä¸ <code>x</code> åªæœ‰ä¸€ä½ä¸åŒï¼Œè¿™æ˜¯å› ä¸º <code>x&#39;</code> å¯ä»¥çœ‹åš <code>x</code> ç§»é™¤æœ€ä½æœ‰æ•ˆä½çš„ç»“æœã€‚</p><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸‹é¢çš„çŠ¶æ€è½¬ç§»å‡½æ•°</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">P(<span class="name">x</span>) = P(<span class="name">x/2</span>) + (<span class="name">x</span> mod <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">P(<span class="number">0</span>) = <span class="number">0</span>;            <span class="comment">//00   è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">P(<span class="number">1</span>) = P(<span class="number">0</span>) + <span class="number">1</span>;     <span class="comment">//001   000</span></span><br><span class="line">P(<span class="number">2</span>) = P(<span class="number">1</span>) + <span class="number">0</span>;     <span class="comment">//010   001</span></span><br><span class="line">P(<span class="number">3</span>) = P(<span class="number">1</span>) + <span class="number">1</span>;     <span class="comment">//011   001</span></span><br><span class="line">P(<span class="number">4</span>) = P(<span class="number">2</span>) + <span class="number">0</span>;     <span class="comment">//100   010 </span></span><br><span class="line">P(<span class="number">5</span>) = P(<span class="number">2</span>) + <span class="number">1</span>;     <span class="comment">//101   010</span></span><br><span class="line">P(<span class="number">6</span>) = P(<span class="number">3</span>) + <span class="number">1</span>;     <span class="comment">//110   011</span></span><br></pre></td></tr></table></figure><h4 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span>[] countBits(<span class="built_in">int</span> num) &#123;</span><br><span class="line">        <span class="built_in">int</span>[] res = new <span class="built_in">int</span>[num+<span class="number">1</span>];</span><br><span class="line">        res[<span class="number">0</span>] = <span class="number">0</span>;  <span class="comment">//è¾¹ç•Œæ¡ä»¶</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;=num;i++)&#123;</span><br><span class="line">            res[i] = res[i/<span class="number">2</span>] + (i%<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="409-Longest-Palindromeï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰"><a href="#409-Longest-Palindromeï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰" class="headerlink" title="409. Longest Palindromeï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰"></a>409. Longest Palindromeï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/longest-palindrome/" target="_blank" rel="noopener">LeetCode-409. Longest Palindrome ï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰</a></li></ul><h3 id="Approach-1-Mapè®¡æ•°"><a href="#Approach-1-Mapè®¡æ•°" class="headerlink" title="Approach 1-Mapè®¡æ•°"></a>Approach 1-Mapè®¡æ•°</h3><h4 id="Analysis-6"><a href="#Analysis-6" class="headerlink" title="Analysis"></a>Analysis</h4><p>ä½¿ç”¨ <code>Map</code> æ•°æ®ç»“æ„ç»Ÿè®¡æ¯ä¸ªå­—ç¬¦ä¸²å‡ºç°çš„æ¬¡æ•°ã€‚éå† <code>Map</code> å­—å…¸ï¼Œå›æ–‡ä¸²é•¿åº¦å¢åŠ  <code>2*(map[i]/2)</code>ã€‚åŒæ—¶ï¼Œå¯¹å‡ºç°æ¬¡æ•°å¯¹2å–æ¨¡ï¼Œè‹¥ä¸º1ï¼Œè¡¨ç¤ºå›æ–‡ä¸²ä¸­æœ‰å‡ºç°å•æ¬¡çš„å­—ç¬¦ï¼Œè®¾ç½®æ ‡å¿—ä½ <code>hasSingle = true</code>ï¼Œæœ€åè®°å¾—å¯¹å‡ºç°æ¬¡æ•°åŠ 1ã€‚</p><ul><li>æ—¶é—´å¤æ‚åº¦ï¼š <code>O(n)</code>ï¼Œ<code>n</code>ä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œè‡³å°‘éå†æ¯ä¸ªå­—ç¬¦ä¸€æ¬¡ã€‚</li><li>ç©ºé—´å¤æ‚åº¦ï¼š <code>O(1)</code>ï¼Œéœ€è¦å¼€è¾Ÿé¢å¤–ç©ºé—´æ¥è®¡æ•°ï¼Œå­—æ¯æœ€å¤šä¸º26ä¸ªã€‚</li></ul><h4 id="Solution-5"><a href="#Solution-5" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">int</span> longestPalindrome(<span class="built_in">string</span> s) &#123;</span><br><span class="line">        map&lt;char,<span class="built_in">int</span>&gt; dataInfo;</span><br><span class="line">        <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">bool</span> hasSingel = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)&#123;</span><br><span class="line">            dataInfo[s[i]]++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;dataInfo.size();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(dataInfo[i]%<span class="number">2</span> !=<span class="number">0</span>)&#123;</span><br><span class="line">                hasSingel = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            count += <span class="number">2</span>*(dataInfo[i]/<span class="number">2</span>);   <span class="comment">//å¤„ç† 'CCC'æƒ…å†µ</span></span><br><span class="line">        &#125;</span><br><span class="line">        count = hasSingel? count+<span class="number">1</span>:count;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> longestPalindrome(String s) &#123;</span><br><span class="line">        char[] chas = s.toCharArray();</span><br><span class="line">        Map&lt;Character, Integer&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; chas.length; i++) &#123;</span><br><span class="line">            map.put(chas[i], map.getOrDefault(chas[i], <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">int</span> result = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> cnt : map.values()) &#123;</span><br><span class="line">            result += cnt / <span class="number">2</span> * <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (cnt % <span class="number">2</span> == <span class="number">1</span> &amp;&amp; result % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                result++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="223-Rectangle-Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰"><a href="#223-Rectangle-Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰" class="headerlink" title="223. Rectangle Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰"></a>223. Rectangle Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/rectangle-area/?tab=Description" target="_blank" rel="noopener">LeetCode-223. Rectangle Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰</a></li></ul><h3 id="Approach-1-é¢ç§¯æ‹†åˆ†æ±‚è§£"><a href="#Approach-1-é¢ç§¯æ‹†åˆ†æ±‚è§£" class="headerlink" title="Approach 1-é¢ç§¯æ‹†åˆ†æ±‚è§£"></a>Approach 1-é¢ç§¯æ‹†åˆ†æ±‚è§£</h3><h4 id="Analysis-7"><a href="#Analysis-7" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>æ ¹æ®ä¸Šå›¾ï¼Œå¯ä»¥ç¡®å®šè®¡ç®—çš„é¢ç§¯å€¼ä¸ºä¸¤ä¸ªçŸ©å½¢é¢ç§¯çš„å’Œå†å‡å»é‡åˆéƒ¨åˆ†çš„é¢ç§¯ï¼Œå³ <code>resultArea = recArea1 + recArea2 - repetitionArea</code></li><li>é‡åˆéƒ¨åˆ†å®šç‚¹åæ ‡çš„ç¡®å®š<ul><li>Bottom Left Point Coordinate: <code>(max(A,E), max(B,F))</code></li><li>Top Right Point Coordinate: <code>(min(C,G), min(D,H))</code></li></ul></li><li>æ˜“å¿½ç•¥ç‚¹<blockquote><p>Due to the total bits of â€œintâ€ is 32, we prefer to use â€œw2&lt;=w1â€ to â€œ(int) w2-w1â€ to judge the return value. The data of â€(int) w2-w1â€ may overflow the range of integer.(For example, w2&gt;0 and w1&lt;0)</p></blockquote></li></ul><h4 id="Slove"><a href="#Slove" class="headerlink" title="Slove"></a>Slove</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">computeArea</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> C, <span class="keyword">int</span> D, <span class="keyword">int</span> E, <span class="keyword">int</span> F, <span class="keyword">int</span> G, <span class="keyword">int</span> H)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> area_1 = (C - A)*(D - B);</span><br><span class="line"><span class="keyword">int</span> area_2 = (G - E)*(H - F);</span><br><span class="line"><span class="comment">//Calculate the overlap area</span></span><br><span class="line"><span class="keyword">int</span> w1 = max(A, E);</span><br><span class="line"><span class="keyword">int</span> h1 = max(B, F);</span><br><span class="line"><span class="keyword">int</span> w2 = min(C, G);</span><br><span class="line"><span class="keyword">int</span> h2 = min(D, H);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((w2&lt;=w1) || (h2&lt;=h1)) <span class="comment">//æ²¡æœ‰é‡åˆéƒ¨åˆ†</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> area_1 + area_2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> area_1 + area_2 - ((h2-h1)*(w2-w1));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>åœ¨è®¡ç®—è¿‡ç¨‹ä¸Šè¿›è¡Œä¼˜åŒ–ï¼Œæœ‰å¦‚ä¸‹ä»£ç å®ç°</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">computeArea</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> C, <span class="keyword">int</span> D, <span class="keyword">int</span> E, <span class="keyword">int</span> F, <span class="keyword">int</span> G, <span class="keyword">int</span> H)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = max(A,E), right = max(min(C,G), left);</span><br><span class="line">        <span class="keyword">int</span> bottom = max(B,F), top = max(min(D,H), bottom);</span><br><span class="line">        <span class="keyword">return</span> (C-A)*(D-B) - (right-left)*(top-bottom) + (G-E)*(H-F);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>JS</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> computeArea = <span class="function"><span class="keyword">function</span>(<span class="params">A, B, C, D, E, F, G, H</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> left = <span class="built_in">Math</span>.max(A,E), right = <span class="built_in">Math</span>.max(<span class="built_in">Math</span>.min(C,G), left);</span><br><span class="line">    <span class="keyword">var</span> bottom = <span class="built_in">Math</span>.max(B,F), top = <span class="built_in">Math</span>.max(<span class="built_in">Math</span>.min(D,H), bottom);</span><br><span class="line">    <span class="keyword">return</span> (C-A)*(D-B) - (right-left)*(top-bottom) + (G-E)*(H-F);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">computeArea</span><span class="params">(<span class="keyword">int</span> A, <span class="keyword">int</span> B, <span class="keyword">int</span> C, <span class="keyword">int</span> D, <span class="keyword">int</span> E, <span class="keyword">int</span> F, <span class="keyword">int</span> G, <span class="keyword">int</span> H)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> left = Math.max(A,E), right = Math.max(Math.min(C,G), left);</span><br><span class="line">        <span class="keyword">int</span> bottom = Math.max(B,F), top = Math.max(Math.min(D,H), bottom);</span><br><span class="line">        <span class="keyword">return</span> (C-A)*(D-B) - (right-left)*(top-bottom) + (G-E)*(H-F);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="476-Number-Complement-æ•°å­—çš„è¡¥æ•°"><a href="#476-Number-Complement-æ•°å­—çš„è¡¥æ•°" class="headerlink" title="476. Number Complement (æ•°å­—çš„è¡¥æ•°)"></a>476. Number Complement (æ•°å­—çš„è¡¥æ•°)</h2><h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/number-complement/" target="_blank" rel="noopener">LeetCode-476. Number Complement (æ•°å­—çš„è¡¥æ•°)</a></li></ul><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°ï¼Œè¾“å‡ºå®ƒçš„è¡¥æ•°ã€‚è¡¥æ•°æ˜¯å¯¹è¯¥æ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå–åã€‚</p><p>æ³¨æ„</p><pre><code>1. ç»™å®šçš„æ•´æ•°ä¿è¯åœ¨32ä½å¸¦ç¬¦å·æ•´æ•°çš„èŒƒå›´å†…ã€‚2. ä½ å¯ä»¥å‡å®šäºŒè¿›åˆ¶æ•°ä¸åŒ…å«å‰å¯¼é›¶ä½ã€‚</code></pre><p>ç¤ºä¾‹ 1</p><pre><code>è¾“å…¥: 5è¾“å‡º: 2è§£é‡Š: 5çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º101ï¼ˆæ²¡æœ‰å‰å¯¼é›¶ä½ï¼‰ï¼Œå…¶è¡¥æ•°ä¸º010ã€‚æ‰€ä»¥ä½ éœ€è¦è¾“å‡º2ã€‚</code></pre><p>ç¤ºä¾‹ 2</p><pre><code>è¾“å…¥: 1è¾“å‡º: 0è§£é‡Š: 1çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º1ï¼ˆæ²¡æœ‰å‰å¯¼é›¶ä½ï¼‰ï¼Œå…¶è¡¥æ•°ä¸º0ã€‚æ‰€ä»¥ä½ éœ€è¦è¾“å‡º0ã€‚</code></pre><h3 id="Approach-1-å¯»æ‰¾æœ€é«˜ä½ä¸º1çš„ä½ç½®"><a href="#Approach-1-å¯»æ‰¾æœ€é«˜ä½ä¸º1çš„ä½ç½®" class="headerlink" title="Approach 1-å¯»æ‰¾æœ€é«˜ä½ä¸º1çš„ä½ç½®"></a>Approach 1-å¯»æ‰¾æœ€é«˜ä½ä¸º1çš„ä½ç½®</h3><h4 id="Analysis-8"><a href="#Analysis-8" class="headerlink" title="Analysis"></a>Analysis</h4><p>åˆ†æé¢˜ç›®å¯çŸ¥ï¼Œåªéœ€å¯¹æ¯ä¸ªä½çš„äºŒè¿›åˆ¶æ•°å€¼ï¼ˆæ²¡æœ‰å‰å¯¼é›¶ä½æ—¶ï¼‰è¿›è¡Œç¿»è½¬å³å¯ã€‚</p><p>ä½†æ•°å€¼å®é™…å­˜å‚¨ä¸­ï¼Œæ˜¯åŒ…å«å‰å¯¼é›¶ä½çš„ã€‚å¦‚æœç›´æ¥å¯¹ num è¿›è¡Œå–åæ“ä½œï¼Œä¼šæŠŠç¬¦å·ä½å–åï¼Œå¹¶ä¸”æŠŠæœ€é«˜ä½ä¸º 1 ä¹‹å‰çš„æ‰€æœ‰ä½æ•°éƒ½å–åã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸å«å‰å¯¼é›¶ä½æ—¶ï¼Œ<span class="number">5</span> = <span class="number">101</span>ï¼Œå–åæ“ä½œå¾—åˆ°<span class="number">010</span>ï¼Œå³åè¿›åˆ¶æ•°å€¼<span class="number">2</span></span><br><span class="line">å«æœ‰å‰å¯¼é›¶ä½æ—¶ï¼ˆæ¬¡æ•°ä»¥<span class="number">8</span>ä½ä¸ºä¾‹ï¼‰ï¼Œ<span class="number">5</span> = <span class="number">0000</span>,<span class="number">0101</span>ï¼Œå–åæ“ä½œå¾—åˆ°<span class="number">1111</span>,<span class="number">1010</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œå¯¹æ¯ä½ç¿»è½¬ï¼ˆæˆ–å–åï¼Œæˆ–å’Œ1è¿›è¡Œå¼‚æˆ–ï¼‰çš„èµ·å§‹ä½ç½®æ˜¯ä»æœ€é«˜ä½çš„1å¼€å§‹çš„ï¼Œå‰é¢çš„ 0 æ˜¯ä¸èƒ½è¢«ç¿»è½¬çš„ã€‚å¯ä»¥è€ƒè™‘ä»é«˜ä½å¾€ä½ä½éå†ï¼Œå½“é‡åˆ°ç¬¬1ä¸ª1åï¼Œè®°å½•æœ€é«˜ä½ä¸º1çš„ä½ç½®ï¼Œä¹‹åå†è¿›è¡Œç¿»è½¬æ“ä½œï¼ˆå¼‚æˆ–å®ç°ï¼‰ã€‚</p><h4 id="Solution-6"><a href="#Solution-6" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findComplement</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(num&lt;=<span class="number">0</span>) <span class="keyword">return</span> num;</span><br><span class="line">        <span class="keyword">int</span> highestOneBit = <span class="number">0</span>; <span class="comment">//æœ€é«˜ä½1çš„ä½æ•°</span></span><br><span class="line">        <span class="keyword">int</span> tmp = num;</span><br><span class="line">        <span class="keyword">while</span>(tmp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            highestOneBit += <span class="number">1</span>;</span><br><span class="line">            tmp &gt;&gt;=<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=highestOneBit<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            num = num ^(<span class="number">1</span>&lt;&lt;i);  <span class="comment">//å¼‚æˆ–æ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-åˆ›å»ºæ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°å€¼"><a href="#Approach-2-åˆ›å»ºæ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°å€¼" class="headerlink" title="Approach 2-åˆ›å»ºæ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°å€¼"></a>Approach 2-åˆ›å»ºæ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°å€¼</h3><h4 id="Analysis-9"><a href="#Analysis-9" class="headerlink" title="Analysis"></a>Analysis</h4><p>åœ¨ä¸å«å‰å¯¼é›¶ä½æ—¶ï¼ŒæŠŠ <code>num</code> å’ŒåŒä½æ•°çš„ä¸”æ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°è¿›è¡Œä¸æ“ä½œï¼Œå³å¯å¾—åˆ°ç»“æœã€‚</p><p>å› æ­¤ï¼Œé—®é¢˜è½¬åŒ–ä¸ºæ±‚è§£ä¸€ä¸ªå’Œ <code>num</code> ä½æ•°ä¸€æ ·ä¸”æ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶æ•°å€¼ <code>mask</code>ï¼Œæœ€åè¿›è¡Œå¼‚æˆ–æ“ä½œï¼ˆ<code>mask ^ num</code>ï¼‰å³å¯ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>5 = 101</code>ï¼Œå› æ­¤ <code>mask = 111</code>ï¼Œè¿›è¡Œå¼‚æˆ–æ“ä½œ <code>mask ^ num = 111 ^ 101 = 010</code>ã€‚</p><p>å¾—åˆ°æ¯ä½éƒ½æ˜¯1çš„äºŒè¿›åˆ¶ï¼Œå¦‚ <code>111</code>ï¼Œå¯ä»¥é€šè¿‡<code>1000</code> å‡å» 1 å¾—åˆ°ã€‚</p><h4 id="Solution-7"><a href="#Solution-7" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findComplement</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> temp = num;</span><br><span class="line">        <span class="keyword">int</span> mask = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span>(temp&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            mask &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">            temp &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        mask -= <span class="number">1</span>;   <span class="comment">//1000-1 å¾—åˆ°111</span></span><br><span class="line">        <span class="keyword">return</span> mask ^ num;  <span class="comment">//å¼‚æˆ–</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²-æ­£åˆ™åŒ¹é…"><a href="#Approach-3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²-æ­£åˆ™åŒ¹é…" class="headerlink" title="Approach 3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²+æ­£åˆ™åŒ¹é…"></a>Approach 3-è½¬æ¢ä¸ºå­—ç¬¦ä¸²+æ­£åˆ™åŒ¹é…</h3><h4 id="Analysis-10"><a href="#Analysis-10" class="headerlink" title="Analysis"></a>Analysis</h4><p>æ­¤å¤„ç»™å‡ºJSå®ç°çš„ç‰¹è§£</p><ol><li>å…ˆå°† num è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²</li><li>å€ŸåŠ©æ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„ 0 æ›¿æ¢æˆ1</li><li>å†å°†è¯¥å­—ç¬¦ä¸²å€¼è½¬åŒ–æˆæ•´æ•° <code>int</code></li><li>æœ€åå°†è¯¥å€¼å’Œ <code>num</code>è¿›è¡Œå¼‚æˆ–æ“ä½œ</li></ol><h4 id="Solution-8"><a href="#Solution-8" class="headerlink" title="Solution"></a>Solution</h4><ul><li>JS</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; num</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> findComplement = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> str = num.toString(<span class="number">2</span>).replace(<span class="regexp">/0/g</span>,<span class="number">1</span>);  <span class="comment">//è½¬æ¢ä¸º11..11</span></span><br><span class="line">    <span class="keyword">return</span> (num) ^ <span class="built_in">parseInt</span>(str,<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/categories/LeetCode/"/>
    
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/tags/Algorithm/"/>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>LeetCodeé¢˜è§£-002</title>
    <link href="https://lbs0912.github.io/2020/02/23/leetcode-002/"/>
    <id>https://lbs0912.github.io/2020/02/23/leetcode-002/</id>
    <published>2020-02-23T02:35:26.000Z</published>
    <updated>2020-02-23T08:48:04.365Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•</li></ul><a id="more"></a><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li><a href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener">LeetCode-206. Reverse Linked Listï¼ˆåè½¬é“¾è¡¨ï¼‰</a> - é“¾è¡¨æ“ä½œ</li><li><a href="https://leetcode.com/problems/merge-two-binary-trees/" target="_blank" rel="noopener">LeetCode-617. Merge Two Binary Trees</a> - äºŒå‰æ ‘</li><li><a href="https://leetcode.com/problems/maximum-depth-of-binary-tree/" target="_blank" rel="noopener">LeetCode-104. Maximum Depth of Binary Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰</a> - éå†äºŒå‰æ ‘</li><li><a href="https://leetcode.com/problems/convert-binary-number-in-a-linked-list-to-integer/" target="_blank" rel="noopener">LeetCode-1290. Convert Binary Number in a Linked List to Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/to-lower-case/" target="_blank" rel="noopener">LeetCode-709. To Lower Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰</a></li></ul><h2 id="206-Reverse-Linked-Listï¼ˆåè½¬é“¾è¡¨ï¼‰"><a href="#206-Reverse-Linked-Listï¼ˆåè½¬é“¾è¡¨ï¼‰" class="headerlink" title="206. Reverse Linked Listï¼ˆåè½¬é“¾è¡¨ï¼‰"></a>206. Reverse Linked Listï¼ˆåè½¬é“¾è¡¨ï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener">LeetCode-206.Reverse Linked Listï¼ˆåè½¬é“¾è¡¨ï¼‰</a></li></ul><h3 id="Approach-1-è¿­ä»£"><a href="#Approach-1-è¿­ä»£" class="headerlink" title="Approach 1-è¿­ä»£"></a>Approach 1-è¿­ä»£</h3><h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>éå†åˆ—è¡¨ï¼Œå°†å½“å‰èŠ‚ç‚¹çš„ <code>next</code> æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘å‰ä¸€ä¸ªå…ƒç´ ï¼Œå®ç°å¯¹åˆ—è¡¨çš„åè½¬ã€‚æœ€åï¼Œè¿”å›æ–°çš„å¤´å¼•ç”¨ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code></li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code></li></ul><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        ListNode prev = <span class="keyword">null</span>;</span><br><span class="line">        ListNode curr = head;</span><br><span class="line">        <span class="keyword">while</span> (curr != <span class="keyword">null</span>) &#123;</span><br><span class="line">            ListNode nextTemp = curr.next;</span><br><span class="line">            curr.next = prev;</span><br><span class="line">            prev = curr;</span><br><span class="line">            curr = nextTemp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        ListNode *curr = head;</span><br><span class="line">        ListNode *prev = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">while</span>(curr != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            ListNode *tmpNext = curr-&gt;next;</span><br><span class="line">            curr-&gt;next = prev;</span><br><span class="line">            prev= curr;</span><br><span class="line">            curr = tmpNext;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-é€’å½’"><a href="#Approach-2-é€’å½’" class="headerlink" title="Approach 2-é€’å½’"></a>Approach 2-é€’å½’</h3><h4 id="Analysis-1"><a href="#Analysis-1" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li><a href="https://leetcode-cn.com/problems/reverse-linked-list/solution/fan-zhuan-lian-biao-by-leetcode/" target="_blank" rel="noopener">LeetCode-206.åè½¬åˆ—è¡¨ | å®˜æ–¹é¢˜è§£</a></li><li>ä»é€’å½’è§’åº¦åˆ†æè¯¥é—®é¢˜ï¼Œå‡è®¾åˆ—è¡¨çš„å…¶ä½™éƒ¨åˆ†å·²ç»è¢«åè½¬ï¼Œç°è€ƒè™‘è¯¥å¦‚ä½•åè½¬</li><li>å¯¹äºåˆ—è¡¨ï¼Œå‡è®¾å…¶ $[n_{k-1},n_{m}]$ éƒ¨åˆ†å·²å®Œæˆåè½¬ï¼Œå½“å‰å¯¹èŠ‚ç‚¹ $n_{k}$ è¿›è¡Œæ“ä½œï¼Œä½¿å¾— $n_{k+1}$ çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ $n_{k}$ï¼Œå³ $n_{k}.next.next = n_{k}$ã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">n_&#123;1&#125;\rightarrow ... \rightarrow n_&#123;k-1&#125; \rightarrow n_&#123;k&#125; \rightarrow n_&#123;k+1&#125; \leftarrow ... \leftarrow n_&#123;m&#125; \leftarrow null</span><br></pre></td></tr></table></figure><ul><li>éœ€è¦å°å¿ƒçš„æ˜¯èŠ‚ç‚¹ $n_{1}$ çš„ <code>next</code> æŒ‡é’ˆéœ€è¦æŒ‡å‘ <code>null</code>ã€‚è‹¥å¿½ç•¥äº†è¿™ä¸€ç‚¹ï¼Œé“¾è¡¨ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¾ªç¯ã€‚ï¼ˆä½¿ç”¨å¤§å°ä¸º 2 çš„é“¾è¡¨æµ‹è¯•ï¼Œå¯èƒ½ä¼šæ•è·æ­¤é”™è¯¯ï¼‰</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code></li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ï¼šç”±äºä½¿ç”¨é€’å½’ï¼Œå°†ä¼šä½¿ç”¨éšå¼æ ˆç©ºé—´ï¼Œé€’å½’æ·±åº¦å¯èƒ½ä¼šè¾¾åˆ° <code>n</code> å±‚</li></ul><h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * public class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">reverseList</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> head;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode reverseTmpList = reverseList(head.next);</span><br><span class="line">        head.next.next = head;</span><br><span class="line">        head.next = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">return</span> reverseTmpList;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">reverseList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(head == <span class="literal">NULL</span> || head-&gt;next == <span class="literal">NULL</span>)&#123;</span><br><span class="line">           <span class="keyword">return</span> head;</span><br><span class="line">       &#125;</span><br><span class="line">        ListNode *reverseTmpList = reverseList(head-&gt;next);</span><br><span class="line">        head-&gt;next-&gt;next = head;</span><br><span class="line">        head-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="keyword">return</span> reverseTmpList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="617-Merge-Two-Binary-Treesï¼ˆåˆå¹¶äºŒå‰æ ‘ï¼‰"><a href="#617-Merge-Two-Binary-Treesï¼ˆåˆå¹¶äºŒå‰æ ‘ï¼‰" class="headerlink" title="617. Merge Two Binary Treesï¼ˆåˆå¹¶äºŒå‰æ ‘ï¼‰"></a>617. Merge Two Binary Treesï¼ˆåˆå¹¶äºŒå‰æ ‘ï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/merge-two-binary-trees/" target="_blank" rel="noopener">LeetCode-617.Merge Two Binary Treesï¼ˆåˆå¹¶äºŒå‰æ ‘ï¼‰</a></li></ul><h3 id="Approach-1-é€’å½’"><a href="#Approach-1-é€’å½’" class="headerlink" title="Approach 1-é€’å½’"></a>Approach 1-é€’å½’</h3><h4 id="Analysis-2"><a href="#Analysis-2" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ä½¿ç”¨é€’å½’æ–¹æ³•æ±‚è§£</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(m)</code> ã€‚é€’å½’æ–¹æ³•ä¸­ï¼Œå…±æœ‰ <code>m</code> ä¸ªèŠ‚ç‚¹éœ€è¦éå†ï¼ˆ<code>m</code> ä¸ºç»™å®šçš„ä¸¤ä¸ªäºŒå‰æ ‘èŠ‚ç‚¹æ•°ç›®çš„æœ€å°å€¼ï¼‰</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(m)</code> ã€‚é€’å½’æ ˆçš„æ·±åº¦ï¼Œæœ€å·®æƒ…å†µä¸‹æœ€å¤§å€¼å¯ä¸º <code>m</code>ã€‚é€’å½’æ·±åº¦å¹³å‡å€¼ä¸º <code>log(m)</code></li></ul><h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> TreeNode <span class="title">mergeTrees</span><span class="params">(TreeNode t1, TreeNode t2)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(t1 == <span class="keyword">null</span>) <span class="keyword">return</span> t2;</span><br><span class="line">        <span class="keyword">if</span>(t2 == <span class="keyword">null</span>) <span class="keyword">return</span> t1;</span><br><span class="line">        t1.val += t2.val;</span><br><span class="line">        t1.left = mergeTrees(t1.left,t2.left);</span><br><span class="line">        t1.right = mergeTrees(t1.right,t2.right);</span><br><span class="line">        <span class="keyword">return</span> t1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="104-Maximum-Depth-of-Binary-Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰"><a href="#104-Maximum-Depth-of-Binary-Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰" class="headerlink" title="104. Maximum Depth of Binary Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰"></a>104. Maximum Depth of Binary Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/maximum-depth-of-binary-tree/" target="_blank" rel="noopener">LeetCode-104. Maximum Depth of Binary Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰</a></li></ul><h3 id="Approach-1-é€’å½’-1"><a href="#Approach-1-é€’å½’-1" class="headerlink" title="Approach 1-é€’å½’"></a>Approach 1-é€’å½’</h3><h4 id="Analysis-3"><a href="#Analysis-3" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ä½¿ç”¨é€’å½’æ–¹æ³•æ±‚è§£</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code> ï¼šæ¯ä¸ªèŠ‚ç‚¹å‡éå†ä¸€æ¬¡ï¼Œå…¶ä¸­ <code>n</code> ä¸ºèŠ‚ç‚¹æ•°</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ï¼šæœ€ç³Ÿç³•æƒ…å†µä¸‹ï¼Œæ ‘æ˜¯å®Œå…¨ä¸å¹³è¡¡çš„ï¼Œä¾‹å¦‚æ¯ä¸ªèŠ‚ç‚¹åªæœ‰å·¦å­èŠ‚ç‚¹ï¼Œé€’å½’å°†è¢«è°ƒç”¨ <code>n</code> æ¬¡ï¼ˆæ ‘çš„é«˜åº¦ï¼‰ï¼Œæœ€å·®ç©ºé—´å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚æœ€å¥½æƒ…å†µä¸‹ï¼ˆæ ‘æ˜¯å®Œå…¨å¹³è¡¡çš„ï¼‰ï¼Œæ ‘çš„é«˜åº¦ä¸º <code>log(n)</code></li><li>é€’å½’æ ˆçš„æ·±åº¦ï¼Œæœ€å·®æƒ…å†µä¸‹æœ€å¤§å€¼å¯ä¸º <code>m</code>ã€‚é€’å½’æ·±åº¦å¹³å‡å€¼ä¸º <code>log(n)</code>ï¼Œæ­¤æ—¶ç©ºé—´å¤æ‚åº¦æ˜¯ <code>O(log(n))</code>ã€‚</li></ul><h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h4><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     TreeNode left;</span></span><br><span class="line"><span class="comment"> *     TreeNode right;</span></span><br><span class="line"><span class="comment"> *     TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line">  public <span class="built_in">int</span> max<span class="constructor">Depth(TreeNode <span class="params">root</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (root<span class="operator"> == </span>null) &#123;</span><br><span class="line">      return <span class="number">0</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">int</span> left_height = max<span class="constructor">Depth(<span class="params">root</span>.<span class="params">left</span>)</span>;</span><br><span class="line">      <span class="built_in">int</span> right_height = max<span class="constructor">Depth(<span class="params">root</span>.<span class="params">right</span>)</span>;</span><br><span class="line">      return java.lang.<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>max(left_height, right_height) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="1290-Convert-Binary-Number-in-a-Linked-List-to-Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰"><a href="#1290-Convert-Binary-Number-in-a-Linked-List-to-Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰" class="headerlink" title="1290. Convert Binary Number in a Linked List to Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰"></a>1290. Convert Binary Number in a Linked List to Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/convert-binary-number-in-a-linked-list-to-integer/" target="_blank" rel="noopener">LeetCode-1290. Convert Binary Number in a Linked List to Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰</a></li></ul><h3 id="Approach-1-æ¨¡æ‹ŸäºŒè¿›åˆ¶è½¬åè¿›åˆ¶-ä½æ“ä½œ"><a href="#Approach-1-æ¨¡æ‹ŸäºŒè¿›åˆ¶è½¬åè¿›åˆ¶-ä½æ“ä½œ" class="headerlink" title="Approach 1-æ¨¡æ‹ŸäºŒè¿›åˆ¶è½¬åè¿›åˆ¶+ä½æ“ä½œ"></a>Approach 1-æ¨¡æ‹ŸäºŒè¿›åˆ¶è½¬åè¿›åˆ¶+ä½æ“ä½œ</h3><h4 id="Analysis-4"><a href="#Analysis-4" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ç”±äºé“¾è¡¨ä¸­ä»é«˜ä½åˆ°ä½ä½å­˜æ”¾äº†æ•°å­—çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨äºŒè¿›åˆ¶è½¬åè¿›åˆ¶çš„æ–¹æ³•ï¼Œåœ¨éå†ä¸€éé“¾è¡¨çš„åŒæ—¶ï¼Œå¾—åˆ°æ•°å­—çš„åè¿›åˆ¶å€¼ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä¸ªæ•°</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code></li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ±‚è§£è¿‡ç¨‹ä¸­ï¼ˆå¦‚ä¸‹ï¼‰</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">int<span class="built_in"> sum</span> = <span class="number">0</span>;</span><br><span class="line">while<span class="built_in">(head</span> != null)&#123;</span><br><span class="line">    //sum = <span class="number">2</span><span class="built_in">*sum</span> +<span class="built_in"> head</span>.val;</span><br><span class="line">   <span class="built_in"> sum</span> =<span class="built_in"> sum</span>&lt;&lt;<span class="number">1</span> |<span class="built_in"> head</span>.val;</span><br><span class="line">   <span class="built_in"> head</span> =<span class="built_in"> head</span>.<span class="keyword">next</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span><span class="built_in"> sum</span>;</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>sum = 2*sum + head.val</code> è®¡ç®—ï¼Œä¹˜æ³•æ“ä½œè€—æ—¶æ˜¯å¤§äºä½æ“ä½œçš„ã€‚å› æ­¤ï¼Œè¯¥æ­¥éª¤å¯ä¼˜åŒ–ä¸º</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//<span class="built_in">sum</span> = <span class="number">2</span>*<span class="built_in">sum</span> + head.val;</span><br><span class="line"><span class="built_in">sum</span> = <span class="built_in">sum</span>&lt;&lt;<span class="number">1</span> | <span class="type">head</span>.val;</span><br></pre></td></tr></table></figure><blockquote><p>LeetCodeå¹³å°ï¼ŒC++è¯­è¨€ï¼Œä½¿ç”¨ä¹˜æ³•æ“ä½œ <code>sum = 2*sum + head.val</code>ï¼Œè€—æ—¶4msï¼Œå†…å­˜æ¶ˆè€—8.4Mï¼›ä½¿ç”¨ä½æ“ä½œ <code>sum = sum&lt;&lt;1 | head.val;</code>ï¼Œè€—æ—¶0msï¼Œå†…å­˜æ¶ˆè€—8.3M</p></blockquote><h4 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> singly-linked list.</span><br><span class="line"> * public class ListNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode <span class="keyword">next</span>;</span><br><span class="line"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line">class Solution &#123;</span><br><span class="line">    public int getDecimalValue(ListNode<span class="built_in"> head</span>) &#123;</span><br><span class="line">        int<span class="built_in"> sum</span> = <span class="number">0</span>;</span><br><span class="line">        while<span class="built_in">(head</span> != null)&#123;</span><br><span class="line">            //sum = <span class="number">2</span><span class="built_in">*sum</span> +<span class="built_in"> head</span>.val;</span><br><span class="line">           <span class="built_in"> sum</span> =<span class="built_in"> sum</span>&lt;&lt;<span class="number">1</span> |<span class="built_in"> head</span>.val;</span><br><span class="line">           <span class="built_in"> head</span> =<span class="built_in"> head</span>.<span class="keyword">next</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span><span class="built_in"> sum</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * <span class="type">Definition</span> <span class="keyword">for</span> singly-linked <span class="built_in">list</span>.</span><br><span class="line"> * <span class="keyword">struct</span> <span class="type">ListNode</span> &#123;</span><br><span class="line"> *     <span class="built_in">int</span> <span class="keyword">val</span>;</span><br><span class="line"> *     <span class="type">ListNode</span> *next;</span><br><span class="line"> *     <span class="type">ListNode</span>(<span class="built_in">int</span> x) : <span class="keyword">val</span>(x), next(<span class="type">NULL</span>) &#123;&#125;</span><br><span class="line"> * &#125;;</span><br><span class="line"> */</span><br><span class="line"><span class="keyword">class</span> <span class="type">Solution</span> &#123;</span><br><span class="line">public:</span><br><span class="line">    <span class="built_in">int</span> getDecimalValue(<span class="type">ListNode</span>* head) &#123;</span><br><span class="line">        <span class="built_in">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(head)&#123;</span><br><span class="line">            sum = sum&lt;&lt;<span class="number">1</span> | head-&gt;<span class="keyword">val</span>;</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        return sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="709-To-Lower-Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰"><a href="#709-To-Lower-Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰" class="headerlink" title="709. To Lower Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰"></a>709. To Lower Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰</h2><h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/to-lower-case/" target="_blank" rel="noopener">LeetCode-709. To Lower Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰</a></li></ul><h3 id="Approach-1-ASCIIç¼–ç è½¬æ¢"><a href="#Approach-1-ASCIIç¼–ç è½¬æ¢" class="headerlink" title="Approach 1-ASCIIç¼–ç è½¬æ¢"></a>Approach 1-ASCIIç¼–ç è½¬æ¢</h3><h4 id="Analysis-5"><a href="#Analysis-5" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ä½¿ç”¨ ASCII ç¼–ç è¿›è¡Œå¤§å°å†™å­—æ¯è½¬æ¢ã€‚å¤§å†™å­—æ¯ <code>A~Z</code> çš„ ASCIIå€¼ä¸º <code>65~90</code>;å°å†™å­—æ¯ <code>a~z</code> çš„ ASCIIå€¼ä¸º <code>97~122</code>ã€‚å°å†™å­—æ¯ <code>a</code> å’Œå¤§å†™å­—æ¯ <code>A</code> çš„ ASCII ç å·®å€¼ä¸º 32ã€‚</li><li>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯å­—ç¬¦ä¸²é•¿åº¦</li><li>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(1)</code></li></ul><p>æ›´è¿›ä¸€æ­¥ï¼Œè§‚å¯Ÿå¤§å°å†™å­—æ¯ ASCII ç çš„äºŒè¿›åˆ¶</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A---<span class="number">-65</span>----<span class="number">-1000001</span></span><br><span class="line">a---<span class="number">-97</span>----<span class="number">-1100001</span></span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œåœ¨å¤§å°è½¬æ¢æ—¶ï¼Œå¯ä½¿ç”¨ä½è¿ç®—ï¼Œè¿›è¡Œæˆ–æ“ä½œ</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">char c = (<span class="name">char</span>)(<span class="name">str</span>.charAt(<span class="name">i</span>) | (<span class="name">char</span>)(<span class="number">32</span>))<span class="comment">;</span></span><br></pre></td></tr></table></figure><h4 id="Solution-5"><a href="#Solution-5" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Solution &#123;</span><br><span class="line">    public String <span class="keyword">to</span><span class="constructor">LowerCase(String <span class="params">str</span>)</span> &#123;</span><br><span class="line">        StringBuilder res = <span class="keyword">new</span> <span class="constructor">StringBuilder()</span>;</span><br><span class="line">        for(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;str.length<span class="literal">()</span>;i++)&#123;</span><br><span class="line">            <span class="built_in">char</span> c = (<span class="built_in">char</span>)(str.<span class="built_in">char</span><span class="constructor">At(<span class="params">i</span>)</span> <span class="pattern-match">| (<span class="built_in">char</span>)(32));</span></span><br><span class="line"><span class="pattern-match">            res.append(c);</span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match">        return res.<span class="keyword">to</span><span class="constructor">String()</span>;</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match">&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ–¹æ³•ï¼Œè€—æ—¶0msï¼Œå†…å­˜34.2MBã€‚å¦‚æœä½¿ç”¨Javaå†…ç½®çš„ <code>toLowerCase()</code> æ–¹æ³•ï¼Œè€—æ—¶0msï¼Œå†…å­˜34.1MBã€‚</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String toLowerCase(String <span class="keyword">str</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">str</span>.toLowerCase();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    string toLowerCase(string <span class="keyword">str</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="keyword">str</span>.length();i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">str</span>[i] &gt;= <span class="string">'A'</span> &amp;&amp; <span class="keyword">str</span>[i] &lt;= <span class="string">'Z'</span>)&#123;</span><br><span class="line">                <span class="keyword">str</span>[i] += <span class="number">32</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">str</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/categories/LeetCode/"/>
    
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/tags/Algorithm/"/>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ç›®æ•´ç†</title>
    <link href="https://lbs0912.github.io/2020/02/22/algorithm-dp-1/"/>
    <id>https://lbs0912.github.io/2020/02/22/algorithm-dp-1/</id>
    <published>2020-02-22T06:25:26.000Z</published>
    <updated>2020-02-23T08:48:04.363Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½•å’Œæ±‡æ€»åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ç›®</li></ul><a id="more"></a><h2 id="ä¹°è‹¹æœ"><a href="#ä¹°è‹¹æœ" class="headerlink" title="ä¹°è‹¹æœ"></a>ä¹°è‹¹æœ</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://www.nowcoder.com/questionTerminal/61cfbb2e62104bc8aa3da5d44d38a6ef?toCommentId=449308" target="_blank" rel="noopener">åŠ¨æ€è§„åˆ’-ä¹°è‹¹æœ | ç‰›å®¢ç½‘</a></li><li>å°æ˜“å»é™„è¿‘çš„å•†åº—ä¹°è‹¹æœï¼Œå¥¸è¯ˆçš„å•†è´©ä½¿ç”¨äº†æ†ç»‘äº¤æ˜“ï¼Œåªæä¾› 6 ä¸ªæ¯è¢‹å’Œ 8 ä¸ªæ¯è¢‹çš„åŒ…è£…(åŒ…è£…ä¸å¯æ‹†åˆ†)ã€‚ å¯æ˜¯å°æ˜“ç°åœ¨åªæƒ³è´­ä¹°æ°å¥½ <code>n</code> ä¸ªè‹¹æœï¼Œå°æ˜“æƒ³è´­ä¹°å°½é‡å°‘çš„è¢‹æ•°æ–¹ä¾¿æºå¸¦ã€‚å¦‚æœä¸èƒ½è´­ä¹°æ°å¥½ <code>n</code> ä¸ªè‹¹æœï¼Œå°æ˜“å°†ä¸ä¼šè´­ä¹°ã€‚</li><li>è¾“å…¥æè¿°: è¾“å…¥ä¸€ä¸ªæ•´æ•°nï¼Œè¡¨ç¤ºå°æ˜“æƒ³è´­ä¹° <code>n(1 â‰¤ n â‰¤ 100)</code> ä¸ªè‹¹æœ</li><li>è¾“å‡ºæè¿°: è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºæœ€å°‘éœ€è¦è´­ä¹°çš„è¢‹æ•°ï¼Œå¦‚æœä¸èƒ½ä¹°æ°å¥½ <code>n</code> ä¸ªè‹¹æœåˆ™è¾“å‡º <code>-1</code></li><li>æµ‹è¯•ç”¨ä¾‹</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//input</span></span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="comment">//output</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure><h3 id="Approach-1-åŠ¨æ€è§„åˆ’ï¼ˆé€šè§£ï¼‰"><a href="#Approach-1-åŠ¨æ€è§„åˆ’ï¼ˆé€šè§£ï¼‰" class="headerlink" title="Approach 1-åŠ¨æ€è§„åˆ’ï¼ˆé€šè§£ï¼‰"></a>Approach 1-åŠ¨æ€è§„åˆ’ï¼ˆé€šè§£ï¼‰</h3><h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>é‡‡ç”¨åŠ¨æ€è§„åˆ’æ–¹æ³•æ±‚è§£ã€‚</li><li>åˆ›å»ºä¸€ä¸ª <code>vector</code> å®¹å™¨ <code>steps</code>ï¼Œ<code>steps[i]</code> è¡¨ç¤ºè´­ä¹° <code>i</code> ä¸ªè‹¹æœæ‰€éœ€çš„æœ€å°è¢‹æ•°ã€‚</li><li>åˆå§‹åŒ–ä¸º <code>steps</code> å®¹å™¨ä¸º <code>INT_MAX</code>ã€‚</li><li>ä»è´­ä¹°1ä¸ªè‹¹æœå¼€å§‹éå†ï¼Œè‹¥ <code>steps[i]</code> ä¸º <code>INT_MAX</code>ï¼Œè¡¨ç¤ºæ— æ³•è´­ä¹°è¯¥ä¸ªæ•°çš„è‹¹æœï¼Œç›´æ¥å¼€å§‹ä¸‹æ¬¡å¾ªç¯ã€‚</li><li>è‹¥ <code>steps[i]</code> ä¸ä¸º <code>INT_MAX</code>ï¼Œè¡¨ç¤ºè¯¥ä¸ªæ•°çš„è‹¹æœå¯ä»¥è´­ä¹°ï¼Œè¿›è¡ŒåŠ¨æ€è§„åˆ’æ±‚è§£ã€‚</li><li>åŠ¨æ€è§„åˆ’çš„è½¬ç§»æ–¹ç¨‹ä¸º</li></ul><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">steps<span class="string">[i+j]</span> = min(steps<span class="string">[i]</span>+<span class="number">1</span>,steps<span class="string">[i+j]</span>)   //jä¸º<span class="number">6</span>æˆ–<span class="number">8</span></span><br><span class="line">steps<span class="string">[0]</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure><ul><li>åŠ¨æ€è§„åˆ’çš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/nowcode-buy-apple-1.png" alt="nowcode-buy-apple-1.png"></p><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> amounts;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;amounts;</span><br><span class="line">    <span class="comment">//å°äº6æƒ…å†µå¤„ç†</span></span><br><span class="line">    <span class="keyword">if</span>(amounts &lt; <span class="number">6</span>)&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; steps(amounts+<span class="number">1</span>,INT_MAX);</span><br><span class="line">    steps[<span class="number">6</span>] = <span class="number">1</span>;</span><br><span class="line">    steps[<span class="number">8</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">6</span>;i&lt;=amounts;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(steps[i] == INT_MAX)&#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i+<span class="number">6</span> &lt;= amounts)&#123;</span><br><span class="line">                steps[i+<span class="number">6</span>] = min(steps[i]+<span class="number">1</span>,steps[i+<span class="number">6</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i+<span class="number">8</span> &lt;= amounts)&#123;</span><br><span class="line">                steps[i+<span class="number">8</span>] = min(steps[i]+<span class="number">1</span>,steps[i+<span class="number">8</span>]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    steps[amounts] = (steps[amounts] == INT_MAX)? <span class="number">-1</span>:steps[amounts];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;steps[amounts]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-è´ªå©ªç®—æ³•"><a href="#Approach-2-è´ªå©ªç®—æ³•" class="headerlink" title="Approach 2-è´ªå©ªç®—æ³•"></a>Approach 2-è´ªå©ªç®—æ³•</h3><h4 id="Analysis-1"><a href="#Analysis-1" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>é‡‡ç”¨è´ªå©ªç®—æ³•æ±‚è§£ã€‚</li><li>ä¼˜å…ˆé€‰å–æ¯è¢‹å«æœ‰ 8 ä¸ªè‹¹æœçš„åŒ…è£…ã€‚è‹¥è¿˜æœ‰ä½™æ•°ï¼Œåˆ™å†ç”¨ 6 ä¸ªè£…çš„åŒ…è£…å»è´­ä¹°ã€‚</li><li>å¦‚æœä¸è¡Œçš„è¯ï¼Œåˆ™å°† 8 ä¸ªè£…çš„ä¸ªæ•°å‡å» 1 ä¸ªï¼Œè¿›è¡Œå›æº¯ï¼Œå†ç”¨ 6 åŒ…è£…çš„å»è´­ä¹°ã€‚</li><li>å¦‚æœè¿˜ä¸è¡Œçš„è¯ï¼Œå†æ¬¡å›æº¯ï¼Œç›´åˆ°è´­ä¹° 8 åŒ…è£…çš„ä¸ªæ•°ä¸º 0ã€‚</li></ul><blockquote><p><strong>è´ªå©ªç®—æ³•å¹¶ä¸ä¸€å®šèƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯ä¸€ä¸ªå¯è¡Œçš„ï¼Œè¾ƒå¥½çš„è§£ã€‚</strong> ä¾‹å¦‚ï¼Œç»™å®šç¡¬å¸ <code>coins=[1,2,10,25]</code>ï¼Œé‡‘é¢æ€»æ•° <code>amounts=30</code>ï¼Œä¸é™åˆ¶æ¯ç§å¸å€¼çš„ç¡¬å¸æ•°é‡ï¼Œè¦æ±‚ç”¨æ‰€ç»™ç¡¬å¸å‡‘å‡ºæ‰€éœ€é‡‘é¢ï¼Œå¹¶ä¸”ç¡¬å¸æ•°é‡æœ€å°‘ã€‚è‹¥é‡‡ç”¨è´ªå©ªç®—æ³•æ±‚è§£ï¼Œéœ€è¦ 6 æšï¼ˆ25+5*1ï¼‰ç¡¬å¸ã€‚ è‹¥é‡‡ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œæ‰€éœ€ 3 æšï¼ˆ10+10+10ï¼‰ç¡¬å¸ã€‚</p></blockquote><p>ä¸‹é¢å¯¹ä½¿ç”¨è´ªå©ªç®—æ³•èƒ½å¦å¾—åˆ°æœ€ä¼˜è§£è¿›è¡Œåˆ†æã€‚</p><ul><li>é¦–å…ˆï¼Œ6 å’Œ 8 éƒ½æ˜¯å¶æ•°ã€‚å› æ­¤ï¼Œèƒ½å‡‘å‡ºçš„ä¸ªæ•°ä¹Ÿä¸€å®šæ˜¯å¶æ•°ã€‚ç¨‹åºä¸­è‹¥è‹¹æœæ€»æ•°æ˜¯å¥‡æ•°ï¼Œå¯ä»¥ç›´æ¥è¿”å› <code>-1</code>ã€‚</li><li>å†æ¬¡ï¼Œå¶æ•°ä¸ªè‹¹æœæ•°å¯¹ 8 å–æ¨¡ï¼Œå…¶ç»“æœåªå¯èƒ½ä¸º <code>0,2,4,6</code>ã€‚</li><li>è‹¥ä½™æ•°ä¸º 6 æˆ–è€… 0ï¼Œåˆ™å¯ä»¥ç›´æ¥ç”¨ 6 åŒ…è£…æƒ…å†µå¤„ç†ï¼Œä¸éœ€è¦å›æº¯è´­ä¹° 8 åŒ…è£…çš„æƒ…å†µã€‚</li><li>è‹¥ä½™æ•°ä¸º 4ï¼Œåªéœ€å›æº¯ 1 æ¬¡å³å¯ï¼Œå› ä¸º<code>8+4=12</code>, <code>12%6=0</code>ã€‚</li><li>è‹¥ä½™æ•°ä¸º 2ï¼Œåªéœ€å›æº¯ 2 æ¬¡å³å¯ï¼Œå› ä¸º<code>8+8+2=18, 18%6=0</code>ã€‚</li></ul><p>ç»¼ä¸Šï¼Œæœ¬é¢˜æƒ…å†µä½¿ç”¨è´ªå©ªç®—æ³•ä¸€å®šèƒ½å¾—åˆ°æœ€ä¼˜è§£ã€‚</p><h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> maxPackages(<span class="built_in">int</span> <span class="built_in">num</span>) &#123;</span><br><span class="line">    <span class="built_in">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">int</span> mul, remains;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">num</span>%<span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">//éå¶æ•°ç›´æ¥è¿”å›</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">num</span> % <span class="number">8</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        res += <span class="built_in">num</span> / <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        mul = <span class="built_in">num</span> / <span class="number">8</span>;  <span class="comment">//å€æ•°</span></span><br><span class="line">        remains = <span class="built_in">num</span> % <span class="number">8</span>;</span><br><span class="line">        res += mul;</span><br><span class="line">        <span class="built_in">num</span> = <span class="built_in">num</span> % <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">while</span> (mul &gt;= <span class="number">0</span>) &#123;  <span class="comment">//å›æº¯8åŒ…è£…</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">num</span> % <span class="number">6</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                res += <span class="built_in">num</span> / <span class="number">6</span>;</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                mul--;  <span class="comment">//å›æº¯  8åŒ…è£…è´­ä¹°è¢‹æ•°-1</span></span><br><span class="line">                res--;</span><br><span class="line">                <span class="built_in">num</span> = <span class="built_in">num</span> + <span class="number">8</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> main() &#123;</span><br><span class="line">    <span class="built_in">int</span> <span class="built_in">num</span>;</span><br><span class="line">    <span class="keyword">while</span> (cin &gt;&gt; <span class="built_in">num</span>) &#123;</span><br><span class="line">        cout &lt;&lt; maxPackages(<span class="built_in">num</span>) &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-3-æ•°å­—åˆ†ææ±‚è§£"><a href="#Approach-3-æ•°å­—åˆ†ææ±‚è§£" class="headerlink" title="Approach 3-æ•°å­—åˆ†ææ±‚è§£"></a>Approach 3-æ•°å­—åˆ†ææ±‚è§£</h3><h4 id="Analysis-2"><a href="#Analysis-2" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>å¯¹æ•°å­—ç‰¹å¾è¿›è¡Œåˆ†æã€‚</li><li>é¦–å…ˆï¼Œ6 å’Œ 8 éƒ½æ˜¯å¶æ•°ã€‚å› æ­¤ï¼Œ<strong>èƒ½å‡‘å‡ºçš„ä¸ªæ•°ä¹Ÿä¸€å®šæ˜¯å¶æ•°ã€‚ç¨‹åºä¸­è‹¥è‹¹æœæ€»æ•°æ˜¯å¥‡æ•°ï¼Œå¯ä»¥ç›´æ¥è¿”å›-1ã€‚</strong></li><li>å†æ¬¡ï¼Œå¶æ•°ä¸ªè‹¹æœæ•°å¯¹ 8 å–æ¨¡ï¼Œå…¶ç»“æœåªå¯èƒ½ä¸º <code>0,2,4,6</code>ã€‚</li><li>è‹¥ä½™æ•°ä¸º 6 æˆ–è€… 0ï¼Œåˆ™å¯ä»¥ç›´æ¥ç”¨ 6 åŒ…è£…æƒ…å†µå¤„ç†ï¼Œä¸éœ€è¦å›æº¯è´­ä¹° 8 åŒ…è£…çš„æƒ…å†µã€‚</li><li>è‹¥ä½™æ•°ä¸º 4ï¼Œåªéœ€å›æº¯ 1 æ¬¡å³å¯ï¼Œå› ä¸º <code>8+4=12, 12%6=0</code>ã€‚</li><li>è‹¥ä½™æ•°ä¸º 2ï¼Œåªéœ€å›æº¯ 2 æ¬¡å³å¯ï¼Œå› ä¸º <code>8+8+2=18, 18%6=0</code>ã€‚</li></ul><p>ç»¼ä¸Šï¼Œå¯ä»¥é‡‡ç”¨å¦‚ä¸‹æ€è·¯è¿›è¡Œå¤„ç†ã€‚ï¼ˆç”±äºæ•°å­— 6 å’Œ 8 çš„ç‰¹å¾ï¼Œæœ¬æ–¹æ³•åªé€‚ç”¨äºæœ¬é¢˜ï¼Œä¸å…·æœ‰é€šç”¨æ€§ï¼ŒåŠ¨æ€è§„åˆ’ä¸ºæœ¬é¢˜é€šç”¨è§£æ³•ï¼‰</p><ul><li>æƒ…å†µ1ï¼šè‹¥ <code>num</code> ä¸æ˜¯å¶æ•°ï¼Œåˆ™ç›´æ¥è¿”å› <code>-1</code></li><li>æƒ…å†µ2ï¼šè‹¥ <code>num%8=0</code>ï¼Œåˆ™è¿”å› <code>num/8</code></li><li>æƒ…å†µ3ï¼šè‹¥ <code>num%8 !=0</code>ï¼Œåˆ™åªéœ€å›æº¯ 1 æ¬¡æˆ–è€… 2 æ¬¡ 8 åŒ…è£…è´­ä¹°ä¸ªæ•°ï¼Œå°±å¯ä»¥æ±‚è§£ã€‚<ul><li>å›æº¯ 1 æ¬¡ï¼Œå…¶ç»“æœä¸º <code>n/8-1+2= n/8+1</code></li><li>å›æº¯ 2 æ¬¡ï¼Œå…¶ç»“æœä¸º <code>n/8-2+3 = n/8+1</code></li><li>å› æ­¤ï¼Œå¯ä»¥æƒ…å†µ3ä¸‹ï¼Œå¯ä»¥è¿”å› <code>n/8+1</code></li></ul></li></ul><h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; num) &#123;</span><br><span class="line">        <span class="keyword">if</span>(num%<span class="number">2</span> != <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="number">-1</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(num%<span class="number">8</span> == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;num/<span class="number">8</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">cout</span>&lt;&lt;<span class="number">1</span>+num/<span class="number">8</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è·³çŸ³æ¿"><a href="#è·³çŸ³æ¿" class="headerlink" title="è·³çŸ³æ¿"></a>è·³çŸ³æ¿</h2><h3 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h3><ul><li><a href="https://www.nowcoder.com/questionTerminal/4284c8f466814870bae7799a07d49ec8" target="_blank" rel="noopener">è·³çŸ³æ¿ | ç‰›å®¢ç½‘</a></li></ul><p>å°æ˜“æ¥åˆ°äº†ä¸€æ¡çŸ³æ¿è·¯å‰ï¼Œæ¯å—çŸ³æ¿ä¸Šä»1æŒ¨ç€ç¼–å·ä¸ºï¼š1ã€2ã€3â€¦â€¦.</p><p>è¿™æ¡çŸ³æ¿è·¯è¦æ ¹æ®ç‰¹æ®Šçš„è§„åˆ™æ‰èƒ½å‰è¿›ï¼šå¯¹äºå°æ˜“å½“å‰æ‰€åœ¨çš„ç¼–å·ä¸ºKçš„çŸ³æ¿ï¼Œå°æ˜“å•æ¬¡åªèƒ½å¾€å‰è·³Kçš„ä¸€ä¸ªçº¦æ•°(ä¸å«1å’ŒK)æ­¥ï¼Œå³è·³åˆ°K+X(Xä¸ºKçš„ä¸€ä¸ªé1å’Œæœ¬èº«çš„çº¦æ•°)çš„ä½ç½®ã€‚ å°æ˜“å½“å‰å¤„åœ¨ç¼–å·ä¸ºNçš„çŸ³æ¿ï¼Œä»–æƒ³è·³åˆ°ç¼–å·æ°å¥½ä¸ºMçš„çŸ³æ¿å»ï¼Œå°æ˜“æƒ³çŸ¥é“æœ€å°‘éœ€è¦è·³è·ƒå‡ æ¬¡å¯ä»¥åˆ°è¾¾ã€‚</p><ul><li>ä¾‹å¦‚</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">N = <span class="number">4</span>ï¼ŒM = <span class="number">24</span>ï¼š</span><br><span class="line"><span class="number">4</span>-&gt;<span class="number">6</span>-&gt;<span class="number">8</span>-&gt;<span class="number">12</span>-&gt;<span class="number">18</span>-&gt;<span class="number">24</span></span><br></pre></td></tr></table></figure><p>äºæ˜¯å°æ˜“æœ€å°‘éœ€è¦è·³è·ƒ5æ¬¡ï¼Œå°±å¯ä»¥ä»4å·çŸ³æ¿è·³åˆ°24å·çŸ³æ¿ã€‚</p><ul><li>è¾“å…¥æè¿°</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ä¸ºä¸€è¡Œï¼Œæœ‰ä¸¤ä¸ªæ•´æ•°Nï¼ŒMï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚ (<span class="number">4</span> â‰¤ N â‰¤ <span class="number">100000</span>) (N â‰¤ M â‰¤ <span class="number">100000</span>)</span><br></pre></td></tr></table></figure><ul><li>è¾“å‡ºæè¿°</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¾“å‡ºå°æ˜“æœ€å°‘éœ€è¦è·³è·ƒçš„æ­¥æ•°,å¦‚æœä¸èƒ½åˆ°è¾¾è¾“å‡º<span class="number">-1</span></span><br></pre></td></tr></table></figure><ul><li>æµ‹è¯•ç”¨ä¾‹</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line"><span class="number">4</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¾“å‡º</span></span><br><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="Approach-1-åŠ¨æ€è§„åˆ’"><a href="#Approach-1-åŠ¨æ€è§„åˆ’" class="headerlink" title="Approach 1-åŠ¨æ€è§„åˆ’"></a>Approach 1-åŠ¨æ€è§„åˆ’</h3><h4 id="Analysis-3"><a href="#Analysis-3" class="headerlink" title="Analysis"></a>Analysis</h4><p>é‡‡ç”¨åŠ¨æ€è§„åˆ’æ€æƒ³æ±‚è§£ã€‚åˆ›å»ºä¸€ä¸ª <code>vector</code> å®¹å™¨ <code>steps</code>ï¼Œ<code>steps[i]</code> è¡¨ç¤ºåˆ°è¾¾ i å·çŸ³æ¿æ‰€éœ€çš„æœ€å°æ­¥æ•°ã€‚</p><ul><li>åˆå§‹åŒ–ä¸º <code>steps</code> å®¹å™¨ä¸º <code>INT_MAX</code>ã€‚</li><li>ä»åºå· N çš„çŸ³æ¿å¼€å§‹é€ä¸ªéå†ï¼Œè‹¥ <code>steps[i]</code>ä¸º <code>INT_MAX</code>ï¼Œè¡¨ç¤ºè¯¥ç‚¹ä¸å¯åˆ°è¾¾ï¼Œç›´æ¥å¼€å§‹ä¸‹æ¬¡å¾ªç¯ã€‚</li><li>è‹¥ <code>steps[i]</code> ä¸ä¸º <code>INT_MAX</code>ï¼Œè¡¨ç¤ºè¯¥ç‚¹å¯ä»¥åˆ°è¾¾ã€‚</li></ul><p>åŠ¨æ€è§„åˆ’çš„è½¬ç§»æ–¹ç¨‹ä¸º</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">steps<span class="string">[i]</span> = INT_MAX    //åˆå§‹åŒ–æ‰€æœ‰å€¼ä¸ºINT_MAX</span><br><span class="line">//iä¸ºçŸ³æ¿ç¼–å·ï¼Œj=<span class="number">1</span>,<span class="number">2</span>...M-<span class="number">1</span></span><br><span class="line">// è‹¥jä¸ºiçš„çº¦æ•°ï¼Œåˆ™ steps<span class="string">[i+j]</span> = steps<span class="string">[i]</span>+<span class="number">1</span></span><br><span class="line">steps<span class="string">[i+j]</span> = min(steps<span class="string">[i]</span>+<span class="number">1</span>,steps<span class="string">[i+j]</span>)   </span><br><span class="line">steps<span class="string">[N]</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h4><p>ä¸‹é¢ç»™å‡ºä»£ç å®ç°</p><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;climits&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N,M;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span>&gt;&gt;N&gt;&gt;M)&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; steps(M+<span class="number">1</span>,INT_MAX);</span><br><span class="line">        steps[N] = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=N;i&lt;=M;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(steps[i] == INT_MAX)&#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">2</span>;(j*j)&lt;=i;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i%j == <span class="number">0</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i+j &lt;= M)&#123;</span><br><span class="line">                        steps[i+j] = min(steps[i]+<span class="number">1</span>,steps[i+j]);</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//å¦‚æœjæ˜¯çº¦æ•°ï¼Œé‚£ä¹ˆ(i/j)ä¹Ÿæ˜¯çº¦æ•°</span></span><br><span class="line">                    <span class="keyword">if</span>(i+(i/j) &lt;= M)&#123;</span><br><span class="line">                        steps[i+(i/j)] = min(steps[i]+<span class="number">1</span>,steps[i+(i/j)]);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(steps[M] == INT_MAX)&#123;</span><br><span class="line">            steps[M] = <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;steps[M]&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/leetcode/nowcode-dp-demo2-1.png" alt=""></p><p>æ­¤å¤„ç»™å‡ºä¸€ä¸ªå¸¸è§„çš„ä¼˜åŒ–é¡¹è¯´æ˜ï¼Œä¸Šè¿°ä»£ç åœ¨åˆ¤æ–­ <code>for</code> å¾ªç¯æ—¶ï¼Œé™åˆ¶å¾ªç¯ç»ˆæ­¢æ¡ä»¶ä¸º <code>(j*j)&lt;=i</code>ï¼Œå¯¹äºå¤§äº <code>sqrt(i)</code> çš„çº¦æ•°ï¼Œåœ¨åŒä¸€ä¸ªforå¾ªç¯ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œå³</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">for(<span class="name">int</span> j=2<span class="comment">;(j*j)&lt;=i;j++)&#123;</span></span><br><span class="line">    if(<span class="name">i</span>%j == <span class="number">0</span>)&#123;</span><br><span class="line">        if(<span class="name">i+j</span> &lt;= M)&#123;</span><br><span class="line">          ...</span><br><span class="line">        &#125;</span><br><span class="line">        //å¦‚æœjæ˜¯çº¦æ•°ï¼Œé‚£ä¹ˆ(<span class="name">i/j</span>)ä¹Ÿæ˜¯çº¦æ•°</span><br><span class="line">        if(<span class="name">i+</span>(<span class="name">i/j</span>) &lt;= M)&#123;</span><br><span class="line">           ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å¯ä»¥æ˜æ˜¾å‡å°‘forå¾ªç¯æ¬¡æ•°ï¼Œé’ˆå¯¹<code>N=4ï¼ŒM=24</code>çš„æƒ…å†µï¼Œä¸Šè¿°ä»£ç ä¼šæ‰§è¡Œ10æ¬¡å¾ªç¯ã€‚å¦‚æœä½¿ç”¨ä¸‹è¿°ä»£ç ï¼Œå°†ä¼šæ‰§è¡Œ15æ¬¡ä»£ç ï¼ˆåœ¨ç‰›å®¢ç½‘ç³»ç»Ÿä¸Šï¼Œä¼šè¢«å½“åšè¶…æ—¶å¤„ç†ï¼‰</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(int <span class="built_in">j</span>=<span class="number">2</span>;<span class="built_in">j</span>&lt;<span class="built_in">i</span>;<span class="built_in">j</span>++)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">i</span><span class="comment">%j == 0)&#123;</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">i</span>+<span class="built_in">j</span> &lt;= M)&#123;</span><br><span class="line">          ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-è´ªå©ªç®—æ³•-1"><a href="#Approach-2-è´ªå©ªç®—æ³•-1" class="headerlink" title="Approach 2-è´ªå©ªç®—æ³•"></a>Approach 2-è´ªå©ªç®—æ³•</h3><h4 id="Analysis-4"><a href="#Analysis-4" class="headerlink" title="Analysis"></a>Analysis</h4><p>(æœ¬é¢˜ç›®ï¼Œä½¿ç”¨è´ªå©ªç®—æ³•å¹¶ä¸èƒ½ACï¼Œæ­¤å¤„ç»™å‡ºçš„è´ªå©ªç®—æ³•ï¼Œä»…ä½œä¸ºä¸€ä¸ªç¤ºä¾‹ç»™å‡ºï¼Œç”¨äºåˆ†æè´ªå©ªç®—æ³•çš„ä½¿ç”¨åœºæ™¯)</p><p><strong>è´ªå©ªç®—æ³•å¹¶ä¸ä¸€å®šèƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯ä¸€ä¸ªå¯è¡Œçš„ï¼Œè¾ƒå¥½çš„è§£ã€‚</strong></p><p>è¯¥é—®é¢˜è‹¥é‡‡ç”¨è´ªå©ªç®—æ³•æ±‚è§£ï¼Œå¹¶ä¸ä¼šå¾—åˆ°æœ€ä¼˜è§£ï¼Œåªä¼šå¾—åˆ°ä¸€ä¸ªå¯è¡Œçš„ï¼Œè¾ƒå¥½çš„è§£ã€‚ä¾‹å¦‚ï¼Œä¸‹è¿°ç¨‹åºä¸­é‡‡ç”¨äº†è´ªå©ªç®—æ³•æ±‚è§£ã€‚æ¯æ¬¡éƒ½é€‰å–æœ€å¤§çš„çº¦æ•°å‰è¿›ä¸€æ­¥ã€‚è‹¥åç»­å‘ç”Ÿä¸å¯åˆ°è¾¾ç›®æ ‡ç‚¹ï¼Œåˆ™è¿›è¡Œå›æº¯ï¼Œå–ç¬¬2å¤§çš„çº¦æ•°ä½œä¸ºæ­¥è¿›å€¼ã€‚<strong>ä¸‹è¿°ç¨‹åºé€šè¿‡ç‡ä¸º80%ï¼Œå¹¶ä¸èƒ½ACã€‚ä¾‹å¦‚ï¼Œå¯¹äºN=676, M=12948æƒ…å†µï¼Œè´ªå©ªç®—æ³•æ±‚è§£ä¸º13æ­¥ï¼Œè€ŒåŠ¨æ€è§„åˆ’ç®—æ³•æ±‚è§£ä¸º10æ­¥ã€‚</strong></p><p>è´ªå©ªç®—æ³•å¹¶ä¸ä¸€å®šèƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯ä¸€ä¸ªå¯è¡Œçš„ï¼Œè¾ƒå¥½çš„è§£ã€‚ä¾‹å¦‚ï¼Œç»™å®šç¡¬å¸coins=[1,2,10,25]ï¼Œé‡‘é¢æ€»æ•°amounts=30ï¼Œä¸é™åˆ¶æ¯ç§å¸å€¼çš„ç¡¬å¸æ•°é‡ï¼Œè¦æ±‚ç”¨æ‰€ç»™ç¡¬å¸å‡‘å‡ºæ‰€éœ€é‡‘é¢ï¼Œå¹¶ä¸”ç¡¬å¸æ•°é‡æœ€å°‘ã€‚è‹¥é‡‡ç”¨è´ªå©ªç®—æ³•æ±‚è§£ï¼Œéœ€è¦6æšï¼ˆ25+5*1ï¼‰ç¡¬å¸ã€‚ è‹¥é‡‡ç”¨åŠ¨æ€è§„åˆ’æ±‚è§£ï¼Œæ‰€éœ€3æšï¼ˆ10+10+10ï¼‰ç¡¬å¸ã€‚ â€” è´ªå©ªç®—æ³•</p><h4 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¨‹åºé€šè¿‡ç‡ä¸º80%ï¼Œå¹¶ä¸èƒ½AC</span></span><br><span class="line"><span class="comment">//å¯¹äºN=676, M=12948æƒ…å†µï¼Œè´ªå©ªç®—æ³•æ±‚è§£ä¸º13æ­¥ï¼Œè€ŒåŠ¨æ€è§„åˆ’ç®—æ³•æ±‚è§£ä¸º10æ­¥ã€‚</span></span><br><span class="line"><span class="comment">// è´ªå©ªç®—æ³•å¹¶ä¸ä¸€å®šèƒ½å¾—åˆ°æœ€ä¼˜è§£ï¼Œä½†æ˜¯ä¸€ä¸ªå¯è¡Œçš„ï¼Œè¾ƒå¥½çš„è§£ã€‚</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">stepSearch</span><span class="params">(<span class="keyword">int</span> N, <span class="keyword">int</span> M)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N &gt; M) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (N == M) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i&lt;N; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i*(N / i) == N) &#123;</span><br><span class="line">            res++;</span><br><span class="line">            <span class="keyword">if</span> (stepSearch(N + N/i, M) != <span class="number">-1</span>) &#123;</span><br><span class="line">                res += stepSearch(N + N/i, M);</span><br><span class="line">                <span class="keyword">return</span> res;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                res--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N, M;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; N &gt;&gt; M) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; stepSearch(N, M) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½•å’Œæ±‡æ€»åŠ¨æ€è§„åˆ’ç»å…¸é¢˜ç›®&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/categories/Algorithm/"/>
    
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/tags/Algorithm/"/>
    
      <category term="DP" scheme="https://lbs0912.github.io/tags/DP/"/>
    
      <category term="åŠ¨æ€è§„åˆ’" scheme="https://lbs0912.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
  </entry>
  
  <entry>
    <title>LeetCodeé¢˜è§£-001</title>
    <link href="https://lbs0912.github.io/2020/02/22/leetcode-001/"/>
    <id>https://lbs0912.github.io/2020/02/22/leetcode-001/</id>
    <published>2020-02-22T02:35:26.000Z</published>
    <updated>2020-02-23T08:48:04.364Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•</li></ul><a id="more"></a><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><ul><li><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode-141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">LeetCode-142. Linked List Cycle IIï¼ˆç¯å½¢é“¾è¡¨ IIï¼‰</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/add-digits/?tab=Description" target="_blank" rel="noopener">LeetCode-258. Add Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰</a> - æ•°å­—æ¨å¯¼ï¼ˆæ•°å­—æ ¹ï¼‰</li><li><a href="https://leetcode.com/problems/hamming-distance/" target="_blank" rel="noopener">LeetCode-461. Hamming Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰</a> - ä½è¿ç®—</li><li><a href="https://leetcode.com/problems/island-perimeter/?tab=Description" target="_blank" rel="noopener">LeetCode-463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰</a> - å¸¸è§„è®¡ç®—</li></ul><h2 id="141-Linked-List-Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰"><a href="#141-Linked-List-Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰" class="headerlink" title="141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰"></a>141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰</h2><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode - 141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰</a></li></ul><h3 id="Approach-1-Hash-Table"><a href="#Approach-1-Hash-Table" class="headerlink" title="Approach 1-Hash Table"></a>Approach 1-Hash Table</h3><h4 id="Analysis"><a href="#Analysis" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ä½¿ç”¨å“ˆå¸Œè¡¨è§£å†³ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ï¼Œç©ºé—´å¤æ‚åº¦ä¸º <code>O(n)</code>ã€‚</li><li>éå†é“¾è¡¨ï¼Œè‹¥é‡åˆ° <code>Null</code>ï¼Œåˆ™ è¡¨æ˜é“¾è¡¨æ— ç¯ã€‚è‹¥éå†çš„èŠ‚ç‚¹åœ¨å“ˆå¸Œè¡¨ä¸­å·²å­˜åœ¨ï¼Œåˆ™è¡¨æ˜é“¾è¡¨æœ‰ç¯ã€‚</li></ul><h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = val;</span></span><br><span class="line"><span class="comment"> *     this.next = null;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;ListNode&#125; head</span></span><br><span class="line"><span class="comment"> * @return &#123;boolean&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> nodesSeen = <span class="keyword">new</span> <span class="built_in">Set</span>();</span><br><span class="line">    <span class="keyword">if</span>(head === <span class="literal">null</span>  || head.next === <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(head !== <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(nodesSeen.has(head))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            nodesSeen.add(head);</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = val;</span></span><br><span class="line"><span class="comment"> *     this.next = null;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">    Set&lt;ListNode&gt; nodesSeen = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    <span class="keyword">while</span> (head != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nodesSeen.contains(head)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            nodesSeen.add(head);</span><br><span class="line">        &#125;</span><br><span class="line">        head = head.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Approach-2-Two-Pointers"><a href="#Approach-2-Two-Pointers" class="headerlink" title="Approach 2-Two Pointers"></a>Approach 2-Two Pointers</h3><h4 id="Analysis-1"><a href="#Analysis-1" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>ä½¿ç”¨å¿«æ…¢æŒ‡é’ˆè§£å†³ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º <code>O(n)</code>ï¼Œç©ºé—´å¤æ‚åº¦ä¸º <code>O(1)</code>ã€‚</li><li>Use two pointers, walker and runner. </li><li>Walker moves step by step. </li><li>Runner moves two steps at time.</li><li>If the Linked List has a cycle walker and runner will meet at some point.</li><li>Ref <ul><li><a href="https://leetcode.com/problems/linked-list-cycle/solution/" target="_blank" rel="noopener">LeetCode Solution</a></li><li><a href="http://www.cnblogs.com/AndyJee/p/4463998.html" target="_blank" rel="noopener">LeetCode 141/142 - Linked List Cycle | CNBlogs</a></li></ul></li></ul><h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">hasCycle</span><span class="params">(ListNode *head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode *walker = head; <span class="comment">//moves one step each time</span></span><br><span class="line">        ListNode *runner = head; <span class="comment">//moves two step each time</span></span><br><span class="line">        <span class="keyword">while</span>(runner-&gt;next != <span class="literal">NULL</span> &amp;&amp; runner-&gt;next-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            walker = walker-&gt;next;</span><br><span class="line">            runner = runner-&gt;next-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(walker == runner)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = val;</span></span><br><span class="line"><span class="comment"> *     this.next = null;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;ListNode&#125; head</span></span><br><span class="line"><span class="comment"> * @return &#123;boolean&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hasCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head === <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> walker = <span class="keyword">new</span> ListNode();</span><br><span class="line">    <span class="keyword">var</span> runner = <span class="keyword">new</span> ListNode();</span><br><span class="line">    walker = head;</span><br><span class="line">    runner = head;</span><br><span class="line">    <span class="keyword">while</span>(runner.next!==<span class="literal">null</span> &amp;&amp; runner.next.next!==<span class="literal">null</span>) &#123;</span><br><span class="line">        walker = walker.next;</span><br><span class="line">        runner = runner.next.next;</span><br><span class="line">        <span class="keyword">if</span>(walker === runner) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123;</span></span><br><span class="line"><span class="comment"> *         val = x;</span></span><br><span class="line"><span class="comment"> *         next = null;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode slow = head;</span><br><span class="line">        ListNode fast = head.next;</span><br><span class="line">        <span class="keyword">while</span> (slow != fast) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fast == <span class="keyword">null</span> || fast.next == <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            slow = slow.next;</span><br><span class="line">            fast = fast.next.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasCycle</span><span class="params">(self, head)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type head: ListNode</span></span><br><span class="line"><span class="string">        :rtype: bool</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> head == <span class="literal">None</span> <span class="keyword">or</span> head.next == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        slow = fast = head</span><br><span class="line">        <span class="keyword">while</span> fast <span class="keyword">and</span> fast.next:</span><br><span class="line">            slow = slow.next</span><br><span class="line">            fast = fast.next.next</span><br><span class="line">            <span class="keyword">if</span> slow == fast:</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="142-Linked-List-Cycle-II-ï¼ˆç¯å½¢é“¾è¡¨IIï¼‰"><a href="#142-Linked-List-Cycle-II-ï¼ˆç¯å½¢é“¾è¡¨IIï¼‰" class="headerlink" title="142. Linked List Cycle II ï¼ˆç¯å½¢é“¾è¡¨IIï¼‰"></a>142. Linked List Cycle II ï¼ˆç¯å½¢é“¾è¡¨IIï¼‰</h2><h3 id="Description-1"><a href="#Description-1" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">LeetCode - 142. Linked List Cycle IIï¼ˆç¯å½¢é“¾è¡¨IIï¼‰</a></li></ul><h3 id="Approach-1-Two-Pointers"><a href="#Approach-1-Two-Pointers" class="headerlink" title="Approach 1-Two Pointers"></a>Approach 1-Two Pointers</h3><h4 id="Analysis-2"><a href="#Analysis-2" class="headerlink" title="Analysis"></a>Analysis</h4><p><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode-141. Linked List Cycle</a>  ä¸­ï¼Œå®Œæˆäº†é“¾è¡¨æ˜¯å¦æœ‰ç¯çš„åˆ¤æ–­ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæœ¬é¢˜å®ç°å¯¹ç¯èµ·ç‚¹çš„åˆ¤æ–­å’Œç¯é•¿åº¦çš„è®¡ç®—ã€‚</p><p>ä¸‹é¢ç»“åˆ <a href="http://www.cnblogs.com/AndyJee/p/4463998.html" target="_blank" rel="noopener">LeetCode 141/142 - Linked List Cycle | CNBlogs</a> å‚è€ƒé“¾æ¥ï¼Œå¯¹ç¯èµ·ç‚¹çš„åˆ¤æ–­å’Œç¯é•¿åº¦çš„è®¡ç®—è¿›è¡Œåˆ†æã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/front-end-2019/leetcode-142.png" alt="leetcode-142.png"></p><p>è®¾é“¾è¡¨èµ·ç‚¹è·ç¦»ç¯çš„èµ·ç‚¹è·ç¦»ä¸º<code>a</code>ï¼Œåœˆé•¿ä¸º<code>n</code>ï¼Œå½“ <code>walker</code> å’Œ <code>runner</code> ç›¸é‡æ—¶ï¼Œç›¸é‡ç‚¹è·ç¦»ç¯èµ·ç‚¹è·ç¦»ä¸º<code>b</code>ï¼Œæ­¤æ—¶ <code>runner</code> å·²ç»•ç¯èµ°äº†<code>k</code>åœˆï¼Œåˆ™</p><ul><li><code>walker</code> èµ°çš„è·ç¦»ä¸º <code>a+b</code>ï¼Œæ­¥æ•°ä¸º <code>a+b</code></li><li><code>runner</code> é€Ÿåº¦ä¸º <code>walker</code> çš„ä¸¤å€ï¼Œ<code>runner</code> èµ°çš„è·ç¦»ä¸º <code>2*(a+b)</code>ï¼Œæ­¥æ•°ä¸º <code>a+b</code></li><li><code>runner</code> èµ°çš„è·ç¦»ä¸º <code>a+b+k*n=2*(a+b)</code>ï¼Œä»è€Œ <code>a+b=k*n</code>ï¼Œ<code>a=k*n-b</code></li><li>å› æ­¤æœ‰ï¼Œå½“ <code>walker</code> èµ° <code>a</code> æ­¥ï¼Œ<code>runner</code> èµ° <code>(k*n-b)</code> æ­¥ã€‚å½“ <code>k=1</code> æ—¶ï¼Œåˆ™ä¸º <code>(n-b)</code> æ­¥</li></ul><h5 id="ç¯çš„èµ·ç‚¹"><a href="#ç¯çš„èµ·ç‚¹" class="headerlink" title="ç¯çš„èµ·ç‚¹"></a>ç¯çš„èµ·ç‚¹</h5><p>ä»¤ <code>walker</code> è¿”å›é“¾è¡¨åˆå§‹å¤´ç»“ç‚¹ï¼Œ<code>runner</code> ä»åœ¨ç›¸é‡ç‚¹ã€‚æ­¤æ—¶ï¼Œä»¤ <code>walker</code> å’Œ <code>runner</code> æ¯æ¬¡éƒ½èµ°ä¸€æ­¥è·ç¦»ã€‚å½“ <code>walker</code> å’Œ <code>runner</code> ç›¸é‡æ—¶ï¼ŒäºŒè€…æ‰€åœ¨ä½ç½®å³ç¯çš„èµ·ç‚¹ã€‚</p><p>è¯æ˜è¿‡ç¨‹å¦‚ä¸‹ã€‚</p><p><code>walker</code> èµ° <code>a</code> æ­¥ï¼Œåˆ°è¾¾ç¯çš„èµ·ç‚¹ï¼›<code>runner</code> åˆå§‹ä½ç½®ä¸º <code>2(a+b)</code>ï¼Œèµ°äº† <code>a</code> æ­¥ä¹‹åï¼Œå³ <code>kn-b</code> æ­¥ä¹‹åï¼Œæ‰€åœ¨ä½ç½®ä¸º <code>2(a+b)+kn-b=2a+b+kn= a+(a+b)+kn=a+2kn</code>ã€‚å› æ­¤ï¼Œ<code>runner</code> ä½ç½®æ˜¯ç¯çš„èµ·ç‚¹ã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// runnerèµ°çš„ä½ç½®</span><br><span class="line"><span class="number">2</span>(a+b) + a</span><br><span class="line">= <span class="number">3</span>a + <span class="number">2</span>b    //æ¶ˆå»b  b = k*n - a</span><br><span class="line">= <span class="number">3</span>a + <span class="number">2</span>*(k*n - a)</span><br><span class="line">= a + <span class="number">2</span>kn</span><br></pre></td></tr></table></figure><h5 id="ç¯çš„é•¿åº¦"><a href="#ç¯çš„é•¿åº¦" class="headerlink" title="ç¯çš„é•¿åº¦"></a>ç¯çš„é•¿åº¦</h5><p>åœ¨ä¸Šè¿°åˆ¤æ–­ç¯çš„èµ·ç‚¹çš„åŸºç¡€ä¸Šï¼Œæ±‚è§£ç¯çš„é•¿åº¦ã€‚</p><ul><li>å½“ <code>walker</code> å’Œ <code>runner</code> ç›¸é‡æ—¶ï¼ŒäºŒè€…æ‰€åœ¨ä½ç½®å³ç¯çš„èµ·ç‚¹ã€‚æ­¤åï¼Œå†è®© <code>walker</code> æ¯æ¬¡è¿åŠ¨ä¸€æ­¥ã€‚</li><li><code>walker</code> èµ° <code>n</code> æ­¥ä¹‹åï¼Œ<code>walker</code> å’Œ <code>runner</code> å†æ¬¡ç›¸é‡ã€‚<code>walker</code> æ‰€èµ°çš„æ­¥æ•°å³æ˜¯ç¯çš„é•¿åº¦ã€‚</li></ul><h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h4><blockquote><p>æ³¨æ„ï¼Œåœ¨ <code>while()</code> ä¸­éœ€è¦ä½¿ç”¨ <code>break</code> åŠæ—¶è·³å‡ºå¾ªç¯ï¼Œå¦åˆ™æäº¤æ—¶ä¼šå‡ºç°è¶…æ—¶é”™è¯¯ <code>Time Limit Exceeded</code></p></blockquote><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode *<span class="title">detectCycle</span><span class="params">(ListNode *head)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(head == <span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">bool</span> hasCycle = <span class="literal">false</span>;</span><br><span class="line">        ListNode *walker = head; <span class="comment">//moves one step each time</span></span><br><span class="line">        ListNode *runner = head; <span class="comment">//moves two step each time</span></span><br><span class="line">        <span class="keyword">while</span>(runner-&gt;next != <span class="literal">NULL</span> &amp;&amp; runner-&gt;next-&gt;next != <span class="literal">NULL</span>)&#123;</span><br><span class="line">            walker = walker-&gt;next;</span><br><span class="line">            runner = runner-&gt;next-&gt;next;</span><br><span class="line">            <span class="keyword">if</span>(walker == runner)&#123;</span><br><span class="line">                hasCycle = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;  <span class="comment">//è·³å‡ºå¾ªç¯</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(hasCycle == <span class="literal">true</span>)&#123;</span><br><span class="line">            walker = head;</span><br><span class="line">            <span class="keyword">while</span>(walker != runner)&#123;</span><br><span class="line">                walker = walker-&gt;next;</span><br><span class="line">                runner = runner-&gt;next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> walker;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * function ListNode(val) &#123;</span></span><br><span class="line"><span class="comment"> *     this.val = val;</span></span><br><span class="line"><span class="comment"> *     this.next = null;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;ListNode&#125; head</span></span><br><span class="line"><span class="comment"> * @return &#123;ListNode&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> detectCycle = <span class="function"><span class="keyword">function</span>(<span class="params">head</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(head === <span class="literal">null</span> || head.next === <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Tip - new ListNode() åˆ›å»ºå¯çœç•¥ï¼ŒèŠ‚çœä»£ç è¿è¡Œæ—¶é—´</span></span><br><span class="line">    <span class="comment">// let walker = new ListNode();   // one steps</span></span><br><span class="line">    <span class="comment">// let runner = new ListNode();   // two steps</span></span><br><span class="line">    <span class="keyword">let</span> walker = head;</span><br><span class="line">    <span class="keyword">let</span> runner = head;</span><br><span class="line">    <span class="keyword">let</span> hasCycle = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">while</span>(runner.next !== <span class="literal">null</span> &amp;&amp; runner.next.next !== <span class="literal">null</span>)&#123;</span><br><span class="line">        runner = runner.next.next;</span><br><span class="line">        walker = walker.next;</span><br><span class="line">        <span class="keyword">if</span>(runner === walker)&#123;</span><br><span class="line">            hasCycle = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>; <span class="comment">//jump loop</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(hasCycle)&#123;</span><br><span class="line">        walker = head;</span><br><span class="line">        <span class="keyword">while</span>(walker !== runner)&#123;</span><br><span class="line">            runner = runner.next;</span><br><span class="line">            walker = walker.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> walker;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * class ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) &#123;</span></span><br><span class="line"><span class="comment"> *         val = x;</span></span><br><span class="line"><span class="comment"> *         next = null;</span></span><br><span class="line"><span class="comment"> *     &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">detectCycle</span><span class="params">(ListNode head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(head == <span class="keyword">null</span> || head.next == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        ListNode walker = head;</span><br><span class="line">        ListNode runner = head;</span><br><span class="line">        <span class="keyword">boolean</span> hasCycle = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">while</span>(runner.next != <span class="keyword">null</span> &amp;&amp; runner.next.next != <span class="keyword">null</span>)&#123;</span><br><span class="line">            walker = walker.next;</span><br><span class="line">            runner = runner.next.next;</span><br><span class="line">            <span class="keyword">if</span>(walker == runner)&#123;</span><br><span class="line">                hasCycle = <span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">break</span>; <span class="comment">//jump loop</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(hasCycle)&#123;</span><br><span class="line">            walker = head;</span><br><span class="line">            <span class="keyword">while</span>(walker != runner)&#123;</span><br><span class="line">                walker = walker.next;</span><br><span class="line">                runner = runner.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> walker;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"># class ListNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.next = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">detectCycle</span><span class="params">(self, head)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type head: ListNode</span></span><br><span class="line"><span class="string">        :rtype: ListNode</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> head == <span class="literal">None</span> <span class="keyword">or</span> head.next == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">        runner = walker = head</span><br><span class="line">        hasCycle = <span class="literal">False</span></span><br><span class="line">        <span class="keyword">while</span> runner <span class="keyword">and</span> runner.next:</span><br><span class="line">            runner = runner.next.next</span><br><span class="line">            walker = walker.next</span><br><span class="line">            <span class="keyword">if</span> runner == walker:</span><br><span class="line">                hasCycle = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> hasCycle:</span><br><span class="line">            walker = head</span><br><span class="line">            <span class="keyword">while</span> walker != runner:</span><br><span class="line">                walker = walker.next</span><br><span class="line">                runner = runner.next</span><br><span class="line">            <span class="keyword">return</span> walker</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure><h2 id="258-Add-Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰"><a href="#258-Add-Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰" class="headerlink" title="258. Add Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰"></a>258. Add Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰</h2><h3 id="Description-2"><a href="#Description-2" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/add-digits/?tab=Description" target="_blank" rel="noopener">LeetCode-258. Add Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰</a></li></ul><h3 id="Approach-1-Digit-Root-å…¬å¼"><a href="#Approach-1-Digit-Root-å…¬å¼" class="headerlink" title="Approach 1-Digit Root å…¬å¼"></a>Approach 1-Digit Root å…¬å¼</h3><h4 id="Analysis-3"><a href="#Analysis-3" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li><a href="https://leetcode.com/problems/add-digits/discuss/68580/Accepted-C%2B%2B-O(1)-time-O(1)-space-1-Line-Solution-with-Detail-Explanations" target="_blank" rel="noopener">Add Digits | LeetCode Discussion</a></li><li><a href="https://en.wikipedia.org/wiki/Digital_root" target="_blank" rel="noopener">Digit Root | Wikipedia</a></li></ul><blockquote><p>å°†ä¸€æ­£æ•´æ•°çš„å„ä¸ªä½æ•°ç›¸åŠ (å³æ¨ªå‘ç›¸åŠ )åï¼Œè‹¥åŠ å®Œåçš„å€¼å¤§äºç­‰äº10çš„è¯ï¼Œåˆ™ç»§ç»­å°†å„ä½æ•°è¿›è¡Œæ¨ªå‘ç›¸åŠ ç›´åˆ°å…¶å€¼å°äºåä¸ºæ­¢æ‰€å¾—åˆ°çš„æ•°ï¼Œå³ä¸ºæ•°æ ¹ (<code>Digit Root</code>)</p></blockquote><p>æœ¬é¢˜ç›®ä¸ºæ±‚è§£ä¸€ä¸ªéè´Ÿæ•´æ•°çš„æ•°æ ¹ã€‚å‚è€ƒ <a href="https://en.wikipedia.org/wiki/Digital_root" target="_blank" rel="noopener">Digit Root | Wikipedia</a> å¯ä»¥äº†è§£æ•°æ ¹çš„å…¬å¼æ±‚è§£æ–¹æ³•ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/leetcode-258-add-digits.png" alt=""></p><p>ä»ä¸Šå›¾æ€»ç»“è§„å¾‹ï¼Œå¯¹äºä¸€ä¸ª <code>b</code> è¿›åˆ¶çš„æ•°å­— (æ­¤å¤„é’ˆå¯¹åè¿›åˆ¶æ•°ï¼Œ<code>b</code>=10)ï¼Œå…¶ æ•°å­—æ ¹ ï¼ˆ<code>digit root</code>ï¼‰ å¯ä»¥è¡¨è¾¾ä¸º</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dr(n) = <span class="number">0</span> <span class="keyword">if</span> n == <span class="number">0</span>    </span><br><span class="line"></span><br><span class="line">dr(n) = (b-<span class="number">1</span>) <span class="keyword">if</span> n != <span class="number">0</span> <span class="keyword">and</span> n % (b-<span class="number">1</span>) == <span class="number">0</span>  // <span class="number">9</span>çš„å€æ•°ä¸”ä¸ä¸ºé›¶ï¼Œæ•°æ ¹ä¸º<span class="number">9</span></span><br><span class="line"></span><br><span class="line">dr(n) = n mod (b-<span class="number">1</span>) <span class="keyword">if</span> n % (b-<span class="number">1</span>) != <span class="number">0</span>  // ä¸æ˜¯<span class="number">9</span>çš„å€æ•°ä¸”ä¸ä¸ºé›¶ï¼Œæ•°æ ¹ä¸ºå¯¹<span class="number">9</span>å–æ¨¡</span><br></pre></td></tr></table></figure><p>æˆ–è€…</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dr(n) = <span class="number">1</span> + (n - <span class="number">1</span>) % <span class="number">9</span></span><br></pre></td></tr></table></figure><h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h4><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">addDigits</span><span class="params">(<span class="keyword">int</span> num)</span> </span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span> + (num - <span class="number">1</span>) % <span class="number">9</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; num</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> addDigits = <span class="function"><span class="keyword">function</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> + (num - <span class="number">1</span>) % <span class="number">9</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">addDigits</span><span class="params">(<span class="keyword">int</span> num)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (num == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (num % <span class="number">9</span> == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> num % <span class="number">9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Python</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">addDigits</span><span class="params">(self, num: int)</span> -&gt; int:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type num:int</span></span><br><span class="line"><span class="string">        :rtype :int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> num%<span class="number">9</span> == <span class="number">0</span>: <span class="keyword">return</span> <span class="number">9</span></span><br><span class="line">        <span class="keyword">else</span>: <span class="keyword">return</span> num%<span class="number">9</span></span><br></pre></td></tr></table></figure><h2 id="461-Hamming-Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰"><a href="#461-Hamming-Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰" class="headerlink" title="461. Hamming Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰"></a>461. Hamming Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰</h2><h3 id="Description-3"><a href="#Description-3" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/hamming-distance/" target="_blank" rel="noopener">LeetCode-461. Hamming Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰</a></li></ul><h3 id="Approach-1-å¼‚æˆ–ä½è¿ç®—"><a href="#Approach-1-å¼‚æˆ–ä½è¿ç®—" class="headerlink" title="Approach 1-å¼‚æˆ–ä½è¿ç®—"></a>Approach 1-å¼‚æˆ–ä½è¿ç®—</h3><p>å¯¹è¾“å…¥å‚æ•°è¿›è¡Œå¼‚æˆ–ä½è¿ç®—å¾—åˆ°ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å€¼ï¼Œå†è®¡ç®—å…¶ä¸­çš„æ•°å­— <code>1</code> çš„ä¸ªæ•°å³å¯ã€‚</p><p>åœ¨ä»£ç å®ç°ä¸­ï¼Œå¯ä»¥ç»“åˆè¯­è¨€å†…ç½®çš„APIæˆ–æ–¹æ³•ï¼Œç®€åŒ–æ±‚è§£è¿‡ç¨‹ã€‚</p><h4 id="Analysis-4"><a href="#Analysis-4" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; x</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; y</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hammingDistance = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> xor = x^y;</span><br><span class="line">    <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="number">32</span>;i++)&#123;   <span class="comment">// Numberå‹ å 32ä½</span></span><br><span class="line">        total += (xor&gt;&gt;i) &amp;<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ç”±äº <code>Number</code> å‹å  32 ä½ï¼Œå› æ­¤ï¼Œéœ€è¦å¼‚æˆ–çš„ç»“æœè¿›è¡Œ32æ¬¡ç§»ä½ï¼Œå¾ªç¯åˆ¤æ–­å…¶ä¸­çš„æ•°å­— <code>1</code> çš„ä¸ªæ•°ã€‚</p><p>ä¸‹é¢è€ƒè™‘ç®€åŒ–ä¸Šè¿°æ±‚è§£è¿‡ç¨‹ã€‚</p><ol><li><a href="https://www.w3schools.com/jsref/jsref_tostring_number.asp" target="_blank" rel="noopener">number.toString(radix)</a> æ–¹æ³•å¯ä»¥å°†ä¸€ä¸ªæ•°å­—ä»¥ <code>radix</code> è¿›åˆ¶æ ¼å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¯ä»¥å°†å¼‚æˆ–ç»“æœè½¬æ¢ä¸º 2 è¿›åˆ¶å­—ç¬¦ä¸²ã€‚</li><li>å¯¹ä¸Šè¿° 2 è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªä¿ç•™å…¶ä¸­ <code>1</code>ï¼Œå°† <code>0</code> æ›¿æ¢ä¸ºç©ºã€‚</li><li>æœ€åï¼Œè®¡ç®—æ‰€å¾—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œå³æ‰€æ±‚ç»“æœã€‚</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; x</span></span><br><span class="line"><span class="comment"> * @param &#123;number&#125; y</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> hammingDistance = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> (x ^ y).toString(<span class="number">2</span>).replace(<span class="regexp">/0/g</span>, <span class="string">''</span>).length;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>Java</li></ul><p>Javaä¸­ï¼Œ<a href="https://www.tutorialspoint.com/java/lang/integer_bitcount.htm" target="_blank" rel="noopener">Integer.bitCount()</a>  å‡½æ•°å¯ä»¥è¿”å›è¾“å…¥å‚æ•°å¯¹åº”äºŒè¿›åˆ¶æ ¼å¼æ•°å€¼ä¸­æ•°å­— <code>1</code> çš„ä¸ªæ•°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hammingDistance</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Integer.bitCount(x^y);  <span class="comment">//XOR</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><p>C++ ä¸­, <a href="http://www.xuebuyuan.com/828691.html" target="_blank" rel="noopener">int __builtin_popcount</a> å‡½æ•°å¯ä»¥è¿”å›è¾“å…¥å‚æ•°å¯¹åº”äºŒè¿›åˆ¶æ ¼å¼æ•°å€¼ä¸­æ•°å­— <code>1</code> çš„ä¸ªæ•°ã€‚</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hammingDistance</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> __builtin_popcount(x^y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="463-Island-Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰"><a href="#463-Island-Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰" class="headerlink" title="463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰"></a>463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰</h2><h3 id="Description-4"><a href="#Description-4" class="headerlink" title="Description"></a>Description</h3><ul><li><a href="https://leetcode.com/problems/island-perimeter/?tab=Description" target="_blank" rel="noopener">LeetCode - 463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰ </a></li></ul><h3 id="Approach-1"><a href="#Approach-1" class="headerlink" title="Approach 1"></a>Approach 1</h3><h4 id="Analysis-5"><a href="#Analysis-5" class="headerlink" title="Analysis"></a>Analysis</h4><ul><li>éå†çŸ©é˜µï¼Œæ‰¾å‡º å²›å±¿ <code>islands</code> ä¸ªæ•°ã€‚è‹¥ä¸è€ƒè™‘å²›å±¿çš„å‘¨å›´ï¼Œåˆ™å¯¹åº”çš„å‘¨é•¿ä¸º <code>4 * islands</code></li><li>å¯¹äºå²›å±¿ï¼Œè€ƒè™‘å…¶æ˜¯å¦æœ‰å·¦ä¾§å’Œé¡¶éƒ¨çš„é‚»å±…å²›å±¿ <code>neighbours</code>ã€‚ä¸ºäº†ç®€åŒ–æ±‚è§£ï¼Œå¯¹äºæ‰€æœ‰å²›å±¿ï¼Œåªè€ƒè™‘å…¶å·¦ä¾§å’Œé¡¶éƒ¨çš„é‚»å±…æƒ…å†µã€‚</li><li>ç»¼ä¸Šï¼Œæœ€ç»ˆæ‰€æ±‚çš„å‘¨é•¿ä¸º <code>4 * islands - 2 * neighbours</code></li></ul><h4 id="Solution-4"><a href="#Solution-4" class="headerlink" title="Solution"></a>Solution</h4><ul><li>Java</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">islandPerimeter</span><span class="params">(<span class="keyword">int</span>[][] grid)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> islands = <span class="number">0</span>, neighbours = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; grid.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; grid[i].length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>) &#123;</span><br><span class="line">                    islands++; <span class="comment">// count islands</span></span><br><span class="line">                    <span class="keyword">if</span> (i !=<span class="number">0</span> &amp;&amp; grid[i - <span class="number">1</span>][j] == <span class="number">1</span>) neighbours++; <span class="comment">// count top neighbours</span></span><br><span class="line">                    <span class="keyword">if</span> (j !=<span class="number">0</span> &amp;&amp; grid[i][j - <span class="number">1</span>] == <span class="number">1</span>) neighbours++; <span class="comment">// count left neighbours</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> islands * <span class="number">4</span> - neighbours * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>C++</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">islandPerimeter</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>, repeat = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;grid.size(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;grid[i].size(); j++)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">if</span> (grid[i][j] == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="keyword">if</span> (i!= <span class="number">0</span> &amp;&amp; grid[i<span class="number">-1</span>][j] == <span class="number">1</span>) repeat++;</span><br><span class="line">    <span class="keyword">if</span> (j!= <span class="number">0</span> &amp;&amp; grid[i][j - <span class="number">1</span>] == <span class="number">1</span>) repeat++;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span> * count - repeat * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>JavaScript</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @param &#123;number[][]&#125; grid</span></span><br><span class="line"><span class="comment"> * @return &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> islandPerimeter = <span class="function"><span class="keyword">function</span>(<span class="params">grid</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> repeat=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;grid.length;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;grid[i].length;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(grid[i][j] === <span class="number">1</span>)&#123;</span><br><span class="line">                count++;</span><br><span class="line">                <span class="keyword">if</span>((i!==<span class="number">0</span>) &amp;&amp; (grid[i<span class="number">-1</span>][j]===<span class="number">1</span>))&#123;</span><br><span class="line">                    repeat++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>((j!==<span class="number">0</span>) &amp;&amp; (grid[i][j<span class="number">-1</span>]===<span class="number">1</span>))&#123;</span><br><span class="line">                    repeat++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">4</span>*count<span class="number">-2</span>*repeat;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/categories/LeetCode/"/>
    
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/tags/Algorithm/"/>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>Git è¿›é˜¶ä½¿ç”¨</title>
    <link href="https://lbs0912.github.io/2020/02/01/git-usage-improve/"/>
    <id>https://lbs0912.github.io/2020/02/01/git-usage-improve/</id>
    <published>2020-02-01T02:23:34.000Z</published>
    <updated>2020-02-23T08:48:04.364Z</updated>
    
    <content type="html"><![CDATA[<ul><li>æ€»ç»“æ—¥å¸¸å¼€å‘ä¸­çš„ Git è¿›é˜¶ä½¿ç”¨</li><li>è®°å½•å¤š <code>SSH</code> é…ç½®ï¼Œ<code>git reflog</code> è§£å†³ <code>detached-head</code> ä»£ç ä¸¢å¤±é—®é¢˜</li><li>æ€»ç»“å›¢é˜Ÿåä½œä¸‹ï¼Œå¦‚ä½•ä¿æŒ git æäº¤ä¿¡æ¯ç®€æ´</li></ul><a id="more"></a><h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><ul><li>2018/07/09ï¼Œæ’°å†™</li><li>2019/03/10ï¼Œæ·»åŠ å¤šSSHé…ç½®</li><li>2019/04/26ï¼Œæ·»åŠ  <code>git cherry-pick</code></li><li>2019/10/07ï¼Œæ·»åŠ å¦‚ä½•åˆ é™¤gitæ‰€æœ‰å†å²æäº¤ä¿¡æ¯</li><li>2019/10/14ï¼Œæ·»åŠ  <code>git merge --no-ff</code></li><li>2019/12/14ï¼Œæ·»åŠ  <code>git reflog</code> ä½¿ç”¨</li><li>2020/02/01ï¼Œæ·»åŠ  <em>åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•</em></li><li>2020/02/01ï¼Œæ·»åŠ  <em>å›¢é˜Ÿåä½œä¸‹ï¼Œå¦‚ä½•ä¿æŒ git æäº¤ä¿¡æ¯ç®€æ´</em></li></ul><h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><ul><li><a href="http://gitup.co/" target="_blank" rel="noopener">GitUp</a></li><li><a href="https://www.zhihu.com/question/20070065/answer/480261314" target="_blank" rel="noopener">å¦‚ä½•é«˜æ•ˆä½¿ç”¨github</a></li></ul><h2 id="git-reflog-è§£å†³æäº¤ä»£ç ä¸¢å¤±-detached-head"><a href="#git-reflog-è§£å†³æäº¤ä»£ç ä¸¢å¤±-detached-head" class="headerlink" title="git reflog è§£å†³æäº¤ä»£ç ä¸¢å¤± detached-head"></a>git reflog è§£å†³æäº¤ä»£ç ä¸¢å¤± <code>detached-head</code></h2><p><code>reflog</code> æ˜¯ Git æ“ä½œçš„ä¸€é“å®‰å…¨ä¿éšœï¼Œå®ƒèƒ½å¤Ÿè®°å½•å‡ ä¹æ‰€æœ‰æœ¬åœ°ä»“åº“çš„æ”¹å˜ã€‚åŒ…æ‹¬æ‰€æœ‰åˆ†æ”¯ commit æäº¤ï¼Œå·²ç»åˆ é™¤ï¼ˆå…¶å®å¹¶æœªè¢«å®é™…åˆ é™¤ï¼‰commit éƒ½ä¼šè¢«è®°å½•ã€‚æ€»ç»“è€Œè¨€ï¼Œåªè¦ HEAD å‘ç”Ÿå˜åŒ–ï¼Œå°±å¯ä»¥é€šè¿‡ <code>reflog</code> æŸ¥çœ‹åˆ°ã€‚</p><h3 id="detached-head-ä»£ç ä¸¢å¤±æ‰¾å›"><a href="#detached-head-ä»£ç ä¸¢å¤±æ‰¾å›" class="headerlink" title="detached-head ä»£ç ä¸¢å¤±æ‰¾å›"></a><code>detached-head</code> ä»£ç ä¸¢å¤±æ‰¾å›</h3><ul><li><a href="https://www.jianshu.com/p/f247a27851fb" target="_blank" rel="noopener">gitæäº¤åˆ°HEAD detachedå¯¼è‡´ä»£ç ä¸¢å¤±</a></li><li><a href="https://stackoverflow.com/questions/4845505/gitx-how-do-i-get-my-detached-head-commits-back-into-master" target="_blank" rel="noopener">StackOverflow - gitx How do I get my â€˜Detached HEADâ€™ commits back into master</a></li></ul><h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œåˆ‡æ¢åˆ†æ”¯è¯¯æ“ä½œï¼Œé€ æˆæœ¬åœ°ä»£ç ä¿®æ”¹ä¸¢å¤±ã€‚</p><p>æ­¤æ—¶ï¼Œå¯ä»¥å€ŸåŠ© <code>git reflog</code> æ‰¾å›ä¸¢å¤±çš„ä»£ç ä¿®æ”¹ã€‚</p><h4 id="ä¸¢å¤±äº§ç”ŸåŸå› å’Œæ­¥éª¤"><a href="#ä¸¢å¤±äº§ç”ŸåŸå› å’Œæ­¥éª¤" class="headerlink" title="ä¸¢å¤±äº§ç”ŸåŸå› å’Œæ­¥éª¤"></a>ä¸¢å¤±äº§ç”ŸåŸå› å’Œæ­¥éª¤</h4><p>é¦–å…ˆåœ¨ <code>master</code> åˆ†æ”¯ä¸Šå¼€å‘ï¼Œæ­¤æ—¶çº¿ä¸Šå‡ºç° bug ä¸”å›åˆ°æ—§ç‰ˆæœ¬çš„ tagã€‚è¿™æ—¶ <code>master</code> åˆ†æ”¯ä¸Šæœ‰ä¸€éƒ¨åˆ†ä»£ç ä¿®æ”¹ä½†æœªæäº¤ã€‚</p><p>åœ¨ <code>master</code> åˆ†æ”¯ä¸Šæ‰§è¡Œ <code>git status</code>ï¼Œæœ‰æœªæäº¤çš„ä»£ç ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-reflog-1.png" alt=""></p><p>åœ¨ <code>master</code> åˆ†æ”¯ä¸Šæ‰§è¡Œ <code>git tag</code>æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-reflog-2.png" alt=""></p><p>æ­¤æ—¶æœ‰æœªæäº¤çš„ä»£ç ï¼Œç„¶åæ‰§è¡Œ <code>git checkout v1.0</code></p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-reflog-3.png" alt=""></p><p>è¿™ä¸ªæ—¶å€™ï¼Œ<strong>æç¤ºå½“å‰åˆ†æ”¯ä¸º <code>detached HEAD</code></strong></p><p>ç„¶åå†æ‰§è¡Œ <code>git add ./git commit</code> å’Œ <code>git checkout master</code>ï¼Œåˆ‡æ¢å› <code>master</code> åˆ†æ”¯ã€‚<strong>è¿™ä¸ªæ—¶å€™å‘ç° <code>detached HEAD</code> åˆ†æ”¯ä¸è§äº†ï¼Œ<code>master</code> åˆ†æ”¯ä¸Šæœªæäº¤çš„ä»£ç ä¹Ÿä¸è§äº†ã€‚</strong></p><h4 id="ä»£ç æ‰¾å›"><a href="#ä»£ç æ‰¾å›" class="headerlink" title="ä»£ç æ‰¾å›"></a>ä»£ç æ‰¾å›</h4><p>æ‰§è¡Œ <code>git reflog</code> æŸ¥çœ‹æäº¤è®°å½•</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-reflog-4.png" alt=""></p><p>æŸ¥æ‰¾å¯¹åº”æäº¤çš„ <code>commitId</code> ä¸º <code>247e11b</code>ï¼Œç„¶åæ‰§è¡Œä¸‹è¿°å‘½ä»¤è¡Œï¼Œæ‰¾å›ä¸¢å¤±çš„ä»£ç </p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="number">247</span>e11b    <span class="comment">//æ£€å‡ºå¯¹åº”çš„æäº¤</span></span><br><span class="line">git checkout -<span class="selector-tag">b</span> diff    <span class="comment">//æ–°å»ºä¸€ä¸ªæ–°çš„diffåˆ†æ”¯</span></span><br><span class="line">git checkout master     <span class="comment">//åˆ‡æ¢åˆ°masteråˆ†æ”¯</span></span><br><span class="line">git merge diff          <span class="comment">//å°†æ–°å»ºçš„diffåˆ†æ”¯åˆå¹¶åˆ°masteråˆ†æ”¯</span></span><br></pre></td></tr></table></figure><h2 id="åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•"><a href="#åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•" class="headerlink" title="åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•"></a>åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•</h2><ul><li><a href="https://stackoverflow.com/questions/13716658/how-to-delete-all-commit-history-in-github" target="_blank" rel="noopener">How to delete all commit history in github | Stackoverflow</a></li></ul><p>æ­¤å¤„ä»‹ç»å¦‚ä½•åˆ é™¤æ‰€æœ‰å†å²æäº¤è®°å½•ï¼Œå½¢æˆä¸€ä¸ªå…¨æ–°çš„ä»“åº“ã€‚</p><ul><li>1 - Checkout</li></ul><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="comment">--orphan new_branch</span></span><br></pre></td></tr></table></figure><ul><li>2 - Add all the files</li></ul><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">add</span><span class="bash"> -A</span></span><br><span class="line"></span><br><span class="line">//ç­‰æ•ˆäº git <span class="keyword">add</span><span class="bash"> --all æˆ– git add .</span></span><br></pre></td></tr></table></figure><blockquote><p> <code>git add</code> ä¸­ä½¿ç”¨å‚æ•° <code>-A</code> æˆ– <code>--all</code> è¡¨ç¤ºè¿½è¸ªæ‰€æœ‰æ“ä½œï¼ŒåŒ…å«æ–°å¢ã€ä¿®æ”¹å’Œåˆ é™¤</p><p> Git 2.0ç‰ˆå¼€å§‹ï¼Œ<code>-A</code> å‚æ•°ä¸ºé»˜è®¤å‚æ•°ï¼Œå³ <code>git add .</code> ç­‰æ•ˆäº <code>git add -A</code> æˆ– <code>git add --all</code></p></blockquote><ul><li>3 - Commit the changes</li></ul><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git</span> commit -am <span class="string">"commit message"</span></span><br></pre></td></tr></table></figure><ul><li>4 - Delete the branch</li></ul><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch -D <span class="keyword">master</span>   <span class="title">//åŒæ—¶åˆ é™¤æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯</span></span><br></pre></td></tr></table></figure><ul><li>5 - Rename the current branch to master</li></ul><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">branch </span>-m master</span><br></pre></td></tr></table></figure><ul><li>6 - force update your repository</li></ul><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">push</span> -f <span class="built_in">origin</span> master</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å¯¹ä¸Šè¿°æ­¥éª¤è¿›è¡Œè¯´æ˜</p><h3 id="git-checkout-â€“orphan"><a href="#git-checkout-â€“orphan" class="headerlink" title="git checkout â€“orphan"></a>git checkout â€“orphan</h3><p>å¦‚æœä½ çš„æŸä¸ªåˆ†æ”¯ä¸Šç§¯ç´¯äº†æ— æ•°æ¬¡çš„æ— æ„ä¹‰çš„æäº¤ï¼Œ<code>git log</code> ä¿¡æ¯æ»¡å¤©é£ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ <code>git checkout --orphan &lt;new_branch_name&gt;</code> </p><ul><li>åŸºäºå½“å‰åˆ†æ”¯åˆ›å»ºä¸€ä¸ªæ–°çš„â€œå­¤å„¿(<code>orphan</code>)â€çš„åˆ†æ”¯ï¼Œæ²¡æœ‰ä»»ä½•æäº¤å†å²ï¼Œä½†åŒ…å«å½“å‰åˆ†æ”¯æ‰€æœ‰å†…å®¹</li><li>æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œå·¥ä½œåŒºï¼ˆ<code>Workspace</code>ï¼‰ä¸­æ‰€æœ‰æ–‡ä»¶å‡è¢«è®¤ä¸ºåœ¨è¯¥æ“ä½œä¸­æ–°å¢(<code>git statue</code> æŸ¥çœ‹çŠ¶æ€ï¼Œæ‰€æœ‰æ–‡ä»¶çŠ¶æ€å‡ä¸º <code>new file</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º)ï¼Œæ­¤æ—¶æ‰§è¡Œ <code>git add .</code> ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°ç¼“å­˜åŒºï¼ˆ<code>Index</code>ï¼‰</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-checkout-orphan-1.png" alt=""></p><ul><li>ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ï¼Œæ‰§è¡Œ <code>git checkout --orphan &lt;new_branch_name&gt;</code> åï¼Œåˆ›å»ºçš„å¹¶ä¸æ˜¯ä¸€ä¸ªåˆ†æ”¯ï¼Œå› ä¸ºæ­¤æ—¶ <code>HEAD</code> æŒ‡å‘çš„å¼•ç”¨ä¸­æ²¡æœ‰ <code>commit</code> å€¼ã€‚åªæœ‰åœ¨è¿›è¡Œä¸€æ¬¡æäº¤åï¼Œå®ƒæ‰ç®—å¾—ä¸ŠçœŸæ­£çš„åˆ†æ”¯ã€‚</li></ul><blockquote><p><code>orphan</code> è¯‘ä¸ºâ€œå­¤å„¿â€ï¼Œè¯¥å‚æ•°è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªå­¤ç«‹çš„åˆ†æ”¯ï¼Œæ²¡æœ‰ä»»ä½•æäº¤å†å²ï¼Œä¸”ä¸å½“å‰åˆ†æ”¯ä¸å­˜åœ¨ä»»ä½•å…³ç³»ï¼ˆæŸ¥çœ‹æäº¤ä¿¡æ¯ï¼Œå¯å‘ç°å…¶ä¸ºä¸€ä¸ªå­¤ç«‹çš„ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰</p><p>å­¤å„¿ï¼ˆ<code>orphan</code>ï¼‰æ— çˆ¶è¾ˆä¿¡æ¯ï¼ŒåŒç†ï¼Œåˆ›å»ºçš„åˆ†æ”¯ä¹Ÿä¸åŒ…å«ä»»ä½•å†å²æäº¤ä¿¡æ¯</p></blockquote><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-delete-all-info-1.png" alt=""></p><h3 id="git-commit-am"><a href="#git-commit-am" class="headerlink" title="git commit -am"></a>git commit -am</h3><ul><li><a href="https://segmentfault.com/q/1010000005900988" target="_blank" rel="noopener">git commit -m ä¸ git commit -am çš„åŒºåˆ«</a></li></ul><h3 id="git-branch-m"><a href="#git-branch-m" class="headerlink" title="git branch -m"></a>git branch -m</h3><p>é‡å‘½å</p><h3 id="git-push-f-origin-master"><a href="#git-push-f-origin-master" class="headerlink" title="git push -f origin master"></a>git push -f origin master</h3><h2 id="gité¡¹ç›®åä½œâ€”â€”ä¿è¯gitä¿¡æ¯ç®€æ´"><a href="#gité¡¹ç›®åä½œâ€”â€”ä¿è¯gitä¿¡æ¯ç®€æ´" class="headerlink" title="gité¡¹ç›®åä½œâ€”â€”ä¿è¯gitä¿¡æ¯ç®€æ´"></a>gité¡¹ç›®åä½œâ€”â€”ä¿è¯gitä¿¡æ¯ç®€æ´</h2><h3 id="åŒä¸€åˆ†æ”¯-git-pull-ä½¿ç”¨-rebase"><a href="#åŒä¸€åˆ†æ”¯-git-pull-ä½¿ç”¨-rebase" class="headerlink" title="åŒä¸€åˆ†æ”¯ git pull ä½¿ç”¨ rebase"></a>åŒä¸€åˆ†æ”¯ git pull ä½¿ç”¨ rebase</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>git pull</code> ä½¿ç”¨çš„æ˜¯ <code>merge</code> è¡Œä¸ºã€‚å¤šäººåä½œå¼€å‘æ—¶ï¼Œä¼šäº§ç”Ÿä¸å¿…è¦çš„ <code>merge</code> æäº¤è®°å½•ï¼Œé€ æˆæäº¤é“¾æ··ä¹±ä¸å ªã€‚</p><p>æ¨èåœ¨åŒä¸€ä¸ªåˆ†æ”¯æ›´æ–°ä»£ç æ—¶ï¼Œä½¿ç”¨ <code>git pull --rebase</code>ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸ºæŸä¸ªåˆ†æ”¯å•ç‹¬è®¾ç½®ï¼Œè¿™é‡Œæ˜¯è®¾ç½® dev åˆ†æ”¯</span></span><br><span class="line">git<span class="built_in"> config </span>branch.dev.rebase <span class="literal">true</span></span><br><span class="line"><span class="comment"># å…¨å±€è®¾ç½®ï¼Œæ‰€æœ‰çš„åˆ†æ”¯ git pull å‡ä½¿ç”¨ --rebase</span></span><br><span class="line">git<span class="built_in"> config </span>--global pull.rebase <span class="literal">true</span></span><br><span class="line">git<span class="built_in"> config </span>--global branch.autoSetupRebase always</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ”¯åˆå¹¶ä½¿ç”¨-merge-â€“no-ff"><a href="#åˆ†æ”¯åˆå¹¶ä½¿ç”¨-merge-â€“no-ff" class="headerlink" title="åˆ†æ”¯åˆå¹¶ä½¿ç”¨ merge â€“no-ff"></a>åˆ†æ”¯åˆå¹¶ä½¿ç”¨ merge â€“no-ff</h3><h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><ul><li><code>Fast-Forward</code>ï¼šå½“å‰åˆ†æ”¯åˆå¹¶åˆ°å¦ä¸€åˆ†æ”¯æ—¶ï¼Œå¦‚æœæ²¡æœ‰å†²çªè¦è§£å†³ï¼Œå°±ä¼šç›´æ¥ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿåˆå¹¶æäº¤è®°å½•ã€‚è¯¥è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨<code>git</code> æ–‡ä»¶æŒ‡é’ˆå¿«é€Ÿç§»åŠ¨ï¼Œ å› æ­¤è¯¥è¿‡ç¨‹ç§°ä¸º <code>Fast-Forward</code>ã€‚</li><li><code>--no-ff</code>(<code>no fast foward</code>)ï¼šæ¯ä¸€æ¬¡çš„åˆå¹¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ <code>commit</code> è®°å½•ã€‚ä½¿ç”¨ <code>--no-ff</code>ï¼Œå¯ä»¥ä¿æŒåŸæœ‰åˆ†æ”¯æäº¤é“¾çš„å®Œæ•´æ€§ï¼Œå¹¶ä¸”å½“è¯¥åˆ†æ”¯è¢«åˆ é™¤æ—¶ï¼Œæäº¤ä¿¡æ¯ä¾æ—§å­˜åœ¨ã€‚</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-merge--no--ff-1.png" alt="git-merge--no-ff-1"></p><p>ç»“åˆä¸Šå›¾åˆ†æï¼Œåœ¨ <code>dev</code>ï¼ˆç»¿è‰²ï¼‰ åˆ†æ”¯ä¸Šæ£€å‡º <code>feature-1</code> åˆ†æ”¯ï¼ˆè“è‰²ï¼‰ï¼Œä¸” <code>dev</code> åˆ†æ”¯ä¸è¿›è¡Œä»»ä½•æäº¤</p><ul><li>ç›´æ¥ <code>merge</code>ï¼Œé»˜è®¤é‡‡ç”¨ <code>Fast-Forward</code>ï¼Œä¸¤ä¸ªåˆ†æ”¯çš„æäº¤é“¾ä¼šåˆå¹¶ä¸ºä¸€æ¡ç›´çº¿ï¼Œä¸åˆ©äºåæœŸä»£ç å®¡æŸ¥å’Œç»´æŠ¤</li><li>ä½¿ç”¨ <code>git merge --no-ff feature-1</code> åˆå¹¶ä»£ç ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æäº¤ï¼Œä¸”ä¸¤ä¸ªåˆ†æ”¯çš„æäº¤é“¾ä¸ä¼šé‡å ï¼Œåˆ©äºåæœŸä»£ç å®¡æŸ¥å’Œç»´æŠ¤</li></ul><h4 id="merge-é»˜è®¤è®¾ç½®"><a href="#merge-é»˜è®¤è®¾ç½®" class="headerlink" title="merge é»˜è®¤è®¾ç½®"></a>merge é»˜è®¤è®¾ç½®</h4><p><code>git merge</code> é»˜è®¤ä½¿ç”¨ <code>fast-forward</code>ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œä¿®æ”¹ä¸ºé»˜è®¤ä½¿ç”¨ <code>--no-ff</code>ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global merge.commit <span class="literal">no</span></span><br><span class="line">git<span class="built_in"> config </span>--global merge.ff <span class="literal">no</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼ŒSourceTree åœ¨è®¾ç½®ä¸­ä¹Ÿå¯ä»¥è®¾ç½® <code>--no-ff</code>ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-merge--no-ff-2.png" alt="git-merge--no-ff-2"></p><h2 id="IDEä¸­ä½¿ç”¨Git"><a href="#IDEä¸­ä½¿ç”¨Git" class="headerlink" title="IDEä¸­ä½¿ç”¨Git"></a>IDEä¸­ä½¿ç”¨Git</h2><h3 id="VSCodeä¸­ä½¿ç”¨Git"><a href="#VSCodeä¸­ä½¿ç”¨Git" class="headerlink" title="VSCodeä¸­ä½¿ç”¨Git"></a>VSCodeä¸­ä½¿ç”¨Git</h3><ul><li><a href="https://juejin.im/post/5b00474951882542ba08087a" target="_blank" rel="noopener">VSCode ä¸­ä½¿ç”¨Gitå®è·µ</a></li><li>æ¨èå®‰è£… <code>Git Lens</code> å’Œ <code>Git History</code> æ’ä»¶</li><li>å…‹éš†ä»£ç <ul><li><code>Ctrl + Shift + P</code> æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ <code>Git</code>ï¼Œé€‰æ‹© <code>Git Clone</code> è¿›è¡Œå…‹éš†ä»£ç </li></ul></li><li>æŸ¥çœ‹ä¿®æ”¹ï¼ˆVSCodeä¼šä½¿ç”¨ä¸åŒé¢œè‰²è¿›è¡Œæ ‡è¯†ï¼‰<ul><li>çº¢è‰²ç®­å¤´ - æ ‡è¯†åˆ é™¤è¡Œ</li><li>è“è‰²ç«–çº¿ - è¯¥å¤„æœ‰ä¿®æ”¹</li><li>ç»¿è‰²ç®­å¤´ - è¯¥å¤„ä¸ºæ–°å¢</li></ul></li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-vscode-usage-1.png?q-sign-algorithm=sha1&q-ak=AKIDnYCjAUImfNuHSSn8nHaihXEkvukPOAGM&q-sign-time=1570451528;1570453328&q-key-time=1570451528;1570453328&q-header-list=&q-url-param-list=&q-signature=b0ec61fae96fb0c37059f2afedbac8e2ad1b2753" alt=""></p><ul><li>æäº¤ä»£ç <ul><li><code>Ctrl + Shift + G</code> æ‰“å¼€ä»£ç ç®¡ç†å™¨è¿›è¡Œæ“ä½œ</li></ul></li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-vscode-usage-2.png?q-sign-algorithm=sha1&q-ak=AKIDnYCjAUImfNuHSSn8nHaihXEkvukPOAGM&q-sign-time=1570453094;1570454894&q-key-time=1570453094;1570454894&q-header-list=&q-url-param-list=&q-signature=63ea253d235cba5fc2d3d5c525e5242d11bba407" alt=""></p><h2 id="git-clone-è®¾ç½®ç¼“å­˜åŒº"><a href="#git-clone-è®¾ç½®ç¼“å­˜åŒº" class="headerlink" title="git clone è®¾ç½®ç¼“å­˜åŒº"></a>git clone è®¾ç½®ç¼“å­˜åŒº</h2><p>å½“å·¥ç¨‹è¾ƒå¤§æ—¶ï¼Œä½¿ç”¨ <code>git clone</code> æ‹‰å–ä»£ç ï¼Œå¯èƒ½ä¼šå‡ºç° <code>early EOF</code> çš„æŠ¥é”™æˆ–è€…æ‹‰å–ä»£ç å¤±è´¥ã€‚</p><p>è¿™æ˜¯å› ä¸º <code>git clone</code> æœ¬è´¨ä¸Šæ˜¯å»ºç«‹ä¸€ä¸ª HTTP è¿æ¥ï¼Œå·¥ç¨‹è¾ƒå¤§æ—¶ä¼šè¶…è¿‡é»˜è®¤è®¾ç½®çš„ç¼“å­˜å¤§å°ã€‚</p><p>ä½¿ç”¨ <code>git config --list</code> æŸ¥çœ‹ <code>http.postbuffer</code> çš„å¤§å°ï¼Œç¡®è®¤æ˜¯å¦å°äºä¸‹è½½çš„å·¥ç¨‹å¤§å°ã€‚</p><p>ä½¿ç”¨ <code>git config --global http.postbuffer 524288000 //500x1024x1024 è®¾ç½®ä¸º500M</code> å¯ä»¥å¯¹ç¼“å­˜åŒºå¤§å°è¿›è¡Œè®¾ç½®ã€‚ </p><h2 id="git-clean"><a href="#git-clean" class="headerlink" title="git clean"></a>git clean</h2><ul><li><code>git clean -n</code> -  æŸ¥çœ‹å“ªäº›æ–‡ä»¶å°†è¢« <code>git clean</code> æ¸…é™¤ï¼Œåªæ˜¯æŸ¥çœ‹ï¼Œå¹¶ä¸ä¼šçœŸæ­£æ‰§è¡Œæ¸…é™¤æ“ä½œ</li><li><code>git clean -f</code>  - åˆ é™¤æœªè·Ÿè¸ªçš„æ–‡ä»¶ <code>untracked files</code> </li><li><code>git clean -fd</code> - è¿åŒæœªè·Ÿè¸ªçš„ç›®å½•ä¹Ÿä¸€èµ·åˆ é™¤  </li><li><code>git clean -fdx</code> - åˆ é™¤æœªè·Ÿè¸ªçš„æ–‡ä»¶å’Œæ–‡ä»¶ç›®å½•ï¼Œå¹¶ç§»é™¤è¢«å¿½ç•¥çš„æ–‡ä»¶ã€‚å…¶ä¸­ï¼Œ<code>-x</code> è¡¨ç¤ºç§»é™¤è¢«å¿½ç•¥çš„æ–‡ä»¶å¹¶ä¸” <code>.gitignore</code> æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¹Ÿä¼šæ¸…é™¤æˆ–è€…æ¸…é™¤æ›´æ”¹</li></ul><h2 id="git-tag"><a href="#git-tag" class="headerlink" title="git tag"></a>git tag</h2><ul><li><code>git tag</code>ï¼š æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾</li><li><code>git tag -l &#39;v1.0.*&#39;</code>ï¼š ç”¨é€šé…ç¬¦æŸ¥çœ‹ç¬¦åˆç­›é€‰æ¡ä»¶çš„æ ‡ç­¾</li><li><code>git show xxx</code>ï¼š æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯ï¼ˆæäº¤è€…ï¼Œé‚®ç®±ç­‰ï¼‰</li><li><code>git tag xxx</code>ï¼š åˆ›å»ºè½»é‡æ ‡ç­¾</li><li><code>git tag -a xxx</code>ï¼š åˆ›å»ºå«æœ‰é™„æ³¨çš„æ ‡ç­¾</li><li><code>git tag -a xxx -m &#39;xxxx&#39;</code>ï¼š åˆ›å»ºå«æœ‰é™„æ³¨çš„æ ‡ç­¾ï¼Œå¹¶é™„åŠ æäº¤ä¿¡æ¯ï¼ˆé»˜è®¤æ ‡ç­¾æ‰“åˆ°å½“å‰Headæäº¤çŠ¶æ€ï¼‰</li><li><code>git tag -a xxx -m &#39;xxxx&#39; \&lt;commitID&gt;</code>ï¼š åˆ›å»ºè¡¥ä¸æ ‡ç­¾ï¼Œå³å¯¹ä¹‹å‰çš„æäº¤æ·»åŠ æ ‡ç­¾</li><li><code>git tag -d xxx</code>ï¼š åˆ é™¤æœ¬åœ°æ ‡ç­¾</li><li><code>git push origin --delete tag &lt;tagname&gt;</code>ï¼š åˆ é™¤è¿œç¨‹æ ‡ç­¾</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<br>Git ä½¿ç”¨çš„æ ‡ç­¾æœ‰ 2 ç§ç±»å‹ï¼šè½»é‡çº§çš„ï¼ˆ<code>lightweight</code>ï¼‰å’Œå«é™„æ³¨çš„ï¼ˆ<code>annotated</code>ï¼‰ã€‚ â€”â€” <a href="https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%89%93%E6%A0%87%E7%AD%BE" target="_blank" rel="noopener">git tag | Doc</a></p><ul><li>è½»é‡çº§æ ‡ç­¾å°±åƒæ˜¯ä¸ªä¸ä¼šå˜åŒ–çš„åˆ†æ”¯ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯ä¸ªæŒ‡å‘ç‰¹å®šæäº¤å¯¹è±¡çš„å¼•ç”¨ã€‚</li><li>å«é™„æ³¨æ ‡ç­¾ï¼Œå®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨ä»“åº“ä¸­çš„ä¸€ä¸ªç‹¬ç«‹å¯¹è±¡ï¼Œå®ƒæœ‰è‡ªèº«çš„æ ¡éªŒå’Œä¿¡æ¯ï¼ŒåŒ…å«ç€æ ‡ç­¾çš„åå­—ï¼Œç”µå­é‚®ä»¶åœ°å€å’Œæ—¥æœŸï¼Œä»¥åŠæ ‡ç­¾è¯´æ˜ï¼Œæ ‡ç­¾æœ¬èº«ä¹Ÿå…è®¸ä½¿ç”¨ <code>GNU Privacy Guard</code> (<code>GPG</code>) æ¥ç­¾ç½²æˆ–éªŒè¯ã€‚</li></ul><p><strong>ä¸€èˆ¬æˆ‘ä»¬éƒ½å»ºè®®ä½¿ç”¨å«é™„æ³¨å‹çš„æ ‡ç­¾ï¼Œä»¥ä¾¿ä¿ç•™ç›¸å…³ä¿¡æ¯ï¼›å½“ç„¶ï¼Œå¦‚æœåªæ˜¯ä¸´æ—¶æ€§åŠ æ³¨æ ‡ç­¾ï¼Œæˆ–è€…ä¸éœ€è¦æ—æ³¨é¢å¤–ä¿¡æ¯ï¼Œç”¨è½»é‡çº§æ ‡ç­¾ä¹Ÿæ²¡é—®é¢˜ã€‚</strong></p><h2 id="cherry-pick"><a href="#cherry-pick" class="headerlink" title="cherry-pick"></a>cherry-pick</h2><ul><li><a href="https://juejin.im/post/5925a2d9a22b9d0058b0fd9b" target="_blank" rel="noopener">Cherry-Pick | æ˜é‡‘</a></li></ul><h3 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h3><p><code>cherry</code> è¯‘ä¸ºæ¨±æ¡ƒï¼Œ<code>pick</code> è¯‘æŒ‘é€‰ã€‚<code>git cherry-pick</code> å³é€‰æ‹©æŸä¸€ä¸ªåˆ†æ”¯ä¸­çš„ä¸€ä¸ªæˆ–å‡ ä¸ªæäº¤ï¼Œåˆå¹¶åˆ°å…¶ä»–åˆ†æ”¯ä¸­ï¼ˆé€‰æ‹©çš„æäº¤å³æ‰€éœ€çš„æ¨±æ¡ƒï¼‰ï¼Œä¸»è¦ä½¿ç”¨åœºæ™¯ä¸º</p><ul><li>æƒ…å†µ1ï¼š æŠŠå¼„é”™åˆ†æ”¯çš„æäº¤ç§»åŠ¨åˆ°æ­£ç¡®çš„åˆ†æ”¯ä¸Š</li><li>æƒ…å†µ2ï¼š å°†å…¶ä»–åˆ†æ”¯çš„æäº¤æ·»åŠ åˆ°å½“å‰åˆ†æ”¯</li></ul><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><p>å‡è®¾å·¥ç¨‹æœ‰ä¸ªç¨³å®šç‰ˆåˆ†æ”¯ <code>v2.0</code>ï¼Œè¿˜æœ‰ä¸ªå¼€å‘ç‰ˆåˆ†æ”¯ <code>v3.0</code>ã€‚å¼€å‘åˆ†æ”¯è¿˜æœªå½»åº•å®Œæˆï¼Œä¸èƒ½ç›´æ¥æŠŠä¸¤ä¸ªåˆ†æ”¯åˆå¹¶ï¼Œè¿™æ ·ä¼šå¯¼è‡´ç¨³å®šç‰ˆæœ¬æ··ä¹±ï¼Œä½†æ˜¯åˆæƒ³å¢åŠ ä¸€ä¸ª <code>v3.0</code> ä¸­çš„åŠŸèƒ½åˆ° <code>v2.0</code> ä¸­ï¼Œè¿™é‡Œå°±å¯ä»¥ä½¿ç”¨ <code>cherry-pick</code> äº†ã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…ˆåœ¨v3.0ä¸­æŸ¥çœ‹è¦åˆå¹¶çš„commitçš„commit id</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"><span class="comment">// å‡è®¾æ˜¯ commit f79b0b1ffe445cab6e531260743fa4e08fb4048b</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ‡åˆ°v2.0ä¸­</span></span><br><span class="line">git checkout v2.<span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆå¹¶commit</span></span><br><span class="line">git cherry-pick f79b0b1ffe445cab6e531260743fa4e08fb4048b     </span><br><span class="line">git cherry-pick -x f79b0b1ffe445cab6e531260743fa4e08fb4048b   <span class="comment">//è¡¨ç¤ºä¿ç•™åŸæäº¤çš„ä½œè€…ä¿¡æ¯è¿›è¡Œæäº¤</span></span><br></pre></td></tr></table></figure><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><ul><li><code>git cherry_pick commitID</code>ï¼šå°†å…¶ä»–åˆ†æ”¯çš„ <code>commitID</code> æäº¤åˆå¹¶åˆ°å½“å‰åˆ†æ”¯</li><li><code>git cherry_pick commitID</code>ï¼šå°†å…¶ä»–åˆ†æ”¯çš„ <code>commitID</code> æäº¤åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ï¼Œ<code>-x</code> è¡¨ç¤ºä¿ç•™åŸæäº¤çš„ä½œè€…ä¿¡æ¯è¿›è¡Œæäº¤</li><li><code>git cherry_pick &lt;start-commit-id&gt;â€¦&lt;end-commit-id&gt;</code>: è¯¥åŠŸèƒ½åœ¨Git 1.7.2 ç‰ˆæœ¬åæ‰æ”¯æŒï¼Œå°†ä¸€ä¸ªè¿ç»­åŒºé—´èŒƒå›´çš„æäº¤ï¼Œåˆå¹¶åˆ°åˆ°å½“å‰åˆ†æ”¯ã€‚æäº¤èŒƒå›´åŒºé—´å·¦å¼€å³é—­ï¼Œå³<code>(start, end]</code></li><li><code>git cherry_pick &lt;start-commit-id&gt;^ â€¦ &lt;end-commit-id&gt;</code>: åŒä¸Šï¼Œä½¿ç”¨ <code>^</code> è¡¨ç¤ºåŒ…å« <code>start-commit-id</code>ï¼Œå³<code>[start, end]</code></li></ul><blockquote><p>JetBranins ç³»åˆ—IDEï¼Œå†…ç½®äº†git cherry-pick å¿«æ·é”®ï¼ˆæ¨±æ¡ƒå›¾æ ‡ï¼‰</p></blockquote><h2 id="gitå‘½ä»¤è¡Œä»£ç†è®¾ç½®"><a href="#gitå‘½ä»¤è¡Œä»£ç†è®¾ç½®" class="headerlink" title="gitå‘½ä»¤è¡Œä»£ç†è®¾ç½®"></a>gitå‘½ä»¤è¡Œä»£ç†è®¾ç½®</h2><h3 id="è®¾ç½®ä»£ç†"><a href="#è®¾ç½®ä»£ç†" class="headerlink" title="è®¾ç½®ä»£ç†"></a>è®¾ç½®ä»£ç†</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global http<span class="selector-class">.proxy</span> <span class="string">'socks5://127.0.0.1:1086'</span></span><br><span class="line">git config --global https<span class="selector-class">.proxy</span> <span class="string">'socks5://127.0.0.1:1086'</span></span><br></pre></td></tr></table></figure><h3 id="å–æ¶ˆä»£ç†"><a href="#å–æ¶ˆä»£ç†" class="headerlink" title="å–æ¶ˆä»£ç†"></a>å–æ¶ˆä»£ç†</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global --unset http.proxy</span><br><span class="line">git<span class="built_in"> config </span>--global --unset https.proxy</span><br></pre></td></tr></table></figure><h2 id="GitUp"><a href="#GitUp" class="headerlink" title="GitUp"></a>GitUp</h2><blockquote><p>Work quickly, safely, and without headaches.<br>The Git interface youâ€™ve been missing<br>all your life has finally arrived.</p></blockquote><ul><li><a href="http://gitup.co/" target="_blank" rel="noopener">GitUp</a></li><li><a href="http://qinghua.github.io/gitup/" target="_blank" rel="noopener">Tutorial</a></li></ul><h2 id="GitG"><a href="#GitG" class="headerlink" title="GitG"></a>GitG</h2><ul><li><code>gitg</code>æ˜¯ä¸€ä¸ªgitå›¾å½¢åŒ–ç•Œé¢ã€‚</li><li>å®‰è£…</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install gitg   <span class="comment">//å®‰è£…</span></span><br></pre></td></tr></table></figure><ul><li>ä½¿ç”¨</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitg  <span class="comment">// åœ¨ç›®å½•ç»ˆç«¯ä¸‹è¾“å…¥gitgå³å¯</span></span><br></pre></td></tr></table></figure><h2 id="Git-ä»£ç å›æ»š"><a href="#Git-ä»£ç å›æ»š" class="headerlink" title="Git ä»£ç å›æ»š"></a>Git ä»£ç å›æ»š</h2><ul><li><a href="https://sunmengyuan.github.io/garden/2017/06/15/git-revert.html?page=2" target="_blank" rel="noopener">è°ˆè°ˆ Git ä»£ç å›æ»š</a></li></ul><h3 id="åœºæ™¯æè¿°"><a href="#åœºæ™¯æè¿°" class="headerlink" title="åœºæ™¯æè¿°"></a>åœºæ™¯æè¿°</h3><p>æŸé¡¹ç›®ï¼Œå¹¶è¡Œå¼€å‘ç€nä¸ªéœ€æ±‚ã€‚ææµ‹æ—¶ï¼Œå„éœ€æ±‚çš„ä»£ç è¢«åˆå¹¶åˆ°æµ‹è¯•åˆ†æ”¯ã€‚ä¸ä¹…ä¹‹åï¼Œè¦æ±‚æŠŠéƒ¨åˆ†éœ€æ±‚ä»£ç ä»æµ‹è¯•åˆ†æ”¯æŠ½ç¦»å‡ºå»ã€‚ä½¿ç”¨ä¸‹å›¾åœºæ™¯è¿›è¡Œæè¿°ã€‚å¹¶è¡Œå¼€å‘3ä¸ªéœ€æ±‚ï¼Œåˆ†åˆ«æ˜¯<code>feature1</code>ï¼Œ<code>feature2</code>ï¼Œ<code>feature3</code>ã€‚æµ‹è¯•åˆ†æ”¯ä¸º<code>master</code>ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-1.jpg" alt="git-rollback"></p><p><code>feature2</code>ä¸<code>feature3</code>å¯¹åŒä¸€æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæ•…æ„åˆ¶é€ ä¸€ä¸ªå†²çªã€‚ </p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-2.jpg" alt="git-rollback"></p><p>ææµ‹æ—¶ï¼Œå„åˆ†æ”¯ä»£ç è¢«åˆå¹¶åˆ°æµ‹è¯•åˆ†æ”¯ï¼ˆ<code>master</code>ï¼‰ã€‚é¦–å…ˆï¼Œ<code>featuer1</code>åˆ†æ”¯è¢«åˆå¹¶åˆ°æµ‹è¯•åˆ†æ”¯ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-3.jpg" alt="git-rollback"></p><p>ä¹‹åï¼Œ<code>featuer2</code>åˆ†æ”¯ä¹Ÿè¢«åˆå¹¶åˆ°æµ‹è¯•åˆ†æ”¯ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-4.jpg" alt="git-rollback"></p><p>æœ€åï¼Œåˆå¹¶<code>feature3</code>è‡³æµ‹è¯•åˆ†æ”¯ã€‚åˆå¹¶æ—¶ï¼Œäº§ç”Ÿäº†ä¸<code>feature2</code>ä»£ç çš„å†²çªã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-5.jpg" alt="git-rollback"></p><p>è§£å†³å†²çªä¹‹åï¼Œç»§ç»­å°†<code>feature3</code>åˆå¹¶è‡³æµ‹è¯•åˆ†æ”¯ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-6.jpg" alt="git-rollback"></p><p>åœ¨<code>feature3</code>ææµ‹åï¼Œåœ¨æµ‹è¯•åˆ†æ”¯ä¸Šç»§ç»­ä¿®å¤å‡ ä¸ªbugã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-7.jpg" alt="git-rollback"></p><p>æ³¨æ„ï¼Œæ­¤æ—¶<code>feature2</code>è™½å·²ææµ‹ä½†å¹¶æœªè¿›å…¥æµ‹è¯•ï¼Œæ­¤æ—¶çš„bugä¿®å¤å‡æ˜¯é’ˆå¯¹ <code>feature1</code>ä¸<code>feature3</code>ã€‚</p><p>å‡ å¤©ä¹‹åï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œ<code>feature2</code>çš„æµ‹è¯•æ— æ³•æ­£å¸¸è¿›è¡Œï¼Œéœ€å°†ä»£ç ä»æµ‹è¯•åˆ†æ”¯ä¸ŠæŠ½å‡ºã€‚</p><h3 id="ä»£ç å›æ»šæ“ä½œ"><a href="#ä»£ç å›æ»šæ“ä½œ" class="headerlink" title="ä»£ç å›æ»šæ“ä½œ"></a>ä»£ç å›æ»šæ“ä½œ</h3><h4 id="Step-1-åˆ‡æ¢åˆ†æ”¯"><a href="#Step-1-åˆ‡æ¢åˆ†æ”¯" class="headerlink" title="Step 1 åˆ‡æ¢åˆ†æ”¯"></a>Step 1 åˆ‡æ¢åˆ†æ”¯</h4><p>é¦–å…ˆï¼Œåˆ‡æ¢åˆ°<code>featuer2</code>åˆ†æ”¯ã€‚ä»¥é˜²ä¸‡ä¸€ï¼Œåˆ›å»º<code>feature2-copy</code>åˆ†æ”¯ï¼Œå¯¹è¯¥åˆ†æ”¯è¿›è¡Œå¤‡ä»½ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git checkout feature2   <span class="comment">//åˆ‡æ¢åˆ°feature2åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">git checkout -b feature2-<span class="built_in">copy</span>   <span class="comment">//åˆ›å»ºå¹¶åˆ‡æ¢åˆ°feature2-copy</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬2è¡Œä»£ç ç­‰åŒäº</span></span><br><span class="line">git branch feature2-<span class="built_in">copy</span>  <span class="comment">//åˆ›å»ºfeature2-copyåˆ†æ”¯</span></span><br><span class="line">git checkout feature2-<span class="built_in">copy</span> <span class="comment">//åˆ‡æ¢åˆ°feature2-copyåˆ†æ”¯</span></span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-8.jpg" alt="git-rollback"></p><h4 id="Step-2-ç¡®å®šè¦å›æ»šçš„æäº¤è®°å½•"><a href="#Step-2-ç¡®å®šè¦å›æ»šçš„æäº¤è®°å½•" class="headerlink" title="Step 2 ç¡®å®šè¦å›æ»šçš„æäº¤è®°å½•"></a>Step 2 ç¡®å®šè¦å›æ»šçš„æäº¤è®°å½•</h4><p>ä½¿ç”¨<code>git log</code>æŸ¥çœ‹<code>feature2-copy</code>åˆ†æ”¯çš„æäº¤è®°å½•ï¼ˆè¾“å…¥<code>q</code>é€€å‡º<code>git log</code>ç¯å¢ƒï¼‰ã€‚</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span></span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-9.jpg" alt="git-rollback"></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œéœ€è¦å›æ»šæœ€æ–°çš„3ä¸ªæäº¤ã€‚å®é™…æƒ…å†µä¸­ï¼Œé’ˆå¯¹æŸéœ€æ±‚çš„æäº¤ç»ä¸æ­¢3ä¸ªã€‚è‹¥æ˜¯å°†æäº¤é€ä¸€<code>revert</code>ï¼Œå·¥ä½œé‡æ˜¯éå¸¸å¤§çš„ã€‚éœ€è¦è€ƒè™‘å°†<code>n</code>ä¸ª<code>commit</code>åˆå¹¶ä¸ºä¸€ä¸ª<code>commit</code>ï¼Œæœ€åä¸€åŒ<code>revert</code>ã€‚</p><h4 id="Step-3-git-rebase-åˆå¹¶æäº¤"><a href="#Step-3-git-rebase-åˆå¹¶æäº¤" class="headerlink" title="Step 3 git rebase åˆå¹¶æäº¤"></a>Step 3 git rebase åˆå¹¶æäº¤</h4><p>ä½¿ç”¨<code>git rebase -i</code>æ¥åˆå¹¶<code>commit</code>ï¼Œä¼ å…¥éœ€è¦æ‹¼æ¥å›æ»šè‡³çš„æäº¤çš„<code>hashcode</code>ã€‚ï¼ˆæ­¤å¤„ï¼Œå°†æ‰€æœ‰å›æ»šçš„æäº¤åˆå¹¶åˆ°éœ€è¦å›æ»šçš„<code>commit</code>é›†åˆä¸­ç¬¬ä¸€ä¸ªæäº¤ï¼‰</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hashcodeä¸ºéœ€è¦å›æ»šçš„commité›†åˆä¸­ç¬¬ä¸€ä¸ªæäº¤</span></span><br><span class="line">git rebase -<span class="selector-tag">i</span> e08ddaf558b9ad84422db5e4b620dcab97623fde</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-10.jpg" alt="git-rollback"></p><p>å°†æœ€è¿‘2æ¬¡æäº¤çš„<code>command</code>ä»<code>pick</code>æ”¹ä¸º<code>s</code>ã€‚</p><blockquote><p>åœ¨Vimä¸­ï¼Œ</p><ol><li>è¾“å…¥<code>i</code>ï¼Œè¿›å…¥<code>INSERT</code>æ¨¡å¼ã€‚</li><li>è¾“å…¥<code>ESC</code>ï¼Œè¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ã€‚</li><li>è¾“å…¥<code>:wq</code>ï¼Œä¿å­˜å¹¶é€€å‡ºVIMç¼–è¾‘å™¨ã€‚</li></ol></blockquote><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-11.jpg" alt="git-rollback"></p><p>ä¿®æ”¹åï¼Œä¿å­˜å¹¶é€€å‡ºï¼Œè¿›å…¥å¦‚ä¸‹å¯¹è¯æ¡†ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-12.jpg" alt="git-rollback"></p><p>æ­¤æ—¶ï¼Œå¯¹æœ€åˆä¸€æ¬¡çš„æäº¤çš„<code>commit message</code>è¿›è¡Œä¿®æ”¹ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-13.jpg" alt="git-rollback"></p><p>ä¿®æ”¹åä¿å­˜å¹¶é€€å‡ºï¼Œä½¿ç”¨<code>git log</code> å†æ¬¡æŸ¥çœ‹ <code>feature2-copy</code> åˆ†æ”¯çš„ä¿¡æ¯ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-14.jpg" alt="git-rollback"></p><p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ3æ¬¡æäº¤è¢«æˆåŠŸåˆå¹¶ã€‚</p><h4 id="Step-4-git-revert-æ’¤é”€æäº¤"><a href="#Step-4-git-revert-æ’¤é”€æäº¤" class="headerlink" title="Step 4 git revert æ’¤é”€æäº¤"></a>Step 4 git revert æ’¤é”€æäº¤</h4><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">git</span> <span class="keyword">revert </span>e544464c3de69adef5ca7556001abebaf40b218b</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-15.jpg" alt="git-rollback"></p><p>ä¿å­˜å¹¶é€€å‡ºï¼Œå†æ¬¡æŸ¥çœ‹<code>feature2-copy</code>åˆ†æ”¯çš„æäº¤è®°å½•ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-16.jpg" alt="git-rollback"></p><h4 id="Step-5-git-cherry-pick"><a href="#Step-5-git-cherry-pick" class="headerlink" title="Step 5 git cherry-pick"></a>Step 5 git cherry-pick</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout <span class="keyword">master</span>   <span class="title">//åˆ‡æ¢åˆ°æµ‹è¯•åˆ†æ”¯</span></span><br><span class="line"><span class="title">git</span> cherry-pick b309f7944d2422d8fe647dca61bda518b192628f</span><br></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ°æµ‹è¯•åˆ†æ”¯ï¼Œå¹¶æ‰§è¡Œ <code>git cherry-pick</code> å‘½ä»¤ã€‚è‡³æ­¤ï¼ŒæˆåŠŸçš„å°†<code>feature2</code>åˆ†æ”¯ä»æµ‹è¯•åˆ†æ”¯ä¸ŠæŠ½ç¦»ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-rollback-17.jpg" alt="git-rollback"></p><h2 id="Gitä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œ"><a href="#Gitä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œ" class="headerlink" title="Gitä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œ"></a>Gitä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œ</h2><ul><li><a href="https://segmentfault.com/l/1500000015442316/play" target="_blank" rel="noopener">è§†é¢‘æ•™ç¨‹ | Segmentfault</a></li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-team-usage-3.png" alt="git-team-usage"></p><p>ä»£ç æœ€ç»ˆæäº¤æ•ˆæœå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚</p><ul><li>ä¸»åˆ†æ”¯ä¸º<code>master</code>ï¼Œåˆ›å»ºä¸€ä¸ª<code>develop</code>åˆ†æ”¯ç”¨äºå¼€å‘ã€‚</li><li>å¼€å‘è€…<code>leo</code>å’Œ<code>jack</code>åˆ›å»ºè‡ªå·±çš„åˆ†æ”¯<code>leo</code>å’Œ<code>jack</code>è¿›è¡Œå¼€å‘ã€‚å¼€å‘å®Œæˆåï¼Œå°†å…¶åˆå¹¶åˆ°<code>develop</code>åˆ†æ”¯ä¸Šã€‚</li><li>é¡¹ç›®è¿›å±•åˆ°éœ€è¦å‘å¸ƒæ—¶ï¼Œä»<code>develop</code>åˆ†æ”¯åˆ›å»º<code>release</code>åˆ†æ”¯ï¼Œç”¨äºæµ‹è¯•ã€‚æµ‹è¯•é€šè¿‡åï¼Œå°†<code>release</code>åˆ†æ”¯åˆå¹¶åˆ°<code>develop</code>åˆ†æ”¯å’Œ<code>master</code>åˆ†æ”¯ä¸Šã€‚</li></ul><h3 id="Demoç›®å½•å’Œåˆå§‹åŒ–"><a href="#Demoç›®å½•å’Œåˆå§‹åŒ–" class="headerlink" title="Demoç›®å½•å’Œåˆå§‹åŒ–"></a>Demoç›®å½•å’Œåˆå§‹åŒ–</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">//</span>ç›®å½•ç»“æ„</span><br><span class="line">-- c4</span><br><span class="line"><span class="params">---</span>|<span class="params">---</span> origin   <span class="string">//</span>æ¨¡æ‹Ÿè¿œç¨‹ä»“åº“  git init <span class="params">--bare</span> åˆ›å»º</span><br><span class="line"><span class="params">---</span>|<span class="params">---</span> leo    <span class="string">//</span>å¼€å‘è€…1  è®¾ç½®user.name = 'leo'</span><br><span class="line"><span class="params">---</span>|<span class="params">---</span> jack    <span class="string">//</span>å¼€å‘è€…2  è®¾ç½®user.name = 'jack'</span><br></pre></td></tr></table></figure><blockquote><p><code>git init --bare</code> ç”¨äºåˆ›å»ºä¸€ä¸ªâ€œè£¸ä»“åº“â€â€”â€”åªå«æœ‰ <code>.git</code> ç›®å½•ï¼Œä¸å«æºæ–‡ä»¶ã€‚è¯¦æƒ…å‚è€ƒ <a href="https://segmentfault.com/q/1010000004683286" target="_blank" rel="noopener">Ref</a>ã€‚</p></blockquote><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mkdir</span> <span class="string">c4</span></span><br><span class="line"><span class="attr">cd</span> <span class="string">c4</span></span><br><span class="line"><span class="attr">mkdir</span> <span class="string">origin </span></span><br><span class="line"><span class="attr">cd</span> <span class="string">origin </span></span><br><span class="line"><span class="attr">git</span> <span class="string">init --bare   //åˆ›å»ºä¸€ä¸ªè£¸ä»“åº“</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cd</span> <span class="string">..</span></span><br><span class="line"></span><br><span class="line"><span class="meta">//å…‹éš†è¿œç¨‹ä»“åº“è‡³ä¸¤ä¸ªå¼€å‘è€…ç›®å½•â€”â€”leo,</span> <span class="string">jack</span></span><br><span class="line"><span class="attr">git</span> <span class="string">clone origin leo</span></span><br><span class="line"><span class="attr">git</span> <span class="string">clone origin jack</span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ¨¡æ‹Ÿå›¢é˜Ÿåä½œï¼Œå¯¹ä¸¤ä¸ªå¼€å‘è€…ç›®å½•ï¼Œåˆ†åˆ«è®¾ç½®ä¸åŒçš„ <code>user.name</code> ä¿¡æ¯ã€‚</p><blockquote><p><code>git config --local</code>ï¼Œä½¿ç”¨ <code>--local</code> å‚æ•°ï¼Œåªå¯¹æœ¬åœ°å‚æ•°è¿›è¡Œé…ç½®ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> leo</span><br><span class="line">git config --<span class="built_in">local</span> user.name <span class="string">'leo'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> jack</span><br><span class="line">git config --<span class="built_in">local</span> user.name <span class="string">'jack'</span></span><br></pre></td></tr></table></figure><h3 id="å¼€å‘æµç¨‹"><a href="#å¼€å‘æµç¨‹" class="headerlink" title="å¼€å‘æµç¨‹"></a>å¼€å‘æµç¨‹</h3><h4 id="master-åˆ†æ”¯åˆå§‹åŒ–"><a href="#master-åˆ†æ”¯åˆå§‹åŒ–" class="headerlink" title="master åˆ†æ”¯åˆå§‹åŒ–"></a>master åˆ†æ”¯åˆå§‹åŒ–</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd leo </span><br><span class="line">echo <span class="selector-tag">a</span> = <span class="number">1</span> &gt; leo1<span class="selector-class">.py</span>  <span class="comment">// å°†a=1å†™å…¥leo1.pyæ–‡ä»¶</span></span><br><span class="line">cat leo1<span class="selector-class">.py</span>           <span class="comment">//æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"></span><br><span class="line">git add . </span><br><span class="line">git commit -m <span class="string">"c4 é¡¹ç›®åˆå§‹åŒ–"</span></span><br><span class="line"></span><br><span class="line">git tag <span class="number">0.0</span>.<span class="number">1</span>  <span class="comment">//æ·»åŠ æ ‡ç­¾ æ–¹ä¾¿ç®¡ç†</span></span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºdevelopåˆ†æ”¯"><a href="#åˆ›å»ºdevelopåˆ†æ”¯" class="headerlink" title="åˆ›å»ºdevelopåˆ†æ”¯"></a>åˆ›å»ºdevelopåˆ†æ”¯</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="selector-tag">b</span> develop</span><br><span class="line"></span><br><span class="line">echo <span class="selector-tag">b</span> = <span class="number">2</span> &gt; leo1.py</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"å»ºç«‹å¼€å‘åˆ†æ”¯å¹¶æäº¤"</span></span><br><span class="line"></span><br><span class="line">git push origin develop  <span class="comment">//æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line"></span><br><span class="line">gitg   <span class="comment">// ä½¿ç”¨gitgå›¾å½¢åŒ–å·¥å…·æŸ¥çœ‹æäº¤ä¿¡æ¯</span></span><br></pre></td></tr></table></figure><h4 id="leoè¿›è¡Œå¼€å‘"><a href="#leoè¿›è¡Œå¼€å‘" class="headerlink" title="leoè¿›è¡Œå¼€å‘"></a>leoè¿›è¡Œå¼€å‘</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git checkout -<span class="selector-tag">b</span> leo</span><br><span class="line">echo c=<span class="number">3</span> &gt; leo2.py</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"åˆ›å»ºleoåˆ†æ”¯å¹¶å¼€å‘"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå¹¶å½“å‰å¼€å‘åˆ°devåˆ†æ”¯</span></span><br><span class="line">git checkout develop</span><br><span class="line">git merge --no-ff leo  <span class="comment">//åˆå¹¶åˆ†æ”¯ å¹¶ä¿ç•™leoåˆ†æ”¯ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">gitg  <span class="comment">//æŸ¥çœ‹æäº¤å†å²æ ‘  gui</span></span><br></pre></td></tr></table></figure><blockquote><p><code>git merge --no-ff leo</code>ï¼Œåˆå¹¶åˆ†æ”¯ï¼Œå¹¶ä¿ç•™<code>leo</code>åˆ†æ”¯çš„ä¿¡æ¯ã€‚å…³äºå‚æ•°<code>--no-ff</code>çš„è¯¦æƒ…ï¼Œå‚è€ƒ <a href="https://segmentfault.com/q/1010000002477106" target="_blank" rel="noopener">Ref</a>ã€‚</p></blockquote><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-team-usage-1.png" alt="git-team-usage"></p><p>æœ€åï¼Œå°†å¼€å‘åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹ã€‚</p><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">push</span> <span class="built_in">origin</span> develop</span><br><span class="line"></span><br><span class="line">gitg</span><br></pre></td></tr></table></figure><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-team-usage-2.png" alt="git-team-usage"></p><h4 id="jackè¿›è¡Œå¼€å‘"><a href="#jackè¿›è¡Œå¼€å‘" class="headerlink" title="jackè¿›è¡Œå¼€å‘"></a>jackè¿›è¡Œå¼€å‘</h4><p>é¦–å…ˆï¼Œä»è¿œç¨‹æ‹‰å–æœ€æ–°ä»£ç ã€‚</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">git pull origin</span></span><br></pre></td></tr></table></figure><p>ä¹‹åï¼Œjackè¿›è¡Œæ—¥å¸¸å¼€å‘ï¼Œæµç¨‹åŒleoå¼€å‘ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><h4 id="releaseåˆ†æ”¯æµ‹è¯•"><a href="#releaseåˆ†æ”¯æµ‹è¯•" class="headerlink" title="releaseåˆ†æ”¯æµ‹è¯•"></a>releaseåˆ†æ”¯æµ‹è¯•</h4><p>é¡¹ç›®è¿›å±•åˆ°éœ€å‘å¸ƒæ—¶ï¼Œä»<code>develop</code>åˆ†æ”¯åˆ›å»º<code>release</code>åˆ†æ”¯ï¼Œç”¨äºæµ‹è¯•ã€‚æµ‹è¯•é€šè¿‡åï¼Œå°†<code>release</code>åˆ†æ”¯åˆå¹¶åˆ°<code>develop</code>åˆ†æ”¯å’Œ<code>master</code>åˆ†æ”¯ä¸Šã€‚</p><h2 id="è¿œç¨‹å¤šåˆ†æ”¯ä»£ç æ‹‰å–"><a href="#è¿œç¨‹å¤šåˆ†æ”¯ä»£ç æ‹‰å–" class="headerlink" title="è¿œç¨‹å¤šåˆ†æ”¯ä»£ç æ‹‰å–"></a>è¿œç¨‹å¤šåˆ†æ”¯ä»£ç æ‹‰å–</h2><p>æ­¤å¤„è®°å½•å¦‚ä½•æ‹‰å–è¿œç¨‹æ‰€æœ‰åˆ†æ”¯ï¼Œå¹¶å»ºç«‹æœ¬åœ°åˆ†æ”¯è¿½è¸ªè¿œç¨‹åˆ†æ”¯ã€‚</p><ul><li>Step 1ï¼š <code>clone</code> è¿œç¨‹ä»£ç </li><li>Step 2ï¼š åœ¨sourcetreeä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿œç¨‹åˆ†æ”¯æœ‰<code>origin/master</code>ï¼Œ<code>origin/dev</code>å’Œ<code>origin/webtest</code>ã€‚æ­¤æ—¶æœ¬åœ°åˆ†æ”¯ä¸º<code>dev</code>ï¼Œå¹¶å»ºç«‹äº†è¿½è¸ªå…³ç³»ã€‚</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-pull-branches-1.png" alt="git pull branches"></p><ul><li>Step 3ï¼š åœ¨å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ï¼ˆ<code>origin/master</code>ï¼‰ä¸Šç‚¹å‡»ï¼Œæ£€å‡ºåˆ†æ”¯ï¼Œè®¾å®šæœ¬åœ°åˆ†æ”¯åï¼Œå¹¶è¿½è¸ªè¿œç¨‹åˆ†æ”¯å³å¯ã€‚</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-pull-branches-2.png" alt="git pull branches"></p><ul><li>Step 4ï¼š æœ€ç»ˆæ•ˆæœå¦‚ä¸‹å›¾ï¼Œæ£€å‡ºæœ¬åœ°åˆ†æ”¯å¹¶è¿½è¸ªè¿œç¨‹ã€‚</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/programming-2019/git-pull-branches-3.png" alt="git pull branches"></p><blockquote><p>Tip</p><p><code>git branch -r</code>ï¼š æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯</p><p><code>git branch -a</code>ï¼š æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯</p><p>Ref: <a href="https://gaohaoyang.github.io/2016/07/07/git-clone-not-master-branch/" target="_blank" rel="noopener">Blog</a></p></blockquote><h2 id="å¤šSSHé…ç½®"><a href="#å¤šSSHé…ç½®" class="headerlink" title="å¤šSSHé…ç½®"></a>å¤šSSHé…ç½®</h2><ol><li>å–æ¶ˆå…¨å±€è´¦æˆ·å’Œé‚®ç®±è®¾ç½®</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--unset --global user.name</span><br><span class="line">git<span class="built_in"> config </span>--unset --global user.email</span><br></pre></td></tr></table></figure><ol start="2"><li>æ–°å»ºSSH keyï¼š</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br><span class="line">ssh-keygen -t rsa -C <span class="string">"liubaoshuai1@jd.com"</span> </span><br><span class="line">Enter <span class="built_in">file</span> <span class="keyword">in</span> which <span class="built_in">to</span> save <span class="keyword">the</span> key (/User/lbs/.ssh/id_rsa): id_rsa_jd  <span class="comment"># è¾“å…¥æ–‡ä»¶å</span></span><br></pre></td></tr></table></figure><ol start="3"><li>æ–°å¯†é’¥æ·»åŠ åˆ° SSH Agent</li></ol><p>é»˜è®¤åªè¯»å– <code>id_rsa</code>ï¼Œä¸ºäº†è®© SSH è¯†åˆ«æ–°çš„ç§é’¥ï¼Œéœ€å°†å…¶æ·»åŠ åˆ° SSH Agent ä¸­</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-<span class="keyword">add</span><span class="bash"> ~/.ssh/id_rsa_jd</span></span><br></pre></td></tr></table></figure><p>è‹¥å‡ºç° <code>Could not open a connection to your authentication agent</code> é”™è¯¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">ssh</span>-agent <span class="keyword">bash</span></span><br><span class="line"><span class="keyword">ssh-add </span>~/.ssh/id_rsa_jd</span><br></pre></td></tr></table></figure><ol start="4"><li>ä¿®æ”¹ <code>config</code> æ–‡ä»¶</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim<span class="built_in"> config </span>     # è‹¥æ²¡æœ‰ï¼Œå¯åˆ›å»º  touch config</span><br></pre></td></tr></table></figure><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">default</span> <span class="selector-tag">user</span> (lbs1203940926<span class="variable">@163</span>.com)</span><br><span class="line"><span class="selector-tag">Host</span> <span class="selector-tag">github</span><span class="selector-class">.com</span></span><br><span class="line">   <span class="selector-tag">HostName</span> <span class="selector-tag">github</span><span class="selector-class">.com</span></span><br><span class="line">   <span class="selector-tag">User</span> <span class="selector-tag">lbs1203940926</span>@<span class="selector-tag">163</span><span class="selector-class">.com</span></span><br><span class="line">   <span class="selector-tag">PreferredAuthentications</span> <span class="selector-tag">publickey</span></span><br><span class="line">   <span class="selector-tag">IdentityFile</span> /<span class="selector-tag">Users</span>/<span class="selector-tag">lbs</span>/<span class="selector-class">.ssh</span>/<span class="selector-tag">id_rsa</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">jd-gitlab</span>(liubaoshuai1<span class="variable">@jd</span>.com))</span><br><span class="line"><span class="selector-tag">Host</span> <span class="selector-tag">git</span><span class="selector-class">.jd</span><span class="selector-class">.com</span></span><br><span class="line">   <span class="selector-tag">HostName</span> <span class="selector-tag">git</span><span class="selector-class">.jd</span><span class="selector-class">.comm</span></span><br><span class="line">   <span class="selector-tag">User</span> <span class="selector-tag">liubaoshuai1</span>@<span class="selector-tag">jd</span><span class="selector-class">.com</span></span><br><span class="line">   <span class="selector-tag">PreferredAuthentications</span> <span class="selector-tag">publickey</span></span><br><span class="line">   <span class="selector-tag">IdentityFile</span> /<span class="selector-tag">Users</span>/<span class="selector-tag">lbs</span>/<span class="selector-class">.ssh</span>/<span class="selector-tag">id_rs_jd</span></span><br></pre></td></tr></table></figure><ol start="5"><li>æ‹‰å–JDä»£ç </li></ol><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># æµ‹è¯•æš‚ä¸æ”¯æŒSourceTreeä¸­è¿œç¨‹æ‹‰å–ï¼Œéœ€è¦ç»ˆç«¯å‘½ä»¤è¡Œæ‹‰å–</span></span><br><span class="line"><span class="meta"># ä¸”æš‚åªæ”¯æŒhttpsåè®®</span></span><br><span class="line"></span><br><span class="line">git clone http:<span class="comment">//git.jd.com/jdreact/jdreact-jsbundle-jdreactonehourarrive</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># UserName: liubaoshuai</span></span><br><span class="line"><span class="meta"># PassWord: ERP's password</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;æ€»ç»“æ—¥å¸¸å¼€å‘ä¸­çš„ Git è¿›é˜¶ä½¿ç”¨&lt;/li&gt;
&lt;li&gt;è®°å½•å¤š &lt;code&gt;SSH&lt;/code&gt; é…ç½®ï¼Œ&lt;code&gt;git reflog&lt;/code&gt; è§£å†³ &lt;code&gt;detached-head&lt;/code&gt; ä»£ç ä¸¢å¤±é—®é¢˜&lt;/li&gt;
&lt;li&gt;æ€»ç»“å›¢é˜Ÿåä½œä¸‹ï¼Œå¦‚ä½•ä¿æŒ git æäº¤ä¿¡æ¯ç®€æ´&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Develop Tools" scheme="https://lbs0912.github.io/categories/Develop-Tools/"/>
    
    
      <category term="Develop Tools" scheme="https://lbs0912.github.io/tags/Develop-Tools/"/>
    
      <category term="Git" scheme="https://lbs0912.github.io/tags/Git/"/>
    
  </entry>
  
  <entry>
    <title>RedisåŸºç¡€çŸ¥è¯†æ¢³ç†</title>
    <link href="https://lbs0912.github.io/2020/01/31/redis-basic/"/>
    <id>https://lbs0912.github.io/2020/01/31/redis-basic/</id>
    <published>2020-01-31T02:25:26.000Z</published>
    <updated>2020-02-23T08:48:04.366Z</updated>
    
    <content type="html"><![CDATA[<ul><li>å¯¹ Redis åŸºç¡€çŸ¥è¯†è¿›è¡Œæ¢³ç†ï¼ŒåŒ…æ‹¬Redisçš„5ç§æ•°æ®ç±»å‹ï¼Œäº‹åŠ¡ï¼Œè¿‡æœŸæ—¶é—´ï¼Œæ¶ˆæ¯é€šçŸ¥ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œç®¡é“ï¼Œæ•°æ®æŒä¹…åŒ–ï¼Œå¤åˆ¶ï¼Œå“¨å…µï¼Œäº‹åŠ¡ç­‰</li></ul><a id="more"></a><h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul><li>2020/01/30ï¼Œæ’°å†™</li></ul><h2 id="å­¦ä¹ èµ„æ–™æ±‡æ€»"><a href="#å­¦ä¹ èµ„æ–™æ±‡æ€»" class="headerlink" title="å­¦ä¹ èµ„æ–™æ±‡æ€»"></a>å­¦ä¹ èµ„æ–™æ±‡æ€»</h2><ul><li><a href="https://redis.io/" target="_blank" rel="noopener">Rediså®˜ç½‘</a></li><li><a href="http://www.redis.cn/" target="_blank" rel="noopener">Redisä¸­æ–‡å®˜ç½‘</a></li><li><a href="https://www.runoob.com/redis/redis-tutorial.html" target="_blank" rel="noopener">Redisèœé¸Ÿæ•™ç¨‹</a></li><li><a href="https://github.com/antirez/redis" target="_blank" rel="noopener">Redisæºç </a> â€”â€” ä½¿ç”¨Cè¯­è¨€å¼€å‘ï¼Œæºç åªæœ‰3ä¸‡å¤šè¡Œï¼Œé™ä½äº†ç”¨æˆ·é€šè¿‡ä¿®æ”¹Redisæºç æ¥æå‡æ€§èƒ½çš„é—¨æ§›</li></ul><h2 id="Redis-åˆè¯†"><a href="#Redis-åˆè¯†" class="headerlink" title="Redis åˆè¯†"></a>Redis åˆè¯†</h2><ul><li>Redis = Remote Dictionary Serverï¼Œè¿œç¨‹å­—å…¸æœåŠ¡å™¨</li><li>Redis æ˜¯ä¸€ä¸ª é«˜æ€§èƒ½çš„ <code>key-value</code> å­˜å‚¨ç³»ç»Ÿï¼Œé€šå¸¸è¢«ç§°ä¸ºæ•°æ®ç»“æ„æœåŠ¡å™¨ï¼Œå› ä¸ºå€¼ï¼ˆvalueï¼‰å¯ä»¥æ˜¯ å­—ç¬¦ä¸²(String), å“ˆå¸Œ(Hash), åˆ—è¡¨(list), é›†åˆ(sets) å’Œæœ‰åºé›†åˆ(sorted sets)ç­‰ç±»å‹ã€‚</li><li>Redis ä¸å…¶ä»– <code>key - value</code> ç¼“å­˜äº§å“æœ‰ä»¥ä¸‹3ä¸ªç‰¹ç‚¹<ol><li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨</li><li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨</li><li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½</li></ol></li><li>Redis æ€§èƒ½æé«˜ï¼Œè¯»å–é€Ÿåº¦æ˜¯110000æ¬¡/sï¼Œå†™å…¥çš„é€Ÿåº¦æ˜¯81000æ¬¡/sã€‚Redisæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå†…å­˜è¯»å†™é€Ÿåº¦è¿œå¿«äºç£ç›˜ã€‚</li><li>RedisåŠŸèƒ½ä¸°å¯Œï¼Œé™¤äº†ç”¨äºæ•°æ®åº“å¼€å‘ï¼Œè¿˜å¯ä»¥ç”¨äºç¼“å­˜ï¼Œé˜Ÿåˆ—ç³»ç»Ÿç­‰ã€‚</li><li>Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œæ„æ€å°±æ˜¯è¦ä¹ˆæˆåŠŸæ‰§è¡Œè¦ä¹ˆå¤±è´¥å®Œå…¨ä¸æ‰§è¡Œã€‚å•ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„ã€‚å¤šä¸ªæ“ä½œä¹Ÿæ”¯æŒäº‹åŠ¡ï¼Œå³åŸå­æ€§ï¼Œé€šè¿‡MULTIå’ŒEXECæŒ‡ä»¤åŒ…èµ·æ¥ã€‚</li></ul><h2 id="Redisç¯å¢ƒé…ç½®"><a href="#Redisç¯å¢ƒé…ç½®" class="headerlink" title="Redisç¯å¢ƒé…ç½®"></a>Redisç¯å¢ƒé…ç½®</h2><h3 id="å®‰è£…-Redis"><a href="#å®‰è£…-Redis" class="headerlink" title="å®‰è£… Redis"></a>å®‰è£… Redis</h3><ul><li>Macä¸Šï¼Œå»ºè®®ä½¿ç”¨Homebrewå®‰è£…Redis</li></ul><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">brew install redis    <span class="comment">//ä¼šé»˜è®¤å®‰è£…å½“å‰æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/// æ­¤å¤„å®‰è£…è·¯å¾„ä¸º usr/local/Cellar/redis/5.0.7</span></span><br><span class="line"><span class="comment">//==&gt; Caveats</span></span><br><span class="line"><span class="comment">// To have launchd start redis now and restart at login:</span></span><br><span class="line"><span class="comment">//  brew services start redis</span></span><br><span class="line"><span class="comment">//Or, if you don't want/need a background service you can just run:</span></span><br><span class="line"><span class="comment">//  redis-server /usr/local/etc/redis.conf</span></span><br><span class="line"><span class="comment">//==&gt; Summary</span></span><br><span class="line"><span class="comment">//ğŸº  /usr/local/Cellar/redis/5.0.7: 13 files, 3.1MB</span></span><br></pre></td></tr></table></figure><ul><li>å¦‚æœéœ€è¦åå°è¿è¡ŒRedisæœåŠ¡ï¼Œä½¿ç”¨å‘½ä»¤ <code>brew services start redis</code></li><li>å¦‚æœä¸éœ€è¦åå°è¿è¡ŒRedisæœåŠ¡ï¼Œä½¿ç”¨å‘½ä»¤ <code>redis-server /usr/local/etc/redis.conf</code></li></ul><h3 id="å¯åŠ¨-åœæ­¢Redis"><a href="#å¯åŠ¨-åœæ­¢Redis" class="headerlink" title="å¯åŠ¨/åœæ­¢Redis"></a>å¯åŠ¨/åœæ­¢Redis</h3><p>æ‰§è¡Œ <code>brew services start redi</code> å‘½ä»¤ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨ Redis åï¼Œåœ¨ <code>/usr/local/bin</code> ç›®å½•ä¸‹ï¼Œä¼šç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶å¤¹</p><table><thead><tr><th>æ–‡ä»¶å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>redis-server</td><td>redis æœåŠ¡å™¨</td></tr><tr><td>redis-cli</td><td>redis å‘½ä»¤è¡Œå®¢æˆ·ç«¯</td></tr><tr><td>redis-benchmark</td><td>redis æ€§èƒ½æµ‹è¯•å·¥å…·</td></tr><tr><td>redis-check-aof</td><td>AOF æ–‡ä»¶ä¿®å¤å·¥å…·</td></tr><tr><td>redis-check-dump</td><td>RDB æ–‡ä»¶æ£€æŸ¥å·¥å…·</td></tr><tr><td>redis-sentinel</td><td>Sentinel æœåŠ¡å™¨</td></tr></tbody></table><ul><li>å¯åŠ¨Redis</li></ul><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis-<span class="keyword">server</span>   <span class="comment">//é»˜è®¤ç«¯å£å· 6379</span></span><br><span class="line"></span><br><span class="line">redis-<span class="keyword">server</span> --port <span class="number">6380</span>  <span class="comment">//æŒ‡å®šç«¯å£å·</span></span><br></pre></td></tr></table></figure><ul><li>åœæ­¢Redis</li></ul><p>è€ƒè™‘åˆ° Redis æœ‰å¯èƒ½æ­£åœ¨å°†å†…å­˜ä¸­æ•°æ®åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ï¼Œå¼ºè¡Œç»ˆæ­¢Redisè¿›ç¨‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚å› æ­¤ï¼Œæ­£ç¡®åœæ­¢Redisçš„æ–¹å¼åº”è¯¥æ˜¯å‘Rediså‘é€ <code>SHUTDOWN</code> å‘½ä»¤ï¼Œæ–¹æ³•ä¸º</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli <span class="built_in">SHUTDOWN</span></span><br></pre></td></tr></table></figure><p>å½“ Redis æ”¶åˆ° <code>SHUTDOWN</code>  å‘½ä»¤åï¼Œä¼šå…ˆæ–­å¼€æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œç„¶åæ ¹æ®é…ç½®æ‰§è¡Œæ•°æ®æŒä¹…åŒ–ï¼Œæœ€åå®Œæˆé€€å‡ºã€‚</p><p>Redis å¯ä»¥å¦¥å–„å¤„ç† <code>SIGTERM</code> ä¿¡å·ï¼Œæ‰€ä»¥ä½¿ç”¨ <code>kill</code> Redis è¿›ç¨‹çš„ PIDï¼Œä¹Ÿå¯ä»¥æ­£å¸¸ç»“æŸ Redisï¼Œæ•ˆæœå’Œå‘é€ <code>SHUTDOWN</code> å‘½ä»¤ä¸€æ ·ã€‚</p><h3 id="redis-cli"><a href="#redis-cli" class="headerlink" title="redis-cli"></a>redis-cli</h3><p>Redis å‘½ä»¤ç”¨äºåœ¨ Redis æœåŠ¡ä¸Šæ‰§è¡Œæ“ä½œã€‚è¦åœ¨ Redis æœåŠ¡ä¸Šæ‰§è¡Œå‘½ä»¤éœ€è¦ä¸€ä¸ª Redis å®¢æˆ·ç«¯ã€‚</p><p><code>redis-cli</code> æ˜¯Redisè‡ªå¸¦çš„åŸºäºå‘½ä»¤è¡Œçš„Rediså®¢æˆ·ç«¯ï¼Œä¸‹é¢ä»‹ç»å¦‚æœé€šè¿‡ <code>redis-cli</code> å‘ Redis å‘é€å‘½ä»¤ã€‚</p><p>é€šè¿‡ <code>redis-cli</code> å‘ Redis å‘é€å‘½ä»¤æœ‰2ç§æ–¹å¼</p><ul><li>æ–¹å¼1ï¼šå°†å‘½ä»¤ä½œä¸º <code>redis-cli</code> çš„å‚æ•°æ‰§è¡Œã€‚ä¾‹å¦‚ <code>redis-cli SHUTDOWN</code></li><li>æ–¹å¼2ï¼šæ‰§è¡Œ <code>redis-cli</code>ï¼ˆä¸é™„å¸¦ä»»ä½•å‚æ•°ï¼‰ï¼Œè¿›å…¥äº¤äº’æ¨¡å¼åï¼Œå¯ä»¥è‡ªç”±è¾“å…¥å‘½ä»¤</li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹å¼1ï¼šå°†å‘½ä»¤ä½œä¸º redis-cli çš„å‚æ•°æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">redis-cli SHUTDOWN</span><br><span class="line"></span><br><span class="line"><span class="comment">//redisé»˜è®¤æœåŠ¡å™¨åœ°å€127.0.0.1ï¼Œé»˜è®¤ç«¯å£å·6379 </span></span><br><span class="line"><span class="comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨-hæŒ‡å®šæœåŠ¡å™¨åœ°å€ï¼Œ-pæŒ‡å®šç«¯å£å·</span></span><br><span class="line">redis-cli -h <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -p <span class="number">6379</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨PINGå‘½ä»¤æµ‹è¯•å®¢æˆ·ç«¯å’ŒRedisçš„è¿æ¥æ˜¯å¦æ­£å¸¸</span></span><br><span class="line">redis-cli PING  <span class="comment">//è¿”å›PONG è¡¨ç¤ºè¿æ¥æ­£å¸¸</span></span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼2: æ‰§è¡Œ redis-cliï¼ˆä¸é™„å¸¦ä»»ä½•å‚æ•°ï¼‰ï¼Œè¿›å…¥äº¤äº’æ¨¡å¼åï¼Œå¯ä»¥è‡ªç”±è¾“å…¥å‘½ä»¤</span></span><br><span class="line">lbsMacBook-Pro:~ lbs$ redis-cli</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; PING</span><br><span class="line">PONG</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="å¤šæ•°æ®åº“"><a href="#å¤šæ•°æ®åº“" class="headerlink" title="å¤šæ•°æ®åº“"></a>å¤šæ•°æ®åº“</h3><p>Redis æ˜¯ä¸€ä¸ªå­—å…¸ç»“æ„çš„å­˜å‚¨æœåŠ¡å™¨ï¼Œ<strong>ä¸€ä¸ª Redis å®ä¾‹</strong>æä¾›äº†å¤šä¸ªç”¨æ¥å­˜å‚¨çš„å­—å…¸ï¼Œå¯ä»¥æŠŠå…¶ä¸­çš„æ¯ä¸ªå­—å…¸éƒ½ç†è§£æˆä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“ã€‚</p><ul><li>æ¯ä¸ªæ•°æ®åº“å¯¹å¤–éƒ½æ˜¯ä¸€ä¸ªä»0å¼€å§‹çš„é€’å¢æ•°å­—å‘½åï¼ŒRedisé»˜è®¤æ”¯æŒ16ä¸ªæ•°æ®åº“</li><li>Redisä¸æ”¯æŒè‡ªå®šä¹‰æ•°æ®åº“åç§°ï¼Œæ¯ä¸ªæ•°æ®åº“éƒ½ä»¥ç¼–å·å‘½å</li><li>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªRediså®ä¾‹çš„å¤šä¸ªæ•°æ®åº“ä¹‹é—´å¹¶ä¸æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œæ¯”å¦‚ <code>FLUSHALL</code> å‘½ä»¤å¯ä»¥æ¸…ç©ºä¸€ä¸ª Redis å®ä¾‹ä¸­æ‰€æœ‰æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œè¿™äº›æ•°æ®åº“æ›´åƒæ˜¯ä¸€ç§å‘½åç©ºé—´ï¼Œè€Œä¸é€‚å®œå­˜å‚¨ä¸åŒåº”ç”¨ç¨‹åºçš„æ•°æ®ã€‚æ¯”å¦‚ï¼Œå¯ä»¥ä½¿ç”¨0å·æ•°æ®åº“å­˜å‚¨åº”ç”¨Açš„ç”Ÿäº§ç¯å¢ƒæ•°æ®ï¼Œä½¿ç”¨1å·æ•°æ®åº“å­˜å‚¨åº”ç”¨Açš„æµ‹è¯•ç¯å¢ƒæ•°æ®ï¼Œè€Œä¸åº”è¯¥ä½¿ç”¨1å·æ•°æ®åº“å­˜å‚¨åº”ç”¨Bçš„æ•°æ®ã€‚</li><li><strong>ä¸åŒçš„åº”ç”¨ï¼Œåº”è¯¥ä½¿ç”¨ä¸åŒçš„Rediså®ä¾‹å­˜å‚¨æ•°æ®ã€‚</strong> ç”±äºRediséå¸¸è½»é‡ï¼Œä¸€ä¸ªç©ºçš„Rediså®ä¾‹å ç”¨çš„å†…å­˜åªæœ‰1MBï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¤šä¸ªRediså®ä¾‹ä¼šé¢å¤–å ç”¨å¾ˆå¤šå†…å­˜ã€‚</li></ul><h2 id="Redis-å…¥é—¨"><a href="#Redis-å…¥é—¨" class="headerlink" title="Redis å…¥é—¨"></a>Redis å…¥é—¨</h2><h3 id="å‘½ä»¤è¡ŒåŸºç¡€"><a href="#å‘½ä»¤è¡ŒåŸºç¡€" class="headerlink" title="å‘½ä»¤è¡ŒåŸºç¡€"></a>å‘½ä»¤è¡ŒåŸºç¡€</h3><ol><li>è·å¾—ç¬¦åˆè§„åˆ™çš„é”®ååˆ—è¡¨</li></ol><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">KEYS <span class="built_in">pattern</span></span><br></pre></td></tr></table></figure><p><code>pattern</code> æ”¯æŒ <code>glob</code> é£æ ¼é€šé…ç¬¦æ ¼å¼ï¼Œå…·ä½“å¦‚ä¸‹</p><table><thead><tr><th>ç¬¦å·</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>?</td><td>åŒ¹é…ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>*</td><td>åŒ¹é…ä»»æ„ä¸ªï¼ˆåŒ…æ‹¬0ä¸ªï¼‰å­—ç¬¦</td></tr><tr><td>[]</td><td>åŒ¹é…æ‹¬å·é—´çš„ä»»ä¸€å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>-</code> è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ï¼Œå¦‚ <code>[1-9]</code></td></tr><tr><td>\x</td><td>ç”¨äºè½¬ä¹‰å­—ç¬¦</td></tr></tbody></table><p>ä¾‹å¦‚ï¼ŒæŸ¥è¯¢å½“å‰çš„æ‰€æœ‰é”®ååˆ—è¡¨</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">set</span> bar <span class="comment">1</span></span><br><span class="line">OK</span><br><span class="line">&gt; KEYS <span class="comment">*</span></span><br><span class="line">1) <span class="string">"bar"</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–­ä¸€ä¸ªé”®æ˜¯å¦å­˜åœ¨</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXISTS <span class="built_in">key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›(integer) 1ï¼Œè¡¨ç¤ºå­˜åœ¨</span></span><br><span class="line"><span class="comment">//è¿”å›(integer) 0ï¼Œè¡¨ç¤ºä¸å­˜åœ¨</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ é™¤é”®</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DEL <span class="built_in">key</span> [<span class="built_in">key</span> ...]</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›(integer) 1ï¼Œè¡¨ç¤ºåˆ é™¤æˆåŠŸ</span></span><br><span class="line"><span class="comment">//è¿”å›(integer) 0ï¼Œè¡¨ç¤ºåˆ é™¤ä¸æˆåŠŸ</span></span><br></pre></td></tr></table></figure><ol start="4"><li>è·å¾—é”®å€¼çš„æ•°æ®ç±»å‹</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TYPE</span> <span class="built_in">key</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å› string list ç­‰</span></span><br></pre></td></tr></table></figure><h3 id="Redis-5-ç§æ•°æ®ç±»å‹"><a href="#Redis-5-ç§æ•°æ®ç±»å‹" class="headerlink" title="Redis 5 ç§æ•°æ®ç±»å‹"></a>Redis 5 ç§æ•°æ®ç±»å‹</h3><p>Redis æ”¯æŒ5ç§æ•°æ®ç±»å‹</p><ul><li>stringï¼ˆå­—ç¬¦ä¸²ï¼‰</li><li>hashï¼ˆå“ˆå¸Œæˆ–æ•£åˆ—ï¼‰</li><li>listï¼ˆåˆ—è¡¨ï¼‰</li><li>setï¼ˆé›†åˆï¼‰</li><li>zset(sorted setï¼Œæœ‰åºé›†åˆ)</li></ul><h4 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h4><ol><li>èµ‹å€¼å’Œå–å€¼</li></ol><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> <span class="keyword">key</span> <span class="keyword">value</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">GET</span> <span class="keyword">key</span>   //å½“é”®ä¸å­˜åœ¨æ—¶ä¼šè¿”å›ç©ºç»“æœ</span><br></pre></td></tr></table></figure><ol start="2"><li>é€’å¢æ•°å­—</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">INCR key</span></span><br></pre></td></tr></table></figure><p>å½“è¦æ“ä½œçš„é”®ä¸å­˜åœ¨æ—¶ï¼Œé»˜è®¤é”®å€¼ä¸º0ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡é€’å¢åç»“æœä¸º1ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; INCR  num</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">1</span></span><br><span class="line">&gt; INCR  num</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">2</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å¢åŠ æŒ‡å®šçš„æ•´æ•°</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">INCRBY key increment</span></span><br></pre></td></tr></table></figure><ol start="4"><li>å‡å°‘æŒ‡å®šçš„æ•´æ•°</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DECR <span class="built_in">key</span></span><br><span class="line"></span><br><span class="line">DECRBY <span class="built_in">key</span> increment</span><br></pre></td></tr></table></figure><ol start="5"><li>å¢åŠ æŒ‡å®šæµ®ç‚¹æ•°</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">INCRBYFLOAT key  increment</span></span><br></pre></td></tr></table></figure><ol start="6"><li>å‘å°¾éƒ¨è¿½åŠ å€¼</li></ol><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">APPEND <span class="built_in">key</span>  <span class="built_in">value</span></span><br></pre></td></tr></table></figure><p><code>APPEND</code> å‘½ä»¤ä¸­ï¼Œè‹¥é”®ä¸å­˜åœ¨ï¼Œåˆ™å°†è¯¥é”®çš„å€¼è®¾ä¸º <code>value</code>ï¼Œç›¸å½“äºæ‰§è¡Œäº† <code>SET key value</code>ã€‚</p><ol start="7"><li>è·å–å­—ç¬¦ä¸²é•¿åº¦</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">STRLEN</span> <span class="built_in">key</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæ±‰å­—ï¼ŒRedisä½¿ç”¨UTF-8ç¼–ç çš„ä¸­æ–‡ï¼Œå¦‚ä¸‹ç¤ºä¾‹ä¸­ï¼Œâ€œä½ â€å’Œâ€œå¥½â€ä¸¤ä¸ªå­—çš„UTF-8ç¼–ç çš„é•¿åº¦éƒ½æ˜¯3ï¼Œæ‰€ä»¥è¿”å›çš„å­—ç¬¦ä¸²é•¿åº¦ä¸º6ã€‚</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="keyword">SET</span> key1 ä½ å¥½</span><br><span class="line">OK</span><br><span class="line">&gt; STRLEN <span class="comment">key1</span></span><br><span class="line">(integer) 6</span><br></pre></td></tr></table></figure><ol start="8"><li>åŒæ—¶è·å¾—/è®¾ç½®å¤šä¸ªé”®å€¼</li></ol><figure class="highlight ceylon"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MSET key<span class="number">1</span> <span class="keyword">value</span><span class="number">1</span> key<span class="number">2</span> <span class="keyword">value</span><span class="number">2</span> key<span class="number">3</span> <span class="keyword">value</span><span class="number">3</span></span><br><span class="line"></span><br><span class="line">MGET key<span class="number">1</span> key<span class="number">2</span> key<span class="number">3</span></span><br></pre></td></tr></table></figure><ol start="9"><li>ä½æ“ä½œ</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">GETBIT <span class="built_in">key</span> offset   <span class="comment">//è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹é”®æŒ‡å®šä½ç½®çš„äºŒè¿›åˆ¶ä½çš„å€¼ï¼ˆ0æˆ–1ï¼‰</span></span><br><span class="line"> </span><br><span class="line">SETBIT <span class="built_in">key</span> offset value  <span class="comment">//è®¾ç½®æŒ‡å®šä½ç½®çš„äºŒè¿›åˆ¶ä½çš„å€¼</span></span><br><span class="line"></span><br><span class="line">BITCOUNT <span class="built_in">key</span> [start] [<span class="keyword">end</span>] <span class="comment">//è·å¾—å­—ç¬¦ä¸²ç±»å‹é”®ä¸­å€¼æ˜¯1çš„äºŒè¿›åˆ¶ä½ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">BITOP operation destkey <span class="built_in">key</span> [<span class="built_in">key</span> ...] <span class="comment">//å¯¹å¤šä¸ªå­—ç¬¦ä¸²ç±»å‹é”®è¿›è¡Œä½è¿ç®—ï¼Œç»“æœå­˜å‚¨åœ¨destkey</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå­—èŠ‚ç”±8ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆã€‚Redis æä¾›äº† 4 ä¸ªå‘½ä»¤å¯ä»¥ç›´æ¥å¯¹äºŒè¿›åˆ¶ä½æ“ä½œã€‚</p><p>ä¸‹é¢è¿›è¡Œç¤ºä¾‹åˆ†æã€‚</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> foo <span class="comment">bar</span></span><br></pre></td></tr></table></figure><p>â€œbarâ€çš„3ä¸ªå­—æ¯å¯¹åº”çš„ASCIIç åˆ†åˆ«æ˜¯98ï¼Œ97ï¼Œ114ï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„äºŒè¿›åˆ¶æ•°å€¼ï¼Œ<code>foo</code> é”®ä¸­çš„äºŒè¿›åˆ¶ä½ç»“æ„ä¸º<code>01100010,01100001,01110010</code>ã€‚</p><p>(1) ä½¿ç”¨ <code>GETBIT key offset</code> è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹é”®æŒ‡å®šä½ç½®çš„äºŒè¿›åˆ¶ä½çš„å€¼ï¼ˆ0æˆ–1ï¼‰</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; GETBIT foo <span class="number">6</span></span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">1</span></span><br></pre></td></tr></table></figure><p>å¦‚æœè·å–çš„äºŒè¿›åˆ¶ä½çš„ç´¢å¼•è¶…å‡ºäº†é”®å€¼çš„äºŒè¿›åˆ¶ä½çš„å®é™…é•¿åº¦ï¼Œåˆ™é»˜è®¤è¿”å› 0</p><p>(2) <code>BITOP operation destkey key [key ...]</code> å¯ä»¥å¯¹å¤šä¸ªå­—ç¬¦ä¸²ç±»å‹é”®è¿›è¡Œä½è¿ç®—ï¼Œç»“æœå­˜å‚¨åœ¨ <code>destkey</code></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET foo1 bar</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET foo2 aar</span><br><span class="line">OK</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; BITOP OR res foo1 foo2  <span class="comment">//æˆ–è¿ç®—</span></span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">3</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; GET res</span><br><span class="line"><span class="string">"car"</span></span><br></pre></td></tr></table></figure><h4 id="å“ˆå¸Œï¼ˆæ•£åˆ—ï¼‰ç±»å‹"><a href="#å“ˆå¸Œï¼ˆæ•£åˆ—ï¼‰ç±»å‹" class="headerlink" title="å“ˆå¸Œï¼ˆæ•£åˆ—ï¼‰ç±»å‹"></a>å“ˆå¸Œï¼ˆæ•£åˆ—ï¼‰ç±»å‹</h4><p>å“ˆå¸Œï¼ˆæˆ–æ•£åˆ—ï¼‰<code>hash</code> ç±»å‹çš„é”®å€¼ä¹Ÿæ˜¯ä¸€ç§å­—å…¸ç»“æ„ï¼Œå…¶å­˜å‚¨äº†å­—æ®µï¼ˆ<code>field</code>ï¼‰å’Œå­—æ®µå€¼çš„æ˜ å°„ï¼Œä½†å­—æ®µå€¼åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¸æ”¯æŒå…¶ä»–æ•°æ®ç±»å‹ã€‚</p><ol><li>èµ‹å€¼å’Œå–å€¼</li></ol><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HSET <span class="built_in">key</span> field <span class="built_in">value</span>  <span class="comment">//ä¸åŒºåˆ†æ’å…¥å’Œæ›´æ–°æ“ä½œï¼Œå³æ›´æ–°æ•°æ®æ—¶ä¸ç”¨äº‹å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ </span></span><br><span class="line">HGET <span class="built_in">key</span> field</span><br><span class="line"></span><br><span class="line">HMSET <span class="built_in">key</span> field <span class="built_in">value</span> [field <span class="built_in">value</span> ...]</span><br><span class="line">HMGET <span class="built_in">key</span> field [field ...]</span><br><span class="line"></span><br><span class="line">HGETALL <span class="built_in">key</span></span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ¤æ–­å­—æ®µæ˜¯å¦å­˜åœ¨</li></ol><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">HEXISTS</span> key <span class="meta">field</span></span><br></pre></td></tr></table></figure><ol start="3"><li>ä»…ä»…åœ¨å­—æ®µä¸å­˜åœ¨æ˜¯èµ‹å€¼</li></ol><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HSETNX <span class="built_in">key</span> field <span class="built_in">value</span></span><br></pre></td></tr></table></figure><p><code>HSETNX</code> å’Œ <code>HSET</code> å‘½ä»¤ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå¦‚æœå­—æ®µå·²ç»å­˜åœ¨ï¼Œ<code>HSETNX</code> å‘½ä»¤å°†ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚</p><p><code>HSETNX</code> ä¸­çš„ <code>NX</code> è¡¨ç¤º <code>if Not eXists</code>ã€‚</p><ol start="4"><li>å¢åŠ æ•°å­—</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HINCRBY key filed increment</span></span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ é™¤å­—æ®µ</li></ol><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">HDEL</span> key <span class="meta">field</span> [<span class="meta">field</span> ...]</span><br></pre></td></tr></table></figure><ol start="6"><li>åªè·å–å­—æ®µåç§°æˆ–å­—æ®µå€¼</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HKEYS <span class="built_in">key</span></span><br><span class="line"></span><br><span class="line">HVALS <span class="built_in">key</span></span><br></pre></td></tr></table></figure><ol start="7"><li>è·å¾—å­—æ®µæ•°é‡</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HLEN key</span></span><br></pre></td></tr></table></figure><h4 id="åˆ—è¡¨ç±»å‹"><a href="#åˆ—è¡¨ç±»å‹" class="headerlink" title="åˆ—è¡¨ç±»å‹"></a>åˆ—è¡¨ç±»å‹</h4><p>åˆ—è¡¨ï¼ˆ<code>list</code>ï¼‰å¯ä»¥å­˜å‚¨ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¸¸ç”¨çš„æ“ä½œæ˜¯å‘åˆ—è¡¨ä¸¤ç«¯æ·»åŠ å…ƒç´ ï¼Œæˆ–è€…è·å–åˆ—è¡¨çš„æŸä¸€ä¸ªç‰‡æ®µã€‚</p><p>åˆ—è¡¨ç±»å‹å†…éƒ¨ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨å®ç°çš„ï¼Œæ‰€ä»¥æƒ³åˆ—è¡¨ä¸¤ç«¯æ·»åŠ å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(1)</code>ï¼Œè·å–è¶Šæ¥è¿‘ä¸¤ç«¯çš„å…ƒç´ é€Ÿåº¦å°±è¶Šå¿«ï¼Œä½†æ˜¯é€šè¿‡ç´¢å¼•è®¿é—®å…ƒç´ ä¼šæ¯”è¾ƒæ…¢ã€‚å› æ­¤ï¼Œé’ˆå¯¹åŒå‘é“¾è¡¨çš„ç‰¹ç‚¹ï¼Œåˆ—è¡¨ç±»å‹ç‰¹åˆ«é€‚åˆå¦‚ä¸‹åœºæ™¯</p><ul><li>å¦‚ç¤¾äº¤ç½‘ç«™çš„æ–°é²œäº‹ï¼Œæˆ‘ä»¬åªå…³å¿ƒæœ€æ–°å†…å®¹ï¼Œå³ä½¿æ–°é²œäº‹è¾¾åˆ°å‡ åƒä¸‡æ¡ï¼Œè·å–åˆ—è¡¨å°¾éƒ¨çš„100æ¡æœ€æ–°æ•°æ®ä¹Ÿæ˜¯å¾ˆå¿«çš„</li><li>å¦‚æ—¥å¿—è®°å½•åœºæ™¯ï¼ŒåŒå‘é“¾è¡¨ä¿è¯äº†æ’å…¥æ–°æ—¥å¿—çš„é€Ÿåº¦ä¸ä¼šå—åˆ°å·²æœ‰æ—¥å¿—æ•°é‡çš„å½±å“</li><li>å€ŸåŠ©åˆ—è¡¨ç±»å‹ï¼ŒRedisè¿˜å¯ä»¥ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨</li></ul><ol><li>å‘åˆ—è¡¨ä¸¤ç«¯å¢åŠ å…ƒç´ </li></ol><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LPUSH <span class="built_in">key</span> <span class="built_in">value</span> [<span class="built_in">value</span> ...]   <span class="comment">//å‘åˆ—è¡¨å·¦è¾¹æ’å…¥å…ƒç´ </span></span><br><span class="line">RPUSH <span class="built_in">key</span> <span class="built_in">value</span> [<span class="built_in">value</span> ...]</span><br></pre></td></tr></table></figure><ol start="2"><li>ä»åˆ—è¡¨ä¸¤ç«¯å¼¹å‡ºå…ƒç´ </li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LPOP <span class="built_in">key</span> </span><br><span class="line">RPOP <span class="built_in">key</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è·å–åˆ—è¡¨ä¸­å…ƒç´ ä¸ªæ•°</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LLEN <span class="built_in">key</span>     <span class="comment">// å½“é”®ä¸å­˜åœ¨åˆ™è¿”å›0</span></span><br></pre></td></tr></table></figure><ol start="4"><li>è·å¾—åˆ—è¡¨ç‰‡æ®µ</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LRANGE key <span class="literal">start</span> <span class="literal">stop</span>   //è¿”å›åŒºé—´[<span class="literal">start</span>,<span class="literal">stop</span>]çš„åˆ—è¡¨ç‰‡æ®µï¼ˆåŒºé—´é—­åˆï¼‰ï¼Œä¸æ”¹å˜åŸåˆ—è¡¨</span><br></pre></td></tr></table></figure><ol start="5"><li>åˆ é™¤åˆ—è¡¨ä¸­æŒ‡å®šçš„å€¼</li></ol><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LREM<span class="built_in"> key</span><span class="built_in"> count</span> <span class="keyword">value</span>  </span><br><span class="line">//åˆ é™¤åˆ—è¡¨ä¸­<span class="built_in">å‰count</span>ä¸ªå€¼ä¸º<span class="keyword">value</span>çš„å…ƒç´ ï¼Œè¿”å›å€¼æ˜¯å®é™…åˆ é™¤çš„å…ƒç´ ä¸ªæ•°</span><br></pre></td></tr></table></figure><p>å½“ <code>count</code> å¤§äº0æ—¶ï¼Œä¼šä»åˆ—è¡¨å·¦è¾¹å¼€å§‹åˆ é™¤å‰<code>count</code> ä¸ªï¼›å½“å°äº0æ—¶ï¼Œä¼šä»åˆ—è¡¨å³è¾¹è¾¹å¼€å§‹ï¼›å½“ <code>count</code> ç­‰äº0æ—¶ï¼Œä¼šåˆ é™¤åˆ—è¡¨ä¸­æ‰€æœ‰å€¼ä¸º <code>value</code> çš„å…ƒç´ ã€‚</p><ol start="6"><li>è·å¾—/è®¾ç½®æŒ‡å®šç´¢å¼•çš„å…ƒç´ å€¼</li></ol><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LINDEX key <span class="keyword">index</span></span><br><span class="line"></span><br><span class="line">LSET <span class="keyword">key</span> <span class="keyword">index</span> <span class="keyword">value</span></span><br></pre></td></tr></table></figure><p>è‹¥ <code>index</code> å°äº0ï¼Œè¡¨ç¤ºä»åˆ—è¡¨å³è¾¹å¼€å§‹è®¡ç®—ç´¢å¼•ï¼Œæœ€å³è¾¹çš„å…ƒç´ çš„ç´¢å¼•å€¼æ˜¯ -1ã€‚</p><ol start="7"><li>åªä¿ç•™åˆ—è¡¨æŒ‡å®šç‰‡æ®µ</li></ol><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LTRIM key <span class="literal">start</span> <span class="literal">stop</span>   //åªä¿ç•™åŒºé—´[<span class="literal">start</span>,<span class="literal">stop</span>]çš„åˆ—è¡¨ç‰‡æ®µï¼ˆåŒºé—´é—­åˆï¼‰ï¼Œæ”¹å˜äº†åŸåˆ—è¡¨</span><br></pre></td></tr></table></figure><ol start="8"><li>å‘åˆ—è¡¨ä¸­æ’å…¥å…ƒç´ </li></ol><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">LINSERT key <span class="keyword">BEFORE</span>|<span class="keyword">AFTER</span> pivot <span class="keyword">value</span>   </span><br><span class="line">//ä»å·¦åˆ°å³æŸ¥æ‰¾åˆ—è¡¨çš„pivotå…ƒç´ ï¼Œåœ¨è¯¥å…ƒç´ å‰æˆ–åï¼Œæ’å…¥<span class="keyword">value</span>å…ƒç´ </span><br></pre></td></tr></table></figure><ol start="9"><li>å°†å…ƒç´ ä»ä¸€ä¸ªåˆ—è¡¨è½¬åˆ°å¦ä¸€ä¸ªåˆ—è¡¨</li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RPOPLPUSH <span class="keyword">source</span> destination</span><br><span class="line"><span class="comment">//RPOPLPUSHè¡¨ç¤ºå…ˆæ‰§è¡ŒRPOPï¼Œå†æ‰§è¡ŒLPUSH</span></span><br></pre></td></tr></table></figure><h4 id="é›†åˆç±»å‹"><a href="#é›†åˆç±»å‹" class="headerlink" title="é›†åˆç±»å‹"></a>é›†åˆç±»å‹</h4><p>ç›¸æ¯”äºåˆ—è¡¨ï¼Œé›†åˆï¼ˆ<code>set</code>ï¼‰ä¸­çš„å…ƒç´ æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œå¹¶ä¸”æ˜¯æ— åºçš„ã€‚</p><p>é›†åˆï¼ˆ<code>set</code>ï¼‰ç±»å‹åœ¨Rediså†…éƒ¨æ˜¯ä½¿ç”¨å€¼ä¸ºç©ºçš„æ•£åˆ—è¡¨(<code>hash table</code>)å®ç°çš„ï¼Œæ‰€ä»¥å‘é›†åˆä¸­æ’å…¥æˆ–åˆ é™¤å…ƒç´ ï¼Œåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œè¿™äº›æ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <code>O(1)</code>ã€‚</p><p>æ›´æ–¹ä¾¿çš„æ˜¯ï¼Œé‡‡ç”¨é›†åˆç±»å‹ï¼Œå¤šä¸ªé›†åˆç±»å‹ä¹‹é—´è¿˜å¯ä»¥è¿›è¡Œäº¤é›†ï¼Œå¹¶é›†å’Œå·®é›†è¿ç®—ã€‚</p><ol><li>å¢åŠ /åˆ é™¤å…ƒç´ </li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SADD <span class="built_in">key</span> <span class="built_in">member</span> [menber ...] //å¦‚æœé”®ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºï¼Œè¿”å›å€¼ä¸ºæˆåŠŸåŠ å…¥çš„å…ƒç´ çš„æ•°é‡</span><br><span class="line">SREM <span class="built_in">key</span> <span class="built_in">member</span> [menber ...]</span><br></pre></td></tr></table></figure><ol start="2"><li>è·å¾—é›†åˆæ‰¾é‚£ä¸ªæ‰€æœ‰çš„å…ƒç´ </li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">SMEMBERS key</span></span><br></pre></td></tr></table></figure><ol start="3"><li>åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­</li></ol><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¶é—´å¤æ‚åº¦ä½O(1) é€Ÿåº¦è¾ƒå¿«</span></span><br><span class="line">SISMEMBER key <span class="keyword">member</span></span><br></pre></td></tr></table></figure><ol start="4"><li>é›†åˆä¹‹é—´çš„è¿ç®—</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SDIFF  <span class="built_in">key</span> [<span class="built_in">key</span> ...]    <span class="comment">//å·®é›†</span></span><br><span class="line">SINTER <span class="built_in">key</span> [<span class="built_in">key</span> ...]    <span class="comment">//äº¤é›†</span></span><br><span class="line">SUNION <span class="built_in">key</span> [<span class="built_in">key</span> ...]    <span class="comment">//å¹¶é›†</span></span><br></pre></td></tr></table></figure><ol start="5"><li>è·å–é›†åˆä¸­å…ƒç´ ä¸ªæ•°</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">SCARD key</span></span><br></pre></td></tr></table></figure><ol start="6"><li>è¿›è¡Œé›†åˆè¿ç®—å¹¶å°†ç»“æœå­˜å‚¨</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SDIFFSTORE destination <span class="built_in">key</span> [<span class="built_in">key</span> ...]</span><br><span class="line">SINTERSTORE destination <span class="built_in">key</span> [<span class="built_in">key</span> ...]</span><br><span class="line">SUNIONSTORE destination <span class="built_in">key</span> [<span class="built_in">key</span> ...]</span><br></pre></td></tr></table></figure><ol start="7"><li>éšæœºè·å¾—é›†åˆä¸­çš„å…ƒç´ </li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SRANDMEMBER </span>key [<span class="built_in">count</span>]</span><br></pre></td></tr></table></figure><ol start="8"><li>ä»é›†åˆä¸­å¼¹å‡ºä¸€ä¸ªå…ƒç´ </li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">SPOP key</span></span><br></pre></td></tr></table></figure><h4 id="æœ‰åºé›†åˆç±»å‹"><a href="#æœ‰åºé›†åˆç±»å‹" class="headerlink" title="æœ‰åºé›†åˆç±»å‹"></a>æœ‰åºé›†åˆç±»å‹</h4><p>æœ‰åºé›†åˆ(<code>sorted list</code>)ç±»å‹ï¼Œæ˜¯åœ¨é›†åˆç±»å‹çš„åŸºç¡€ä¸Šï¼Œä¸ºæ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°ï¼ˆ<code>score</code>ï¼Œå¯ä»¥ç†è§£ä¸ºç´¢å¼•å€¼ï¼‰ï¼Œä½¿å¾—å…ƒç´ æœ‰åºã€‚</p><p>Redisä¸­ï¼Œé‡‡ç”¨å“ˆå¸Œè¡¨å’Œè·³è·ƒè¡¨ï¼ˆ<code>Skip list</code>ï¼‰å®ç°æœ‰åºé›†åˆç±»å‹ã€‚æ‰€ä»¥å³ä½¿è¯»å–ä½äºä¸­é—´éƒ¨åˆ†çš„æ•°æ®ï¼Œé€Ÿåº¦ä¹Ÿæ˜¯å¾ˆå¿«çš„ï¼ˆæ—¶é—´å¤æ‚åº¦æ˜¯``O(logN)`ï¼‰ã€‚</p><ol><li>å¢åŠ å…ƒç´ </li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//æ·»åŠ ä¸€ä¸ª<span class="built_in">member</span>å…ƒç´ å’Œè¯¥å…ƒç´ çš„åˆ†æ•°score</span><br><span class="line">ZADD <span class="built_in">key</span> score <span class="built_in">member</span> [score <span class="built_in">member</span>]</span><br></pre></td></tr></table></figure><ol start="2"><li>è·å¾—å…ƒç´ çš„åˆ†æ•°</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZSCORE <span class="built_in">key</span> <span class="built_in">member</span></span><br></pre></td></tr></table></figure><ol start="3"><li>è·å¾—æ’ååœ¨æŸä¸ªèŒƒå›´çš„å…ƒç´ åˆ—è¡¨</li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æŒ‰ç…§å…ƒç´ åˆ†æ•°ä»å°åˆ°å¤§çš„é¡ºåºï¼Œè¿”å›ç´¢å¼•åœ¨åŒºé—´[<span class="built_in">start</span>,<span class="built_in">stop</span>]çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">//å¦‚æœæœ‰å‚æ•°WITHSCORESï¼Œè¡¨ç¤ºè¿”å›çš„å…ƒç´ åˆ—è¡¨åŒ…å«åˆ†æ•°ä¿¡æ¯</span><br><span class="line">ZRANGE key <span class="built_in">start</span> <span class="built_in">stop</span> [WITHSCORES]</span><br><span class="line"></span><br><span class="line">//ç±»ä¼¼ZRANGEï¼Œåªä¸è¿‡æ˜¯æŒ‰ç…§åˆ†æ•°ä»å¤§åˆ°å°çš„é¡ºåº</span><br><span class="line">ZREVRANGE key <span class="built_in">start</span> <span class="built_in">stop</span> [WITHSCORES]</span><br></pre></td></tr></table></figure><ol start="4"><li>è·å¾—æŒ‡å®šåˆ†æ•°èŒƒå›´çš„å…ƒç´ </li></ol><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æŒ‰ç…§å…ƒç´ åˆ†æ•°ä»å°åˆ°å¤§çš„é¡ºåºï¼Œè¿”å›ç´¢å¼•åœ¨åŒºé—´[<span class="built_in">start</span>,<span class="built_in">stop</span>]çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">//å¦‚æœæœ‰å‚æ•°WITHSCORESï¼Œè¡¨ç¤ºè¿”å›çš„å…ƒç´ åˆ—è¡¨åŒ…å«åˆ†æ•°ä¿¡æ¯</span><br><span class="line">ZRANGE key <span class="built_in">start</span> <span class="built_in">stop</span> [WITHSCORES]</span><br><span class="line"></span><br><span class="line">//ç±»ä¼¼ZRANGEï¼Œåªä¸è¿‡æ˜¯æŒ‰ç…§åˆ†æ•°ä»å¤§åˆ°å°çš„é¡ºåº</span><br><span class="line">ZREVRANGE key <span class="built_in">start</span> <span class="built_in">stop</span> [WITHSCORES]</span><br></pre></td></tr></table></figure><ol start="5"><li>è·å¾—æŒ‡å®šåˆ†æ•°èŒƒå›´çš„å…ƒç´ </li></ol><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//æŒ‰ç…§å…ƒç´ åˆ†æ•°ä»å°åˆ°å¤§ï¼Œè¿”å›åˆ†æ•°åœ¨åŒºé—´[<span class="built_in">min</span>,<span class="built_in">max</span>]ä¹‹é—´çš„å…ƒç´ </span><br><span class="line">//LIMIT <span class="built_in">offset</span> <span class="built_in">count</span> è¡¨ç¤ºåœ¨è·å¾—å…ƒç´ åˆ—è¡¨çš„åŸºç¡€ä¸Šï¼Œå‘ååç§»ï¼ˆè·³è¿‡ï¼‰<span class="built_in">offset</span>ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”åªè·å–ä¹‹åçš„å‰<span class="built_in">count</span>ä¸ªå…ƒç´ </span><br><span class="line">ZRANGEBYSCORE key <span class="built_in">min</span> <span class="built_in">max</span> [WITHSCORES] [LIMIT <span class="built_in">offset</span> <span class="built_in">count</span>]</span><br></pre></td></tr></table></figure><ol start="6"><li>å¢åŠ æŸä¸ªå…ƒç´ çš„åˆ†æ•°</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZINCRBY <span class="built_in">key</span> increment <span class="built_in">member</span></span><br></pre></td></tr></table></figure><ol start="7"><li>è·å¾—é›†åˆä¸­å…ƒç´ çš„æ•°é‡</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ZCARD key</span></span><br></pre></td></tr></table></figure><ol start="8"><li>è·å¾—æŒ‡å®šåˆ†æ•°èŒƒå›´å†…çš„å…ƒç´ ä¸ªæ•°</li></ol><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZCOUNT <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br></pre></td></tr></table></figure><ol start="9"><li>æŒ‰ç…§æ’åèŒƒå›´åˆ é™¤å…ƒç´ </li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æŒ‰ç…§å…ƒç´ åˆ†æ•°ä»å°åˆ°å¤§é¡ºåºï¼Œåˆ é™¤æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´ ï¼Œå¹¶è¿”å›åˆ é™¤çš„å…ƒç´ æ•°é‡</span></span><br><span class="line">ZREMRANGEBYRANK <span class="built_in">key</span> start <span class="keyword">stop</span></span><br></pre></td></tr></table></figure><ol start="10"><li>æŒ‰ç…§åˆ†æ•°èŒƒå›´åˆ é™¤å…ƒç´ </li></ol><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›åˆ é™¤çš„å…ƒç´ æ•°é‡</span></span><br><span class="line">ZREMRANGEBYSCORE <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br></pre></td></tr></table></figure><ol start="11"><li>è·å¾—å…ƒç´ çš„æ’å</li></ol><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ZRANK key <span class="keyword">member</span>    <span class="comment">//æŒ‰ç…§åˆ†æ•°ä»å°åˆ°å¤§é¡ºåº</span></span><br><span class="line">ZRANK key <span class="keyword">member</span>    <span class="comment">//æŒ‰ç…§åˆ†æ•°ä»å¤§åˆ°å°é¡ºåº</span></span><br></pre></td></tr></table></figure><h2 id="Redisè¿›é˜¶"><a href="#Redisè¿›é˜¶" class="headerlink" title="Redisè¿›é˜¶"></a>Redisè¿›é˜¶</h2><h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><h4 id="MULTI-EXEC"><a href="#MULTI-EXEC" class="headerlink" title="MULTI EXEC"></a>MULTI EXEC</h4><p>äº‹åŠ¡(<code>transaction</code>)æ˜¯ä¸€ç»„å‘½ä»¤çš„é›†åˆï¼Œäº‹åŠ¡åŒå‘½ä»¤ä¸€æ ·ï¼Œéƒ½æ˜¯Redisçš„æœ€å°æ‰§è¡Œå•ä½ã€‚ä¸€ä¸ªäº‹åŠ¡ä¸­çš„å‘½ä»¤è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚äº‹åŠ¡çš„åº”ç”¨éå¸¸æ™®éï¼Œå¦‚é“¶è¡Œè½¬è´¦ç­‰ã€‚</p><p>Redisçš„äº‹åŠ¡è¿˜å¯ä»¥ä¿è¯ä¸€ä¸ªäº‹åŠ¡å†…çš„å‘½ä»¤ä¸€æ¬¡æ‰§è¡Œè€Œä¸è¢«å…¶ä»–å‘½ä»¤æ’å…¥ã€‚</p><p>äº‹åŠ¡çš„åŸç†æ˜¯å…ˆå°†å±äºä¸€ä¸ªäº‹åŠ¡çš„å‘½ä»¤å‘é€ç»™Redisï¼Œç„¶åå†è®©Redisä¸€æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œä¾‹å¦‚</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; MULTI</span><br><span class="line">OK</span><br><span class="line">redis&gt; SADD <span class="string">"user:1:following"</span> <span class="number">2</span></span><br><span class="line">QUEED</span><br><span class="line">redis&gt; SADD <span class="string">"user:2:following"</span> <span class="number">1</span></span><br><span class="line">QUEED</span><br><span class="line">redis&gt; EXEC</span><br><span class="line"><span class="number">1</span>) (<span class="type">integer</span>) <span class="number">1</span></span><br><span class="line"><span class="number">2</span>) (<span class="type">integer</span>) <span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç æ¼”ç¤ºäº†äº‹åŠ¡çš„ä½¿ç”¨æ–¹å¼ã€‚é¦–å…ˆä½¿ç”¨ <code>MULIL</code> å‘½ä»¤å‘Šè¯‰Redisï¼šâ€œä¸‹é¢æˆ‘å‘ç»™ä½ çš„å‘½ä»¤å±äºåŒä¸€ä¸ªäº‹åŠ¡ï¼Œä½ å…ˆä¸è¦æ‰§è¡Œï¼Œè€Œæ˜¯æŠŠå®ƒä»¬æš‚æ—¶å­˜èµ·æ¥â€ã€‚</p><p>éšåå‘é€ä¸¤ä¸ª <code>SADD</code> å‘½ä»¤æ‰§è¡Œäº‹åŠ¡æ“ä½œï¼ŒRedisè¿”å› <code>QUEED</code> è¡¨ç¤ºè¿™2æ¡å‘½ä»¤å·²ç»è¿›å…¥ç­‰å¾…æ‰§è¡Œçš„äº‹åŠ¡é˜Ÿåˆ—ä¸­äº†ã€‚</p><p>æœ€åï¼Œå‘é€ <code>EXEC</code> å‘½ä»¤å‘Šè¯‰Rediså°†ç­‰å¾…æ‰§è¡Œçš„äº‹åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å‘½ä»¤æŒ‰ç…§å‘é€é¡ºåºæ‰§è¡Œã€‚</p><p><strong>äº‹åŠ¡ä¸­çš„å‘½ä»¤æ˜¯åœ¨ <code>EXEC</code> ä¹‹åæ‰æ‰§è¡Œçš„ï¼Œå› æ­¤ï¼Œä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåªæœ‰å½“æ‰€æœ‰å‘½ä»¤éƒ½ä¾æ¬¡æ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½å¾—åˆ°æ¯ä¸ªç»“æœçš„è¿”å›å€¼ã€‚</strong></p><h4 id="WATCH"><a href="#WATCH" class="headerlink" title="WATCH"></a>WATCH</h4><p><strong>ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œåªæœ‰å½“æ‰€æœ‰å‘½ä»¤éƒ½ä¾æ¬¡æ‰§è¡Œå®Œæˆåæ‰èƒ½å¾—åˆ°æ¯ä¸ªç»“æœçš„è¿”å›å€¼ã€‚</strong> å¯æ˜¯æœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦å…ˆè·å¾—ä¸€æ¡å‘½ä»¤çš„è¿”å›å€¼ï¼Œæ ¹æ®è¿”å›å€¼å†æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ã€‚é’ˆå¯¹è¯¥æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ <code>WATCH</code> å‘½ä»¤ã€‚</p><p><code>WATCH</code> å‘½ä»¤å¯ä»¥ç›‘æ§ä¸€ä¸ªæˆ–å¤šä¸ªé”®ï¼Œä¸€æ—¦å…¶ä¸­æœ‰ä¸€ä¸ªé”®è¢«ä¿®æ”¹æˆ–åˆ é™¤ï¼Œä¹‹åçš„äº‹åŠ¡å°±ä¸ä¼šæ‰§è¡Œã€‚ç›‘æ§ä¸€ç›´åˆ° <code>EXEC</code> å‘½ä»¤ã€‚ï¼ˆäº‹åŠ¡ä¸­çš„å‘½ä»¤æ˜¯åœ¨ <code>EXEC</code> ä¹‹åæ‰æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åœ¨ <code>MULTI</code> å‘½ä»¤åå¯ä»¥ä¿®æ”¹ <code>WATCH</code> ç›‘æ§çš„é”®å€¼ï¼‰</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; <span class="builtin-name">SET</span> key 1</span><br><span class="line">OK</span><br><span class="line">redis&gt; WATCH key</span><br><span class="line">OK</span><br><span class="line">redis&gt; <span class="builtin-name">SET</span> key 2</span><br><span class="line">OK</span><br><span class="line">redis&gt; MULTI</span><br><span class="line">OK</span><br><span class="line">redis&gt; <span class="builtin-name">SET</span> key 3</span><br><span class="line">QUEED</span><br><span class="line">redis&gt; EXEC</span><br><span class="line"><span class="literal">nil</span></span><br><span class="line">redis&gt; <span class="builtin-name">GET</span> key</span><br><span class="line"><span class="string">"2"</span></span><br></pre></td></tr></table></figure><p>ä¸Šä¾‹ä¸­ï¼Œæ‰§è¡Œ <code>WATCH</code> å‘½ä»¤åï¼Œäº‹åŠ¡ä¿®æ”¹äº† <code>key</code> å€¼ï¼Œæ‰€ä»¥æœ€åäº‹åŠ¡ä»£ç å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œ<code>EXEC</code> å‘½ä»¤è¿”å›ç»“æœä¸º <code>nil</code>ã€‚</p><p>æ‰§è¡Œ <code>EXEC</code> å‘½ä»¤åæ‚”å–æ¶ˆå¯¹æ‰€æœ‰é”®çš„ç›‘æ§ã€‚</p><h3 id="è¿‡æœŸæ—¶é—´"><a href="#è¿‡æœŸæ—¶é—´" class="headerlink" title="è¿‡æœŸæ—¶é—´"></a>è¿‡æœŸæ—¶é—´</h3><p>Redis ä¸­å¯ä»¥ä½¿ç”¨ <code>EXPTRE</code> å‘½ä»¤è®¾ç½®ä¸€ä¸ªé”®çš„è¿‡æœŸæ—¶é—´ï¼Œåˆ°æ—¶é—´å Redis ä¼šè‡ªåŠ¨åˆ é™¤å®ƒã€‚</p><ol><li>è®¾ç½®è¿‡æœŸæ—¶é—´</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EXPIRE <span class="built_in">key</span> seconds   <span class="comment">//seconds å•ä½ä¸ºç§’</span></span><br><span class="line"></span><br><span class="line">PEXPIRE <span class="built_in">key</span> milliseconds  <span class="comment">//milliseconds å•ä½ä¸ºæ¯«ç§’</span></span><br></pre></td></tr></table></figure><ol start="2"><li>æŸ¥è¯¢é”®è¿˜æœ‰å¤šå°‘æ—¶é—´ä¼šè¢«åˆ é™¤</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">TTL <span class="built_in">key</span>   <span class="comment">//è¿”å›æ—¶é—´å•ä½ä¸ºç§’</span></span><br><span class="line"></span><br><span class="line">PTTL <span class="built_in">key</span>  <span class="comment">//è¿”å›æ—¶é—´å•ä½ä¸ºæ¯«ç§’</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é”®ä¸å­˜åœ¨æ—¶ï¼Œå‘½ä»¤è¿”å›-2</span></span><br><span class="line"><span class="comment">// é”®æœªè®¾ç½®è¿‡æœŸæ—¶é—´æ—¶ï¼Œå‘½ä»¤è¿”å›-1</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å–æ¶ˆé”®çš„è¿‡æœŸæ—¶é—´è®¾ç½®</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">PERSIST key</span></span><br></pre></td></tr></table></figure><p>é™¤äº† <code>PERSIST</code> å‘½ä»¤å¤–ï¼Œä½¿ç”¨ <code>SET</code> æˆ– <code>GETSET</code> å‘½ä»¤ä¸ºé”®èµ‹å€¼ï¼Œä¹Ÿä¼šåŒæ—¶æ¸…é™¤é”®çš„è¿‡æœŸæ—¶é—´ã€‚</p><h4 id="å®ç°è®¿é—®é¢‘ç‡é™åˆ¶"><a href="#å®ç°è®¿é—®é¢‘ç‡é™åˆ¶" class="headerlink" title="å®ç°è®¿é—®é¢‘ç‡é™åˆ¶"></a>å®ç°è®¿é—®é¢‘ç‡é™åˆ¶</h4><p>è€ƒè™‘å¦‚ä¸‹åœºæ™¯â€”â€”ä¸ºäº†å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œé™åˆ¶æ¯ä¸ªç”¨æˆ·ï¼ˆIPï¼‰æ¯åˆ†é’Ÿæœ€å¤šåªèƒ½è®¿é—®10æ¬¡ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿‡æœŸæ—¶é—´ <code>EXPIRE</code> å®ç°</p><ul><li>åˆ›å»ºä¸€ä¸ª <code>rate.limiting:userIP</code> çš„é”®</li><li>è®¾ç½® <code>EXPIRE key seconds</code>ï¼Œè¿‡æœŸæ—¶é—´ä¸º60sã€‚ä¸€åˆ†é’Ÿåï¼Œè¯¥é”®ä¼šè¢«è‡ªåŠ¨åˆ é™¤</li><li>ç”¨æˆ·æ¯æ¬¡è®¿é—®æœåŠ¡å™¨ï¼Œä½¿ç”¨ <code>INCR</code> é€’å¢è¯¥é”®å€¼</li><li>å½“è®¿é—®æ¬¡æ•°è¾¾åˆ°10åï¼Œæç¤ºç”¨æˆ·ç¨åè®¿é—®</li></ul><p>ä¸Šè¿°æµç¨‹çš„ä¼ªä»£ç å¦‚ä¸‹</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$isKeyExists</span> = EXISTS rate.limiting:<span class="variable">$IP</span></span><br><span class="line"><span class="keyword">if</span> isKeyExists is <span class="number">1</span></span><br><span class="line">    <span class="variable">$time</span> = INCR rate.limiting:<span class="variable">$IP</span></span><br><span class="line">    <span class="keyword">if</span> <span class="variable">$time</span> &gt; <span class="number">10</span></span><br><span class="line">        print è®¿é—®é¢‘ç‡è¶…è¿‡äº†é™åˆ¶ï¼Œè¯·ç¨åå†è¯•</span><br><span class="line">        <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    MULTI           <span class="regexp">//</span>ä½¿ç”¨äº‹åŠ¡ï¼Œé¿å…EXPIREå› ä¸ºæŸç§åŸå› æœªæ‰§è¡Œï¼Œå¯¼è‡´è¯¥é”®å€¼ä¸€ç›´å­˜åœ¨</span><br><span class="line">    INCR rate.limiting:<span class="variable">$IP</span></span><br><span class="line">    EXPIRE <span class="variable">$keyName</span>, <span class="number">60</span></span><br><span class="line">    EXEC</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨ç¬¬1åˆ†é’Ÿçš„æœ€åä¸€ç§’è®¿é—®äº†9æ¬¡ï¼Œåˆåœ¨ä¸‹ä¸€åˆ†é’Ÿçš„ç¬¬ä¸€ç§’è®¿é—®äº†10æ¬¡ã€‚è¿™ç§è®¿é—®æ˜¯å¯ä»¥é€šè¿‡ä¸Šè¿°è®¿é—®é™åˆ¶çš„ï¼Œä½†å®é™…ä¸Šç”¨æˆ·åœ¨2ç§’å†…è®¿é—®äº†19æ¬¡æœåŠ¡å™¨ã€‚</p><p>ä¸ºäº†å¤„ç†ä¸Šè¿°åœºæ™¯ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–</p><ul><li>ä½¿ç”¨ä¸€ä¸ªåˆ—è¡¨å­˜å‚¨ç”¨æˆ·æœ€è¿‘10æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶é—´</li><li>ä¸€æ—¦é”®ä¸­çš„å…ƒç´ å¤§äº10ä¸ªï¼Œå°±åˆ¤æ–­æ—¶é—´æœ€æ—©çš„å…ƒç´ è·ç°åœ¨çš„æ—¶é—´æ˜¯å¦å°äº1åˆ†é’Ÿã€‚</li><li>å¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·æœ€è¿‘ä¸€åˆ†é’Ÿçš„è®¿é—®æ¬¡æ•°è¶…è¿‡äº†10æ¬¡ï¼Œè¿›è¡Œé™æµæé†’ã€‚</li><li>å¦‚æœä¸æ˜¯ï¼Œå°±å°†ç°åœ¨çš„æ—¶é—´åŠ å…¥åˆ°åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶æŠŠæœ€æ—©çš„å…ƒç´ åˆ é™¤ã€‚</li></ul><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$listLength</span> = LLEN rate<span class="selector-class">.limiting</span>:<span class="variable">$IP</span></span><br><span class="line"><span class="keyword">if</span> listLength &lt; <span class="number">10</span></span><br><span class="line">    LPUSH rate<span class="selector-class">.limiting</span>:<span class="variable">$IP</span>,now()</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="variable">$time</span> = LINDEX rate<span class="selector-class">.limiting</span>:<span class="variable">$IP</span>, -<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> now() - <span class="variable">$time</span> &gt; <span class="number">60</span></span><br><span class="line">        print è®¿é—®é¢‘ç‡è¶…è¿‡äº†é™åˆ¶ï¼Œè¯·ç¨åå†è¯•</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        LPUSH rate<span class="selector-class">.limiting</span>:<span class="variable">$IP</span>,now()</span><br><span class="line">        LTRIM rate<span class="selector-class">.limiting</span>:<span class="variable">$IP</span>,<span class="number">0</span>,<span class="number">9</span></span><br></pre></td></tr></table></figure><h4 id="å®ç°ç¼“å­˜"><a href="#å®ç°ç¼“å­˜" class="headerlink" title="å®ç°ç¼“å­˜"></a>å®ç°ç¼“å­˜</h4><p>ä¸ºäº†æé«˜æœåŠ¡å™¨è´Ÿè½½èƒ½åŠ›ï¼Œå¸¸å¸¸éœ€è¦å°†ä¸€äº›è®¿é—®é¢‘ç‡è¾ƒé«˜ä½†æ˜¯CPUæˆ–åˆ™IOèµ„æºæ¶ˆè€—è¾ƒå¤§çš„æ“ä½œçš„ç»“æœç¼“å­˜èµ·æ¥ï¼Œå¹¶å¸Œæœ›è®©è¿™äº›ç¼“å­˜è¿‡ä¸€æ®µæ—¶é—´åè‡ªåŠ¨è¿‡æœŸã€‚</p><p>å®é™…å¼€å‘ä¸­å¾ˆéš¾ä¸ºç¼“å­˜é”®è®¾å®šåˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œä¸ºæ­¤å¯ä»¥é™åˆ¶Rediså¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜ï¼Œå¹¶è®©RedisæŒ‰ç…§ä¸€å®šçš„è§„åˆ™æ·˜æ±°ä¸éœ€è¦çš„ç¼“å­˜é”®ã€‚è¿™ç§æ–¹å¼åœ¨åªå°†Redisç”¨ä½œç¼“å­˜ç³»ç»Ÿæ—¶éå¸¸å®ç”¨ã€‚</p><p>Redisé…ç½®æ–‡ä»¶çš„ <code>maxmemory</code> å±æ€§é™å®šäº†Rediså¯ä»¥ä½¿ç”¨çš„æœ€å¤§å†…å­˜ã€‚å½“è¶…å‡ºè¿™ä¸ªé™åˆ¶æ—¶ï¼ŒRedisä¼šä¾æ® <code>maxmemory-policy</code> å‚æ•°æŒ‡å®šçš„ç­–ç•¥æ¥åˆ é™¤ä¸è¦çš„é”®å€¼ç›´åˆ°Rediså ç”¨çš„å†…å­˜å¤§å°å°äºæŒ‡å®šå†…å­˜ã€‚</p><p><code>maxmemory-policy</code> æ”¯æŒ<code>LRU</code>(<code>Least Recently Used</code>) ç®—æ³•è§„åˆ™ï¼Œå³â€œæœ€è¿‘æœ€å°‘ä½¿ç”¨åŸåˆ™â€ï¼Œå…¶è®¤ä¸ºæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„é”®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…ä¹Ÿä¸ä¼šè¢«ç”¨åˆ°ï¼Œå½“å†…å­˜ä¸è¶³æ—¶è¿™äº›é”®æ˜¯å¯ä»¥è¢«åˆ é™¤çš„ã€‚</p><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><p><code>SORT</code> å‘½ä»¤å¯ä»¥å¯¹åˆ—è¡¨ç±»å‹ï¼Œé›†åˆç±»å‹å’Œæœ‰åºé›†åˆç±»å‹é”®è¿›è¡Œæ’åºï¼Œå¹¶ä¸”å¯ä»¥å®Œæˆå’Œå…³ç³»æ•°æ®åº“ä¸­çš„è¿æ¥æŸ¥è¯¢ç±»ä¼¼çš„ä»»åŠ¡ã€‚</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SORT key BY å‚è€ƒé”® <span class="builtin-name">GET</span> <span class="built_in">..</span>. STORE destkey</span><br></pre></td></tr></table></figure><ul><li><code>BY å‚è€ƒé”®</code>ä¸­ï¼Œå¦‚æœæä¾›äº† <code>BY</code> å‚æ•°ï¼Œ<code>SORT</code> å‘½ä»¤å°†ä¸å†ä¾æ®å…ƒç´ è‡ªèº«çš„å€¼è¿›è¡Œæ’åºï¼Œè€Œæ˜¯å¯¹æ¯ä¸ªå…ƒç´ ä½¿ç”¨å…ƒç´ çš„å€¼æ›¿æ¢å‚è€ƒé”®ä¸­çš„ç¬¬ä¸€ä¸ª <code>&quot;*&quot;</code> å¹¶è·å–å…¶å€¼ï¼Œç„¶åä¾æ®è¯¥å€¼å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä¸‹è¿°è¯­å¥å°†è¯»å–å¦‚ <code>post:2</code>ï¼Œ<code>post:6</code>ï¼Œ<code>post:12</code>ï¼Œ<code>post:26</code> å‡ ä¸ªæ•£åˆ—é”®ä¸­çš„ <code>time</code> å­—æ®µçš„å€¼å¹¶ä»¥æ­¤å†³å®šæ’åºç»“æœã€‚</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SORT</span> tag:ruby:posts <span class="keyword">BY</span> <span class="keyword">post</span>:*-&gt;time <span class="keyword">DESC</span></span><br></pre></td></tr></table></figure><ul><li><code>GET</code> å‚æ•°ä¸å½±å“æ’åºï¼Œå®ƒçš„ä½œç”¨æ˜¯ä½¿ <code>SORT</code> å‘½ä»¤çš„è¿”å›ç»“æœä¸å†æ˜¯å…ƒç´ è‡ªèº«çš„å€¼ï¼Œè€Œæ˜¯ <code>GET</code> å‚æ•°ä¸­æŒ‡å®šçš„é”®å€¼ã€‚</li><li><code>STORE</code> å‚æ•°ç”¨äºå°†æ’åºç»“æœå­˜å‚¨åˆ°æŒ‡å®šçš„é”®ä¸­</li></ul><h4 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h4><p><code>SORT</code> å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(n+mlog(m))</code>ï¼Œå…¶ä¸­ <code>n</code> è¡¨ç¤ºè¦æ’åºçš„åˆ—è¡¨ï¼ˆæˆ–é›†åˆæˆ–æœ‰åºé›†åˆï¼‰ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œ<code>m</code>è¡¨ç¤ºè¦è¿”å›çš„å…ƒç´ ä¸ªæ•°ã€‚å½“ <code>n</code> è¾ƒå¤§çš„æ—¶å€™ï¼Œæ’åºå‘½ä»¤çš„æ€§èƒ½ç›¸å¯¹è¾ƒä½ï¼Œå¹¶ä¸” Redis åœ¨æ’åºå‰ä¼šå»ºç«‹ä¸€ä¸ªé•¿åº¦ä¸º <code>n</code> çš„å®¹å™¨æ¥å­˜å‚¨å¾…æ’åºçš„å…ƒç´ ï¼Œè™½ç„¶æ˜¯ä¸€ä¸ªä¸´æ—¶çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœåŒæ—¶è¿›è¡Œè¾ƒå¤šçš„å¤§æ•°æ®é‡çš„æ’åºæ“ä½œåˆ™ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚</p><p>æ‰€ä»¥å¼€å‘ä¸­ä½¿ç”¨ <code>SORT</code> å‘½ä»¤éœ€è¦æ³¨æ„</p><ol><li>å°½å¯èƒ½å‡å°‘å¾…æ’åºé”®ä¸­å…ƒç´ çš„æ•°é‡ï¼ˆä½¿ <code>n</code> å°½å¯èƒ½å°ï¼‰</li><li>ä½¿ç”¨ <code>LIMIT</code> å‚æ•°åªè·å–éœ€è¦çš„æ•°æ®ï¼ˆä½¿ <code>m</code> å°½å¯èƒ½å°ï¼‰</li><li>å¦‚æœéœ€è¦æ’åºçš„æ•°æ®é‡è¾ƒå¤§ï¼Œå°½å¯èƒ½ä½¿ç”¨ <code>STORE</code> å‚æ•°å°†ç»“æœç¼“å­˜</li></ol><h3 id="æ¶ˆæ¯é€šçŸ¥"><a href="#æ¶ˆæ¯é€šçŸ¥" class="headerlink" title="æ¶ˆæ¯é€šçŸ¥"></a>æ¶ˆæ¯é€šçŸ¥</h3><h4 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h4><p>ä»»åŠ¡é˜Ÿåˆ—ï¼Œå³â€œä¼ é€’ä»»åŠ¡çš„é˜Ÿåˆ—â€ã€‚å’Œä»»åŠ¡é˜Ÿåˆ—è¿›è¡Œäº¤äº’çš„å®ä½“æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯ç”Ÿäº§è€…ï¼ˆ<code>producer</code>ï¼‰ï¼Œå¦ä¸€ç±»æ˜¯æ¶ˆè´¹è€…ï¼ˆ<code>consumer</code>ï¼‰ã€‚ç”Ÿäº§è€…ä¼šå°†éœ€è¦å¤„ç†çš„ä»»åŠ¡æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œè€Œæ¶ˆè´¹è€…ä¼šä¸æ–­åœ°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å…¥ä»»åŠ¡ä¿¡æ¯å¹¶æ‰§è¡Œã€‚</p><p>ä½¿ç”¨ä»»åŠ¡é˜Ÿåˆ—çš„å¥½å¤„</p><ol><li>æ¾è€¦åˆï¼šç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„å®ç°ç»†èŠ‚ï¼Œåªéœ€çº¦å®šå¥½çš„ä»»åŠ¡çš„æè¿°æ ¼å¼å³å¯ã€‚</li><li>æ˜“äºæ‰©å±•ï¼šæ¶ˆè´¹è€…å¯ä»¥æ‰©å±•åˆ°å¤šä¸ªï¼Œè€Œä¸”å¯ä»¥åˆ†å¸ƒåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸­ï¼Œå¯ä»¥è½»æ˜“åœ°é™ä½å•å°æœåŠ¡å™¨çš„è´Ÿè½½</li></ol><h4 id="ä½¿ç”¨Rediså®ç°ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä½¿ç”¨Rediså®ç°ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä½¿ç”¨Rediså®ç°ä»»åŠ¡é˜Ÿåˆ—"></a>ä½¿ç”¨Rediså®ç°ä»»åŠ¡é˜Ÿåˆ—</h4><p>ä½¿ç”¨Redisçš„åˆ—è¡¨ç»“æ„å’Œ <code>RPOP</code>ï¼Œ<code>LPUSH</code> å‘½ä»¤ï¼Œå¯ä»¥å®ç°ç®€å•çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¼ªä»£ç å¦‚ä¸‹æ‰€ç¤º</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ— é™å¾ªç¯è¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å†…å®¹</span></span><br><span class="line">loop</span><br><span class="line">    <span class="variable">$task</span> = RPOP queue</span><br><span class="line">    <span class="keyword">if</span> <span class="variable">$task</span></span><br><span class="line">        # å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡åˆ™æ‰§è¡Œä»»åŠ¡</span><br><span class="line">        execute(<span class="variable">$task</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        # å¦‚æœæ²¡æœ‰åˆ™ç­‰å¾…1ç§’ï¼Œä»¥å…è¿‡äºé¢‘ç¹åœ°è¯·æ±‚æ•°æ®</span><br><span class="line">        wait 1 second</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä¼ªä»£ç æœ‰ä¸ªä¸è¶³ä¹‹å¤„ï¼Œå½“ä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰ä»»ä½•ä»»åŠ¡æ—¶ï¼Œæ¶ˆè´¹è€…æ¯ç§’éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ <code>RPOP</code> å‘½ä»¤æŸ¥è¯¢æ˜¯å¦æœ‰æ–°ä»»åŠ¡ã€‚</p><p>å¦‚æœå¯ä»¥å®ç°ä¸€æ—¦æœ‰æ–°ä»»åŠ¡åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—å°±é€šçŸ¥æ¶ˆè´¹è€…å°±å¥½äº†ã€‚å…¶å®å€ŸåŠ© <code>BRPOP</code> å‘½ä»¤å°±å¯ä»¥å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚</p><p>å¦‚ä¸Šä¼ªä»£ç å¯ä»¥ä¼˜åŒ–ä¸º</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loop</span><br><span class="line">    <span class="meta"># å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸­æ²¡æœ‰æ–°ä»»åŠ¡ï¼ŒBRPOPå‘½ä»¤ä¼šä¸€ç›´é˜»å¡ï¼Œä¸ä¼šæ‰§è¡Œexecute()</span></span><br><span class="line">    $task = BRPOP queue, <span class="number">0</span></span><br><span class="line">    <span class="meta"># è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ç¬¬2ä¸ªå…ƒç´ æ˜¯æˆ‘ä»¬éœ€è¦çš„ä»»åŠ¡</span></span><br><span class="line">    <span class="built_in">execute</span>($task[1])</span><br></pre></td></tr></table></figure><p><strong><code>BRPOP</code> å’Œ <code>RPOP</code> å‘½ä»¤ç±»ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯å½“åˆ—è¡¨ä¸­æ²¡æœ‰å…ƒç´ æ—¶ï¼Œ<code>BRPOP</code> å‘½ä»¤ä¼šä¸€ç›´é˜»å¡è¿æ¥ï¼Œç›´åˆ°æœ‰æ–°å…ƒç´ åŠ å…¥ã€‚</strong> </p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BRPOP <span class="built_in">key</span> [<span class="built_in">key</span> ...] timeout</span><br></pre></td></tr></table></figure><p><code>BRPOP</code> å‘½ä»¤æ¥æ”¶2ä¸ªå‚æ•°ï¼Œç¬¬1ä¸ªå‚æ•°æ˜¯é”®åï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’ã€‚å½“è¶…è¿‡äº†æ­¤æ—¶é—´ä»ç„¶æ²¡æœ‰è·å¾—æ–°å…ƒç´ çš„è¯ï¼Œå°±ä¼šè¿”å› <code>nil</code>ã€‚å¦‚æœä¼ å…¥æ—¶é—´å‚æ•°ä¸º0ï¼ˆå¦‚ä¸‹ä¼ªä»£ç ç¤ºä¾‹ï¼‰ï¼Œåˆ™è¡¨ç¤ºä¸é™åˆ¶ç­‰å¾…æ—¶é—´ï¼Œå³å¦‚æœæ²¡æœ‰æ–°å…ƒç´ åŠ å…¥é˜Ÿåˆ—å°±ä¼šæ°¸è¿œé˜»å¡ä¸‹å»ã€‚</p><p>è·å¾—ä¸€ä¸ªå…ƒç´ åï¼Œ<code>BRPOP</code> å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…±2ä¸ªå€¼ï¼Œåˆ†åˆ«æ˜¯é”®åå’Œå…ƒç´ å€¼ã€‚ç¬¬2ä¸ªå‚æ•°ï¼Œå…ƒç´ å€¼ï¼Œå°±æ˜¯å¾…å¤„ç†çš„ä»»åŠ¡ã€‚</p><h4 id="ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—</h4><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé’ˆå¯¹å¤šç§ä¸åŒçš„ä»»åŠ¡ï¼Œç»å¸¸ä¼šéœ€è¦æ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼Œå»æ‰§è¡Œä¼˜å…ˆçº§è¾ƒé«˜çš„ä»»åŠ¡ï¼Œå³éœ€è¦å®ç°ä¸€ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</p><p><code>BRPOP</code> å’Œ <code>BLPOP</code> å‘½ä»¤å¯ä»¥åŒæ—¶æ¥æ”¶å¤šä¸ªé”®ï¼Œå¯ä»¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BRPOP <span class="built_in">key</span> [<span class="built_in">key</span> ...] timeout</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼Œ<code>BLPOP queue:1 queue:2 0</code>ï¼Œè¡¨ç¤ºåŒæ—¶æ£€æµ‹å¤šä¸ªé”®â€”â€”<code>queue:1</code> å’Œ <code>queue:2</code></p><ul><li>å¦‚æœæ‰€æœ‰é”®éƒ½æ²¡å…ƒç´ åˆ™é˜»å¡</li><li>å¦‚æœæœ‰ä¸€ä¸ªé”®æœ‰å…ƒç´ åˆ™ä¼šä»è¯¥é”®ä¸­å¼¹å‡ºå…ƒç´ </li><li>å¦‚æœå¤šä¸ªé”®éƒ½æœ‰å…ƒç´ ï¼Œåˆ™æŒ‰ç…§<strong>ä»å·¦åˆ°å³</strong>é¡ºåºè¯»å–ç¬¬ä¸€ä¸ªé”®ä¸­çš„ä¸€ä¸ªå…ƒç´ </li></ul><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; LPUSH queue:<span class="number">2</span> task1</span><br><span class="line"><span class="number">1</span>) (<span class="built_in">int</span>eger) <span class="number">1</span></span><br><span class="line">redis&gt; LPUSH queue:<span class="number">3</span> task2</span><br><span class="line"><span class="number">1</span>) (<span class="built_in">int</span>eger) <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">redis&gt;BRPOP queue:<span class="number">1</span> queue:<span class="number">2</span> queue:<span class="number">3</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"queue:2"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"task1"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">redis&gt;BLPOP queue:<span class="number">1</span> queue:<span class="number">2</span> queue:<span class="number">3</span> <span class="number">0</span></span><br><span class="line"><span class="number">1</span>) <span class="string">"queue:3"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"task2"</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>BRPOP</code> åˆ›å»ºä¼˜å…ˆçº§é˜Ÿåˆ—æ—¶ï¼Œ<code>RPOP</code> è¡¨ç¤ºé˜Ÿåˆ—å·¦è¿›å³å‡ºï¼Œå› æ­¤æœ‰å¦‚ä¸‹ç»“æ„ã€‚å³ <code>BRPOP queue:1 queue:2 queue:3 0</code> å‘½ä»¤ä¸­ï¼Œè¶Šé å·¦çš„é”®ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ<code>queue:1</code> çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œå› æ­¤ä¼šæŒ‰ç…§<strong>ä»å·¦åˆ°å³</strong>é¡ºåºè¯»å–ç¬¬ä¸€ä¸ªé”®ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(L-å·¦è¿›)--- | <span class="type">queue</span>:<span class="number">3</span>| <span class="type">queue</span>:<span class="number">2</span>| <span class="type">queue</span>:<span class="number">1</span>| <span class="type">--&gt; (R</span>-å³å‡º)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>BLPOP</code> åˆ›å»ºä¼˜å…ˆçº§é˜Ÿåˆ—æ—¶ï¼Œ<code>LPOP</code> è¡¨ç¤ºé˜Ÿåˆ—å³è¿›å·¦å‡ºï¼Œå› æ­¤æœ‰å¦‚ä¸‹ç»“æ„ã€‚å³ <code>BLPOP queue:1 queue:2 queue:3 0</code> å‘½ä»¤ä¸­ï¼Œè¶Šé å³çš„é”®ä¼˜å…ˆçº§è¶Šé«˜ï¼ˆ<code>queue:3</code> çš„ä¼˜å…ˆçº§æœ€é«˜ï¼‰ï¼Œå› æ­¤ä¼šæŒ‰ç…§<strong>ä»å³åˆ°å·¦</strong>é¡ºåºè¯»å–ç¬¬ä¸€ä¸ªé”®ä¸­çš„ä¸€ä¸ªå…ƒç´ ã€‚</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(L-å·¦å‡º) &lt;--- | <span class="type">queue</span>:<span class="number">1</span>| <span class="type">queue</span>:<span class="number">2</span>| <span class="type">queue</span>:<span class="number">3</span>| <span class="type">--- (R</span>-å³è¿›)</span><br></pre></td></tr></table></figure><h4 id="â€œå‘å¸ƒ-è®¢é˜…â€æ¨¡å¼"><a href="#â€œå‘å¸ƒ-è®¢é˜…â€æ¨¡å¼" class="headerlink" title="â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼"></a>â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼</h4><p>â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼åŒ…å«ä¸¤ç§è§’è‰²ï¼Œåˆ†åˆ«æ˜¯å‘å¸ƒè€…å’Œè®¢é˜…è€…ã€‚è®¢é˜…è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“ï¼ˆ<code>channel</code>ï¼‰ï¼Œå‘å¸ƒè€…å¯ä»¥å‘æŒ‡å®šçš„é¢‘é“å‘é€æ¶ˆæ¯ï¼Œæ‰€æœ‰è®¢é˜…è¯¥é¢‘é“çš„è®¢é˜…è€…éƒ½ä¼šå—åˆ°æ”¹æ¶ˆæ¯ã€‚</p><ul><li>å‘å¸ƒæ¶ˆæ¯</li></ul><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUBLISH channel <span class="keyword">message</span>   <span class="comment">//å‘½ä»¤è¿”å›å€¼è¡¨ç¤ºæ¥æ”¶åˆ°è¿™æ¡æ¶ˆæ¯çš„è®¢é˜…è€…çš„æ•°é‡</span></span><br></pre></td></tr></table></figure><p>å‘å¸ƒå‡ºå»çš„æ¶ˆæ¯ä¸ä¼šè¢«æŒä¹…åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æœ‰å®¢æˆ·è®¢é˜…è¯¥é¢‘é“ <code>channel</code>ååªèƒ½æ”¶åˆ°åç»­å‘å¸ƒçš„æ¶ˆæ¯ï¼Œä¹‹å‰å‘é€çš„æ¶ˆæ¯å°±æ”¶ä¸åˆ°äº†ã€‚</p><ul><li>è®¢é˜…æ¶ˆæ¯</li></ul><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SUBSCRIBE channel <span class="string">[channel ...]</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>SUBSCRIBE</code> å‘½ä»¤åå®¢æˆ·ç«¯ä¼šè¿›å…¥è®¢é˜…çŠ¶æ€ï¼Œæ­¤çŠ¶æ€ä¸‹çš„å®¢æˆ·ç«¯ä¸èƒ½ä½¿ç”¨ <code>SUBSCRIBE</code>, <code>UNSUBSCRIBE</code>, <code>PSUBSCRIBE</code> å’Œ <code>PUNSUBSCRIBE</code> è¿™4ä¸ªå±äº â€œå‘å¸ƒ/è®¢é˜…â€æ¨¡å¼çš„å‘½ä»¤ä¹‹å¤–çš„å‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><p>è¿›å…¥è®¢é˜…çŠ¶æ€åçš„å®¢æˆ·ç«¯ï¼Œå¯èƒ½æ”¶åˆ°3ç§ç±»å‹çš„å›å¤ï¼Œæ¯ç§ç±»å‹çš„å›å¤éƒ½åŒ…æ‹¬3ä¸ªå€¼ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯æ¶ˆæ¯ç±»å‹ï¼Œæ ¹æ®æ¶ˆæ¯ç±»å‹çš„ä¸åŒï¼Œç¬¬äºŒï¼Œç¬¬ä¸‰ä¸ªå€¼çš„å«ä¹‰ä¹Ÿä¸åŒã€‚æ¶ˆæ¯ç±»å‹çš„å–å€¼å¯èƒ½æœ‰ä»¥ä¸‹3ä¸ª</p><ol><li><code>subscribe</code>ã€‚è¡¨ç¤ºè®¢é˜…æ¶ˆæ¯æˆåŠŸçš„åé¦ˆã€‚ç¬¬2ä¸ªå€¼æ˜¯è®¢é˜…æˆåŠŸçš„é¢‘é“åç§°ï¼Œç¬¬3ä¸ªå€¼æ˜¯å½“å‰å®¢æˆ·ç«¯è®¢é˜…çš„é¢‘é“æ•°é‡</li><li><code>message</code>ã€‚è¡¨ç¤ºæ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ç¬¬2ä¸ªå‚æ•°è¡¨ç¤ºé¢‘é“åç§°ï¼Œç¬¬3ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯å†…å®¹</li><li><code>unscribe</code>ã€‚è¡¨ç¤ºæˆåŠŸå–æ¶ˆè®¢é˜…æŸä¸ªé¢‘é“ã€‚ç¬¬2ä¸ªå‚æ•°è¡¨ç¤ºé¢‘é“åç§°ï¼Œç¬¬3ä¸ªå‚æ•°æ˜¯å½“å‰å®¢æˆ·ç«¯è®¢é˜…çš„é¢‘é“æ•°é‡ï¼Œå½“è¯¥å€¼ä¸º0æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šé€€å‡ºè®¢é˜…çŠ¶æ€ã€‚</li></ol><p>ä¸‹é¢çœ‹ä¸€ä¸ªå®ä¾‹ã€‚</p><ol><li>é¦–å…ˆRedisçš„ä¸€ä¸ªå®ä¾‹RedisAåœ¨é¢‘é“ <code>channel1.1</code> å‘å¸ƒä¸€ä¸ªæ¶ˆæ¯</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RedisA</span></span><br><span class="line">redisA&gt; PUBLISH channel1<span class="number">.1</span> hi</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">0</span>     <span class="comment">//è¡¨ç¤ºå½“å‰æ²¡æœ‰å®¢æˆ·ç«¯è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br></pre></td></tr></table></figure><ol start="2"><li>Redisçš„å¦å¤–ä¸€ä¸ªå®ä¾‹RedisB è®¢é˜…é¢‘é“ <code>channel1.1</code></li></ol><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RedisB</span></span><br><span class="line">redisB&gt; SUBSCRIBE channel1<span class="number">.1</span></span><br><span class="line">Reading messages... (press Ctrl-C to quit)</span><br><span class="line"><span class="number">1</span>) <span class="string">"subscribe"</span>   <span class="comment">//è®¢é˜…æ¶ˆæ¯æˆåŠŸ</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"channel1.1"</span></span><br><span class="line"><span class="number">3</span>) (<span class="type">integer</span>) <span class="number">1</span></span><br></pre></td></tr></table></figure><ol start="3"><li>å®ä¾‹RedisAç»§ç»­åœ¨é¢‘é“ <code>channel1.1</code> å‘å¸ƒä¸€ä¸ªæ¶ˆæ¯</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//RedisA</span></span><br><span class="line">redisA&gt; PUBLISH channel1<span class="number">.1</span> hello</span><br><span class="line">(<span class="built_in">int</span>eger) <span class="number">1</span>     <span class="comment">//è¡¨ç¤ºå½“å‰æ²¡æœ‰å®¢æˆ·ç«¯è®¢é˜…è¯¥æ¶ˆæ¯</span></span><br></pre></td></tr></table></figure><ol start="4"><li>æ­¤æ—¶ï¼Œå®ä¾‹RedisB ä¼šæ”¶åˆ°å¦‚ä¸‹æ¶ˆæ¯</li></ol><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) <span class="string">"message"</span></span><br><span class="line"><span class="number">2</span>) <span class="string">"channel1.1"</span></span><br><span class="line"><span class="number">3</span>) <span class="string">"hello"</span></span><br></pre></td></tr></table></figure><h4 id="æŒ‰ç…§è§„åˆ™è®¢é˜…"><a href="#æŒ‰ç…§è§„åˆ™è®¢é˜…" class="headerlink" title="æŒ‰ç…§è§„åˆ™è®¢é˜…"></a>æŒ‰ç…§è§„åˆ™è®¢é˜…</h4><p>å¯ä»¥ä½¿ç”¨ <code>PSUBSCRIBE</code> è®¢é˜…æŒ‡å®šçš„è§„åˆ™ï¼Œè§„åˆ™æ”¯æŒ <code>glob</code> é£æ ¼é€šé…ç¬¦æ ¼å¼ã€‚</p><table><thead><tr><th>ç¬¦å·</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>?</td><td>åŒ¹é…ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>*</td><td>åŒ¹é…ä»»æ„ä¸ªï¼ˆåŒ…æ‹¬0ä¸ªï¼‰å­—ç¬¦</td></tr><tr><td>[]</td><td>åŒ¹é…æ‹¬å·é—´çš„ä»»ä¸€å­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ <code>-</code> è¡¨ç¤ºä¸€ä¸ªèŒƒå›´ï¼Œå¦‚ <code>[1-9]</code></td></tr><tr><td>\x</td><td>ç”¨äºè½¬ä¹‰å­—ç¬¦</td></tr></tbody></table><p>ä¾‹å¦‚ <code>PSUBSCRIBE channel1.?*</code>å‘½ä»¤ä¸­ï¼Œè§„åˆ™ <code>channel1.?*</code> å¯ä»¥åŒ¹é… <code>channel1.1</code> å’Œ <code>channel1.10</code>ï¼Œä½†ä¸ä¼šåŒ¹é… <code>channel1.1</code>ã€‚</p><h3 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h3><ul><li>å®¢æˆ·ç«¯å’ŒRedisä½¿ç”¨TCPåè®®è¿æ¥ã€‚</li><li>ä¸è®ºæ˜¯å®¢æˆ·ç«¯å‘Rediså‘é€å‘½ä»¤ï¼Œè¿˜æ˜¯Rediså‘å®¢æˆ·ç«¯è¿”å›å‘½ä»¤ç»“æœï¼Œéƒ½éœ€è¦ç»è¿‡ç½‘ç»œä¼ è¾“ã€‚è¿™ä¸¤ä¸ªéƒ¨åˆ†çš„æ€»è€—æ—¶æˆä¸º<strong>å¾€è¿”æ—¶å»¶ã€‚</strong></li><li>å¤§è‡´æ¥è¯´ï¼Œåˆ°æœ¬åœ°å›ç¯åœ°å€ï¼ˆ<code>loop back address</code>ï¼‰çš„å¾€è¿”æ—¶é—´ï¼Œåœ¨æ•°é‡çº§ä¸Šç›¸å½“äºRediså¤„ç†ä¸€æ¡ç®€å•å‘½ä»¤ (å¦‚ <code>LPUSH list 1 2 3</code>) çš„æ—¶é—´ã€‚</li><li>Redisçš„åº•å±‚é€šä¿¡åè®®å¯¹ç®¡é“ï¼ˆ<code>pipelining</code>ï¼‰æä¾›äº†æ”¯æŒã€‚é€šè¿‡ç®¡é“å¯ä»¥ä¸€æ¬¡æ€§å‘é€å¤šæ¡å‘½ä»¤å¹¶åœ¨æ‰§è¡Œå®Œåä¸€æ¬¡æ€§å°†ç»“æœè¿”å›ã€‚</li><li>å½“ä¸€ç»„å‘½ä»¤ä¸­æ¯æ¡å‘½ä»¤éƒ½ä¸ä¾èµ–äºä¹‹å‰å‘½ä»¤çš„æ‰§è¡Œç»“æœæ—¶å°±å¯ä»¥å°†è¿™ä¸€ç»„å‘½ä»¤ä¸€èµ·é€šè¿‡ç®¡é“å‘å‡ºã€‚ç®¡é“é€šè¿‡å‡å°‘å®¢æˆ·ç«¯å’ŒRedisçš„é€šä¿¡æ¬¡æ•°ï¼Œæ¥å®ç°é™ä½å¾€è¿”æ—¶å»¶ç´¯è®¡å€¼çš„ç›®çš„ã€‚</li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/back-end-2020/redis-basic-pipelining-1.png" alt=""></p><h3 id="èŠ‚çœç©ºé—´"><a href="#èŠ‚çœç©ºé—´" class="headerlink" title="èŠ‚çœç©ºé—´"></a>èŠ‚çœç©ºé—´</h3><p>Redisæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„æ•°æ®åº“ï¼Œæ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚å› æ­¤å¦‚ä½•èŠ‚çœå†…å­˜ï¼Œæ§åˆ¶æˆæœ¬ï¼Œè‡³å…³é‡è¦ã€‚èŠ‚çœå†…å­˜ç©ºé—´ï¼Œå¯ä»¥ä»ä»¥ä¸‹æ–¹é¢è€ƒè™‘</p><ol><li>ç²¾ç®€é”®åå’Œé”®å€¼</li><li>å†…éƒ¨ç¼–ç ä¼˜åŒ–</li></ol><p>Redisä¸ºæ¯ç§æ•°æ®ç±»å‹éƒ½æä¾›äº†2ç§å†…éƒ¨ç¼–ç æ–¹å¼ï¼Œç”¨äºèŠ‚çœå†…å­˜ç©ºé—´ã€‚</p><p>ä»¥æ•£åˆ—ç±»å‹ä¸ºä¾‹ï¼Œæ•£åˆ—ç±»å‹æ˜¯é€šè¿‡æ•£åˆ—è¡¨å®ç°çš„ï¼Œè¿™æ ·å¯ä»¥å®ç°æ—¶é—´å¤æ‚åº¦ <code>O(1)</code> çš„æŸ¥æ‰¾ï¼Œèµ‹å€¼æ“ä½œã€‚ç„¶è€Œå½“å…ƒç´ è¾ƒå°‘æ—¶ï¼Œ<code>O(1)</code>çš„æ“ä½œå¹¶ä¸ä¼šæ¯” <code>O(n)</code> æœ‰æ˜æ˜¾çš„æ€§èƒ½æé«˜ã€‚æ‰€ä»¥Redisä¼šæ ¹æ®å®é™…æƒ…å†µè‡ªåŠ¨è°ƒæ•´ï¼Œé‡‡ç”¨ä¸€ç§æ›´ä¸ºç´§å‡‘ä½†æ€§èƒ½ç¨å·®ï¼ˆæŸ¥æ‰¾å…ƒç´ çš„å¤æ‚åº¦ä¸º<code>O(n)</code>ï¼‰çš„ç¼–ç æ–¹å¼ã€‚</p><p><strong>å†…éƒ¨ç¼–ç æ–¹å¼çš„é€‰æ‹©ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ã€‚</strong> å¯ä»¥ä½¿ç”¨ <code>OBJECT ENCODING key</code> å‘½ä»¤æŸ¥çœ‹æŸä¸ªé”®çš„å†…éƒ¨ç¼–ç æ–¹å¼ã€‚</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis&gt; <span class="keyword">SET</span> foo <span class="comment">bar</span></span><br><span class="line">OK</span><br><span class="line">redis&gt; OBJECT <span class="comment">ENCODING foo</span></span><br><span class="line"><span class="string">"raw"</span></span><br></pre></td></tr></table></figure><h2 id="Redis-è„šæœ¬"><a href="#Redis-è„šæœ¬" class="headerlink" title="Redis è„šæœ¬"></a>Redis è„šæœ¬</h2><p>Redis è„šæœ¬ä½¿ç”¨ Lua è§£é‡Šå™¨æ¥æ‰§è¡Œè„šæœ¬ã€‚ Redis 2.6 ç‰ˆæœ¬ï¼ˆå’Œä¹‹åç‰ˆæœ¬ï¼‰é€šè¿‡å†…åµŒæ”¯æŒ Lua ç¯å¢ƒã€‚æ‰§è¡Œè„šæœ¬çš„å¸¸ç”¨å‘½ä»¤ä¸º <code>EVAL</code>ã€‚ ä½¿ç”¨è„šæœ¬çš„å¥½å¤„åŒ…æ‹¬</p><ol><li>å‡å°‘ç½‘ç»œå¼€é”€ï¼šä½¿ç”¨è„šæœ¬å¯ä»¥å°†å¤šä¸ªå‘½ä»¤çš„å¤šæ¬¡è¯·æ±‚ï¼Œé€šè¿‡ä¸€æ¬¡è¯·æ±‚å®Œæˆï¼Œå‡å°‘ç½‘ç»œå¾€è¿”æ—¶å»¶</li><li>åŸå­æ“ä½œï¼šRediså°†æ•´ä¸ªè„šæœ¬ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œä¸­é—´ä¸ä¼šè¢«å…¶ä»–å‘½ä»¤æ’å…¥ã€‚å³ç¼–å†™è„šæœ¬è¿‡ç¨‹ä¸­æ— éœ€æ‹…å¿ƒä¼šå‡ºç°ç«æ€æ¡ä»¶ï¼Œä¹Ÿæ— éœ€ä½¿ç”¨äº‹åŠ¡ã€‚äº‹åŠ¡å¯ä»¥å®Œæˆçš„æ‰€æœ‰åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨è„šæœ¬å®ç°ã€‚</li><li>å¤ç”¨ï¼šå®¢æˆ·ç«¯å‘é€çš„è„šæœ¬ä¼šæ°¸ä¹…å­˜å‚¨åœ¨Redisä¸­ï¼Œå…¶ä»–å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥å¤ç”¨è¿™ä¸€è„šæœ¬ã€‚</li></ol><h2 id="Redis-æŒä¹…åŒ–"><a href="#Redis-æŒä¹…åŒ–" class="headerlink" title="Redis æŒä¹…åŒ–"></a>Redis æŒä¹…åŒ–</h2><p>Redis æ”¯æŒ2ç§æ–¹å¼çš„æŒä¹…åŒ–</p><ol><li><code>RDB</code> æ–¹å¼ï¼šæ ¹æ®æŒ‡å®šçš„è§„åˆ™â€œå®šæ—¶â€å°†å†…å­˜ä¸­çš„æ•°æ®å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Š</li><li><code>AOF</code> æ–¹å¼ï¼šæ¯æ¬¡æ‰§è¡Œå‘½ä»¤åå°†å‘½ä»¤æœ¬èº«è®°å½•ä¸‹æ¥</li></ol><p>é€šè¿‡ <code>RDB</code> æ–¹å¼å®ç°æŒä¹…åŒ–ï¼Œä¸€æ—¦ Redis å¼‚å¸¸é€€å‡ºï¼Œå°±ä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§ä»¥åæ›´æ”¹çš„æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæ•°æ®ç›¸å¯¹é‡è¦ï¼Œå¸Œæœ›æŸå¤±é™åˆ°æœ€å°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ <code>AOF</code> æ–¹å¼è¿›è¡ŒæŒä¹…åŒ–ã€‚</p><p>Redis å…è®¸åŒæ—¶å¼€å¯ <code>RDB</code> å’Œ <code>AOF</code> æ–¹å¼ï¼Œæ—¢ä¿è¯äº†æ•°æ®å®‰å…¨åˆä½¿å¾—è¿›è¡Œå¤‡ä»½ç­‰æ“ä½œååˆ†å®¹æ˜“ã€‚æ­¤æ—¶é‡æ–°å¯åŠ¨ Redis åï¼ŒRedis ä¼šä½¿ç”¨ AOF æ–‡ä»¶æ¥æ¢å¤æ•°æ®ï¼Œå› ä¸º AOF æ–¹å¼çš„æŒä¹…åŒ–å¯èƒ½ä¸¢å¤±çš„æ•°æ®æ›´å°‘ã€‚</p><h3 id="RDBæ–¹å¼"><a href="#RDBæ–¹å¼" class="headerlink" title="RDBæ–¹å¼"></a>RDBæ–¹å¼</h3><p><code>RDB</code> æ–¹å¼çš„æŒä¹…åŒ–æ˜¯é€šè¿‡å¿«ç…§ï¼ˆ<code>snapshoting</code>ï¼‰å®Œæˆçš„ï¼Œå½“ç¬¦åˆä¸€å®šæ¡ä»¶æ—¶ Redis ä¼šè‡ªåŠ¨å°†å†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®ç”Ÿæˆä¸€ä»½å‰¯æœ¬å¹¶å­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šï¼Œè¿™ä¸ªè¿‡ç¨‹å³â€œå¿«ç…§â€ã€‚</p><h4 id="å¿«ç…§è§¦å‘æ¡ä»¶"><a href="#å¿«ç…§è§¦å‘æ¡ä»¶" class="headerlink" title="å¿«ç…§è§¦å‘æ¡ä»¶"></a>å¿«ç…§è§¦å‘æ¡ä»¶</h4><p>Redis ä¼šåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µä¸‹å¯¹æ•°æ®è¿›è¡Œå¿«ç…§</p><ol><li>æ ¹æ®é…ç½®è§„åˆ™è¿›è¡Œè‡ªåŠ¨å¿«ç…§ï¼šæ¯å½“æ—¶é—´çª—å£ M å†…è¢«æ›´æ”¹çš„é”®çš„ä¸ªæ•°å¤§äº N æ—¶ï¼Œå³ç¬¦åˆè‡ªåŠ¨å¿«ç…§æ¡ä»¶</li><li>ç”¨æˆ·æ‰§è¡Œ <code>SAVE</code> æˆ– <code>BGSAVE</code> å‘½ä»¤<ul><li>æ‰§è¡Œ <code>SAVE</code> å‘½ä»¤æ—¶ï¼ŒRedisåŒæ­¥åœ°æ‰§è¡Œå¿«ç…§æ“ä½œã€‚å¿«ç…§æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šé˜»å¡æ‰€æœ‰æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚æ‰€ä»¥åº”è¯¥å°½é‡é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰§è¡Œè¯¥æŒ‡ä»¤</li><li><code>BGSAVE</code> å‘½ä»¤å¯ä»¥åœ¨åå°å¼‚æ­¥åœ°æ‰§è¡Œå¿«ç…§æ“ä½œï¼ŒåŒæ—¶å¯ä»¥å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚</li></ul></li><li>æ‰§è¡Œ <code>FLUSHALL</code> å‘½ä»¤<ul><li><code>FLUSHALL</code> å‘½ä»¤ä¼šæ¸…æ¥šæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ“ä½œ</li><li>åªè¦è‡ªåŠ¨å¿«ç…§æ¡ä»¶ä¸ä¸ºç©ºï¼ˆå³ä½¿ä¸æ»¡è¶³è¯¥æ¡ä»¶ï¼‰ï¼Œæ‰§è¡Œ <code>FLUSHALL</code> å‘½ä»¤åï¼Œä¹Ÿä¼šè§¦å‘å¿«ç…§æ“ä½œ</li><li>å½“æ²¡æœ‰å®šä¹‰è‡ªåŠ¨å¿«ç…§æ¡ä»¶æ—¶ï¼Œæ‰§è¡Œ <code>FLUSHALL</code> å‘½ä»¤ä¸ä¼šè§¦å‘å¿«ç…§æ“ä½œ</li></ul></li><li>æ‰§è¡Œå¤åˆ¶ï¼ˆ<code>replication</code>ï¼‰æ—¶ï¼šè®¾ç½®äº†ä¸»ä»æ¨¡å¼æ—¶ï¼ŒRedisä¼šåœ¨å¤åˆ¶åˆå§‹åŒ–æ—¶è¿›è¡Œè‡ªåŠ¨å¿«ç…§</li></ol><h4 id="å¿«ç…§åŸç†"><a href="#å¿«ç…§åŸç†" class="headerlink" title="å¿«ç…§åŸç†"></a>å¿«ç…§åŸç†</h4><p>Redis é»˜è®¤ä¼šå°†å¿«ç…§æ–‡ä»¶å­˜å‚¨åœ¨ Redis å½“å‰è¿›ç¨‹çš„å·¥ä½œç›®å½•ç§çš„ <code>dump.rdb</code> æ–‡ä»¶ä¸­ã€‚å¿«ç…§çš„è¿‡ç¨‹å¦‚ä¸‹</p><ol><li>Redis ä½¿ç”¨ <code>fork</code> å‡½æ•°å¤åˆ¶ä¸€ä»½å½“å‰è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰çš„å‰¯æœ¬ï¼ˆå­è¿›ç¨‹ï¼‰</li><li>çˆ¶è¿›ç¨‹ç»§ç»­æ¥æ”¶å¹¶å¤„ç†å®¢æˆ·ç«¯å‘æ¥çš„å‘½ä»¤ï¼Œè€Œå­è¿›ç¨‹å¼€å§‹å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥ç¡¬ç›˜ä¸­çš„ä¸´æ—¶æ–‡ä»¶</li><li>å½“å­è¿›ç¨‹å†™å…¥å®Œæˆæ‰€æœ‰æ•°æ®åä¼šç”¨è¯¥ä¸´æ—¶æ–‡ä»¶æ›¿æ¢æ—§çš„ <code>RDB</code> æ–‡ä»¶ï¼Œè‡³æ­¤ä¸€æ¬¡å¿«ç…§æ“ä½œå®Œæˆã€‚</li></ol><h3 id="AOFæ–¹å¼"><a href="#AOFæ–¹å¼" class="headerlink" title="AOFæ–¹å¼"></a>AOFæ–¹å¼</h3><p><code>AOF</code>(<code>append only file</code>) æ–¹å¼å¯ä»¥å°† Redis æ‰§è¡Œçš„æ¯ä¸€æ¡å‘½å†™å‘½ä»¤è¿½åŠ åˆ°ç¡¬ç›˜æ–‡ä»¶ä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹æ˜¾ç„¶ä¼šé™ä½ Redis æ€§èƒ½ã€‚ä½†å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿™ä¸ªå½±å“æ˜¯å¯ä»¥æ¥æ”¶çš„ï¼Œå¦å¤–ä½¿ç”¨è¾ƒå¿«çš„ç¡¬ç›˜å¯ä»¥æé«˜ <code>AOF</code> çš„æ€§èƒ½ã€‚</p><ul><li>å¼€å¯AOF</li></ul><p>é»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å¼€å¯AOFï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯ä»¥å¼€å¯AOFã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒAOFæ–‡ä»¶çš„ä¿å­˜ä½ç½®å’ŒRDBæ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œé»˜è®¤çš„æ–‡ä»¶åæ˜¯ <code>appendonly.aof</code>ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">appendonly</span> <span class="literal">yes</span></span><br></pre></td></tr></table></figure><ul><li>AOFçš„å®ç°</li></ul><p>AOF æ–‡ä»¶çš„å†…å®¹æ­£æ˜¯Rediså®¢æˆ·ç«¯å‘Rediså‘é€çš„åŸå§‹é€šä¿¡åè®®çš„å†…å®¹ã€‚</p><ul><li>åŒæ­¥ç¡¬ç›˜æ•°æ®</li></ul><p>ç”±äºæ“ä½œç³»ç»Ÿçš„ç¼“å­˜æœºåˆ¶ï¼ŒAOFæ–‡ä»¶æ•°æ®å¹¶æ²¡æœ‰ç›´æ¥çœŸæ­£åœ°å†™å…¥ç¡¬ç›˜ï¼Œè€Œæ˜¯è¿›å…¥äº†ç³»ç»Ÿçš„ç¡¬ç›˜ç¼“å­˜ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ç³»ç»Ÿæ¯ 30 ç§’ä¼šæ‰§è¡Œä¸€æ¬¡åŒæ­¥æ“ä½œï¼Œä»¥ä¾¿å°†ç¡¬ç›˜ç¼“å­˜ä¸­çš„å†…å®¹çœŸæ­£åœ°å†™å…¥ç¡¬ç›˜ã€‚åœ¨è¿™30ç§’å†…ï¼Œå¦‚æœç³»ç»Ÿå¼‚å¸¸é€€å‡ºåˆ™ä¼šå¯¼è‡´ç¡¬ç›˜ç¼“å­˜ä¸­çš„æ•°æ®ä¸¢å¤±ã€‚</p><p>ä¸€èˆ¬æ¥è®²ï¼Œå¯ç”¨AOFæŒä¹…åŒ–çš„åº”ç”¨éƒ½æ— æ³•å®¹å¿è¿™æ ·çš„æŸå¤±ã€‚è¿™å°±éœ€è¦ Redis åœ¨å†™å…¥AOF æ–‡ä»¶åä¸»åŠ¨è¦æ±‚ç³»ç»Ÿå°†ç¡¬ç›˜ç¼“å­˜å†…å®¹åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚åœ¨ Redis ä¸­ï¼Œå¯ä»¥é€šè¿‡ <code>appendfsync</code> å‚æ•°è®¾ç½®åŒæ­¥çš„æ—¶æœº</p><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># appendfsync always</span></span><br><span class="line">appendfsync everysec   <span class="comment">//é»˜è®¤</span></span><br><span class="line"><span class="meta"># appendfsync no       //ä¸ä¸»åŠ¨è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œå³äº¤ç”±æ“ä½œç³»ç»Ÿå¤„ç†ï¼ˆæ¯30ç§’åŒæ­¥ä¸€æ¬¡ï¼‰</span></span><br></pre></td></tr></table></figure><h2 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h2><p>åŒæ—¶æ‹¥æœ‰å¤šä¸ª Redis æœåŠ¡å™¨åï¼Œå°±ä¼šé¢ä¸´å¦‚æœç®¡ç†é›†ç¾¤çš„é—®é¢˜ï¼ŒåŒ…æ‹¬å¦‚ä½•å¢åŠ èŠ‚ç‚¹ï¼Œæ•…éšœæ¢å¤ç­‰æ“ä½œã€‚</p><h3 id="å¤åˆ¶-replication"><a href="#å¤åˆ¶-replication" class="headerlink" title="å¤åˆ¶ replication"></a>å¤åˆ¶ replication</h3><p>ä¸ºäº†é¿å…å•ç‚¹æ•…éšœï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†æ•°æ®åº“å¤åˆ¶å¤šä¸ªå‰¯æœ¬ä»¥éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚ä¸ºæ­¤ï¼ŒRedisæä¾›äº†å¤åˆ¶ <code>replication</code> åŠŸèƒ½ï¼Œå¯ä»¥å®ç°å½“ä¸€å°æ•°æ®åº“ä¸­çš„æ•°æ®æ›´æ–°åï¼Œè‡ªåŠ¨å°†æ›´æ–°çš„æ•°æ®åŒæ­¥åˆ°å…¶ä»–æ•°æ®åº“ä¸­ã€‚</p><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åœ¨å¤åˆ¶çš„æ¦‚å¿µä¸­ï¼Œæ•°æ®åº“åˆ†ä¸º2ç§</p><ol><li>ä¸»æ•°æ®åº“ï¼ˆ<code>master</code>ï¼‰ï¼šå¯ä»¥è¿›è¡Œè¯»å†™æ“ä½œï¼Œå½“å†™æ“ä½œå¯¼è‡´æ•°æ®å˜åŒ–æ—¶ä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥ç»™ä»æ•°æ®åº“</li><li>ä»æ•°æ®åº“ ï¼ˆ<code>slave</code>ï¼‰ï¼šä¸€èˆ¬æ˜¯åªè¯»çš„ï¼ˆä¹Ÿå¯ä»¥é…ç½®ä¸ºå¯å†™å…¥ï¼‰ï¼Œå¹¶æ¥å—ä¸»æ•°æ®åº“åŒæ­¥è¿‡æ¥çš„æ•°æ®</li></ol><p>Redisä¸­ï¼Œåªéœ€è¦åœ¨ä»æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹é…ç½®ï¼Œå³å¯å®Œæˆå¤åˆ¶æ“ä½œï¼Œä¸»æ•°æ®åº“ä¸éœ€è¦ä»»ä½•é…ç½®ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">salveof</span> ä¸»æ•°æ®åº“åœ°å€   ä¸»æ•°æ®åº“ç«¯å£</span><br></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><ol><li>å¯åŠ¨ä¸€ä¸ªRediså®ä¾‹ä½œä¸ºä¸»æ•°æ®åº“ï¼Œé»˜è®¤ç«¯å£å·æ˜¯6379</li></ol><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$re</span>dis-server    <span class="comment">//é»˜è®¤ç«¯å£å·æ˜¯6379</span></span><br></pre></td></tr></table></figure><ol start="2"><li>å¯åŠ¨å¦ä¸€ä¸ªRediså®ä¾‹ä½œä¸ºä»æ•°æ®åº“ï¼Œç›‘å¬ç«¯å£å· 6380</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$redis-server   --port <span class="number">6380</span> --slaveof <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ä¸»æ•°æ®åº“ä¸­ä»»ä½•æ•°æ®å˜åŒ–ï¼Œéƒ½ä¼šè‡ªåŠ¨åŒæ­¥åˆ°ä»æ•°æ®åº“ä¸­ã€‚</p><ol start="3"><li>æ‰“å¼€ <code>redis-cli</code> å®ä¾‹Aå¹¶è¿æ¥åˆ°ä¸»æ•°æ®åº“ã€‚å†æ‰“å¼€ <code>redis-cli</code> å®ä¾‹Bå¹¶è¿æ¥åˆ°ä»æ•°æ®åº“</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$redis-cli -p <span class="number">6379</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt;</span><br><span class="line"></span><br><span class="line">$redis-cli -p <span class="number">6380</span></span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6380</span>&gt;</span><br></pre></td></tr></table></figure><ol start="4"><li>ä½¿ç”¨ <code>INFO replication</code> å‘½ä»¤åœ¨å®ä¾‹Aå’Œå®ä¾‹Bä¸­æŸ¥çœ‹å¤åˆ¶ç›¸å…³çš„ä¿¡æ¯</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; INFO replication</span><br><span class="line"># Replication</span><br><span class="line">role:master</span><br><span class="line">connected_slaves:<span class="number">1</span></span><br><span class="line">slave0:ip=<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>,port=<span class="number">6380</span>,state=online,offset=<span class="number">336</span>,lag=<span class="number">1</span></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ä¾‹Açš„è§’è‰²æ˜¯ä¸»æ•°æ®åº“ï¼Œå…¶å·²è¿æ¥çš„ä»æ•°æ®åº“çš„ä¸ªæ•°æ˜¯1ã€‚</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6380</span>&gt; INFO replication</span><br><span class="line"># Replication</span><br><span class="line">role:slave</span><br><span class="line">master_host:<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">master_port:<span class="number">6379</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œå®ä¾‹Bçš„è§’è‰²æ˜¯ä»æ•°æ®åº“ã€‚</p><ol start="5"><li>åœ¨ä¸»æ•°æ®åº“ä¸­æ·»åŠ é”®å€¼ï¼Œå¯ä»¥åœ¨ä»æ•°æ®åº“ä¸­è¯»å–</li></ol><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä¸»æ•°æ®åº“å†™å…¥</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6379</span>&gt; SET foo bar</span><br><span class="line">OK</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ä»æ•°æ®åº“è¯»å–</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">6380</span>&gt; GET foo</span><br><span class="line"><span class="string">"bar"</span></span><br></pre></td></tr></table></figure><h4 id="å›¾ç»“æ„"><a href="#å›¾ç»“æ„" class="headerlink" title="å›¾ç»“æ„"></a>å›¾ç»“æ„</h4><p>ä»æ•°æ®åº“ä¸ä»…å¯ä»¥æ¥å—ä¸»æ•°æ®åº“çš„åŒæ­¥æ•°æ®ï¼Œè‡ªå·±ä¹Ÿå¯ä»¥åŒæ—¶ä½œä¸ºä¸»æ•°æ®åº“å­˜åœ¨ï¼Œå½¢æˆç±»ä¼¼å›¾çš„ç»“æ„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p>ä¸»æ•°æ®Açš„æ•°æ®ä¼šåŒæ­¥åˆ°Bå’ŒCï¼Œè€ŒBä¸­çš„æ•°æ®ä¼šåŒæ­¥åˆ°Då’ŒEä¸­ã€‚å‘Bä¸­å†™å…¥çš„æ•°æ®ä¸ä¼šåŒæ­¥åˆ°Aæˆ–Cä¸­ã€‚</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line"></span><br><span class="line">A<span class="string">[ä¸»æ•°æ®åº“A]</span>--&gt;B<span class="string">[ä»æ•°æ®åº“B]</span></span><br><span class="line">A<span class="string">[ä¸»æ•°æ®åº“A]</span>--&gt;C<span class="string">[ä»æ•°æ®åº“C]</span></span><br><span class="line"></span><br><span class="line">B<span class="string">[ä»æ•°æ®åº“B]</span>--&gt;D<span class="string">[ä»æ•°æ®åº“D]</span></span><br><span class="line">B<span class="string">[ä»æ•°æ®åº“B]</span>--&gt;E<span class="string">[ä»æ•°æ®åº“E]</span></span><br></pre></td></tr></table></figure><h3 id="å“¨å…µ"><a href="#å“¨å…µ" class="headerlink" title="å“¨å…µ"></a>å“¨å…µ</h3><h4 id="é¢ä¸´çš„é—®é¢˜"><a href="#é¢ä¸´çš„é—®é¢˜" class="headerlink" title="é¢ä¸´çš„é—®é¢˜"></a>é¢ä¸´çš„é—®é¢˜</h4><p>ä¸ºäº†æé«˜æ€§èƒ½ï¼Œå¯ä»¥é€šè¿‡å¤åˆ¶åŠŸèƒ½å»ºç«‹è‹¥å¹²ä¸ªä»æ•°æ®åº“ï¼Œå¹¶åœ¨ä»æ•°æ®åº“ä¸­å¯ç”¨æŒä¹…åŒ–ï¼ŒåŒæ—¶åœ¨ä¸»æ•°æ®ä¸­ç¦ç”¨æŒä¹…åŒ–ã€‚è¿™æ ·å¯ä»¥ä¿è¯ä¸»æ•°æ®åº“çš„æ€§èƒ½ã€‚</p><ol><li>å½“ä»æ•°æ®åº“å´©æºƒé‡å¯åï¼Œä¸»æ•°æ®åº“ä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥è¿‡æ¥ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒæ•°æ®ä¸¢å¤±</li><li>å½“ä¸»æ•°æ®åº“å´©æºƒåï¼Œæƒ…å†µå°±æ¯”è¾ƒå¤æ‚äº†ã€‚æ‰‹åŠ¨é€šè¿‡ä»æ•°æ®åº“æ¢å¤ä¸»æ•°æ®åº“æ•°æ®æ—¶ï¼Œéœ€è¦ä¸¥æ ¼æ‰§è¡Œå¦‚ä¸‹2æ­¥<ul><li>åœ¨ä»æ•°æ®åº“ä¸­ä½¿ç”¨ <code>SLAVE NO ONE</code> å‘½ä»¤å°†ä»æ•°æ®åº“æå‡ä¸ºä¸»æ•°æ®åº“ç»§ç»­æœåŠ¡</li><li>å¯åŠ¨ä¹‹å‰å´©æºƒçš„ä¸»æ•°æ®åº“ï¼Œç„¶åä½¿ç”¨ <code>SLAVEOF</code> å‘½ä»¤å°†å…¶è®¾ç½®æˆæ–°çš„ä¸»æ•°æ®åº“çš„ä»æ•°æ®åº“ï¼Œå³å¯å°†æ•°æ®åŒæ­¥å›æ¥</li></ul></li></ol><p>å¯è§ï¼Œæ‰‹åŠ¨ç»´æŠ¤ä¸»ä»æ•°æ®åº“å´©æºƒåçš„æ•°æ®æ¢å¤æ˜¯ç›¸å½“éº»çƒ¦çš„ã€‚Redisæä¾›äº†ä¸€ç§è‡ªåŠ¨åŒ–æ–¹æ¡ˆâ€”â€”å“¨å…µï¼Œé¿å…äº†æ‰‹å·¥ç»´æŠ¤çš„éº»çƒ¦å’Œå®¹æ˜“å‡ºé”™çš„é—®é¢˜ã€‚</p><h4 id="å“¨å…µçš„åŠŸèƒ½"><a href="#å“¨å…µçš„åŠŸèƒ½" class="headerlink" title="å“¨å…µçš„åŠŸèƒ½"></a>å“¨å…µçš„åŠŸèƒ½</h4><p>Redis 2.8ä¸­æä¾›äº†å“¨å…µå·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–çš„ç³»ç»Ÿç›‘æ§å’Œæ•…éšœæ¢å¤åŠŸèƒ½ã€‚</p><p>å“¨å…µçš„ä½œç”¨å°±æ˜¯ç›‘æ§ Redis ç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µï¼Œå®ƒçš„åŠŸèƒ½åŒ…æ‹¬2ä¸ª</p><ol><li>ç›‘æ§ä¸»æ•°æ®åº“å’Œä»æ•°æ®åº“æ˜¯å¦æ­£å¸¸å·¥ä½œ</li><li>ä¸»æ•°æ®åº“å‡ºç°æ•…éšœæ—¶è‡ªåŠ¨å°†ä»æ•°æ®åº“è½¬æ¢ä¸ºä¸»æ•°æ®åº“</li></ol><p><strong>å“¨å…µæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹</strong>ï¼Œä½¿ç”¨å“¨å…µçš„ä¸€ä¸ªå…¸å‹æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è™šçº¿è¡¨ç¤ºä¸»ä»å¤åˆ¶å…³ç³»ï¼Œå®çº¿è¡¨ç¤ºå“¨å…µçš„ç›‘æ§è·¯å¾„ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/back-end-2020/redis-basic-guard-1.png" alt=""></p><p>åœ¨ä¸€ä¸ªä¸€ä¸»å¤šä»çš„Redisç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªå“¨å…µè¿›è¡Œç›‘æ§ä»»åŠ¡ä»¥ä¿è¯ç³»ç»Ÿæ˜¯è¶³å¤Ÿç¨³å¥çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ­¤æ—¶ä¸ä»…å“¨å…µä¼šåŒæ—¶ç›‘æ§ä¸»ä»æ•°æ®åº“ï¼Œå“¨å…µä¹‹é—´ä¹Ÿä¼šäº’ç›¸ç›‘æ§ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/back-end-2020/redis-basic-guard-2.png" alt=""></p><h4 id="ä½¿ç”¨å“¨å…µ"><a href="#ä½¿ç”¨å“¨å…µ" class="headerlink" title="ä½¿ç”¨å“¨å…µ"></a>ä½¿ç”¨å“¨å…µ</h4><ol><li>åˆ›å»ºå“¨å…µé…ç½®æ–‡ä»¶ï¼Œå¦‚ <code>sentinel.conf</code></li></ol><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sentinel monitor master-name  ip redis-port quorum</span></span><br><span class="line"></span><br><span class="line">sentinel<span class="built_in"> monitor </span>mymaster 127.0.0.1 6379 1</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ<code>mymaster</code> æ˜¯è¦ç›‘æ§çš„ä¸»æ•°æ®åº“çš„åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªã€‚åé¢çš„å‚æ•°æ˜¯æ•°æ®åº“çš„IPåœ°å€å’Œç«¯å£å·ã€‚</p><p>æœ€åçš„å‚æ•° <code>1</code> è¡¨ç¤ºæœ€ä½é€šè¿‡ç¥¨æ•°ï¼ˆ<code>quorum</code>ï¼‰ï¼Œå³æ‰§è¡Œæ•…éšœæ¢å¤æ“ä½œå‰è‡³å°‘éœ€è¦å‡ ä¸ªå“¨å…µèŠ‚ç‚¹åŒæ„ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå– <code>quorum</code> çš„å€¼ä¸º <code>N/2 + 1</code>ï¼Œå…¶ä¸­ <code>N</code> è¡¨ç¤ºå“¨å…µæ•°ç›®ï¼Œå³åªæœ‰è¶…è¿‡ä¸€åŠçš„å“¨å…µåŒæ„åæ‰ä¼šè¿›è¡Œæ•…éšœæ¢å¤ã€‚</p><ol start="2"><li>å¯åŠ¨å“¨å…µè¿›ç¨‹ï¼Œå¹¶å°†ä¸Šè¿°é…ç½®æ–‡ä»¶çš„è·¯å¾„ä¼ é€’ç»™å“¨å…µ</li></ol><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$redis-sentinel /path/<span class="keyword">to</span>/sentinel.conf</span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé…ç½®å“¨å…µç›‘æ§ä¸€ä¸ªç³»ç»Ÿæ—¶ï¼Œåªéœ€è¦é…ç½®å…¶ç›‘æ§ä¸»æ•°æ®åº“å³å¯ï¼Œå“¨å…µä¼šè‡ªåŠ¨å‘ç°æ‰€æœ‰å¤åˆ¶è¯¥ä¸»æ•°æ®åº“çš„ä»æ•°æ®åº“ã€‚</p><h3 id="é›†ç¾¤-1"><a href="#é›†ç¾¤-1" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h3><p>Redis 3.0ç‰ˆæœ¬æä¾›äº†é›†ç¾¤ï¼ˆ<code>Cluster</code>ï¼‰ç‰¹æ€§ã€‚é›†ç¾¤çš„ç‰¹ç‚¹åœ¨äºæ‹¥æœ‰å’Œå•æœºå®ä¾‹åŒæ ·çš„æ€§èƒ½ï¼ŒåŒæ—¶åœ¨ç½‘ç»œåˆ†åŒºåèƒ½å¤Ÿæä¾›ä¸€å®šçš„å¯è®¿é—®æ€§ä»¥åŠå¯¹ä¸»æ•°æ®åº“æ•…éšœæ¢å¤çš„æ”¯æŒã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;å¯¹ Redis åŸºç¡€çŸ¥è¯†è¿›è¡Œæ¢³ç†ï¼ŒåŒ…æ‹¬Redisçš„5ç§æ•°æ®ç±»å‹ï¼Œäº‹åŠ¡ï¼Œè¿‡æœŸæ—¶é—´ï¼Œæ¶ˆæ¯é€šçŸ¥ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œç®¡é“ï¼Œæ•°æ®æŒä¹…åŒ–ï¼Œå¤åˆ¶ï¼Œå“¨å…µï¼Œäº‹åŠ¡ç­‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Back-End" scheme="https://lbs0912.github.io/categories/Back-End/"/>
    
    
      <category term="Back-End" scheme="https://lbs0912.github.io/tags/Back-End/"/>
    
      <category term="DataBase" scheme="https://lbs0912.github.io/tags/DataBase/"/>
    
      <category term="Redis" scheme="https://lbs0912.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>LeetCode Notes-000-Overview</title>
    <link href="https://lbs0912.github.io/2020/01/12/leetcode-000-overview/"/>
    <id>https://lbs0912.github.io/2020/01/12/leetcode-000-overview/</id>
    <published>2020-01-12T02:35:26.000Z</published>
    <updated>2020-02-23T08:48:04.364Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•</li></ul><a id="more"></a><h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><ul><li>2019/02/13ï¼Œæ’°å†™</li><li>2019/06/16ï¼Œæ·»åŠ  LeetCode Notes-1</li><li>2020/01/05ï¼Œæ·»åŠ  LeetCode Notes-2</li><li>2020/02/22ï¼Œæ·»åŠ  LeetCode Notes-3</li></ul><h2 id="å­¦ä¹ èµ„æ–™æ±‡æ€»"><a href="#å­¦ä¹ èµ„æ–™æ±‡æ€»" class="headerlink" title="å­¦ä¹ èµ„æ–™æ±‡æ€»"></a>å­¦ä¹ èµ„æ–™æ±‡æ€»</h2><ul><li><a href="https://leetcode.com/" target="_blank" rel="noopener">leetcode</a></li><li><a href="https://leetcode-cn.com/" target="_blank" rel="noopener">leetcode-cn</a></li><li><a href="https://www.nowcoder.com/" target="_blank" rel="noopener">ç‰›å®¢ç½‘</a></li><li><a href="http://git.jd.com/algorithm-interest-group/AlgorithmShare" target="_blank" rel="noopener">AlgorithmShare @ JD</a></li><li><a href="https://github.com/MisterBooo/LeetCodeAnimation" target="_blank" rel="noopener">LeetCodeAnimation</a></li><li><a href="https://github.com/azl397985856/leetcode" target="_blank" rel="noopener">Leetcode Solution | github</a></li></ul><h2 id="é¢˜è§£è®°å½•æ¨¡æ¿"><a href="#é¢˜è§£è®°å½•æ¨¡æ¿" class="headerlink" title="é¢˜è§£è®°å½•æ¨¡æ¿"></a>é¢˜è§£è®°å½•æ¨¡æ¿</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## XXXï¼ˆxxxï¼‰</span></span><br><span class="line"><span class="comment">### Description</span></span><br><span class="line">* [LeetCode-XX. XXXï¼ˆxxxï¼‰]()</span><br><span class="line"></span><br><span class="line"><span class="comment">### Approach 1-XX</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### Analysis</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#### Solution</span></span><br><span class="line"></span><br><span class="line">* Java</span><br><span class="line">* C++</span><br><span class="line">* Python</span><br><span class="line">* JS</span><br></pre></td></tr></table></figure><h2 id="åˆ†ç±»æ±‡æ€»"><a href="#åˆ†ç±»æ±‡æ€»" class="headerlink" title="åˆ†ç±»æ±‡æ€»"></a>åˆ†ç±»æ±‡æ€»</h2><h3 id="é“¾è¡¨"><a href="#é“¾è¡¨" class="headerlink" title="é“¾è¡¨"></a>é“¾è¡¨</h3><ul><li><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode-141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">LeetCode-142. Linked List Cycle IIï¼ˆç¯å½¢é“¾è¡¨ IIï¼‰</a> - ç¯å½¢é“¾è¡¨</li></ul><h3 id="å¿«æ…¢æŒ‡é’ˆ"><a href="#å¿«æ…¢æŒ‡é’ˆ" class="headerlink" title="å¿«æ…¢æŒ‡é’ˆ"></a>å¿«æ…¢æŒ‡é’ˆ</h3><ul><li><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode- 141. Linked List Cycle</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">LeetCode- 142. Linked List Cycle II</a> - ç¯å½¢é“¾è¡¨</li></ul><h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><ul><li><a href="https://leetcode.com/problems/island-perimeter/?tab=Description" target="_blank" rel="noopener">LeetCode-463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰</a> - å¸¸è§„è®¡ç®—</li></ul><h3 id="PopCountï¼ˆæ±‰æ˜è·ç¦»ï¼‰"><a href="#PopCountï¼ˆæ±‰æ˜è·ç¦»ï¼‰" class="headerlink" title="PopCountï¼ˆæ±‰æ˜è·ç¦»ï¼‰"></a>PopCountï¼ˆæ±‰æ˜è·ç¦»ï¼‰</h3><ul><li><a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode-191. Number of 1 Bits ï¼ˆä½1çš„ä¸ªæ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener">LeetCode-338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</a></li></ul><h3 id="å›æ–‡ä¸²"><a href="#å›æ–‡ä¸²" class="headerlink" title="å›æ–‡ä¸²"></a>å›æ–‡ä¸²</h3><ul><li><a href="https://leetcode.com/problems/longest-palindrome/" target="_blank" rel="noopener">LeetCode-409. Longest Palindrome ï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰</a></li></ul><h3 id="åŠ¨æ€è§„åˆ’"><a href="#åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h3><ul><li><a href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener">LeetCode-338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</a></li></ul><h2 id="æ–‡æ¡£ç›®å½•"><a href="#æ–‡æ¡£ç›®å½•" class="headerlink" title="æ–‡æ¡£ç›®å½•"></a>æ–‡æ¡£ç›®å½•</h2><h3 id="Notes-1"><a href="#Notes-1" class="headerlink" title="Notes-1"></a>Notes-1</h3><ul><li><a href="https://leetcode.com/problems/linked-list-cycle/?tab=Description" target="_blank" rel="noopener">LeetCode-141. Linked List Cycleï¼ˆç¯å½¢é“¾è¡¨ï¼‰</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/linked-list-cycle-ii/" target="_blank" rel="noopener">LeetCode-142. Linked List Cycle IIï¼ˆç¯å½¢é“¾è¡¨ IIï¼‰</a> - ç¯å½¢é“¾è¡¨</li><li><a href="https://leetcode.com/problems/add-digits/?tab=Description" target="_blank" rel="noopener">LeetCode-258. Add Digitsï¼ˆå„ä½ç›¸åŠ ï¼‰</a> - æ•°å­—æ¨å¯¼ï¼ˆæ•°å­—æ ¹ï¼‰</li><li><a href="https://leetcode.com/problems/hamming-distance/" target="_blank" rel="noopener">LeetCode-461. Hamming Distanceï¼ˆæ±‰æ˜è·ç¦»ï¼‰</a> - ä½è¿ç®—</li><li><a href="https://leetcode.com/problems/island-perimeter/?tab=Description" target="_blank" rel="noopener">LeetCode-463. Island Perimeterï¼ˆå²›å±¿çš„å‘¨é•¿ï¼‰</a> - å¸¸è§„è®¡ç®—</li></ul><h3 id="Notes-2"><a href="#Notes-2" class="headerlink" title="Notes-2"></a>Notes-2</h3><ul><li><a href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener">LeetCode-206. Reverse Linked Listï¼ˆåè½¬é“¾è¡¨ï¼‰</a> - é“¾è¡¨æ“ä½œ</li><li><a href="https://leetcode.com/problems/merge-two-binary-trees/" target="_blank" rel="noopener">LeetCode-617. Merge Two Binary Trees</a> - äºŒå‰æ ‘</li><li><a href="https://leetcode.com/problems/maximum-depth-of-binary-tree/" target="_blank" rel="noopener">LeetCode-104. Maximum Depth of Binary Treeï¼ˆäºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦ï¼‰</a> - éå†äºŒå‰æ ‘</li><li><a href="https://leetcode.com/problems/convert-binary-number-in-a-linked-list-to-integer/" target="_blank" rel="noopener">LeetCode-1290. Convert Binary Number in a Linked List to Integerï¼ˆäºŒè¿›åˆ¶é“¾è¡¨è½¬æ•´æ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/to-lower-case/" target="_blank" rel="noopener">LeetCode-709. To Lower Caseï¼ˆè½¬æ¢æˆå°å†™å­—æ¯ï¼‰</a></li></ul><h3 id="Notes-3"><a href="#Notes-3" class="headerlink" title="Notes-3"></a>Notes-3</h3><ul><li><a href="https://leetcode.com/problems/number-of-1-bits/" target="_blank" rel="noopener">LeetCode-191. Number of 1 Bits ï¼ˆä½1çš„ä¸ªæ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/counting-bits/" target="_blank" rel="noopener">LeetCode-338. Counting Bitsï¼ˆæ¯”ç‰¹ä½è®¡æ•°ï¼‰</a></li><li><a href="https://leetcode.com/problems/longest-palindrome/" target="_blank" rel="noopener">LeetCode-409. Longest Palindrome ï¼ˆæœ€é•¿å›æ–‡ä¸²ï¼‰</a></li><li><a href="https://leetcode.com/problems/rectangle-area/?tab=Description" target="_blank" rel="noopener">LeetCode-223. Rectangle Areaï¼ˆçŸ©å½¢é¢ç§¯ï¼‰</a></li><li><a href="https://leetcode.com/problems/number-complement/" target="_blank" rel="noopener">LeetCode-476. Number Complementï¼ˆæ•°å­—çš„è¡¥æ•°ï¼‰</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½•LeetCodeé¢˜ç›®ç¬”è®°ï¼Œæ±‡æ€»LeetCodeè§£ç­”è®°å½•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/categories/LeetCode/"/>
    
    
      <category term="Algorithm" scheme="https://lbs0912.github.io/tags/Algorithm/"/>
    
      <category term="LeetCode" scheme="https://lbs0912.github.io/tags/LeetCode/"/>
    
  </entry>
  
  <entry>
    <title>React Native å®ç°ä¸‹æ‹‰è‡ªåŠ¨åˆ‡æ¢åˆ†ç±»</title>
    <link href="https://lbs0912.github.io/2019/06/08/rn-tab-auto-change/"/>
    <id>https://lbs0912.github.io/2019/06/08/rn-tab-auto-change/</id>
    <published>2019-06-08T02:35:26.000Z</published>
    <updated>2019-11-09T15:22:38.601Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½• <code>React Native</code> ä¸­å¦‚ä½•å®ç°ä¸‹æ‹‰è‡ªåŠ¨åˆ‡æ¢åˆ†ç±»</li><li>é’ˆå¯¹ IOS å’Œ Android å¹³å°å·®å¼‚ï¼Œç»™å‡ºä¸åŒçš„åˆ‡æ¢åˆ†ç±»è§¦å‘æ¡ä»¶</li></ul><a id="more"></a><h2 id="éœ€æ±‚æè¿°"><a href="#éœ€æ±‚æè¿°" class="headerlink" title="éœ€æ±‚æè¿°"></a>éœ€æ±‚æè¿°</h2><p>å¦‚å›¾æ‰€ç¤ºï¼Œæ•´ä½“ä¸º <code>FlatList</code>ï¼Œé¡¶éƒ¨åˆ†ç±»æ å¸é¡¶ï¼Œåº•éƒ¨ä¸º <code>feed</code> æµã€‚è¦å®ç°ä¸‹æ‹‰å•†å“åˆ—è¡¨åˆ°åº•åï¼Œç»§ç»­ä¸‹æ‹‰ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°ä¸€ä¸‹ä¸ªåˆ†ç±»çš„æ•ˆæœã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/front-end-2019/rn-flatlist-autochange-tab-android.png" alt="rn-flatlist-autochange-tab-android"></p><h2 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h2><p>ä»£ç å±‚é¢ï¼Œå¯ä»¥åœ¨  <code>FlatList</code> çš„ <code>onScrollEndDrag</code> ä¸­æ·»åŠ è‡ªåŠ¨ Tab åˆ‡æ¢å‡½æ•°ï¼Œå€ŸåŠ© <code>FlatList</code> å®ä¾‹çš„å†…å®¹åŒºé«˜åº¦ <code>contentLength</code>ï¼Œæ»‘åŠ¨åç§»é‡ <code>offset</code> å’Œå¯è§†åŒºé«˜åº¦ <code>visibleLength</code> ä¸‰è€…å…³ç³»ï¼Œå®ç°ä¸‹æ‹‰è‡ªåŠ¨åˆ‡æ¢TabåŠŸèƒ½ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="IOS-å¹³å°å®ç°"><a href="#IOS-å¹³å°å®ç°" class="headerlink" title="IOS å¹³å°å®ç°"></a>IOS å¹³å°å®ç°</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é¡µé¢å¸ƒå±€ç›¸å…³</span></span><br><span class="line"> &lt;FlatList</span><br><span class="line">    <span class="keyword">data</span> = &#123;[&#123;banner:[]&#125;,&#123;tab:[]&#125;,&#123;goodList:[]&#125;]&#125;</span><br><span class="line">    renderItem=&#123;<span class="keyword">this</span>.renderItem&#125;</span><br><span class="line">    stickyHeaderIndices=&#123;(Platform.OS !== <span class="string">'web'</span>)?[<span class="number">1</span>]:<span class="literal">null</span>&#125;</span><br><span class="line">    ListFooterComponent=&#123;<span class="keyword">this</span>._renderFooter&#125;</span><br><span class="line">    onScroll=&#123;<span class="keyword">this</span>._onScroll&#125; <span class="comment">//æ»‘åŠ¨ç›‘å¬</span></span><br><span class="line">    ref=&#123;<span class="keyword">this</span>._setScrollRef&#125;</span><br><span class="line">    keyExtractor = &#123;(item, index) =&gt; &#123; `hScrollView-$&#123;index&#125;` &#125;&#125;</span><br><span class="line">    refreshing=&#123;<span class="keyword">this</span>.state.isRefreshing&#125;</span><br><span class="line">    onRefresh=&#123;<span class="keyword">this</span>._onRefresh.bind(<span class="keyword">this</span>)&#125; <span class="comment">//ä¸‹æ‹‰åˆ·æ–°</span></span><br><span class="line">    getItemLayout=&#123;(<span class="keyword">data</span>, index) =&gt; (</span><br><span class="line">        &#123;length: <span class="number">305</span>, offset: <span class="number">305</span> * index, index&#125;</span><br><span class="line">    )&#125;</span><br><span class="line">    onScrollEndDrag = &#123;()=&gt;&#123;  <span class="comment">//æ»‘åŠ¨åˆ°åº•ç›‘å¬å‡½æ•°</span></span><br><span class="line">        <span class="keyword">if</span>(Platform.OS != <span class="string">'web'</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>._onScrollEndDragFun();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;&#125;</span><br><span class="line">/&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è·å–flatList å®ä¾‹</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> ref</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@private</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">_setScrollRef = (ref) =&gt; &#123;</span><br><span class="line">    <span class="keyword">this</span>._secondGoodFlatListRef = ref;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> isEmpty <span class="keyword">from</span> <span class="string">"lodash/isEmpty"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;Platform&#125; <span class="keyword">from</span> <span class="string">"react-native"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;JDDevice&#125; <span class="keyword">from</span> <span class="string">"@jdreact/jdreact-core-lib"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åº•éƒ¨åˆ—è¡¨é¡µæ»‘åŠ¨äº‹ä»¶ å®ç°ä¸Šæ‹‰åˆ‡æ¢å“ç±»åŠŸèƒ½</span></span><br><span class="line"><span class="comment"> * @param e</span></span><br><span class="line"><span class="comment"> * @private</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">_onScrollEndDragFun = (e) =&gt; &#123;</span><br><span class="line">    let scrollMetrics = (<span class="keyword">this</span>._secondGoodFlatListRef &amp;&amp; <span class="keyword">this</span>._secondGoodFlatListRef._listRef</span><br><span class="line">        &amp;&amp; <span class="keyword">this</span>._secondGoodFlatListRef._listRef._scrollMetrics) || <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    let &#123;contentLength = <span class="number">0</span>, offset = <span class="number">0</span>, visibleLength = <span class="number">0</span>&#125; = scrollMetrics;</span><br><span class="line">    <span class="comment">// console.log('===scrollMetrics',scrollMetrics);</span></span><br><span class="line">    <span class="comment">// //åˆ¤æ–­æ˜¯å¦æœ€åä¸€Tab å¦‚æœæ˜¯å°±ä¸å´æ¢ä¸‹ä¸ªç›®å½•</span></span><br><span class="line">    <span class="comment">// console.log('===this.props',this.props);</span></span><br><span class="line">    <span class="comment">// console.log('===this.state',this.state);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (contentLength &amp;&amp; offset &amp;&amp; visibleLength) &#123;</span><br><span class="line">        let &#123;selectedIndex = <span class="number">0</span>&#125; = <span class="keyword">this</span>.state; <span class="comment">//å½“å‰é€‰ä¸­çš„ä¸‰çº§åˆ†ç±»index</span></span><br><span class="line">        let &#123;tabListData = []&#125; = <span class="keyword">this</span>.props;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isEmpty(tabListData) &amp;&amp; (selectedIndex + <span class="number">1</span>) &lt; tabListData.length) &#123;  <span class="comment">//æ’é™¤æœ€åä¸€ä¸ªåˆ†ç±»</span></span><br><span class="line">            let item = tabListData[selectedIndex + <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (Platform.OS === <span class="string">'ios'</span>) &#123;</span><br><span class="line">                <span class="comment">//IOS ç³»ç»Ÿå­˜åœ¨å¼¹æ€§ä¸Šæ‹‰</span></span><br><span class="line">                <span class="keyword">if</span> (offset + visibleLength &gt; contentLength + JDDevice.getRpx(<span class="number">100</span>)) &#123;</span><br><span class="line">                    <span class="keyword">this</span>._secondGoodFlatListRef.scrollToIndex(&#123;</span><br><span class="line">                        animated: <span class="literal">false</span>,</span><br><span class="line">                        index: <span class="number">0</span>,</span><br><span class="line">                        viewOffset: <span class="number">1</span>,</span><br><span class="line">                        viewPosition: <span class="number">0</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">this</span>.ItemCategory._clickCategoryTab2 &amp;&amp; <span class="keyword">this</span>.ItemCategory._clickCategoryTab2(item, selectedIndex + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//android æ— å¼¹æ€§æ»‘åŠ¨ï¼Œæ»‘åŠ¨åˆ°åº•æ—¶ï¼Œoffset + visibleLength = contentLengthã€‚IOSæœ‰å¼¹æ€§æ»‘åŠ¨ï¼Œéœ€è¦æ”¹å˜åˆ¤æ–­æ¡ä»¶  lbs 2019-03-10</span></span><br><span class="line">                <span class="keyword">if</span> (offset + visibleLength &gt; contentLength - JDDevice.getRpx(<span class="number">10</span>)) &#123;</span><br><span class="line">                    <span class="keyword">this</span>._secondGoodFlatListRef.scrollToIndex(&#123;</span><br><span class="line">                        animated: <span class="literal">false</span>,</span><br><span class="line">                        index: <span class="number">0</span>,</span><br><span class="line">                        viewOffset: <span class="number">1</span>,</span><br><span class="line">                        viewPosition: <span class="number">0</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="keyword">this</span>.ItemCategory._clickCategoryTab2 &amp;&amp; <span class="keyword">this</span>.ItemCategory._clickCategoryTab2(item, selectedIndex + <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>å…¶ä¸­ï¼Œ<code>contentLength</code> ä¸ºå†…å®¹åŒºé«˜åº¦ï¼Œ<code>offset</code> ä¸ºæ»‘åŠ¨åç§»é‡ï¼Œ<code>visibleLength</code> ä¸ºå¯è§†åŒºé«˜åº¦ã€‚</strong></p><blockquote><p>å…³äº<span id="inline-purple">ä¸‰ç§é«˜åº¦å®šä¹‰</span>ï¼Œå¯å‚è€ƒ <a href="https://www.jianshu.com/p/33ec6ceeb638" target="_blank" rel="noopener">React Nativeä¸­ListViewå’ŒScrollViewå®ç°ä¸Šæ‹‰åŠ è½½</a></p></blockquote><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> scrollMetrics = (this._secondGoodFlatListRef<span class="operator"> &amp;&amp; </span>this.<span class="module-access"><span class="module"><span class="identifier">_secondGoodFlatListRef</span>.</span><span class="module"><span class="identifier">_listRef</span></span></span></span><br><span class="line"><span class="module-access"><span class="module"> </span></span><span class="operator">       &amp;&amp; </span>this.<span class="module-access"><span class="module"><span class="identifier">_secondGoodFlatListRef</span>.</span><span class="module"><span class="identifier">_listRef</span>.</span><span class="module"><span class="identifier">_scrollMetrics</span>)</span></span><span class="operator"> || </span>null;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;</span><br><span class="line">    contentLength = <span class="number">0</span>,  <span class="comment">// å†…å®¹åŒºé«˜åº¦</span></span><br><span class="line">    offset = <span class="number">0</span>,         <span class="comment">// æ»‘åŠ¨åç§»é‡</span></span><br><span class="line">    visibleLength = <span class="number">0</span>   <span class="comment">// å¯è§†åŒºé«˜åº¦</span></span><br><span class="line">&#125; = scrollMetrics;</span><br></pre></td></tr></table></figure><h3 id="Android-å¹³å°å®ç°"><a href="#Android-å¹³å°å®ç°" class="headerlink" title="Android å¹³å°å®ç°"></a>Android å¹³å°å®ç°</h3><p>å¯¹äº Android å¹³å°ï¼Œå½“ <code>offset + visibleLength = contentLength</code> æ—¶ï¼Œè¡¨ç¤ºæ»‘åŠ¨åˆ°åº•éƒ¨ã€‚ä¸ºäº†ä»¥å‰è¿›è¡Œåˆ‡æ¢ï¼Œå¯¹æ¡ä»¶è¿›è¡Œä¿®æ­£ï¼Œå½“æ»‘åŠ¨åˆ°è·ç¦»åº•éƒ¨ 10px æ—¶ï¼Œè§¦å‘åˆ‡æ¢ Tab å‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤º</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//android æ— å¼¹æ€§æ»‘åŠ¨ï¼Œæ»‘åŠ¨åˆ°åº•æ—¶ï¼Œoffset + visibleLength = contentLengthã€‚IOSæœ‰å¼¹æ€§æ»‘åŠ¨ï¼Œéœ€è¦æ”¹å˜åˆ¤æ–­æ¡ä»¶  lbs 2019-03-10</span></span><br><span class="line"><span class="keyword">if</span> (offset + visibleLength &gt; contentLength - JDDevice.getRpx(<span class="number">10</span>)) &#123;</span><br><span class="line">    <span class="keyword">this</span>._secondGoodFlatListRef.scrollToIndex(&#123;</span><br><span class="line">        animated: <span class="literal">false</span>,</span><br><span class="line">        index: <span class="number">0</span>, </span><br><span class="line">        viewOffset: <span class="number">1</span>,</span><br><span class="line">        viewPosition: <span class="number">0</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//åˆ‡æ¢Tab</span></span><br><span class="line">    <span class="keyword">this</span>.ItemCategory._clickCategoryTab2 &amp;&amp; <span class="keyword">this</span>.ItemCategory._clickCategoryTab2(item, selectedIndex + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äº IOS å¹³å°ï¼Œå› ä¸º IOS ç³»ç»Ÿå­˜åœ¨å¼¹æ€§ä¸Šæ‹‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å› æ­¤å¯¹æ»‘åŠ¨åˆ°åº•æ¡ä»¶ä¿®æ­£ä¸º  <code>offset + visibleLength &gt; contentLength + JDDevice.getRpx(100)</code>ã€‚</p><p>å…¶ä¸­ï¼Œ<code>JDDevice.getRpx(100)</code> è¡¨ç¤ºå¼¹æ€§ä¸Šæ‹‰çš„é«˜åº¦ï¼Œå³ä¸‹å›¾ä¸­çº¢è‰²æ¡†çš„é«˜åº¦ã€‚</p><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/front-end-2019/rn-flatlist-autochange-tab-ios.png" alt="rn-flatlist-autochange-tab-ios"></p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (Platform.OS === <span class="string">'ios'</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (offset + visibleLength &gt; contentLength + JDDevice.getRpx(<span class="number">100</span>)) &#123;</span><br><span class="line">        <span class="keyword">this</span>._secondGoodFlatListRef.scrollToIndex(&#123;</span><br><span class="line">            animated: <span class="literal">false</span>,</span><br><span class="line">            index: <span class="number">0</span>,</span><br><span class="line">            viewOffset: <span class="number">1</span>,</span><br><span class="line">            viewPosition: <span class="number">0</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">this</span>.ItemCategory._clickCategoryTab2 &amp;&amp; <span class="keyword">this</span>.ItemCategory._clickCategoryTab2(item, selectedIndex + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½• &lt;code&gt;React Native&lt;/code&gt; ä¸­å¦‚ä½•å®ç°ä¸‹æ‹‰è‡ªåŠ¨åˆ‡æ¢åˆ†ç±»&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ IOS å’Œ Android å¹³å°å·®å¼‚ï¼Œç»™å‡ºä¸åŒçš„åˆ‡æ¢åˆ†ç±»è§¦å‘æ¡ä»¶&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="React Native" scheme="https://lbs0912.github.io/categories/React-Native/"/>
    
    
      <category term="React Native" scheme="https://lbs0912.github.io/tags/React-Native/"/>
    
  </entry>
  
  <entry>
    <title>JSæ¨¡å—åŒ–â€”â€”CommonJS AMD CMD ES6 Module</title>
    <link href="https://lbs0912.github.io/2019/03/28/js-module-introduce/"/>
    <id>https://lbs0912.github.io/2019/03/28/js-module-introduce/</id>
    <published>2019-03-28T02:35:26.000Z</published>
    <updated>2019-11-09T15:22:38.601Z</updated>
    
    <content type="html"><![CDATA[<ul><li>å¯¹ JS å¸¸è§çš„æ¨¡å—åŒ–æ–¹æ¡ˆè¿›è¡Œä»‹ç»å’Œæ¯”è¾ƒâ€”â€”<code>CommonJS</code> <code>AMD</code> <code>CMD</code> <code>ES6 Module</code></li><li>å¯¹ <code>ES6 Module</code> å’Œ <code>CommonJS</code> çš„å·®å¼‚è¿›è¡Œå¯¹æ¯”ï¼Œä»‹ç»å¾ªç¯ä¾èµ–å’ŒåŠ¨æ€ <code>import()</code></li></ul><a id="more"></a><h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul><li>2018/05/08ï¼Œæ’°å†™</li><li>2019/03/27ï¼Œå†…å®¹æ•´ç†</li><li>2019/04/01ï¼ŒåŠ¨æ€ <code>import()</code> å’Œåšæ–‡å‘è¡¨</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://segmentfault.com/a/1190000004873947" target="_blank" rel="noopener">AMD, CMD, CommonJSå’ŒUMD | Segmentfault</a></li><li><a href="https://zhuanlan.zhihu.com/p/41231046" target="_blank" rel="noopener">JSæ¨¡å—åŒ–åŠ è½½ä¹‹CommonJSã€AMDã€CMDã€ES6</a></li><li><a href="http://es6.ruanyifeng.com/#docs/module-loader" target="_blank" rel="noopener">ES6 moduleçš„åŠ è½½å’Œå®ç° | é˜®ä¸€å³°</a></li><li><a href="https://div.io/topic/1078" target="_blank" rel="noopener">å‰ç«¯æ¨¡å—åŒ–å¼€å‘æ–¹æ¡ˆå°å¯¹æ¯”</a></li></ul><h2 id="æ¨¡å—åŒ–å¼€å‘"><a href="#æ¨¡å—åŒ–å¼€å‘" class="headerlink" title="æ¨¡å—åŒ–å¼€å‘"></a>æ¨¡å—åŒ–å¼€å‘</h2><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li>æ¨¡å—åŒ–å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œåªå‘å¤–æš´éœ²ç‰¹å®šçš„å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥æŒ‰éœ€åŠ è½½ã€‚</li><li>ä¾èµ–è‡ªåŠ¨åŠ è½½ï¼ŒæŒ‰éœ€åŠ è½½ã€‚</li><li>æé«˜ä»£ç å¤ç”¨ç‡ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç çš„ç®¡ç†ï¼Œä½¿å¾—ä»£ç ç®¡ç†æ›´åŠ æ¸…æ™°ã€è§„èŒƒã€‚</li><li>å‡å°‘äº†å‘½åå†²çªï¼Œæ¶ˆé™¤å…¨å±€å˜é‡ã€‚</li><li>ç›®å‰æµè¡Œçš„jsæ¨¡å—åŒ–è§„èŒƒæœ‰CommonJSã€AMDã€CMDä»¥åŠES6çš„æ¨¡å—ç³»ç»Ÿ</li></ul><h3 id="å¸¸è§æ¨¡å—åŒ–è§„èŒƒ"><a href="#å¸¸è§æ¨¡å—åŒ–è§„èŒƒ" class="headerlink" title="å¸¸è§æ¨¡å—åŒ–è§„èŒƒ"></a>å¸¸è§æ¨¡å—åŒ–è§„èŒƒ</h3><ul><li>CommonJs (Node.js)</li><li>AMD (RequireJS)</li><li>CMD (SeaJS)</li></ul><h2 id="CommonJS-Node-js"><a href="#CommonJS-Node-js" class="headerlink" title="CommonJS(Node.js)"></a>CommonJS(Node.js)</h2><p><strong>CommonJSæ˜¯æœåŠ¡å™¨æ¨¡å—çš„è§„èŒƒ</strong>ï¼ŒNode.jsé‡‡ç”¨äº†è¿™ä¸ªè§„èŒƒã€‚</p><p>æ ¹æ® <code>CommonJS</code> è§„èŒƒï¼Œä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ä½œç”¨åŸŸï¼Œåœ¨ä¸€ä¸ªæ–‡ä»¶å®šä¹‰çš„å˜é‡ï¼ˆè¿˜åŒ…æ‹¬å‡½æ•°å’Œç±»ï¼‰ï¼Œ<strong>éƒ½æ˜¯ç§æœ‰çš„</strong>ï¼Œå¯¹å…¶ä»–æ–‡ä»¶æ˜¯ä¸å¯è§çš„ã€‚</p><p><strong>CommonJSè§„èŒƒåŠ è½½æ¨¡å—æ˜¯åŒæ­¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚</strong> </p><p><code>CommonJS</code> ä¸­ï¼ŒåŠ è½½æ¨¡å—ä½¿ç”¨ <code>require</code> æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¯»å–ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰§è¡Œï¼Œæœ€åè¿”å›æ–‡ä»¶å†…éƒ¨çš„ <code>exports</code> å¯¹è±¡ã€‚</p><blockquote><p><code>Node.js</code> ä¸»è¦ç”¨äºæœåŠ¡å™¨ç¼–ç¨‹ï¼ŒåŠ è½½çš„æ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨æœ¬åœ°ç¡¬ç›˜ï¼ŒåŠ è½½èµ·æ¥è¾ƒå¿«ï¼Œä¸ç”¨è€ƒè™‘å¼‚æ­¥åŠ è½½çš„æ–¹å¼ï¼Œæ‰€ä»¥ <code>CommonJS</code> çš„åŒæ­¥åŠ è½½æ¨¡å—è§„èŒƒæ˜¯æ¯”è¾ƒé€‚ç”¨çš„ã€‚</p><p>ä½†å¦‚æœæ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œè¦ä»æœåŠ¡å™¨åŠ è½½æ¨¡å—ï¼Œè¿™æ˜¯å°±å¿…é¡»é‡‡ç”¨å¼‚æ­¥æ¨¡å¼ã€‚æ‰€ä»¥å°±æœ‰äº† <code>AMD</code>ï¼Œ<code>CMD</code> ç­‰è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keywords">var</span> <span class="symbol">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keywords">var</span> addX = function(value) &#123;</span><br><span class="line">  <span class="keywords">return</span> value + <span class="symbol">x</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">module.exports.<span class="symbol">x</span> = <span class="symbol">x</span>;</span><br><span class="line">module.exports.addX = addX;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥æ”¹å†™ä¸ºå¦‚ä¸‹</span></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  <span class="symbol">x</span>: <span class="symbol">x</span>,</span><br><span class="line">  addX: addX,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let <span class="built_in">math</span> = <span class="built_in">require</span>(<span class="string">'./math.js'</span>);</span><br><span class="line">console.<span class="built_in">log</span>(<span class="string">'math.x'</span>,<span class="built_in">math</span>.x);</span><br><span class="line">console.<span class="built_in">log</span>(<span class="string">'math.addX'</span>, <span class="built_in">math</span>.addX(<span class="number">4</span>));</span><br></pre></td></tr></table></figure><h2 id="AMD-RequireJS-å¼‚æ­¥æ¨¡å—å®šä¹‰"><a href="#AMD-RequireJS-å¼‚æ­¥æ¨¡å—å®šä¹‰" class="headerlink" title="AMD (RequireJS) å¼‚æ­¥æ¨¡å—å®šä¹‰"></a>AMD (RequireJS) å¼‚æ­¥æ¨¡å—å®šä¹‰</h2><ul><li><code>AMD</code>  = <code>Asynchronous Module Definition</code>ï¼Œå³ <em>å¼‚æ­¥æ¨¡å—å®šä¹‰</em>ã€‚</li><li><strong><code>AMD</code> è§„èŒƒåŠ è½½æ¨¡å—æ˜¯å¼‚æ­¥çš„ï¼Œå¹¶å…è®¸å‡½æ•°å›è°ƒï¼Œä¸å¿…ç­‰åˆ°æ‰€æœ‰æ¨¡å—éƒ½åŠ è½½å®Œæˆï¼Œåç»­æ“ä½œå¯ä»¥æ­£å¸¸æ‰§è¡Œã€‚</strong></li><li><code>AMD</code> ä¸­ï¼Œä½¿ç”¨ <code>require</code> è·å–ä¾èµ–æ¨¡å—ï¼Œä½¿ç”¨ <code>exports</code> å¯¼å‡º <code>API</code>ã€‚</li></ul><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è§„èŒƒ API</span></span><br><span class="line">define(id?, dependencies?, factory);</span><br><span class="line">define.amd = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æ— ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define(&#123;</span><br><span class="line">    add: <span class="function"><span class="keyword">function</span><span class="params">(x,y)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> x + y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰æœ‰ä¾èµ–çš„æ¨¡å—</span></span><br><span class="line">define([<span class="string">"alpha"</span>], <span class="function"><span class="keyword">function</span><span class="params">(alpha)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        verb: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">            <span class="keyword">return</span> alpha.verb() + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å¼‚æ­¥åŠ è½½å’Œå›è°ƒ"><a href="#å¼‚æ­¥åŠ è½½å’Œå›è°ƒ" class="headerlink" title="å¼‚æ­¥åŠ è½½å’Œå›è°ƒ"></a>å¼‚æ­¥åŠ è½½å’Œå›è°ƒ</h3><blockquote><p><strong>require([module], callback)</strong> ä¸­ <code>callback</code> ä¸ºæ¨¡å—åŠ è½½å®Œæˆåçš„å›è°ƒå‡½æ•°</p></blockquote><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//åŠ è½½ <span class="built_in">math</span>æ¨¡å—ï¼Œå®Œæˆä¹‹åæ‰§è¡Œå›è°ƒå‡½æ•°</span><br><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span><span class="params">(math)</span></span> &#123;</span><br><span class="line">ã€€<span class="built_in">math</span>.add(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="RequireJS"><a href="#RequireJS" class="headerlink" title="RequireJS"></a>RequireJS</h3><p><code>RequireJS</code> æ˜¯ä¸€ä¸ªå‰ç«¯æ¨¡å—åŒ–ç®¡ç†çš„å·¥å…·åº“ï¼Œéµå¾ª <code>AMD</code> è§„èŒƒï¼Œ<code>RequireJS</code> æ˜¯å¯¹ <code>AMD</code> è§„èŒƒçš„é˜è¿°ã€‚</p><p><code>RequireJS</code> åŸºæœ¬æ€æƒ³ä¸ºï¼Œé€šè¿‡ä¸€ä¸ªå‡½æ•°æ¥å°†æ‰€æœ‰æ‰€éœ€çš„æˆ–è€…æ‰€ä¾èµ–çš„æ¨¡å—è£…è½½è¿›æ¥ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ˆæ¨¡å—ï¼‰ã€‚åç»­æ‰€æœ‰çš„å…³äºæ–°æ¨¡å—çš„ä¸šåŠ¡ä»£ç éƒ½åœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨æ“ä½œã€‚</p><p><code>RequireJS</code> è¦æ±‚æ¯ä¸ªæ¨¡å—å‡æ”¾åœ¨ç‹¬ç«‹çš„æ–‡ä»¶ä¹‹ä¸­ï¼Œå¹¶ä½¿ç”¨ <code>define</code> å®šä¹‰æ¨¡å—ï¼Œä½¿ç”¨ <code>require</code> æ–¹æ³•è°ƒç”¨æ¨¡å—ã€‚</p><p>æŒ‰ç…§æ˜¯å¦æœ‰ä¾èµ–å…¶ä»–æ¨¡å—æƒ…å†µï¼Œå¯ä»¥åˆ†ä¸º <em>ç‹¬ç«‹æ¨¡å—</em> å’Œ <em>éç‹¬ç«‹æ¨¡å—</em>ã€‚</p><ul><li>ç‹¬ç«‹æ¨¡å—ï¼Œä¸ä¾èµ–å…¶ä»–æ¨¡å—ï¼Œç›´æ¥å®šä¹‰</li></ul><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">define(&#123;</span><br><span class="line">    method1: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;,</span><br><span class="line">    method2: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        method1: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;,</span><br><span class="line">        method2: <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>éç‹¬ç«‹æ¨¡å—ï¼Œä¾èµ–å…¶ä»–æ¨¡å—</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">define([ <span class="string">'module1'</span>, <span class="string">'module2'</span> ], <span class="function"><span class="keyword">function</span>(<span class="params">m1, m2</span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç­‰ä»·äº</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> m1 = <span class="built_in">require</span>(<span class="string">'module1'</span>);</span><br><span class="line">    <span class="keyword">var</span> m2 = <span class="built_in">require</span>(<span class="string">'module2'</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li><code>require</code> æ–¹æ³•è°ƒç”¨æ¨¡å—</li></ul><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require(['foo', 'bar'], function(<span class="name">foo</span>, bar) &#123;</span><br><span class="line">    foo.func()<span class="comment">;</span></span><br><span class="line">    bar.func()<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure><h2 id="CMD-SeaJS"><a href="#CMD-SeaJS" class="headerlink" title="CMD (SeaJS)"></a>CMD (SeaJS)</h2><p><code>CMD</code>  = <code>Common Module Definition</code>ï¼Œå³ <em>é€šç”¨æ¨¡å—å®šä¹‰</em>ã€‚<code>CMD</code> æ˜¯ <code>SeaJS</code> åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p><p>CMDè§„èŒƒå’ŒAMDç±»ä¼¼ï¼Œéƒ½ä¸»è¦è¿è¡Œäºæµè§ˆå™¨ç«¯ï¼Œå†™æ³•ä¸Šçœ‹èµ·æ¥ä¹Ÿå¾ˆç±»ä¼¼ã€‚ä¸»è¦æ˜¯åŒºåˆ«åœ¨äº <strong>æ¨¡å—åˆå§‹åŒ–æ—¶æœº</strong></p><ul><li><strong>AMDä¸­åªè¦æ¨¡å—ä½œä¸ºä¾èµ–æ—¶ï¼Œå°±ä¼šåŠ è½½å¹¶åˆå§‹åŒ–</strong></li><li><strong>CMDä¸­ï¼Œæ¨¡å—ä½œä¸ºä¾èµ–ä¸”è¢«å¼•ç”¨æ—¶æ‰ä¼šåˆå§‹åŒ–ï¼Œå¦åˆ™åªä¼šåŠ è½½ã€‚</strong></li><li><code>CMD</code> æ¨å´‡ä¾èµ–å°±è¿‘ï¼Œ<code>AMD</code> æ¨å´‡ä¾èµ–å‰ç½®ã€‚</li><li><code>AMD</code> çš„ <code>API</code> é»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼Œ<code>CMD</code> ä¸¥æ ¼çš„åŒºåˆ†æ¨å´‡èŒè´£å•ä¸€ã€‚ä¾‹å¦‚ï¼Œ<code>AMD</code> é‡Œ <code>require</code> åˆ†å…¨å±€çš„å’Œå±€éƒ¨çš„ã€‚CMDé‡Œé¢æ²¡æœ‰å…¨å±€çš„ <code>require</code>ï¼Œæä¾› <code>seajs.use()</code> æ¥å®ç°æ¨¡å—ç³»ç»Ÿçš„åŠ è½½å¯åŠ¨ã€‚<code>CMD</code> é‡Œæ¯ä¸ª <code>API</code> éƒ½ç®€å•çº¯ç²¹ã€‚</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//AMD</span></span><br><span class="line">define([<span class="string">'./a'</span>,<span class="string">'./b'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//ä¾èµ–ä¸€å¼€å§‹å°±å†™å¥½</span></span><br><span class="line">    a.test();</span><br><span class="line">    b.test();</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span> (<span class="params">requie, exports, module</span>) </span>&#123;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™</span></span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line">    a.test();</span><br><span class="line">     </span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">//è½¯ä¾èµ–</span></span><br><span class="line">    <span class="keyword">if</span> (status) &#123;</span><br><span class="line">        <span class="keyword">var</span> b = requie(<span class="string">'./b'</span>);</span><br><span class="line">        b.test();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="Sea-js"><a href="#Sea-js" class="headerlink" title="Sea.js"></a>Sea.js</h3><ul><li><a href="https://github.com/seajs/seajs" target="_blank" rel="noopener">Sea.js Github Page</a></li><li><a href="https://www.douban.com/note/283566440/" target="_blank" rel="noopener">SeaJSä¸RequireJSæœ€å¤§çš„åŒºåˆ«</a></li></ul><p>ä½¿ç”¨Sea.jsï¼Œåœ¨ä¹¦å†™æ–‡ä»¶æ—¶ï¼Œéœ€è¦éµå®ˆCMDï¼ˆCommon Module Definitionï¼‰æ¨¡å—å®šä¹‰è§„èŒƒã€‚ä¸€ä¸ªæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ã€‚</p><h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><ul><li>é€šè¿‡ <code>exports</code> æš´éœ²æ¥å£ã€‚è¿™æ„å‘³ç€ä¸éœ€è¦å‘½åç©ºé—´äº†ï¼Œæ›´ä¸éœ€è¦å…¨å±€å˜é‡ã€‚è¿™æ˜¯ä¸€ç§å½»åº•çš„å‘½åå†²çªè§£å†³æ–¹æ¡ˆã€‚</li><li>é€šè¿‡ <code>require</code> å¼•å…¥ä¾èµ–ã€‚è¿™å¯ä»¥è®©ä¾èµ–å†…ç½®ï¼Œå¼€å‘è€…åªéœ€å…³å¿ƒå½“å‰æ¨¡å—çš„ä¾èµ–ï¼Œå…¶ä»–äº‹æƒ… <code>Sea.js</code> éƒ½ä¼šè‡ªåŠ¨å¤„ç†å¥½ã€‚å¯¹æ¨¡å—å¼€å‘è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆå¥½çš„ å…³æ³¨åº¦åˆ†ç¦»ï¼Œèƒ½è®©ç¨‹åºå‘˜æ›´å¤šåœ°äº«å—ç¼–ç çš„ä¹è¶£ã€‚</li><li>é€šè¿‡ <code>define</code> å®šä¹‰æ¨¡å—ï¼Œæ›´å¤šè¯¦æƒ…å‚è€ƒ<a href="http://wiki.jikexueyuan.com/project/hello-seajs/usage-guide.html" target="_blank" rel="noopener">SeasJS | æå®¢å­¦é™¢</a>ã€‚</li></ul><h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>ä¾‹å¦‚ï¼Œå¯¹äºä¸‹è¿°<code>util.js</code>ä»£ç </p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var org = &#123;&#125;;</span><br><span class="line">org.CoolSite = &#123;&#125;;</span><br><span class="line">org.CoolSite.Utils = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">org.<span class="module-access"><span class="module"><span class="identifier">CoolSite</span>.</span><span class="module"><span class="identifier">Utils</span>.</span></span>each = <span class="keyword">function</span> (arr) &#123;</span><br><span class="line">  <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">org.<span class="module-access"><span class="module"><span class="identifier">CoolSite</span>.</span><span class="module"><span class="identifier">Utils</span>.</span></span>log = <span class="keyword">function</span> (str) &#123;</span><br><span class="line">  <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é‡‡ç”¨SeaJSé‡å†™ä¸º</p><figure class="highlight openscad"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">define(<span class="function"><span class="keyword">function</span><span class="params">(require, exports)</span> &#123;</span></span><br><span class="line">  exports.each = <span class="function"><span class="keyword">function</span> <span class="params">(arr)</span> &#123;</span></span><br><span class="line">    <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  exports.<span class="built_in">log</span> = <span class="function"><span class="keyword">function</span> <span class="params">(str)</span> &#123;</span></span><br><span class="line">    <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>exports</code> å°±å¯ä»¥å‘å¤–æä¾›æ¥å£ã€‚é€šè¿‡ <code>require(&#39;./util.js&#39;)</code> å°±å¯ä»¥æ‹¿åˆ° <code>util.js</code> ä¸­é€šè¿‡ <code>exports</code> æš´éœ²çš„æ¥å£ã€‚è¿™é‡Œçš„ <code>require</code>  å¯ä»¥è®¤ä¸ºæ˜¯ <code>Sea.js</code> ç»™ JavaScript è¯­è¨€å¢åŠ çš„ä¸€ä¸ªè¯­æ³•å…³é”®å­—ï¼Œ<strong>é€šè¿‡ <code>require</code> å¯ä»¥è·å–å…¶ä»–æ¨¡å—æä¾›çš„æ¥å£ã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'./util.js'</span>);</span><br><span class="line">  exports.init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å®ç°ä»£ç </span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="SeaJSä¸RequireJSåŒºåˆ«"><a href="#SeaJSä¸RequireJSåŒºåˆ«" class="headerlink" title="SeaJSä¸RequireJSåŒºåˆ«"></a>SeaJSä¸RequireJSåŒºåˆ«</h2><p>äºŒè€…åŒºåˆ«ä¸»è¦è¡¨ç°åœ¨<strong>æ¨¡å—åˆå§‹åŒ–æ—¶æœº</strong></p><ul><li><strong>AMDï¼ˆRequireJSï¼‰ä¸­åªè¦æ¨¡å—ä½œä¸ºä¾èµ–æ—¶ï¼Œå°±ä¼šåŠ è½½å¹¶åˆå§‹åŒ–ã€‚å³å°½æ—©åœ°æ‰§è¡Œï¼ˆä¾èµ–ï¼‰æ¨¡å—ã€‚ç›¸å½“äºæ‰€æœ‰çš„requireéƒ½è¢«æå‰äº†ï¼Œè€Œä¸”æ¨¡å—æ‰§è¡Œçš„é¡ºåºä¹Ÿä¸ä¸€å®š100%å°±æ˜¯requireä¹¦å†™é¡ºåºã€‚</strong></li><li><strong>CMDï¼ˆSeaJSï¼‰ä¸­ï¼Œæ¨¡å—ä½œä¸ºä¾èµ–ä¸”è¢«å¼•ç”¨æ—¶æ‰ä¼šåˆå§‹åŒ–ï¼Œå¦åˆ™åªä¼šåŠ è½½ã€‚å³åªä¼šåœ¨æ¨¡å—çœŸæ­£éœ€è¦ä½¿ç”¨çš„æ—¶å€™æ‰åˆå§‹åŒ–ã€‚æ¨¡å—åŠ è½½çš„é¡ºåºæ˜¯ä¸¥æ ¼æŒ‰ç…§requireä¹¦å†™çš„é¡ºåºã€‚</strong></li></ul><p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/front-end-2019/amd-cmd-nodek.png" alt="amd-cmd-nodek"></p><p>ä»è§„èŒƒä¸Šæ¥è¯´ï¼ŒAMD æ›´åŠ ç®€å•ä¸”ä¸¥è°¨ï¼Œé€‚ç”¨æ€§æ›´å¹¿ï¼Œè€Œåœ¨RequireJSå¼ºåŠ›çš„æ¨åŠ¨ä¸‹ï¼Œåœ¨å›½å¤–å‡ ä¹æˆäº†äº‹å®ä¸Šçš„å¼‚æ­¥æ¨¡å—æ ‡å‡†ï¼Œå„å¤§ç±»åº“ä¹Ÿç›¸ç»§æ”¯æŒAMDè§„èŒƒã€‚</p><p>ä½†ä»SeaJSä¸CMDæ¥è¯´ï¼Œä¹Ÿåšäº†å¾ˆå¤šä¸é”™ä¸œè¥¿ï¼š1ã€ç›¸å¯¹è‡ªç„¶çš„ä¾èµ–å£°æ˜é£æ ¼ 2ã€å°è€Œç¾çš„å†…éƒ¨å®ç° 3ã€è´´å¿ƒçš„å¤–å›´åŠŸèƒ½è®¾è®¡ 4ã€æ›´å¥½çš„ä¸­æ–‡ç¤¾åŒºæ”¯æŒã€‚</p><h2 id="UMD"><a href="#UMD" class="headerlink" title="UMD"></a>UMD</h2><ul><li><code>UMD</code> = <code>Universal Module Definition</code>ï¼Œå³é€šç”¨æ¨¡å—å®šä¹‰ã€‚<code>UMD</code> æ˜¯<code>AMD</code> å’Œ <code>CommonJS</code>çš„ç³…åˆã€‚</li></ul><blockquote><p><code>AMD</code> æ¨¡å—ä»¥æµè§ˆå™¨ç¬¬ä¸€çš„åŸåˆ™å‘å±•ï¼Œå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚<br><code>CommonJS</code> æ¨¡å—ä»¥æœåŠ¡å™¨ç¬¬ä¸€åŸåˆ™å‘å±•ï¼Œé€‰æ‹©åŒæ­¥åŠ è½½ã€‚å®ƒçš„æ¨¡å—æ— éœ€åŒ…è£…(unwrapped modules)ã€‚<br>è¿™è¿«ä½¿äººä»¬åˆæƒ³å‡ºå¦ä¸€ä¸ªæ›´é€šç”¨çš„æ¨¡å¼ <code>UMD</code>ï¼ˆUniversal Module Definition)ï¼Œå®ç°è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆã€‚</p></blockquote><ul><li><code>UMD</code> å…ˆåˆ¤æ–­æ˜¯å¦æ”¯æŒ <code>Node.js</code> çš„æ¨¡å—ï¼ˆ<code>exports</code>ï¼‰æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨ <code>Node.js</code> æ¨¡å—æ¨¡å¼ã€‚å†åˆ¤æ–­æ˜¯å¦æ”¯æŒ <code>AMD</code>ï¼ˆ<code>define</code> æ˜¯å¦å­˜åœ¨ï¼‰ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨ <code>AMD</code> æ–¹å¼åŠ è½½æ¨¡å—ã€‚</li></ul><figure class="highlight clojure"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">function</span> (<span class="name">window</span>, factory) &#123;</span><br><span class="line">    if (<span class="name">typeof</span> exports === 'object') &#123;</span><br><span class="line">     </span><br><span class="line">        module.exports = factory()<span class="comment">;</span></span><br><span class="line">    &#125; else if (<span class="name">typeof</span> define === 'function' &amp;&amp; define.amd) &#123;</span><br><span class="line">     </span><br><span class="line">        define(<span class="name">factory</span>)<span class="comment">;</span></span><br><span class="line">    &#125; else &#123;</span><br><span class="line">     </span><br><span class="line">        window.eventUtil = factory()<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="name">this</span>, function () &#123;</span><br><span class="line">    //module ...</span><br><span class="line">&#125;)<span class="comment">;</span></span><br></pre></td></tr></table></figure><h2 id="ES6-æ¨¡å—"><a href="#ES6-æ¨¡å—" class="headerlink" title="ES6 æ¨¡å—"></a>ES6 æ¨¡å—</h2><h3 id="ES6æ¨¡å—å’ŒCommonJSåŒºåˆ«"><a href="#ES6æ¨¡å—å’ŒCommonJSåŒºåˆ«" class="headerlink" title="ES6æ¨¡å—å’ŒCommonJSåŒºåˆ«"></a>ES6æ¨¡å—å’ŒCommonJSåŒºåˆ«</h3><ul><li><strong>ES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œè¾“å‡ºæ¥å£åŠ¨æ€ç»‘å®šï¼Œè€Œ <code>CommonJS</code> è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ã€‚</strong></li><li><strong><code>CommonJS</code> æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚</strong></li></ul><h4 id="CommonJS-è¾“å‡ºå€¼çš„æ‹·è´"><a href="#CommonJS-è¾“å‡ºå€¼çš„æ‹·è´" class="headerlink" title="CommonJS è¾“å‡ºå€¼çš„æ‹·è´"></a>CommonJS è¾“å‡ºå€¼çš„æ‹·è´</h4><p><strong>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼ˆç±»æ¯”äºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼æ“ä½œï¼‰ã€‚å¯¹äºåŸºæœ¬ç±»å‹ï¼Œä¸€æ—¦è¾“å‡ºï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚å¯¹äºå¼•ç”¨ç±»å‹ï¼Œæ•ˆæœåŒå¼•ç”¨ç±»å‹çš„èµ‹å€¼æ“ä½œã€‚</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'David'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeValue</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    counter++;</span><br><span class="line">    obj.name = <span class="string">'Peter'</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    counter: counter,</span><br><span class="line">    obj: obj,</span><br><span class="line">    changeValue: changeValue,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">var <span class="built_in">mod</span> = require(<span class="string">'./lib'</span>);</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">mod</span>.counter);  <span class="comment">// 3</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">mod</span>.obj.<span class="built_in">name</span>);  <span class="comment">//  'David'</span></span><br><span class="line"><span class="built_in">mod</span>.changeValue();</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">mod</span>.counter);  <span class="comment">// 3</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">mod</span>.obj.<span class="built_in">name</span>);  <span class="comment">//  'Peter'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Or</span></span><br><span class="line">console.<span class="built_in">log</span>(require(<span class="string">'./lib'</span>).counter);  <span class="comment">// 3</span></span><br><span class="line">console.<span class="built_in">log</span>(require(<span class="string">'./lib'</span>).obj.<span class="built_in">name</span>);  <span class="comment">//  'Peter'</span></span><br></pre></td></tr></table></figure><ul><li><code>counter</code> æ˜¯åŸºæœ¬ç±»å‹å€¼ï¼Œæ¨¡å—å†…éƒ¨å€¼çš„å˜åŒ–ä¸å½±å“è¾“å‡ºçš„å€¼å˜åŒ–ã€‚</li><li><code>obj</code> æ˜¯å¼•ç”¨ç±»å‹å€¼ï¼Œæ¨¡å—å†…éƒ¨å€¼çš„å˜åŒ–å½±å“è¾“å‡ºçš„å€¼å˜åŒ–ã€‚</li><li>ä¸Šè¿°ä¸¤ç‚¹åŒºåˆ«ï¼Œç±»æ¯”äºåŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹çš„èµ‹å€¼æ“ä½œã€‚</li></ul><p>ä¹Ÿå¯ä»¥å€ŸåŠ©å–å€¼å‡½æ•°ï¼ˆ<code>getter</code>ï¼‰ï¼Œå°† <code>counter</code> è½¬ä¸ºå¼•ç”¨ç±»å‹å€¼ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p><blockquote><p>åœ¨ç±»çš„å†…éƒ¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>get</code> å’Œ <code>set</code> å…³é”®å­—ï¼Œå¯¹æŸä¸ªå±æ€§è®¾ç½®å­˜æ‰§å‡½æ•°å’Œå–å€¼å‡½æ•°ï¼Œæ‹¦æˆªè¯¥å±æ€§çš„å­˜å–è¡Œä¸ºã€‚ â€”â€” <a href="http://es6.ruanyifeng.com/#docs/class" target="_blank" rel="noopener">class | é˜®ä¸€å³°</a></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">incCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="keyword">get</span> counter() &#123;</span><br><span class="line">    <span class="keyword">return</span> counter</span><br><span class="line">  &#125;,</span><br><span class="line">  incCounter: incCounter,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line">var <span class="built-in">mod</span> = require(<span class="string">'./lib'</span>);</span><br><span class="line"></span><br><span class="line">console.<span class="built-in">log</span>(<span class="built-in">mod</span>.counter);  <span class="comment">// 3</span></span><br><span class="line"><span class="built-in">mod</span>.incCounter();</span><br><span class="line">console.<span class="built-in">log</span>(<span class="built-in">mod</span>.counter); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h4 id="ES6-è¾“å‡ºå€¼çš„å¼•ç”¨"><a href="#ES6-è¾“å‡ºå€¼çš„å¼•ç”¨" class="headerlink" title="ES6 è¾“å‡ºå€¼çš„å¼•ç”¨"></a>ES6 è¾“å‡ºå€¼çš„å¼•ç”¨</h4><p>ES6 æ¨¡å—æ˜¯åŠ¨æ€å…³è”æ¨¡å—ä¸­çš„å€¼ï¼Œè¾“å‡ºçš„æ˜¯å€¼å¾—å¼•ç”¨ã€‚<strong>åŸå§‹å€¼å˜äº†ï¼Œ<code>import</code> åŠ è½½çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚</strong></p><blockquote><p><code>ES6</code> æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸ <code>CommonJS</code> ä¸ä¸€æ ·ã€‚JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†ææ—¶ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤ <code>import</code>ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ã€‚<strong>ES6 æ¨¡å—ä¸­ï¼ŒåŸå§‹å€¼å˜äº†ï¼Œ<code>import</code> åŠ è½½çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼</strong>ã€‚  â€”â€” <a href="http://es6.ruanyifeng.com/#docs/module-loader" target="_blank" rel="noopener">ES6 Module çš„åŠ è½½å®ç° | é˜®ä¸€å³°</a></p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lib.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> counter = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">incCounter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  counter++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; counter, incCounter &#125; <span class="keyword">from</span> <span class="string">'./lib'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(counter); <span class="comment">// 3</span></span><br><span class="line">incCounter();</span><br><span class="line"><span class="built_in">console</span>.log(counter); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure><h4 id="CommonJS-è¿è¡Œæ—¶åŠ è½½-ES6é™æ€ç¼–è¯‘"><a href="#CommonJS-è¿è¡Œæ—¶åŠ è½½-ES6é™æ€ç¼–è¯‘" class="headerlink" title="CommonJS è¿è¡Œæ—¶åŠ è½½ ES6é™æ€ç¼–è¯‘"></a>CommonJS è¿è¡Œæ—¶åŠ è½½ ES6é™æ€ç¼–è¯‘</h4><p><code>CommonJS</code> æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚</p><p>è¿™æ˜¯å› ä¸ºï¼Œ<strong><code>CommonJS</code> åŠ è½½çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ï¼ˆå³ <code>module.exports</code> å±æ€§ï¼‰ï¼Œè¯¥å¯¹è±¡åªæœ‰åœ¨è„šæœ¬è¿è¡Œå®Œæ‰ä¼šç”Ÿæˆã€‚è€Œ <strong><code>ES6</code> æ¨¡å—ä¸æ˜¯å¯¹è±¡</strong>ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚</p><p>ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ï¼Œå› æ­¤æœ‰å¦‚ä¸‹2ä¸ªç‰¹ç‚¹</p><ul><li><code>import</code> å‘½ä»¤ä¼šè¢« JS å¼•æ“é™æ€åˆ†æï¼Œä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œ</li><li><code>export</code> å‘½ä»¤ä¼šæœ‰å˜é‡å£°æ˜æå‡çš„æ•ˆæœ</li></ul><h5 id="import-ä¼˜å…ˆæ‰§è¡Œ"><a href="#import-ä¼˜å…ˆæ‰§è¡Œ" class="headerlink" title="import ä¼˜å…ˆæ‰§è¡Œ"></a>import ä¼˜å…ˆæ‰§è¡Œ</h5><p>åœ¨æ–‡ä»¶ä¸­çš„ä»»ä½•ä½ç½®å¼•å…¥ <code>import</code> æ¨¡å—éƒ½ä¼šè¢«æå‰åˆ°æ–‡ä»¶é¡¶éƒ¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js'</span>)</span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'./b'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b.js å…ˆæ‰§è¡Œ'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="comment">// b.js å…ˆæ‰§è¡Œ</span></span><br><span class="line"><span class="comment">// a.js</span></span><br></pre></td></tr></table></figure><p>è™½ç„¶ <code>a</code> æ¨¡å—ä¸­ <code>import</code> å¼•å…¥æ™šäº <code>console.log(&#39;a&#39;)</code>ï¼Œä½†æ˜¯å®ƒè¢« JS å¼•æ“é€šè¿‡é™æ€åˆ†æï¼Œæåˆ°æ¨¡å—æ‰§è¡Œçš„æœ€å‰é¢ï¼Œä¼˜äºæ¨¡å—ä¸­çš„å…¶ä»–éƒ¨åˆ†çš„æ‰§è¡Œã€‚</p><h5 id="export-å‘½ä»¤å˜é‡æå‡æ•ˆæœ"><a href="#export-å‘½ä»¤å˜é‡æå‡æ•ˆæœ" class="headerlink" title="export å‘½ä»¤å˜é‡æå‡æ•ˆæœ"></a>export å‘½ä»¤å˜é‡æå‡æ•ˆæœ</h5><p>ç”±äº <code>import</code> å’Œ <code>export</code> æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ <code>import</code> å’Œ <code>export</code> å…·æœ‰å˜é‡æå‡æ•ˆæœã€‚å³ <code>import</code> å’Œ <code>export</code> å‘½ä»¤åœ¨æ¨¡å—ä¸­çš„ä½ç½®å¹¶ä¸å½±å“ç¨‹åºçš„è¾“å‡ºã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'./b'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js'</span>);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bar = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> bar2 = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'bar2'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">bar3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'bar3'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> foo = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> a <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ:</span></span><br><span class="line"><span class="comment">// &#123; bar: undefined, bar2: undefined, bar3: [Function: bar3] &#125;</span></span><br><span class="line"><span class="comment">// a.js</span></span><br></pre></td></tr></table></figure><p><code>a</code> æ¨¡å—å¼•ç”¨äº† <code>b</code> æ¨¡å—ï¼Œ<code>b</code> æ¨¡å—ä¹Ÿå¼•ç”¨äº† <code>a</code> æ¨¡å—ï¼Œ<code>export</code> å£°æ˜çš„å˜é‡ä¹Ÿæ˜¯ä¼˜äºæ¨¡å—å…¶å®ƒå†…å®¹çš„æ‰§è¡Œçš„ã€‚ä½†å…·ä½“å¯¹å˜é‡èµ‹å€¼éœ€è¦ç­‰åˆ°æ‰§è¡Œåˆ°ç›¸åº”ä»£ç çš„æ—¶å€™ã€‚</p><h3 id="ES6æ¨¡å—å’ŒCommonJSç›¸åŒç‚¹"><a href="#ES6æ¨¡å—å’ŒCommonJSç›¸åŒç‚¹" class="headerlink" title="ES6æ¨¡å—å’ŒCommonJSç›¸åŒç‚¹"></a>ES6æ¨¡å—å’ŒCommonJSç›¸åŒç‚¹</h3><h4 id="æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ"><a href="#æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ" class="headerlink" title="æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ"></a>æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ</h4><p>é‡å¤å¼•å…¥æŸä¸ªç›¸åŒçš„æ¨¡å—æ—¶ï¼Œæ¨¡å—åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p><h3 id="å¾ªç¯ä¾èµ–"><a href="#å¾ªç¯ä¾èµ–" class="headerlink" title="å¾ªç¯ä¾èµ–"></a>å¾ªç¯ä¾èµ–</h3><h4 id="CommonJS-æ¨¡å—å¾ªç¯ä¾èµ–"><a href="#CommonJS-æ¨¡å—å¾ªç¯ä¾èµ–" class="headerlink" title="CommonJS æ¨¡å—å¾ªç¯ä¾èµ–"></a>CommonJS æ¨¡å—å¾ªç¯ä¾èµ–</h4><p>CommonJS æ¨¡å—çš„é‡è¦ç‰¹æ€§æ˜¯åŠ è½½æ—¶æ‰§è¡Œï¼Œå³è„šæœ¬ä»£ç åœ¨ <code>require</code> çš„æ—¶å€™ï¼Œå°±ä¼šå…¨éƒ¨æ‰§è¡Œã€‚ä¸€æ—¦å‡ºç°æŸä¸ªæ¨¡å—è¢«â€œå¾ªç¯åŠ è½½â€ï¼Œ<strong>å°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚</strong></p><h5 id="Demo-1"><a href="#Demo-1" class="headerlink" title="Demo 1"></a>Demo 1</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line">exports.done = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'åœ¨ a.js ä¹‹ä¸­ï¼Œb.done = %j'</span>, b.done);</span><br><span class="line">exports.done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js æ‰§è¡Œå®Œæ¯•'</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œ<code>a.js</code> è„šæœ¬å…ˆè¾“å‡ºä¸€ä¸ª <code>done</code> å˜é‡ï¼Œç„¶ååŠ è½½å¦ä¸€ä¸ªè„šæœ¬æ–‡ä»¶ <code>b.js</code>ã€‚æ³¨æ„ï¼Œæ­¤æ—¶ <code>a.js</code> ä»£ç å°±åœåœ¨è¿™é‡Œï¼Œç­‰å¾… <code>b.js</code> æ‰§è¡Œå®Œæ¯•ï¼Œå†å¾€ä¸‹æ‰§è¡Œã€‚</p><p>å†çœ‹ <code>b.js</code> çš„ä»£ç ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.js</span></span><br><span class="line">exports.done = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'åœ¨ b.js ä¹‹ä¸­ï¼Œa.done = %j'</span>, a.done);</span><br><span class="line">exports.done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b.js æ‰§è¡Œå®Œæ¯•'</span>);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¹‹ä¸­ï¼Œ<code>b.js</code> æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œï¼Œå°±ä¼šå»åŠ è½½ <code>a.js</code>ï¼Œè¿™æ—¶ï¼Œå°±å‘ç”Ÿäº†â€œå¾ªç¯åŠ è½½â€ã€‚ç³»ç»Ÿä¼š <code>a.js</code> æ¨¡å—å¯¹åº”å¯¹è±¡çš„ <code>exports</code> å±æ€§å–å€¼ï¼Œå¯æ˜¯å› ä¸º <code>a.js</code> è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œä» <code>exports</code> å±æ€§åªèƒ½å–å›å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æœ€åçš„å€¼ã€‚</p><p><code>a.js</code> å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œåªæœ‰ä¸€è¡Œã€‚</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">exports.done</span> = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>å› æ­¤ï¼Œå¯¹äº <code>b.js</code>æ¥è¯´ï¼Œå®ƒä» <code>a.js</code> åªè¾“å…¥ä¸€ä¸ªå˜é‡ <code>done</code>ï¼Œå€¼ä¸º <code>false</code>ã€‚</p><p>ç„¶åï¼Œ<strong><code>b.js</code> æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç­‰åˆ°å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå†æŠŠæ‰§è¡Œæƒäº¤è¿˜ç»™ <code>a.js</code></strong>ã€‚äºæ˜¯ï¼Œ<code>a.js</code> æ¥ç€å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œæ¯•ã€‚æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬ <code>main.js</code>ï¼ŒéªŒè¯è¿™ä¸ªè¿‡ç¨‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a.js'</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'åœ¨ main.js ä¹‹ä¸­, a.done=%j, b.done=%j'</span>, a.done, b.done);</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ <code>main.js</code>ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ node main.js</span><br><span class="line"></span><br><span class="line">åœ¨ <span class="selector-tag">b</span><span class="selector-class">.js</span> ä¹‹ä¸­ï¼Œ<span class="selector-tag">a</span><span class="selector-class">.done</span> = false</span><br><span class="line"><span class="selector-tag">b</span><span class="selector-class">.js</span> æ‰§è¡Œå®Œæ¯•</span><br><span class="line">åœ¨ <span class="selector-tag">a</span><span class="selector-class">.js</span> ä¹‹ä¸­ï¼Œ<span class="selector-tag">b</span><span class="selector-class">.done</span> = true</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-class">.js</span> æ‰§è¡Œå®Œæ¯•</span><br><span class="line">åœ¨ main<span class="selector-class">.js</span> ä¹‹ä¸­, <span class="selector-tag">a</span>.done=true, <span class="selector-tag">b</span>.done=true</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç è¯æ˜äº†2ç‚¹</p><ul><li>åœ¨ <code>b.js</code> ä¹‹ä¸­ï¼Œ<code>a.js</code> æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œåªæ‰§è¡Œäº†ç¬¬ä¸€è¡Œ</li><li><code>main.js</code> æ‰§è¡Œåˆ°ç¬¬äºŒè¡Œæ—¶ï¼Œä¸ä¼šå†æ¬¡æ‰§è¡Œ <code>b.js</code>ï¼Œè€Œæ˜¯è¾“å‡ºç¼“å­˜çš„ <code>b.js</code> çš„æ‰§è¡Œç»“æœï¼Œå³å®ƒçš„ç¬¬å››è¡Œã€‚</li></ul><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">exports.done</span> = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure><p>æ€»ä¹‹ï¼Œ<strong>CommonJS è¾“å…¥çš„æ˜¯è¢«è¾“å‡ºå€¼çš„æ‹·è´ï¼Œä¸æ˜¯å¼•ç”¨ã€‚</strong></p><p>å¦å¤–ï¼Œç”±äº CommonJS æ¨¡å—é‡åˆ°å¾ªç¯åŠ è½½æ—¶ï¼Œè¿”å›çš„æ˜¯å½“å‰å·²ç»æ‰§è¡Œçš„éƒ¨åˆ†çš„å€¼ï¼Œè€Œä¸æ˜¯ä»£ç å…¨éƒ¨æ‰§è¡Œåçš„å€¼ï¼Œä¸¤è€…å¯èƒ½ä¼šæœ‰å·®å¼‚ã€‚æ‰€ä»¥ï¼Œè¾“å…¥å˜é‡çš„æ—¶å€™ï¼Œå¿…é¡»éå¸¸å°å¿ƒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'a'</span>); <span class="comment">// å®‰å…¨çš„å†™æ³• å¯¼å…¥æ•´ä½“ï¼Œä¿è¯moduleå·²ç»æ‰§è¡Œå®Œæˆ</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="built_in">require</span>(<span class="string">'a'</span>).foo; <span class="comment">// å±é™©çš„å†™æ³•</span></span><br><span class="line"></span><br><span class="line">exports.good = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a.foo(<span class="string">'good'</span>, arg); <span class="comment">// ä½¿ç”¨çš„æ˜¯ a.foo çš„æœ€æ–°å€¼</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">exports.bad = <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> foo(<span class="string">'bad'</span>, arg); <span class="comment">// ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªéƒ¨åˆ†åŠ è½½æ—¶çš„å€¼</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœå‘ç”Ÿå¾ªç¯åŠ è½½ï¼Œ<code>require(&#39;a&#39;).foo</code> çš„å€¼å¾ˆå¯èƒ½åé¢ä¼šè¢«æ”¹å†™ï¼Œæ”¹ç”¨ <code>require(&#39;a&#39;)</code> ä¼šæ›´ä¿é™©ä¸€ç‚¹ã€‚</p><h5 id="Demo-2"><a href="#Demo-2" class="headerlink" title="Demo 2"></a>Demo 2</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a starting'</span>);</span><br><span class="line">exports.done = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="built_in">require</span>(<span class="string">'./b'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'in a, b.done ='</span>, b.done);</span><br><span class="line">exports.done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a done'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b starting'</span>);</span><br><span class="line">exports.done = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">const</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'in b, a.done ='</span>, a.done);</span><br><span class="line">exports.done = <span class="literal">true</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b done'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// node a.js</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœï¼š</span></span><br><span class="line"><span class="comment">// a starting</span></span><br><span class="line"><span class="comment">// b starting</span></span><br><span class="line"><span class="comment">// in b, a.done = false</span></span><br><span class="line"><span class="comment">// b done</span></span><br><span class="line"><span class="comment">// in a, b.done = true</span></span><br><span class="line"><span class="comment">// a done</span></span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ CommonJS è§„èŒƒä¸­ï¼Œå½“é‡åˆ° <code>require()</code> è¯­å¥æ—¶ï¼Œä¼šæ‰§è¡Œ <code>require</code> æ¨¡å—ä¸­çš„ä»£ç ï¼Œ<strong>å¹¶ç¼“å­˜æ‰§è¡Œçš„ç»“æœï¼Œå½“ä¸‹æ¬¡å†æ¬¡åŠ è½½æ—¶ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥å–ç¼“å­˜çš„ç»“æœã€‚æ­£å› ä¸ºæ­¤ï¼Œå‡ºç°å¾ªç¯ä¾èµ–æ—¶æ‰ä¸ä¼šå‡ºç°æ— é™å¾ªç¯è°ƒç”¨çš„æƒ…å†µã€‚</strong></p><h4 id="ES6-æ¨¡å—å¾ªç¯ä¾èµ–"><a href="#ES6-æ¨¡å—å¾ªç¯ä¾èµ–" class="headerlink" title="ES6 æ¨¡å—å¾ªç¯ä¾èµ–"></a>ES6 æ¨¡å—å¾ªç¯ä¾èµ–</h4><p><strong>è·Ÿ CommonJS æ¨¡å—ä¸€æ ·ï¼ŒES6 ä¸ä¼šå†å»æ‰§è¡Œé‡å¤åŠ è½½çš„æ¨¡å—ï¼Œåˆç”±äº ES6 åŠ¨æ€è¾“å‡ºç»‘å®šçš„ç‰¹æ€§ï¼Œèƒ½ä¿è¯ ES6 åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½è·å–å…¶å®ƒæ¨¡å—å½“å‰çš„æœ€æ–°å€¼ã€‚</strong></p><h3 id="åŠ¨æ€-import"><a href="#åŠ¨æ€-import" class="headerlink" title="åŠ¨æ€ import()"></a>åŠ¨æ€ import()</h3><p>ES6 æ¨¡å—åœ¨ç¼–è¯‘æ—¶å°±ä¼šé™æ€åˆ†æï¼Œ<strong>ä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œ</strong>ï¼Œæ‰€ä»¥å¯¼è‡´äº†æˆ‘ä»¬æ— æ³•å†™å‡ºåƒä¸‹é¢è¿™æ ·çš„ä»£ç </p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">some</span> condition) &#123;</span><br><span class="line">  <span class="keyword">import</span> a <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">import</span> b <span class="keyword">from</span> <span class="string">'./b'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// <span class="keyword">or</span> </span><br><span class="line"><span class="keyword">import</span> a <span class="keyword">from</span> (str + <span class="string">'b'</span>);</span><br></pre></td></tr></table></figure><p>å› ä¸ºç¼–è¯‘æ—¶é™æ€åˆ†æï¼Œå¯¼è‡´äº†æˆ‘ä»¬æ— æ³•åœ¨æ¡ä»¶è¯­å¥æˆ–è€…æ‹¼æ¥å­—ç¬¦ä¸²æ¨¡å—ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„ç»“æœåœ¨ ES6 æ¨¡å—æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥ åŠ¨æ€å¼•å…¥<code>import()</code> åº”è¿è€Œç”Ÿã€‚</p><p><code>import()</code> å…è®¸ä½ åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å¼•å…¥ ES6 æ¨¡å—ï¼Œæƒ³åˆ°è¿™ï¼Œä½ å¯èƒ½ä¹Ÿæƒ³èµ·äº† <code>require.ensure</code> è¿™ä¸ªè¯­æ³•ï¼Œä½†æ˜¯å®ƒä»¬çš„ç”¨é€”å´æˆªç„¶ä¸åŒçš„ã€‚</p><p><code>require.ensure</code> çš„å‡ºç°æ˜¯ <code>webpack</code> çš„äº§ç‰©ï¼Œå®ƒæ˜¯å› ä¸ºæµè§ˆå™¨éœ€è¦ä¸€ç§å¼‚æ­¥çš„æœºåˆ¶å¯ä»¥ç”¨æ¥å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œä»è€Œå‡å°‘åˆå§‹çš„åŠ è½½æ–‡ä»¶çš„ä½“ç§¯ï¼Œæ‰€ä»¥å¦‚æœåœ¨æœåŠ¡ç«¯çš„è¯ï¼Œ <code>require.ensure</code> å°±æ— ç”¨æ­¦ä¹‹åœ°äº†ï¼Œå› ä¸ºæœåŠ¡ç«¯ä¸å­˜åœ¨å¼‚æ­¥åŠ è½½æ¨¡å—çš„æƒ…å†µï¼Œæ¨¡å—åŒæ­¥è¿›è¡ŒåŠ è½½å°±å¯ä»¥æ»¡è¶³ä½¿ç”¨åœºæ™¯äº†ã€‚ CommonJS æ¨¡å—å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®è®¤æ¨¡å—åŠ è½½ã€‚</p><p>è€Œ <code>import()</code> åˆ™ä¸åŒï¼Œå®ƒä¸»è¦æ˜¯ä¸ºäº†è§£å†³ ES6 æ¨¡å—æ— æ³•åœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—çš„å¼•ç”¨å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ <code>import()</code>ã€‚</p><p>å…ˆæ¥çœ‹ä¸‹å®ƒçš„ç”¨æ³•</p><ul><li>åŠ¨æ€çš„ <code>import()</code> æä¾›ä¸€ä¸ªåŸºäº <code>Promise</code> çš„ <code>API</code></li><li>åŠ¨æ€çš„ <code>import()</code> å¯ä»¥åœ¨è„šæœ¬çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨ <code>import()</code> æ¥å—å­—ç¬¦ä¸²æ–‡å­—ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ„é€ è¯´æ˜ç¬¦</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">const</span> str = <span class="string">'./b'</span>;</span><br><span class="line"><span class="keyword">const</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">if</span>(flag) &#123;</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'./b'</span>).then(<span class="function">(<span class="params">&#123;foo&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(foo);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span>(str).then(<span class="function">(<span class="params">&#123;foo&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> foo = <span class="string">'foo'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// babel-node a.js</span></span><br><span class="line"><span class="comment">// æ‰§è¡Œç»“æœ</span></span><br><span class="line"><span class="comment">// foo</span></span><br><span class="line"><span class="comment">// foo</span></span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ç«¯çš„ <code>import()</code> çš„ç”¨é€”å°±ä¼šå˜å¾—æ›´å¹¿æ³›ï¼Œæ¯”å¦‚ æŒ‰éœ€å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œé‚£ä¹ˆå°±å’Œ <code>require.ensure</code> åŠŸèƒ½ç±»ä¼¼äº†ã€‚</p><p>å› ä¸ºæ˜¯åŸºäº <code>Promise</code> çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¦åŒæ—¶åŠ è½½å¤šä¸ªæ¨¡å—çš„è¯ï¼Œå¯ä»¥æ˜¯ <code>Promise.all</code> è¿›è¡Œå¹¶è¡Œå¼‚æ­¥åŠ è½½ã€‚</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'./a.js'</span>),</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'./b.js'</span>),</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'./c.js'</span>),</span><br><span class="line">]).<span class="keyword">then</span>(<span class="function"><span class="params">([a, &#123;<span class="keyword">default</span>: b&#125;, &#123;c&#125;])</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a.js is loaded dynamically'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b.js is loaded dynamically'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'c.js is loaded dynamically'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ <code>Promise.race</code> æ–¹æ³•ï¼Œå®ƒæ£€æŸ¥å“ªä¸ª <code>Promise</code> è¢«é¦–å…ˆ <code>resolved</code> æˆ– <code>reject</code>ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>import()</code> æ¥æ£€æŸ¥å“ªä¸ª <code>CDN</code> é€Ÿåº¦æ›´å¿«ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CDNs = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'jQuery.com'</span>,</span><br><span class="line">    url: <span class="string">'https://code.jquery.com/jquery-3.1.1.min.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">'googleapis.com'</span>,</span><br><span class="line">    url: <span class="string">'https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`------`</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`jQuery is: <span class="subst">$&#123;<span class="built_in">window</span>.jQuery&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([</span><br><span class="line">  <span class="keyword">import</span>(CDNs[<span class="number">0</span>].url).then(<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(CDNs[<span class="number">0</span>].name, <span class="string">'loaded'</span>)),</span><br><span class="line">  <span class="keyword">import</span>(CDNs[<span class="number">1</span>].url).then(<span class="function"><span class="params">()</span>=&gt;</span><span class="built_in">console</span>.log(CDNs[<span class="number">1</span>].name, <span class="string">'loaded'</span>))</span><br><span class="line">]).then(<span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`jQuery version: <span class="subst">$&#123;<span class="built_in">window</span>.jQuery.fn.jquery&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœä½ è§‰å¾—è¿™æ ·å†™è¿˜ä¸å¤Ÿä¼˜é›…ï¼Œä¹Ÿå¯ä»¥ç»“åˆ <code>async/await</code> è¯­æ³•ç³–æ¥ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> myModule = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">'./myModule.js'</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123;export1, export2&#125; = <span class="keyword">await</span> <span class="keyword">import</span>(<span class="string">'./myModule.js'</span>);</span><br><span class="line">  <span class="keyword">const</span> [module1, module2, module3] =</span><br><span class="line">    <span class="keyword">await</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">      <span class="keyword">import</span>(<span class="string">'./module1.js'</span>),</span><br><span class="line">      <span class="keyword">import</span>(<span class="string">'./module2.js'</span>),</span><br><span class="line">      <span class="keyword">import</span>(<span class="string">'./module3.js'</span>),</span><br><span class="line">    ]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ¨æ€ <code>import()</code> ä¸ºæˆ‘ä»¬æä¾›äº†ä»¥å¼‚æ­¥æ–¹å¼ä½¿ç”¨ ES æ¨¡å—çš„é¢å¤–åŠŸèƒ½ã€‚</p><p>æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚åŠ¨æ€æˆ–æœ‰æ¡ä»¶åœ°åŠ è½½å®ƒä»¬ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«ï¼Œæ›´å¥½åœ°åˆ›å»ºæ›´å¤šä¼˜åŠ¿åº”ç”¨ç¨‹åºã€‚</p><h2 id="webpackä¸­åŠ è½½3ç§æ¨¡å—-è¯­æ³•"><a href="#webpackä¸­åŠ è½½3ç§æ¨¡å—-è¯­æ³•" class="headerlink" title="webpackä¸­åŠ è½½3ç§æ¨¡å— | è¯­æ³•"></a>webpackä¸­åŠ è½½3ç§æ¨¡å— | è¯­æ³•</h2><p>Webpackå…è®¸ä½¿ç”¨ä¸åŒçš„æ¨¡å—ç±»å‹ï¼Œä½†æ˜¯<code>åº•å±‚</code>å¿…é¡»ä½¿ç”¨åŒä¸€ç§å®ç°ã€‚æ‰€æœ‰çš„æ¨¡å—å¯ä»¥ç›´æ¥åœ¨ç›’å¤–è¿è¡Œã€‚</p><ul><li>ES6 æ¨¡å—</li></ul><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MyModule <span class="keyword">from</span> <span class="string">'./MyModule.js'</span>;</span><br></pre></td></tr></table></figure><ul><li>CommonJS(Require)</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var MyModule</span> = require(<span class="string">'./MyModule.js'</span>);</span><br></pre></td></tr></table></figure><ul><li>AMD</li></ul><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'./MyModule.js'</span>], <span class="function"><span class="keyword">function</span> <span class="params">(MyModule)</span> </span>&#123;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;å¯¹ JS å¸¸è§çš„æ¨¡å—åŒ–æ–¹æ¡ˆè¿›è¡Œä»‹ç»å’Œæ¯”è¾ƒâ€”â€”&lt;code&gt;CommonJS&lt;/code&gt; &lt;code&gt;AMD&lt;/code&gt; &lt;code&gt;CMD&lt;/code&gt; &lt;code&gt;ES6 Module&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¯¹ &lt;code&gt;ES6 Module&lt;/code&gt; å’Œ &lt;code&gt;CommonJS&lt;/code&gt; çš„å·®å¼‚è¿›è¡Œå¯¹æ¯”ï¼Œä»‹ç»å¾ªç¯ä¾èµ–å’ŒåŠ¨æ€ &lt;code&gt;import()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Front-End Develop" scheme="https://lbs0912.github.io/categories/Front-End-Develop/"/>
    
    
      <category term="Front-End Developer" scheme="https://lbs0912.github.io/tags/Front-End-Developer/"/>
    
      <category term="JS" scheme="https://lbs0912.github.io/tags/JS/"/>
    
  </entry>
  
  <entry>
    <title>HomePageImage</title>
    <link href="https://lbs0912.github.io/2018/09/12/home-page-img/"/>
    <id>https://lbs0912.github.io/2018/09/12/home-page-img/</id>
    <published>2018-09-12T08:50:21.000Z</published>
    <updated>2019-11-09T15:38:22.409Z</updated>
    
    <content type="html"><![CDATA[<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/my-riding-bike.jpg" alt="my-riding-bike"></div><div class="group-picture-column" style="width: 50%;"><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/football.jpg" alt="football"></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/sjtu-title-3.jpg" alt="sjtu-title-3"></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/front-end-logo-1.jpg" alt="front-end-logo-1"></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/java-c-vs.jpg" alt="java-c-vs123"></div></div></div></div>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;group-picture&quot;&gt;&lt;div class=&quot;group-picture-container&quot;&gt;&lt;div class=&quot;group-picture-row&quot;&gt;&lt;div class=&quot;group-picture-column&quot; style=&quot;widt
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Hexo Blog æ­å»ºä¸é…ç½®</title>
    <link href="https://lbs0912.github.io/2016/03/10/blog-configure/"/>
    <id>https://lbs0912.github.io/2016/03/10/blog-configure/</id>
    <published>2016-03-10T06:35:26.000Z</published>
    <updated>2020-02-24T10:07:47.166Z</updated>
    
    <content type="html"><![CDATA[<ul><li>è®°å½• <code>Hexo Blog</code> çš„æ­å»ºä¸é…ç½®</li><li>å¯¹ <code>Next</code> ä¸»é¢˜è¿›è¡Œå®šåˆ¶ï¼Œæ·»åŠ æœç´¢ï¼Œç»Ÿè®¡ï¼Œç½®é¡¶ï¼ŒåŠ å¯†é˜…è¯»ï¼Œè‡ªå®šä¹‰CSSç­‰</li></ul><a id="more"></a><h2 id="Changelog"><a href="#Changelog" class="headerlink" title="Changelog"></a>Changelog</h2><ul><li>2018/08/23ï¼Œæ’°å†™</li><li>2018/09/04ï¼Œæ•´ç†</li><li>2018/09/25ï¼Œæ·»åŠ  <code>Font Awesome</code>ä½¿ç”¨</li><li>2019/03/18ï¼Œæ·»åŠ æ–‡ç« åŠ å¯†é˜…è¯»</li><li>æœ¬åšå®¢å…¨éƒ¨é…ç½®ä¿¡æ¯å¯åœ¨ <a href="https://github.com/lbs0912/BlogSpace" target="_blank" rel="noopener">BlogSpace | lbs0912-github</a> æŸ¥çœ‹</li></ul><h2 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h2><h3 id="Hexo-åŸºç¡€ä½¿ç”¨"><a href="#Hexo-åŸºç¡€ä½¿ç”¨" class="headerlink" title="Hexo åŸºç¡€ä½¿ç”¨"></a>Hexo åŸºç¡€ä½¿ç”¨</h3><ul><li><a href="https://wsgzao.github.io/post/hexo-guide/" target="_blank" rel="noopener">ä½¿ç”¨GitHubå’ŒHexoæ­å»ºå…è´¹é™æ€Blog</a></li><li><a href="http://ehlxr.me/2016/08/30/%E4%BD%BF%E7%94%A8Hexo%E5%9F%BA%E4%BA%8EGitHub-Pages%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89/" target="_blank" rel="noopener">ä½¿ç”¨HexoåŸºäºGitHub-Pagesæ­å»ºä¸ªäººåšå®¢ï¼ˆä¸‰ï¼‰</a></li></ul><h3 id="Blog-è¿›é˜¶ç®¡ç†"><a href="#Blog-è¿›é˜¶ç®¡ç†" class="headerlink" title="Blog è¿›é˜¶ç®¡ç†"></a>Blog è¿›é˜¶ç®¡ç†</h3><ul><li><a href="https://theme-next.iissnan.com/" target="_blank" rel="noopener">Next Theme å®˜æ–¹é…ç½®æ‰‹å†Œ</a></li><li><a href="http://feg.netease.com/archives/634.html" target="_blank" rel="noopener">å¦‚ä½•æ›´å¥½åœ°å¯¹hexoåšå®¢ç®¡ç†</a></li><li><a href="http://blog.junyu.io/posts/0010-hexo-learn-from-Never-yu.html#background" target="_blank" rel="noopener">Hexo åšå®¢è¿›é˜¶é…ç½®</a></li><li><a href="https://zhuanlan.zhihu.com/p/33616481" target="_blank" rel="noopener">Hexoæ­å»ºçš„GitHubåšå®¢ä¹‹ä¼˜åŒ–å¤§å…¨</a></li><li><a href="https://timding.top/2017/09/18/Hexo-NexT-%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%86%8C-%E4%BA%8C/" target="_blank" rel="noopener">Next Theme ç›¸å†Œé…ç½®</a> </li><li><a href="https://juejin.im/post/5b8bc953518825284910dcdd" target="_blank" rel="noopener">æ­å»ºHexo ç›¸å†Œ</a></li></ul><h3 id="ä¼˜è´¨åšå®¢å‚è€ƒ"><a href="#ä¼˜è´¨åšå®¢å‚è€ƒ" class="headerlink" title="ä¼˜è´¨åšå®¢å‚è€ƒ"></a>ä¼˜è´¨åšå®¢å‚è€ƒ</h3><ul><li><a href="https://sunmengyuan.github.io/garden/" target="_blank" rel="noopener">Sunmengyuan Blog</a></li><li><a href="http://zhangwenli.com/" target="_blank" rel="noopener">ç¾¡è¾™ Blog</a></li><li><a href="https://www.byvoid.com/" target="_blank" rel="noopener">BYvoid</a></li></ul><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><blockquote><p>Hexo is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.   â€” <a href="https://hexo.io/docs/" target="_blank" rel="noopener">Hexo</a></p></blockquote><p>å‚è€ƒ <a href="https://hexo.io/" target="_blank" rel="noopener">Hexoå®˜ç½‘</a>äº†è§£Hexoæ›´å¤šä¿¡æ¯ã€‚</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install </span>hexo-cli -g</span><br><span class="line">mkdir <span class="keyword">Blog </span>&amp;&amp; cd <span class="keyword">Blog</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">hexo </span>init <span class="keyword">blog</span></span><br><span class="line"><span class="keyword">cd </span><span class="keyword">blog</span></span><br><span class="line"><span class="keyword">npm </span><span class="keyword">install</span></span><br><span class="line"><span class="keyword">hexo </span>server</span><br></pre></td></tr></table></figure><p>Hexoç”Ÿæˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹</p><ul><li><code>.deploy</code> :  éœ€è¦éƒ¨ç½²çš„æ–‡ä»¶</li><li><code>node_modules</code></li><li><code>public</code>:  ç”Ÿæˆçš„é™æ€ç½‘é¡µæ–‡ä»¶</li><li><code>scaffolds</code>:  æ¨¡æ¿</li><li><code>source</code>: åšå®¢æ­£æ–‡å’Œå…¶ä»–æºæ–‡ä»¶ï¼Œ404ï¼Œfaviconï¼ŒCNAME<ul><li><code>_drafts</code>:  è‰ç¨¿</li><li><code>_posts</code>:  æ–‡ç« </li></ul></li><li><code>themes</code>:  ä¸»é¢˜</li><li><code>_config.yml</code>:  å…¨å±€é…ç½®æ–‡ä»¶</li><li><code>package.json</code></li></ul><h3 id="å‘½ä»¤è¡Œ"><a href="#å‘½ä»¤è¡Œ" class="headerlink" title="å‘½ä»¤è¡Œ"></a>å‘½ä»¤è¡Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">hexo new page archive</span><br><span class="line"><span class="comment"># åˆ›å»ºåˆ†ç±»ç›®å½•å¹¶åˆå§‹åŒ–index.md  ç­‰åŒäº  hexo n</span></span><br><span class="line"></span><br><span class="line">hexo server    </span><br><span class="line"><span class="comment"># run hexo server  ç­‰åŒäº  hexo s</span></span><br><span class="line"></span><br><span class="line">hexo generate  </span><br><span class="line"><span class="comment"># Generate static files   ç­‰åŒäº  hexo g</span></span><br><span class="line"></span><br><span class="line">hexo deploy   </span><br><span class="line"><span class="comment"># Deploy to remote sites   ç­‰åŒäº  hexo d</span></span><br><span class="line"></span><br><span class="line">hexo clean  <span class="comment"># æ¸…ç©ºç¼“å­˜æ–‡ä»¶</span></span><br><span class="line">hexo -v     <span class="comment"># æŸ¥çœ‹hexoç‰ˆæœ¬</span></span><br><span class="line">hexo <span class="built_in">help</span>   <span class="comment"># æŸ¥çœ‹hexoå¸®åŠ©</span></span><br><span class="line">hexo d -g   <span class="comment"># ç”Ÿæˆéƒ¨ç½²  ç»„åˆå‘½ä»¤</span></span><br><span class="line">hexo s -g   <span class="comment"># ç”Ÿæˆé¢„è§ˆ  ç»„åˆå‘½ä»¤</span></span><br><span class="line">hexo s --debug  <span class="comment"># æœ¬åœ°é¢„è§ˆï¼Œå¹¶å¼€å¯è°ƒè¯•æ¨¡å¼</span></span><br></pre></td></tr></table></figure><p>åœ¨åç»­åšæ–‡å‘å¸ƒæ—¶ï¼Œä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><ul><li><code>hexo clean</code>: æ¸…ç©ºç¼“å­˜æ–‡ä»¶</li><li><code>hexo g</code>: ç¼–è¯‘äº§ç”Ÿé™æ€æ–‡ä»¶</li><li><code>hexo s</code>: æœ¬åœ°é¢„è§ˆï¼Œå¯é€‰</li><li><code>hexo d</code>: éƒ¨ç½²åˆ°æœåŠ¡ç«¯</li></ul><h2 id="Hexo-to-GitHub"><a href="#Hexo-to-GitHub" class="headerlink" title="Hexo to GitHub"></a>Hexo to GitHub</h2><h3 id="åˆ›å»ºGitHubä»“åº“"><a href="#åˆ›å»ºGitHubä»“åº“" class="headerlink" title="åˆ›å»ºGitHubä»“åº“"></a>åˆ›å»ºGitHubä»“åº“</h3><ul><li>åˆ›å»ºä¸€ä¸ªä»“åº“ï¼Œå¹¶å‘½åä¸º <code>YourAccountName.github.io</code>ï¼ˆæ­¤å¤„ä»¥<code>lbs0912.github.io</code>ä¸ºä¾‹ï¼‰</li><li>è®¾ç½®ä»“åº“å±æ€§ï¼Œé€‰æ‹© <code>GitHub Page</code> çš„ä¸»é¢˜ï¼Œè®¿é—® <code>https://lbs0912.github.io/</code>è¿›è¡Œé¢„è§ˆ</li></ul><h3 id="åŒæ­¥å†…å®¹è‡³-GitHub"><a href="#åŒæ­¥å†…å®¹è‡³-GitHub" class="headerlink" title="åŒæ­¥å†…å®¹è‡³ GitHub"></a>åŒæ­¥å†…å®¹è‡³ GitHub</h3><p>åœ¨Hexoå®‰è£…ç›®å½•ä¸‹æ‰“å¼€ <code>_config.yml</code> æ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Deployment</span></span><br><span class="line"><span class="meta">## Docs: https:<span class="comment">//hexo.io/docs/deployment.html</span></span></span><br><span class="line"><span class="symbol">deploy:</span></span><br><span class="line"><span class="symbol">  type:</span> git</span><br><span class="line"><span class="symbol">  repository:</span> https:<span class="comment">//github.com/lbs0912/lbs0912.github.io.git</span></span><br><span class="line"><span class="symbol">  branch:</span> master</span><br></pre></td></tr></table></figure><blockquote><p>è¯¥é…ç½®æ–‡ä»¶éµå¾ª <code>Yaml</code> è¯­æ³•ï¼Œ<code>type:</code> å’Œ <code>git</code> ä¸­é—´éœ€æœ‰ä¸€ç©ºæ ¼ã€‚</p></blockquote><p>å¯¹é™æ€ç½‘é¡µçš„æ ‡é¢˜ï¼Œå­æ ‡é¢˜ï¼Œä»‹ç»ï¼Œæ—¶åŒºç­‰å†…å®¹è¿›è¡Œå¦‚ä¸‹è®¾ç½®ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Liu</span> <span class="string">Baoshuai's</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">Do</span> <span class="string">one</span> <span class="string">thing</span> <span class="string">at</span> <span class="string">a</span> <span class="string">time</span> <span class="string">and</span> <span class="string">do</span> <span class="string">well.</span>  </span><br><span class="line"><span class="attr">description:</span> <span class="string">Record</span> <span class="string">and</span> <span class="string">become</span> <span class="string">better</span> <span class="string">myself.</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">Liu</span> <span class="string">Baoshuai</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-Hans</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="attr">https://lbs0912.github.io/</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink_defaults:</span></span><br><span class="line"></span><br><span class="line"><span class="string">//...</span></span><br><span class="line"></span><br><span class="line"><span class="attr">highlight:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  line_number:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  auto_detect:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  tab_replace:</span></span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œæˆåï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°†æ›´æ–°åçš„å†…å®¹åŒæ­¥è‡³GitHubã€‚</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-deployer-git --save  <span class="comment">#deploy to git  </span></span><br><span class="line"></span><br><span class="line">hexo clean      </span><br><span class="line">hexo generate    <span class="comment"># or hexo g</span></span><br><span class="line">hexo deploy      <span class="comment"># or hexo d</span></span><br></pre></td></tr></table></figure><p>æ‰“å¼€ <code>https://lbs0912.github.io/</code> å¯ä»¥è®¿é—®åšå®¢ç•Œé¢ã€‚</p><h2 id="åŸŸåå’ŒDNS"><a href="#åŸŸåå’ŒDNS" class="headerlink" title="åŸŸåå’ŒDNS"></a>åŸŸåå’ŒDNS</h2><h3 id="åŸŸå"><a href="#åŸŸå" class="headerlink" title="åŸŸå"></a>åŸŸå</h3><p>ç”³è¯·åŸŸåç”¨äºåšå®¢è®¿é—®ã€‚æ­¤å¤„ç”³è¯·åŸŸå <code>liubaoshuai.com</code>ã€‚</p><blockquote><p>å·²ç”³è¯·çš„åŸŸååŒ…æ‹¬</p><ul><li><code>liubaoshuai.com</code></li><li><code>liubaoshuai.tech</code></li></ul></blockquote><h3 id="è®¾ç½®CNAME"><a href="#è®¾ç½®CNAME" class="headerlink" title="è®¾ç½®CNAME"></a>è®¾ç½®CNAME</h3><p>åœ¨Hexoçš„å®‰è£…ç›®å½•ä¸‹çš„ <code>source</code> ç›®å½•ä¸‹ï¼Œåˆ›å»º <code>CNAME</code> æ–‡ä»¶ï¼Œå¹¶å­˜å…¥ç”³è¯·çš„åŸŸå <code>liubaoshuai.com</code>ã€‚</p><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h3><p>æ¨èä½¿ç”¨ <a href="https://www.dnspod.cn/" target="_blank" rel="noopener">DNSPod</a> è¿›è¡ŒDNSè§£æã€‚</p><p>æ­¤å¤„ï¼Œç”±äºåŸŸå <code>http://liubaoshuai.com/</code> åœ¨é˜¿é‡Œäº‘è´­ä¹°ï¼Œæ•…ä½¿ç”¨é˜¿é‡Œäº‘çš„ DNS äº‘è§£æã€‚DNS ç•Œé¢è¿›è¡Œå¦‚ä¸‹è®¾ç½®ã€‚</p><table><thead><tr><th>è®°å½•ç±»å‹</th><th>ä¸»æœºè®°å½•</th><th>è®°å½•å€¼</th></tr></thead><tbody><tr><td>CNAME</td><td>www</td><td>lbs0912.github.io</td></tr><tr><td>A</td><td>@</td><td>192.30.252.154</td></tr><tr><td>A</td><td>@</td><td>192.30.252.153</td></tr></tbody></table><blockquote><p><a href="https://help.github.com/en/articles/troubleshooting-custom-domains#dns-configuration-errors" target="_blank" rel="noopener">DNS Update | github</a></p></blockquote><p>å…¶ä¸­Aè®°å½•ä¸ºGitHub Pageæä¾›çš„IPåœ°å€ï¼Œå¯ä»¥è®¿é—® <a href="https://help.github.com/articles/github-s-ip-addresses/" target="_blank" rel="noopener">GitHub Page</a> æŸ¥è¯¢æœ€æ–° <code>IP</code> åœ°å€ã€‚</p><p>æœ€åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå¹¶è®¿é—® <code>liubaoshuai.com</code> æŸ¥çœ‹ä¿®æ”¹æ•ˆæœã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  </span><br><span class="line">hexo g    <span class="comment"># or hexo generate</span></span><br><span class="line">hexo d    <span class="comment"># or hexo deploy</span></span><br></pre></td></tr></table></figure><ul><li>è‡³æ­¤ï¼Œä¾¿å¯é€šè¿‡è®¿é—® <code>liubaoshuai.com</code> æ¥è®¿é—®è‡ªå·±çš„åšå®¢ã€‚</li><li>è®¿é—® <code>lbs0912.github.io</code>ï¼Œä¼šè¢«é‡å®šå‘åˆ° <code>liubaoshuai.com</code> ç½‘å€ã€‚</li></ul><h2 id="Blog-é…ç½®"><a href="#Blog-é…ç½®" class="headerlink" title="Blog é…ç½®"></a>Blog é…ç½®</h2><ul><li><strong><a href="https://theme-next.iissnan.com/" target="_blank" rel="noopener">Next Theme å®˜æ–¹é…ç½®æ‰‹å†Œ</a></strong></li></ul><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><p>å®‰è£…Hexoæ’ä»¶æ¥å¢å¼ºHexoæ•ˆæœå’Œç¾åŒ–é¡µé¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-deployer-git --save  <span class="comment">#deploy to git</span></span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-stylus --save</span><br><span class="line">npm install hexo-generator-feed --save   <span class="comment"># RSS</span></span><br><span class="line">npm install hexo-generator-sitemap --save <span class="comment">#sitemap</span></span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ Metaä¿¡æ¯"><a href="#æ·»åŠ Metaä¿¡æ¯" class="headerlink" title="æ·»åŠ Metaä¿¡æ¯"></a>æ·»åŠ Metaä¿¡æ¯</h3><p><code>Hexo</code> é»˜è®¤çš„æ–‡ä»¶å¤´åªæœ‰<code>title</code>ã€<code>date</code>ã€<code>tags</code> å±æ€§ï¼Œç”Ÿæˆçš„ <code>html</code> ç¼ºå°‘ <code>Meta</code>ä¿¡æ¯ï¼Œä¸åˆ©äºæœç´¢å¼•æ“æ”¶å½•ã€‚å»ºè®®è‡ªè¡Œåœ¨æ–‡ä»¶å¤´ä¸­æ·»åŠ  <code>keywords</code> å’Œ <code>description</code> å±æ€§ã€‚<code>categories</code> å±æ€§å¯è‡ªè¡Œé€‰æ‹©æ˜¯å¦æ·»åŠ ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="comment">##æ–‡ç« æ ‡é¢˜</span></span><br><span class="line"><span class="attr">date:</span> <span class="comment">##æ—¶é—´ï¼Œæ ¼å¼ä¸º YYYY-MM-DD HH:mm:ss</span></span><br><span class="line"><span class="attr">categories:</span> <span class="comment">##åˆ†ç±»</span></span><br><span class="line"><span class="attr">tags:</span> <span class="comment">##æ ‡ç­¾ï¼Œå¤šæ ‡ç­¾æ ¼å¼ä¸º [tag1,tag2,...]</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="comment">##æ–‡ç« å…³é”®è¯ï¼Œå¤šå…³é”®è¯æ ¼å¼ä¸º keyword1,keywords2,...</span></span><br><span class="line"><span class="attr">description:</span> <span class="comment">##æ–‡ç« æè¿°</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>æ–‡ä»¶å¤´æ¨¡æ¿å¦‚ä¸Šæ‰€ç¤ºï¼Œä¸€ä¸ªæ–‡ä»¶å¤´å®ä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« </span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2015</span><span class="bullet">-03</span><span class="bullet">-21</span> <span class="number">15</span><span class="string">:13:48</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">Hexo</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[Hexo,æµ‹è¯•]</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">Hexo,æ–‡ç« ,æµ‹è¯•</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">è¿™æ˜¯ä¸€ç¯‡æµ‹è¯•æ–‡ç« ï¼Œç”¨äºæµ‹è¯•Hexoæ–‡ç« æ–‡ä»¶å¤´ã€‚</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šä¸ªæ ‡ç­¾ä¹Ÿå¯é‡‡ç”¨å¦‚ä¸‹å†™æ³•</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">tags:</span></span><br><span class="line">  - Testing Tag</span><br><span class="line">  - Another Tag</span><br></pre></td></tr></table></figure><h3 id="åˆ†é¡µåŠŸèƒ½"><a href="#åˆ†é¡µåŠŸèƒ½" class="headerlink" title="åˆ†é¡µåŠŸèƒ½"></a>åˆ†é¡µåŠŸèƒ½</h3><p>åœ¨ Hexo å®‰è£…ç›®å½•ä¸‹æ‰“å¼€ <code>_config.yml</code>ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œ ä¸ºåšå®¢æ·»åŠ åˆ†é¡µåŠŸèƒ½ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Plugins</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line"><span class="attr">  path:</span> <span class="string">''</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">8</span> <span class="comment">##é¦–é¡µé»˜è®¤8ç¯‡æ–‡ç« æ ‡é¢˜ï¼Œå¦‚æœå€¼ä¸º0ä¸åˆ†é¡µ</span></span><br><span class="line"><span class="attr">  order_by:</span> <span class="bullet">-date</span></span><br><span class="line"><span class="attr">archive_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">8</span> <span class="comment">##å½’æ¡£é¡µé¢é»˜è®¤8ç¯‡æ–‡ç« æ ‡é¢˜ï¼Œå¦‚æœå€¼ä¸º0ä¸åˆ†é¡µ</span></span><br><span class="line"><span class="attr">  yearly:</span> <span class="literal">true</span> <span class="comment">##ç”Ÿæˆå¹´è§†å›¾</span></span><br><span class="line"><span class="attr">  monthly:</span> <span class="literal">true</span> <span class="comment">##ç”Ÿæˆæœˆè§†å›¾</span></span><br><span class="line"><span class="attr">tag_generator:</span></span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">8</span> <span class="comment">##æ ‡ç­¾é¡µé¢é»˜è®¤8ç¯‡æ–‡ç« ï¼Œå¦‚æœå€¼ä¸º0ä¸åˆ†é¡µ</span></span><br><span class="line"><span class="attr">category_generator:</span> </span><br><span class="line"><span class="attr">  per_page:</span> <span class="number">8</span> <span class="comment">##åˆ†ç±»é¡µé¢é»˜è®¤8ç¯‡æ–‡ç« ï¼Œå¦‚æœå€¼ä¸º0ä¸åˆ†é¡µ</span></span><br></pre></td></tr></table></figure><h3 id="Hexo-ä¸»é¢˜é…ç½®"><a href="#Hexo-ä¸»é¢˜é…ç½®" class="headerlink" title="Hexo ä¸»é¢˜é…ç½®"></a>Hexo ä¸»é¢˜é…ç½®</h3><p>è®¿é—®å¦‚ä¸‹é“¾æ¥ï¼ŒæŸ¥çœ‹ Hexo ä¸»é¢˜åˆ—è¡¨</p><ul><li><a href="https://hexo.io/themes/" target="_blank" rel="noopener">Hexo Themes List</a></li><li><a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="noopener">Hexo Themes List on GitHub</a> </li></ul><h4 id="Next-Theme"><a href="#Next-Theme" class="headerlink" title="Next Theme"></a>Next Theme</h4><ul><li>å‚è€ƒ <a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">Next Theme | github</a> å®ŒæˆåŸºæœ¬é…ç½®ã€‚</li><li><a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">Next Theme Configure</a></li><li>å‚è€ƒ <a href="https://segmentfault.com/a/1190000009544924" target="_blank" rel="noopener">Nextä¸»é¢˜ç¾åŒ–è¿›é˜¶ | Segmentfault</a> è¿›è¡Œå®šåˆ¶ã€‚</li><li>Install</li></ul><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>cd hexo</span><br><span class="line"><span class="variable">$ </span>git clone <span class="symbol">https:</span>/<span class="regexp">/github.com/theme</span>-<span class="keyword">next</span>/hexo-theme-<span class="keyword">next</span> themes/<span class="keyword">next</span></span><br></pre></td></tr></table></figure><ul><li>å°†ä¸‹è½½å¥½çš„ <code>Huno</code> ä¸»é¢˜æ”¾ç½®åœ¨ <code>blog/themes</code> ç›®å½•ä¸‹ã€‚ä¿®æ”¹ <code>Hexo</code> é…ç½®æ–‡ä»¶<code>_config.xml</code></li></ul><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: <span class="keyword">next</span></span><br></pre></td></tr></table></figure><ul><li>Update</li></ul><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>cd themes/<span class="keyword">next</span></span><br><span class="line"><span class="variable">$ </span>git pull</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®ç•Œé¢ä¸ªäººå¤´åƒå’Œç½‘é¡µæ”¶è—å¤¹å›¾æ ‡</li></ul><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># Site favicon</span></span><br><span class="line"><span class="meta">#favicon: /favicon.png</span></span><br><span class="line">favicon: https:<span class="comment">//image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># Site logo</span></span><br><span class="line"><span class="meta">#logo: /avatar.png</span></span><br><span class="line">logo: https:<span class="comment">//image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg</span></span><br></pre></td></tr></table></figure><ul><li>ä½œå“è®¾è®¡å‚è€ƒç½‘ç«™<ul><li><a href="https://dribbble.com/" target="_blank" rel="noopener">Dribbble</a></li><li><a href="https://www.behance.net/" target="_blank" rel="noopener">Behance</a></li></ul></li></ul><h4 id="Huno-Theme"><a href="#Huno-Theme" class="headerlink" title="Huno Theme"></a>Huno Theme</h4><p>å‚è€ƒ <a href="https://github.com/letiantian/huno" target="_blank" rel="noopener">Huno Theme | github</a> å®ŒæˆåŸºæœ¬é…ç½®ã€‚</p><h3 id="é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡"><a href="#é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡" class="headerlink" title="é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡"></a>é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡</h3><ul><li><a href="https://theme-next.iissnan.com/getting-started.html#third-party-services" target="_blank" rel="noopener">Next Theme å®˜æ–¹é…ç½®æ‰‹å†Œ</a></li></ul><h4 id="ç™¾åº¦ç»Ÿè®¡"><a href="#ç™¾åº¦ç»Ÿè®¡" class="headerlink" title="ç™¾åº¦ç»Ÿè®¡"></a>ç™¾åº¦ç»Ÿè®¡</h4><ul><li>ç”¨æˆ·åï¼š15821929853</li><li>å¯†ç ï¼šAb758123aB</li><li>ç™¾åº¦ç»Ÿè®¡-è„šæœ¬ IDï¼š17082ee15df20dad9762c5512f336eb2</li><li>ç™»é™† <a href="https://tongji.baidu.com/web/homepage/index?castk=df83afg752126b970d267" target="_blank" rel="noopener">ç™¾åº¦ç»Ÿè®¡</a> ç½‘ç«™ï¼Œå¯ä»¥æŸ¥é˜…ç½‘ç«™è®¿é—®é‡</li></ul><h4 id="é˜…è¯»æ¬¡æ•°ç»Ÿè®¡-LeanCloud"><a href="#é˜…è¯»æ¬¡æ•°ç»Ÿè®¡-LeanCloud" class="headerlink" title="é˜…è¯»æ¬¡æ•°ç»Ÿè®¡ LeanCloud"></a>é˜…è¯»æ¬¡æ•°ç»Ÿè®¡ LeanCloud</h4><ul><li><a href="https://leancloud.cn/" target="_blank" rel="noopener">leancloud</a></li><li><a href="https://notes.doublemine.me/2015-10-21-%E4%B8%BANexT%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E9%87%8F%E7%BB%9F%E8%AE%A1%E5%8A%9F%E8%83%BD.html#%E9%85%8D%E7%BD%AELeanCloud" target="_blank" rel="noopener">LeanCloud é…ç½®</a></li><li>ä½¿ç”¨ <code>Github</code> ç¬¬ä¸‰æ–¹è´¦ç™»å½• <code>leancloud</code></li><li>APP IDï¼šgksxcfwJlMV3zkhz1pQc7pl2-gzGzoHsz</li><li>APP Keyï¼škjOanp812G7TIGMSQpPCVIhj</li></ul><h4 id="æœç´¢åŠŸèƒ½"><a href="#æœç´¢åŠŸèƒ½" class="headerlink" title="æœç´¢åŠŸèƒ½"></a>æœç´¢åŠŸèƒ½</h4><ul><li><a href="https://theme-next.iissnan.com/third-party-services.html#algolia-search" target="_blank" rel="noopener">æœç´¢æœåŠ¡é…ç½®</a></li></ul><p><code>NexT</code> ä¸»é¢˜æ”¯æŒé›†æˆ <code>Swiftype</code>ï¼Œ<code>å¾®æœç´¢</code>ï¼Œ<code>Local Search</code> å’Œ <code>Algolia</code> æœç´¢åŠŸèƒ½ã€‚<code>Swiftype</code> å’Œ <code>Algolia</code> å‡æ”¶è´¹ï¼Œå¯ä»¥é‡‡ç”¨ <code>Hexo</code> æä¾›çš„ <code>Local Search</code> æœç´¢æœåŠ¡ï¼Œå…¶åŸç†æ˜¯é€šè¿‡ <code>hexo-generator-searchdb</code> æ’ä»¶åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ª <code>search.xml</code> æ–‡ä»¶ï¼Œæœç´¢çš„æ—¶å€™ä»è¿™ä¸ªæ–‡ä»¶ä¸­æ ¹æ®å…³é”®å­—æ£€ç´¢å‡ºç›¸åº”çš„é“¾æ¥ã€‚</p><h4 id="åšæ–‡åˆ†äº«åŠŸèƒ½"><a href="#åšæ–‡åˆ†äº«åŠŸèƒ½" class="headerlink" title="åšæ–‡åˆ†äº«åŠŸèƒ½"></a>åšæ–‡åˆ†äº«åŠŸèƒ½</h4><ul><li><p><a href="https://blog.csdn.net/lanuage/article/details/78991798" target="_blank" rel="noopener">hexo nextä¸»é¢˜ä¸ºåšå®¢æ·»åŠ åˆ†äº«åŠŸèƒ½</a></p></li><li><p>ç™¾åº¦åˆ†äº«</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidushare:</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">button</span>  <span class="comment"># éœ€è¦è®¾ç½® type: button </span></span><br><span class="line"><span class="attr">  baidushare:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>likely åˆ†äº«</p></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">likely:</span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  look:</span> <span class="string">light</span>  <span class="comment"># available values: normal, light, small, big</span></span><br><span class="line"><span class="attr">  networks:</span></span><br><span class="line"><span class="attr">    twitter:</span> <span class="string">Tweet</span></span><br><span class="line"><span class="attr">    facebook:</span> <span class="string">Share</span></span><br><span class="line"><span class="attr">    linkedin:</span> <span class="string">Link</span></span><br><span class="line">    <span class="comment">#gplus: Plus</span></span><br><span class="line">    <span class="comment">#vkontakte: Share</span></span><br><span class="line">    <span class="comment">#odnoklassniki: Class</span></span><br><span class="line">    <span class="comment">#telegram: Send</span></span><br><span class="line"><span class="attr">    whatsapp:</span> <span class="string">Send</span></span><br><span class="line">    <span class="comment">#pinterest: Pin</span></span><br></pre></td></tr></table></figure><h4 id="Disqus-è¯„è®º"><a href="#Disqus-è¯„è®º" class="headerlink" title="Disqus è¯„è®º"></a>Disqus è¯„è®º</h4><ul><li><p>ä½¿ç”¨è°·æ­Œè´¦æˆ·ç™»å½•Disqus</p></li><li><p>shortNameï¼šliubaoshuaiBlog</p></li><li><p>ä¹‹åï¼Œåœ¨æ’°å†™æ–‡ç« æ—¶ï¼Œé¡¶éƒ¨ä¿¡æ¯æ·»åŠ  <code>comments</code> å­—æ®µå¯æ§åˆ¶æ˜¯å¦å±•ç¤ºè¯„è®º</p></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Demo</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2017</span><span class="bullet">-03</span><span class="bullet">-10</span> <span class="number">14</span><span class="string">:35:26</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">Demo</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[LeetCode,Programing,Algorithm]</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">LeetCode</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">top:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="404é¡µé¢"><a href="#404é¡µé¢" class="headerlink" title="404é¡µé¢"></a>404é¡µé¢</h3><ul><li>æ¨èä½¿ç”¨ <a href="http://www.qq.com/404/" target="_blank" rel="noopener">è…¾è®¯å…¬ç›Š404</a>ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ 404 é¡µé¢ï¼Œä¾‹å¦‚æœ¬åšå®¢é‡‡ç”¨çš„ 404 é¡µé¢ã€‚</li><li>åœ¨ <code>blog/source</code> ç›®å½•ä¸‹åˆ›å»º <code>404.html</code>ï¼Œå¼•å…¥è…¾è®¯å…¬ç›Š404è„šæœ¬ã€‚(è¯¥æ•ˆæœéœ€è¦éƒ¨ç½²åˆ°æœåŠ¡å™¨æ‰èƒ½é¢„è§ˆï¼Œæœ¬åœ°æœåŠ¡æ— æ³•é¢„è§ˆ)</li></ul><h3 id="Fork-me-on-GitHub"><a href="#Fork-me-on-GitHub" class="headerlink" title="Fork me on GitHub"></a>Fork me on GitHub</h3><p>åœ¨ <a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="noopener">Fork me on GitHub Theme</a> ä¸Šè·å–æºä»£ç ï¼ˆæœ‰å¤šç§æ ·å¼å¯é€‰ï¼‰ï¼Œå¹¶å°† <code>&lt;a&gt;</code> æ ‡ç­¾çš„ <code>href</code> å±æ€§çš„é“¾æ¥ä¿®æ”¹ä¸ºè‡ªå·±çš„ <a href="https://github.com/lbs0912" target="_blank" rel="noopener">GitHub-lbs0912</a> åœ°å€ã€‚</p><p>ä»¥ Huno ä¸»é¢˜ä¸ºä¾‹ï¼Œå°†ä¸Šè¿°ä»£ç æ·»åŠ åˆ° <code>./themes/huno/layout/_layout.ejs</code> æ–‡ä»¶çš„<code>&lt;body&gt;</code> æ ‡ç­¾å†…å³å¯ã€‚</p><blockquote><p>ä¿®æ”¹æºä»£ç ä¸­<code>img</code>æ ‡ç­¾çš„æ ·å¼ä¸º<code>position:fixed</code>ï¼Œå¯ä»¥å°†<code>Fork me on GitHub</code>å›ºå®šäºæµè§ˆå™¨ç•Œé¢é¡¶éƒ¨ã€‚</p></blockquote><h3 id="èƒŒæ™¯éŸ³ä¹æ’­æ”¾è®¾ç½®"><a href="#èƒŒæ™¯éŸ³ä¹æ’­æ”¾è®¾ç½®" class="headerlink" title="èƒŒæ™¯éŸ³ä¹æ’­æ”¾è®¾ç½®"></a>èƒŒæ™¯éŸ³ä¹æ’­æ”¾è®¾ç½®</h3><p>å‚è€ƒ <a href="http://weqeo.com/2016/10/11/Hexo%E4%B8%AD%E6%92%AD%E6%94%BE%E7%BD%91%E6%98%93%E4%BA%91%E9%9F%B3%E4%B9%90%E7%9A%84%E5%AE%9E%E8%B7%B5/" target="_blank" rel="noopener">Hexoä¸­æ’­æ”¾ç½‘æ˜“äº‘éŸ³ä¹çš„å®è·µ</a> å®Œæˆè¯¥éƒ¨åˆ†è®¾ç½®ã€‚</p><p>ä»¥ Huno ä¸»é¢˜ä¸ºä¾‹ï¼Œå°†ç½‘æ˜“äº‘éŸ³ä¹æ’­æ”¾å¤–é“¾æ”¾ç½®åœ¨ <code>./themes/next/layout/_macro/sidebar.swig</code> æ–‡ä»¶ä¸­ã€‚</p><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (!is_home()) &#123; %&gt; </span><br><span class="line">    &lt;iframe frameborder="no" border="0" marginwidth="0" style="margin-top: 40px;" marginheight="0" width=330 height=86  src="//music.163.com/outchain/player?type=2&amp;id=394653&amp;auto=0&amp;height=66"&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h3 id="ä¸º-Blog-æ·»åŠ -README"><a href="#ä¸º-Blog-æ·»åŠ -README" class="headerlink" title="ä¸º Blog æ·»åŠ  README"></a>ä¸º Blog æ·»åŠ  README</h3><p>æœ¬åšå®¢ä¸­ï¼Œä½¿ç”¨äº† <code>Github</code> æœåŠ¡å™¨ä½œä¸ºæ‰˜ç®¡ï¼Œåšå®¢å†…å®¹è¢«å­˜å‚¨åˆ° <code>Github</code> ä¸­ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéœ€è¦ç»™ <code>Github</code> ä¸­æ¯ä¸€ä¸ªé¡¹ç›®æ·»åŠ  <code>README.md</code> æ–‡ä»¶è¿›è¡Œè¯´æ˜ã€‚</p><p>ä½†æ˜¯ï¼Œåœ¨ <code>Blog</code> é¡¹ç›®ä¸­ï¼Œåœ¨ <code>blog\source</code> ç›®å½•ä¸‹åˆ›å»ºçš„ <code>README.md</code> æ–‡ä»¶ï¼Œä¼šè¢« <code>hexo</code> è§£ææ‰ï¼Œå¹¶ä¸ä¼šè¢«éƒ¨ç½²åˆ° <code>Github</code> æœåŠ¡å™¨ä¸Šã€‚</p><h4 id="æ–¹å¼1"><a href="#æ–¹å¼1" class="headerlink" title="æ–¹å¼1"></a>æ–¹å¼1</h4><ul><li>åœ¨åšå®¢ <code>Source</code> ç›®å½•ä¸‹åˆ›å»º <code>README.md</code> æ–‡ä»¶</li><li>ä¿®æ”¹åšå®¢é…ç½®æ–‡ä»¶çš„ <code>skip_render</code> å­—æ®µå¦‚ä¸‹ </li></ul><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">skip_render: <span class="module-access"><span class="module"><span class="identifier">README</span>.</span></span>md</span><br></pre></td></tr></table></figure><h4 id="æ–¹å¼2"><a href="#æ–¹å¼2" class="headerlink" title="æ–¹å¼2"></a>æ–¹å¼2</h4><p>æ­£ç¡®çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ã€‚</p><ul><li>æŠŠ <code>README.md</code> æ–‡ä»¶çš„åç¼€åæ”¹æˆ <code>.MDOWN</code></li><li>ä»å°†è¯¥æ–‡ä»¶ç½®äº <code>blog/source</code> æ–‡ä»¶å¤¹</li><li>è¿™æ ·å¯ä»¥ä¿è¯ <code>hexo</code> ä¸ä¼šè§£æè¯¥æ–‡ä»¶ï¼ŒåŒæ—¶ <code>Github</code> ä¹Ÿä¼šå°†å…¶ä½œä¸º<code>.MD</code> æ–‡ä»¶è§£æ</li></ul><h3 id="èƒŒæ™¯æ•ˆæœä¼˜åŒ–"><a href="#èƒŒæ™¯æ•ˆæœä¼˜åŒ–" class="headerlink" title="èƒŒæ™¯æ•ˆæœä¼˜åŒ–"></a>èƒŒæ™¯æ•ˆæœä¼˜åŒ–</h3><p>æ­¤å¤„ä»‹ç»åšå®¢èƒŒæ™¯åŠ¨æ€æ•ˆæœå›¾çš„æ·»åŠ ï¼Œä»¥åŠé¼ æ ‡ç‚¹å‡»ç•Œé¢å‡ºç°å¿ƒå½¢å›¾æ¡ˆçš„ç›¸å…³è®¾ç½®ã€‚</p><ul><li>ä¸‹è½½ <a href="https://github.com/lbs0912/lbs0912.github.io/blob/master/js/src/love.js" target="_blank" rel="noopener">love.js</a> å’Œ <a href="https://github.com/lbs0912/lbs0912.github.io/blob/master/js/src/particle.js" target="_blank" rel="noopener">particle.js</a> æ–‡ä»¶ï¼Œå°†å…¶å­˜æ”¾è‡³<code>\themes\huno\source\js\src</code>ç›®å½•ä¸‹ã€‚</li><li>åœ¨ <code>\themes\huno\layout\layout.ejs</code> æ–‡ä»¶æœ«å°¾ï¼Œå¼•å…¥ä¸Šè¿° 2 ä¸ª js æ–‡ä»¶ã€‚</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- èƒŒæ™¯åŠ¨ç”» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/particle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- é¡µé¢ç‚¹å‡»å°çº¢å¿ƒ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/love.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="åšæ–‡ç½®é¡¶"><a href="#åšæ–‡ç½®é¡¶" class="headerlink" title="åšæ–‡ç½®é¡¶"></a>åšæ–‡ç½®é¡¶</h3><ul><li>ä¿®æ”¹ <code>./node_modules/hexo-generator-index/lib/generator.js</code> æ–‡ä»¶çš„</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var posts</span> = locals.posts.sort(config.index_generator.order_by);</span><br></pre></td></tr></table></figure><p>ä¸º</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var posts = locals.posts;</span><br><span class="line">    posts.data = posts.data.sort(function(a, b) &#123;</span><br><span class="line">        <span class="keyword">if</span>(a.<span class="built_in">top</span> &amp;&amp; b.<span class="built_in">top</span>) &#123; // ä¸¤ç¯‡æ–‡ç« <span class="built_in">top</span>éƒ½æœ‰å®šä¹‰</span><br><span class="line">            <span class="keyword">if</span>(a.<span class="built_in">top</span> == b.<span class="built_in">top</span>) <span class="keyword">return</span> b.date - a.date; // è‹¥<span class="built_in">top</span>å€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">return</span> b.<span class="built_in">top</span> - a.<span class="built_in">top</span>; // å¦åˆ™æŒ‰ç…§<span class="built_in">top</span>å€¼é™åºæ’</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(a.<span class="built_in">top</span> &amp;&amp; !b.<span class="built_in">top</span>) &#123; // ä»¥ä¸‹æ˜¯åªæœ‰ä¸€ç¯‡æ–‡ç« <span class="built_in">top</span>æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰<span class="built_in">top</span>çš„æ’åœ¨å‰é¢ï¼ˆè¿™é‡Œç”¨å¼‚æˆ–æ“ä½œå±…ç„¶ä¸è¡Œ<span class="number">233</span>ï¼‰</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(!a.<span class="built_in">top</span> &amp;&amp; b.<span class="built_in">top</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> b.date - a.date; // éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæ’</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><ul><li>è®¾ç½®æ–‡ç« ç½®é¡¶ï¼šåœ¨æ–‡ä»¶çš„å¤´éƒ¨æ·»åŠ  <code>top</code> å€¼ï¼Œ<code>top</code> å€¼è¶Šå¤§ï¼Œæ–‡ç« è¶Šé å‰ã€‚è‹¥ä¸¤ç¯‡æ–‡ç« çš„ <code>top</code> å€¼ä¸€æ ·ï¼Œåˆ™æŒ‰ç…§é»˜è®¤çš„æ—¥æœŸæ’åºã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Webpack</span> <span class="string">Notes</span> <span class="bullet">-</span> <span class="number">1</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2017</span><span class="bullet">-01</span><span class="bullet">-19</span> <span class="number">11</span><span class="string">:15:48</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">Front-end</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[Webpack,Front-end]</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">webpack,front-end</span> </span><br><span class="line"><span class="attr">top:</span> <span class="number">5</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="åšæ–‡æ”¶èµ·æ·»åŠ "><a href="#åšæ–‡æ”¶èµ·æ·»åŠ " class="headerlink" title="åšæ–‡æ”¶èµ·æ·»åŠ "></a>åšæ–‡æ”¶èµ·æ·»åŠ </h3><p>åœ¨ <code>.MD</code> æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹æ ‡è¯†ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--more--&gt;</span></span><br></pre></td></tr></table></figure><ul><li>è¯¥æ ‡è¯†å‰çš„ä¼šåœ¨åšå®¢é¦–é¡µå±•ç¤ºï¼ˆå¯ä»¥åœ¨è¯¥æ ‡è¯†å‰æ·»åŠ ç®€è¦è¯´æ˜ï¼‰</li><li>è¯¥æ ‡è¯†åçš„åšæ–‡ä¼šè¢«æ”¶èµ·æŠ˜å ã€‚</li></ul><h3 id="æ–‡ç« åŠ å¯†é˜…è¯»"><a href="#æ–‡ç« åŠ å¯†é˜…è¯»" class="headerlink" title="æ–‡ç« åŠ å¯†é˜…è¯»"></a>æ–‡ç« åŠ å¯†é˜…è¯»</h3><ul><li><p>Ref - <a href="https://segmentfault.com/a/1190000009544924#articleHeader23" target="_blank" rel="noopener">nextä¸»é¢˜ - æ–‡ç« åŠ å¯†é˜…è¯»</a></p></li><li><p>æ‰“å¼€ <code>themes-&gt;next-&gt;layout-&gt;_partials-&gt;head.swig</code> æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç </p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span> (<span class="string">'&#123;&#123; page.password &#125;&#125;'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (prompt(<span class="string">'è¯·è¾“å…¥æ–‡ç« å¯†ç '</span>) !== <span class="string">'&#123;&#123; page.password &#125;&#125;'</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'å¯†ç é”™è¯¯ï¼'</span>);</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">if</span> (history.length === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="actionscript">                    location.replace(<span class="string">"http://xxxxxxx.xxx"</span>); <span class="comment">// è¿™é‡Œæ›¿æ¢æˆä½ çš„é¦–é¡µ</span></span></span><br><span class="line"><span class="actionscript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">                    history.back();</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>ä¹‹åï¼Œåœ¨æ’°å†™æ–‡ç« æ—¶ï¼Œé¡¶éƒ¨ä¿¡æ¯æ·»åŠ  <code>password</code> å­—æ®µå³å¯</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Demo</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2017</span><span class="bullet">-03</span><span class="bullet">-10</span> <span class="number">14</span><span class="string">:35:26</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">Demo</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[LeetCode,Programing,Algorithm]</span></span><br><span class="line"><span class="attr">keywords:</span> <span class="string">LeetCode</span></span><br><span class="line"><span class="attr">toc:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">password:</span> <span class="number">123456</span></span><br><span class="line"><span class="attr">top:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="å®šåˆ¶CSS"><a href="#å®šåˆ¶CSS" class="headerlink" title="å®šåˆ¶CSS"></a>å®šåˆ¶CSS</h3><ul><li>åœ¨ <code>.\themes\next\source\css\_custom\custom.styl</code> æ–‡ä»¶ä¸­ï¼Œæ·»åŠ è‡ªå®šä¹‰CSSæ ·å¼ã€‚</li></ul><p>å®šåˆ¶CSSæ ·å¼åï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ•ˆæœã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-blue"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ï¼Œ </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-purple"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-green"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-yellow"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-red"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-yellow"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-green"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-blue"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-left-purple"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-right-red"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-right-yellow"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-right-green"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-right-blue"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-right-purple"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-red"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-yellow"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-green"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-blue"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"div-border-top-purple"</span>&gt;</span>Demo<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"yu-1"</span>&gt;</span>åŠ¨ç”»<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"download"</span> <span class="attr">href</span>=<span class="string">"https://git-scm.com/download/win"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-download"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span> Download Now<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">class</span>=<span class="string">"blockquote-center"</span>&gt;</span>å¼•ç”¨å±…ä¸­æ•ˆæœ<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="é“¾æ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹"><a href="#é“¾æ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹" class="headerlink" title="é“¾æ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹"></a>é“¾æ¥æ–‡æœ¬æ ·å¼ä¿®æ”¹</h4><p>å°†é“¾æ¥æ–‡æœ¬è®¾ç½®ä¸ºè“è‰²ï¼Œé¼ æ ‡åˆ’è¿‡æ—¶æ–‡å­—é¢œè‰²åŠ æ·±ï¼Œå¹¶æ˜¾ç¤ºä¸‹åˆ’çº¿ã€‚æ‰“å¼€<code>themes\next\source\css\_custom\custom.styl</code> æ–‡ä»¶ ï¼Œæ·»åŠ å¦‚ä¸‹ <code>css</code> æ ·å¼</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0477ab</span>;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ–‡å­—å¢åŠ èƒŒæ™¯è‰²å—"><a href="#æ–‡å­—å¢åŠ èƒŒæ™¯è‰²å—" class="headerlink" title="æ–‡å­—å¢åŠ èƒŒæ™¯è‰²å—"></a>æ–‡å­—å¢åŠ èƒŒæ™¯è‰²å—</h4><ul><li><p>å‚è€ƒ <a href="http://blog.junyu.pro/posts/0010-hexo-learn-from-Never-yu.html#background" target="_blank" rel="noopener">Hexoåšå®¢è®¾ç½®è¿›é˜¶</a> å®Œæˆè¯¥éƒ¨åˆ†çš„è®¾ç½®ã€‚</p></li><li><p>ä½¿ç”¨ <code>inline-blue</code>, <code>inline-purple</code>, <code>inline-yellow</code>,<code>inline-green</code> å¯ä»¥å¯¹æ–‡å­—èƒŒæ™¯è‰²å—è¿›è¡Œä¿®æ”¹ã€‚</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-blue"</span>&gt;</span>ç«™ç‚¹é…ç½®æ–‡ä»¶<span class="tag">&lt;/<span class="name">span</span>&gt;</span>ï¼Œ </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"inline-purple"</span>&gt;</span>ä¸»é¢˜é…ç½®æ–‡ä»¶<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="å›¾å½¢è¾¹æ¡†æ•ˆæœ"><a href="#å›¾å½¢è¾¹æ¡†æ•ˆæœ" class="headerlink" title="å›¾å½¢è¾¹æ¡†æ•ˆæœ"></a>å›¾å½¢è¾¹æ¡†æ•ˆæœ</h4><p>å‚è€ƒ <a href="http://blog.junyu.pro/posts/0010-hexo-learn-from-Never-yu.html#background" target="_blank" rel="noopener">Hexoåšå®¢è®¾ç½®è¿›é˜¶</a> å®Œæˆè¯¥éƒ¨åˆ†çš„è®¾ç½®ã€‚</p><h4 id="å¼•ç”¨è¾¹æ¡†å˜è‰²"><a href="#å¼•ç”¨è¾¹æ¡†å˜è‰²" class="headerlink" title="å¼•ç”¨è¾¹æ¡†å˜è‰²"></a>å¼•ç”¨è¾¹æ¡†å˜è‰²</h4><p>å‚è€ƒ<a href="http://blog.junyu.pro/posts/0010-hexo-learn-from-Never-yu.html#background" target="_blank" rel="noopener">Hexoåšå®¢è®¾ç½®è¿›é˜¶</a></p><h4 id="å¼•ç”¨å±…ä¸­æ•ˆæœ"><a href="#å¼•ç”¨å±…ä¸­æ•ˆæœ" class="headerlink" title="å¼•ç”¨å±…ä¸­æ•ˆæœ"></a>å¼•ç”¨å±…ä¸­æ•ˆæœ</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">class</span>=<span class="string">"blockquote-center"</span>&gt;</span>å¼•ç”¨å±…ä¸­æ•ˆæœ<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Font-Awesome-ä½¿ç”¨"><a href="#Font-Awesome-ä½¿ç”¨" class="headerlink" title="Font Awesome ä½¿ç”¨"></a>Font Awesome ä½¿ç”¨</h4><ul><li><a href="http://fontawesome.dashgame.com/" target="_blank" rel="noopener">Font Awesome</a></li></ul><p>ä½¿ç”¨ <code>Font Awesome</code> å›¾æ ‡æ—¶ï¼Œåªéœ€è¦ä½¿ç”¨ CSS å‰ç¼€ <code>fa</code>ï¼Œå†åŠ ä¸Šå›¾æ ‡åç§°å³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-pencil"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-pencil</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-pencil-square-o"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-pencil-square-o</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-camera-retro"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-camera-retro</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-share-square-o"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-share-square-o</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-tag"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-tag</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-video-camera"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-video-camera</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-ban"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-ban</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-code"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-code</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-cloud"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-cloud</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-pie-chart"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-pie-chart</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-thumbs-o-up"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-thumbs-o-up</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-chain"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-chain</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-link"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-link</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-edit"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-edit</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-share-alt"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-share-alt</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-jsfiddle"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-jsfiddle</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-git"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-git</span><br><span class="line">&lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">"fa fa-codepen"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span> fa-codepen</span><br></pre></td></tr></table></figure><h3 id="ä¸»é¡µå›¾ç‰‡å±•ç¤º"><a href="#ä¸»é¡µå›¾ç‰‡å±•ç¤º" class="headerlink" title="ä¸»é¡µå›¾ç‰‡å±•ç¤º"></a>ä¸»é¡µå›¾ç‰‡å±•ç¤º</h3><ul><li>æ–°å»ºåšæ–‡ï¼Œè®¾ç½® <code>type: &quot;picture&quot;</code>ï¼Œä½¿ç”¨ <code>{\% gp x-x \%} ... {\% endgp \%}</code> æ ‡ç­¾å¼•ç”¨è¦å±•ç¤ºçš„å›¾ç‰‡åœ°å€ã€‚</li></ul><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: HomePageImage</span><br><span class="line">type: "picture"</span><br><span class="line">top: 999999999999999</span><br><span class="line">date: 2018-09-12 16:50:21</span><br><span class="line">categories: HomePageImage</span><br><span class="line">tags: HomePageImage</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&#123;% gp 5-3 %&#125;</span><br><span class="line">![<span class="string">my-riding-bike</span>](<span class="link">http://ojxk3q6gs.bkt.clouddn.com/my-riding-bike.jpg</span>)</span><br><span class="line">![<span class="string">football</span>](<span class="link">http://ojxk3q6gs.bkt.clouddn.com/football.jpg</span>)</span><br><span class="line">![<span class="string">sjtu-title-3</span>](<span class="link">http://ol3kbaay9.bkt.clouddn.com/sjtu-title-3.jpg</span>)</span><br><span class="line">![<span class="string">front-end-logo-1</span>](<span class="link">http://ol3kbaay9.bkt.clouddn.com/front-end-logo-1.jpg</span>)</span><br><span class="line">![<span class="string">java-c-vs123</span>](<span class="link">http://ol3kbaay9.bkt.clouddn.com/java-c-vs123.jpg</span>)</span><br><span class="line">&#123;% endgp %&#125;</span><br></pre></td></tr></table></figure><ul><li>å›¾ç‰‡å±•ç¤ºæ•ˆæœ</li></ul><p><code>{\% gp 5-3 \%}</code> ç”¨äºè®¾ç½®å›¾ç‰‡å±•ç¤ºæ•ˆæœï¼Œå‚è€ƒ <code>theme/next/scripts/tags/group-pictures.js</code> æ³¨é‡Šç¤ºæ„å›¾ã€‚</p><ul><li>ä¿®å¤å›¾ç‰‡å±•ç¤º</li></ul><p>åšå®¢ä¸»é¡µç›®å‰å¯ä»¥æ­£å¸¸æ˜¾ç¤ºä¸Šæ­¥éª¤ä¸­è®¾ç½®çš„å›¾ç‰‡æ¨¡å¼æ•ˆæœï¼Œä½†æ˜¯ç‚¹å‡»è¿›å…¥åï¼Œå›¾ç‰‡æ˜¾ç¤ºæ•ˆæœä¼šä¸¢å¤±ï¼Œæ‰€ä»¥éœ€ä¿®æ”¹<br><code>themes\next\source\css\_common\components\tags\group-pictures.styl</code> æ–‡ä»¶ä¸­çš„ä»¥ä¸‹æ ·å¼</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page-post-detail</span> <span class="selector-class">.post-body</span> <span class="selector-class">.group-picture-column</span> &#123;</span><br><span class="line">  <span class="comment">// float: none;</span></span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="comment">// width: auto !important;</span></span><br><span class="line">  <span class="selector-tag">img</span> &#123; <span class="attribute">margin</span>: <span class="number">0</span> auto; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åšæ–‡åº•éƒ¨æ ‡ç­¾æ ·å¼"><a href="#åšæ–‡åº•éƒ¨æ ‡ç­¾æ ·å¼" class="headerlink" title="åšæ–‡åº•éƒ¨æ ‡ç­¾æ ·å¼"></a>åšæ–‡åº•éƒ¨æ ‡ç­¾æ ·å¼</h3><ul><li>å°†åšæ–‡åº•éƒ¨çš„è¡¨æƒ…æ ·å¼ï¼Œä»æ”¹ä¸º <code>#</code> æ”¹ä¸º <code>Font Awesome</code> å›¾æ ‡çš„æ ‡ç­¾æ ·å¼ã€‚</li><li>ä¿®æ”¹æ¨¡æ¿ <code>/themes/next/layout/_macro/post.swig</code>ï¼Œæœç´¢ <code>rel=&quot;tag&quot;&gt;#</code>ï¼Œå°†å…¶ä¸­çš„ <code>#</code> æ¢æˆ <code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code>ã€‚</li></ul><h3 id="é¦–é¡µ-ç®€å†å’Œç›¸å†Œåˆ†ç±»"><a href="#é¦–é¡µ-ç®€å†å’Œç›¸å†Œåˆ†ç±»" class="headerlink" title="é¦–é¡µ-ç®€å†å’Œç›¸å†Œåˆ†ç±»"></a>é¦–é¡µ-ç®€å†å’Œç›¸å†Œåˆ†ç±»</h3><h4 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h4><ul><li>Create</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span>resume </span><br><span class="line">hexo new<span class="built_in"> page </span>album</span><br></pre></td></tr></table></figure><ul><li>Configure</li></ul><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">menu:</span></span><br><span class="line"><span class="symbol">  home:</span> / || home</span><br><span class="line"><span class="symbol">  resume:</span> <span class="meta-keyword">/resume/</span> || child</span><br><span class="line"><span class="symbol">  album:</span> /album || picture-o</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨ç®€å†å’Œç›¸å†Œå¯¹åº”çš„ <code>index.md</code> æ–‡ä»¶å¤´éƒ¨æ·»åŠ  <code>comments: false</code> å¯ä»¥å…³é—­è¯„è®ºåˆ—è¡¨ã€‚</p></blockquote><h4 id="ç®€å†é…ç½®"><a href="#ç®€å†é…ç½®" class="headerlink" title="ç®€å†é…ç½®"></a>ç®€å†é…ç½®</h4><p>é™¤äº†ç”¨ <code>markdown</code> ä¹¦å†™ä¸ªäººç®€å†å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>HTML</code> ä¹¦å†™ä¸ªäººç®€å†ã€‚æ­¤æ—¶ï¼Œéœ€è¦åœ¨æ–‡ä»¶å¤´éƒ¨æ·»åŠ ä¸è¿›è¡Œæ¸²æŸ“æŒ‡ä»¤ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">layout:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">ä¸ªäººç®€å†</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">&lt;!doctype</span> <span class="string">html&gt;</span></span><br><span class="line"><span class="string">&lt;html</span> <span class="string">lang="zh"&gt;</span></span><br><span class="line"><span class="string">&lt;head&gt;</span></span><br><span class="line"><span class="string">&lt;!--</span> <span class="string">resume</span> <span class="string">code</span> <span class="string">here--&gt;</span></span><br></pre></td></tr></table></figure><h4 id="ç›¸å†Œé…ç½®"><a href="#ç›¸å†Œé…ç½®" class="headerlink" title="ç›¸å†Œé…ç½®"></a>ç›¸å†Œé…ç½®</h4><h5 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h5><ul><li><a href="https://timding.top/2017/09/18/Hexo-NexT-%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%9B%B8%E5%86%8C-%E4%BA%8C/" target="_blank" rel="noopener">Next Theme ç›¸å†Œé…ç½®</a> </li><li><a href="https://juejin.im/post/5b8bc953518825284910dcdd" target="_blank" rel="noopener">æ­å»ºHexo ç›¸å†Œ</a></li></ul><h5 id="Tip"><a href="#Tip" class="headerlink" title="Tip"></a>Tip</h5><ul><li>åœ¨ <code>album</code> ç›®å½•ä¸‹æ·»åŠ  <code>assets/empty.jpg</code>ï¼Œä½œä¸ºå›¾ç‰‡å±•ç¤ºçš„å ä½å›¾ã€‚</li><li>æœ¬ç›¸å†Œé…ç½®ä¸­æ˜¯å°†å›¾ç‰‡å­˜æ”¾åœ¨ <code>github</code>çš„ï¼Œå…¶è®¿é—®é“¾æ¥æ˜¯ <code>https://raw.githubusercontent.com</code> å¼€å¤´çš„ï¼Œå¹¶ä¸æ˜¯å›¾ç‰‡çš„å­˜å‚¨åœ°å€ã€‚å› æ­¤ï¼Œ<code>album/ins.js</code> ä¸­å›¾ç‰‡é“¾æ¥åœ°å€ä¸º</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">var minSrc</span> = <span class="string">'https://raw.githubusercontent.com/lbs0912/HexoBlog/master/source/album/photos_configure/min_photos/'</span> + data.link[i];</span><br><span class="line"></span><br><span class="line"><span class="attribute">var src</span> = <span class="string">'https://raw.githubusercontent.com/lbs0912/HexoBlog/master/source/album/photos_configure/photos/'</span> + data.link[i];</span><br></pre></td></tr></table></figure><h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><ul><li>è®°å½•ï¼Œæˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚</li><li>æœ¬åšå®¢å…¨éƒ¨é…ç½®ä¿¡æ¯å¯åœ¨ <a href="https://github.com/lbs0912/BlogSpace" target="_blank" rel="noopener">BlogSpace | lbs0912-github</a> æŸ¥çœ‹ã€‚</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;è®°å½• &lt;code&gt;Hexo Blog&lt;/code&gt; çš„æ­å»ºä¸é…ç½®&lt;/li&gt;
&lt;li&gt;å¯¹ &lt;code&gt;Next&lt;/code&gt; ä¸»é¢˜è¿›è¡Œå®šåˆ¶ï¼Œæ·»åŠ æœç´¢ï¼Œç»Ÿè®¡ï¼Œç½®é¡¶ï¼ŒåŠ å¯†é˜…è¯»ï¼Œè‡ªå®šä¹‰CSSç­‰&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="Front-End Develop" scheme="https://lbs0912.github.io/categories/Front-End-Develop/"/>
    
    
      <category term="Front-End Developer" scheme="https://lbs0912.github.io/tags/Front-End-Developer/"/>
    
      <category term="Hexo" scheme="https://lbs0912.github.io/tags/Hexo/"/>
    
      <category term="Next" scheme="https://lbs0912.github.io/tags/Next/"/>
    
      <category term="Blog" scheme="https://lbs0912.github.io/tags/Blog/"/>
    
  </entry>
  
</feed>
