<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">

<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/green/pace-theme-flash.css" rel="stylesheet">



<script>
    (function () {
        if ('') {
            if (prompt('è¯·è¾“å…¥æ–‡ç« å¯†ç ') !== '') {
                alert('å¯†ç é”™è¯¯ï¼');
                if (history.length === 1) {
                    location.replace("http://liubaoshuai.com/"); // è¿™é‡Œæ›¿æ¢æˆä½ çš„é¦–é¡µ
                } else {
                    history.back();
                }
            }
        }
    })();
</script>
  <link rel="apple-touch-icon" sizes="180x180" href="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg">
  <link rel="mask-icon" href="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lbs0912.github.io","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æœ¬æ–‡ä¸ºHiveå…¥é—¨ç¯‡ï¼Œä¸»è¦è®°å½•Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨å’Œè¡¨æ“ä½œã€‚">
<meta name="keywords" content="Hive,Hadoop">
<meta property="og:type" content="article">
<meta property="og:title" content="Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ">
<meta property="og:url" content="https:&#x2F;&#x2F;lbs0912.github.io&#x2F;2020&#x2F;04&#x2F;22&#x2F;hive-basic-1&#x2F;index.html">
<meta property="og:site_name" content="Liu Baoshuai&#39;s Blog">
<meta property="og:description" content="æœ¬æ–‡ä¸ºHiveå…¥é—¨ç¯‡ï¼Œä¸»è¦è®°å½•Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨å’Œè¡¨æ“ä½œã€‚">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-hive-roadmap.png">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hive-architect-2.jpg">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-hive-hdfs-1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-namenode-manage-web-1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-namenode-manage-web-2.png">
<meta property="og:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-namenode-manage-web-3.png">
<meta property="og:updated_time" content="2020-04-21T22:52:36.232Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com&#x2F;BigData2020&#x2F;hadoop-hive-roadmap.png">

<link rel="canonical" href="https://lbs0912.github.io/2020/04/22/hive-basic-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ | Liu Baoshuai's Blog</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?17082ee15df20dad9762c5512f336eb2";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a href="https://github.com/lbs0912" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub">
      <svg width="80" height="80" viewBox="0 0 250 250" 
            style="fill:#151513; color:#fff; position: fixed; top: 0; border: 0; right: 0;" aria-hidden="true">
              <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
              <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
              <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
      </svg>
    </a>
    <style>
      .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
    </style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Liu Baoshuai's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Do one thing at a time and do well</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://lbs0912.github.io/2020/04/22/hive-basic-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg">
      <meta itemprop="name" content="Liu Baoshuai">
      <meta itemprop="description" content="Record and become better myself">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liu Baoshuai's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-22 08:35:26 / ä¿®æ”¹æ—¶é—´ï¼š06:52:36" itemprop="dateCreated datePublished" datetime="2020-04-22T08:35:26+08:00">2020-04-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hadoop/" itemprop="url" rel="index"><span itemprop="name">Hadoop</span></a>
                </span>
            </span>

          
            <span id="/2020/04/22/hive-basic-1/" class="post-meta-item leancloud_visitors" data-flag-title="Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ" title="é˜…è¯»æ¬¡æ•°">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span class="leancloud-visitors-count"></span>
            </span>
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqusï¼š</span>
    
    <a title="disqus" href="/2020/04/22/hive-basic-1/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2020/04/22/hive-basic-1/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ul>
<li>æœ¬æ–‡ä¸ºHiveå…¥é—¨ç¯‡ï¼Œä¸»è¦è®°å½•Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨å’Œè¡¨æ“ä½œã€‚</li>
</ul>
<a id="more"></a>



<h2 id="å­¦ä¹ èµ„æ–™æ±‡æ€»"><a href="#å­¦ä¹ èµ„æ–™æ±‡æ€»" class="headerlink" title="å­¦ä¹ èµ„æ–™æ±‡æ€»"></a>å­¦ä¹ èµ„æ–™æ±‡æ€»</h2><ul>
<li><a href="http://hive.apache.org/" target="_blank" rel="noopener">Hiveå®˜ç½‘</a></li>
<li><a href="https://cwiki.apache.org/confluence/display/Hive#Home-UserDocumentation" target="_blank" rel="noopener">User Documentation - Apache Hive</a></li>
<li><a href="http://blog.fens.me/hadoop-hive-roadmap/" target="_blank" rel="noopener">Hiveå­¦ä¹ è·¯çº¿å›¾è°± | ç²‰ä¸æ—¥å¿—</a></li>
<li><a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a></li>
</ul>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><blockquote>
<p>Hiveæ˜¯å»ºç«‹åœ¨ Hadoop ä¸Šçš„æ•°æ®ä»“åº“åŸºç¡€æ„æ¶ã€‚</p>
</blockquote>
<p>Hive æ˜¯ Hadoop å®¶æ—ä¸­ä¸€æ¬¾æ•°æ®ä»“åº“äº§å“ï¼ŒHive æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æä¾›äº†ç±» SQL çš„è¯­æ³•ï¼Œå°è£…äº†åº•å±‚çš„ MapReduce è¿‡ç¨‹ï¼Œè®©æœ‰ SQL åŸºç¡€çš„ä¸šåŠ¡äººå‘˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ Hadoop è¿›è¡Œå¤§æ•°æ®çš„æ“ä½œã€‚å°±æ˜¯è¿™ä¸€ä¸ªç‚¹ï¼Œè§£å†³äº†åŸæ•°æ®åˆ†æäººå‘˜å¯¹äºå¤§æ•°æ®åˆ†æçš„ç“¶é¢ˆã€‚</p>
<p><strong>Hive å¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›å®Œæ•´çš„ SQL æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°† SQL è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿è¡Œã€‚Hive å®šä¹‰äº†ç®€å•çš„ç±» SQL æŸ¥è¯¢è¯­è¨€ï¼Œç§°ä¸º HQL</strong>ã€‚</p>
<p>Hive çš„çŸ¥è¯†å›¾è°±å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hive-roadmap.png" alt=""></p>
<p>Hive å·²ç»ç”¨ç±» SQL çš„è¯­æ³•å°è£…äº† MapReduce è¿‡ç¨‹ï¼Œè¿™ä¸ªå°è£…è¿‡ç¨‹å°±æ˜¯ MapReduce çš„æ ‡å‡†åŒ–çš„è¿‡ç¨‹ã€‚</p>
<p>æˆ‘ä»¬åœ¨åšä¸šåŠ¡æˆ–è€…å·¥å…·æ—¶ï¼Œä¼šé’ˆå¯¹åœºæ™¯ç”¨é€»è¾‘å°è£…ï¼Œè¿™é‡Œçš„ç¬¬2å±‚å°è£…æ˜¯åœ¨Hiveä¹‹ä¸Šçš„å°è£…ã€‚åœ¨ç¬¬2å±‚å°è£…æ—¶ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½å¤šçš„å±è”½ Hive çš„ç»†èŠ‚ï¼Œè®©æ¥å£å•ä¸€åŒ–ï¼Œä½å°‘çµæ´»æ€§ï¼Œå†æ¬¡ç²¾ç®€ HQL çš„è¯­æ³•ç»“æ„ã€‚åªæ»¡è¶³æˆ‘ä»¬çš„ç³»ç»Ÿè¦æ±‚ï¼Œä¸“ç”¨çš„æ¥å£ã€‚</p>
<p>åœ¨ä½¿ç”¨äºŒæ¬¡å°è£…çš„æ¥å£æ—¶ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä¸ç”¨çŸ¥é“ Hive æ˜¯ä»€ä¹ˆ, æ›´ä¸ç”¨çŸ¥é“ Hadoop æ˜¯ä»€ä¹ˆã€‚åªéœ€è¦çŸ¥é“ï¼ŒSQLæŸ¥è¯¢(SQL92æ ‡å‡†)ï¼Œæ€ä¹ˆå†™æ•ˆç‡é«˜ï¼Œæ€ä¹ˆå†™å¯ä»¥å®Œæˆä¸šåŠ¡éœ€è¦å°±å¯ä»¥äº†ã€‚</p>
<p>å½“æˆ‘ä»¬å®Œæˆäº† Hive çš„äºŒæ¬¡å°è£…åï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºæ ‡å‡†åŒ–çš„ MapReduce å¼€å‘è¿‡ç¨‹ã€‚</p>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hive-architect-2.jpg" alt=""></p>
<p>Hive ä¸é€‚åˆç”¨äºè”æœºï¼ˆ<code>online</code>ï¼‰äº‹åŠ¡å¤„ç†ï¼Œä¹Ÿä¸æä¾›å®æ—¶æŸ¥è¯¢åŠŸèƒ½ã€‚å®ƒæœ€é€‚åˆç”¨åœ¨åŸºäºå¤§é‡ä¸å¯å˜æ•°æ®çš„æ‰¹å¤„ç†ä½œä¸šã€‚Hiveç‰¹ç‚¹æ˜¯å¯ä¼¸ç¼©ï¼ˆåœ¨Hadoopçš„é›†ç¾¤ä¸ŠåŠ¨æ€åœ°æ·»åŠ è®¾å¤‡ï¼‰ï¼Œå¯æ‰©å±•ï¼Œå®¹é”™ï¼Œè¾“å…¥æ ¼å¼çš„æ¾æ•£è€¦åˆã€‚</p>
<p>Hive çš„æœ€ä½³ä½¿ç”¨åœºåˆæ˜¯å¤§æ•°æ®é›†çš„æ‰¹å¤„ç†ä½œä¸šï¼Œä¾‹å¦‚ï¼Œç½‘ç»œæ—¥å¿—åˆ†æã€‚</p>
<h3 id="Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«"><a href="#Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«" class="headerlink" title="Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«"></a>Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«</h3><p>Hive åœ¨å¾ˆå¤šæ–¹é¢ä¸ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ç±»ä¼¼ï¼ˆä¾‹å¦‚æ”¯æŒ SQL æ¥å£ï¼‰ï¼Œä½†æ˜¯å…¶åº•å±‚å¯¹ HDFS å’Œ MapReduce çš„ä¾èµ–æ„å‘³ç€å®ƒçš„ä½“ç³»ç»“æ„æœ‰åˆ«äºä¼ ç»Ÿå…³ç³»æ•°æ®åº“ï¼Œè€Œè¿™äº›åŒºåˆ«åˆå½±å“ç€ Hive æ‰€æ”¯æŒçš„ç‰¹æ€§ï¼Œè¿›è€Œå½±å“ç€ Hive çš„ä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›ç®€å•åŒºåˆ«</p>
<ul>
<li>Hive å’Œå…³ç³»æ•°æ®åº“å­˜å‚¨æ–‡ä»¶çš„ç³»ç»Ÿä¸åŒï¼ŒHive ä½¿ç”¨çš„æ˜¯ Hadoop çš„HDFSï¼ˆHadoopçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œå…³ç³»æ•°æ®åº“åˆ™æ˜¯æœåŠ¡å™¨æœ¬åœ°çš„æ–‡ä»¶ç³»ç»Ÿ</li>
<li>Hive ä½¿ç”¨çš„è®¡ç®—æ¨¡å‹æ˜¯ MapReduceï¼Œè€Œå…³ç³»æ•°æ®åº“åˆ™æ˜¯è‡ªå·±è®¾è®¡çš„è®¡ç®—æ¨¡å‹</li>
<li>å…³ç³»æ•°æ®åº“éƒ½æ˜¯ä¸ºå®æ—¶æŸ¥è¯¢çš„ä¸šåŠ¡è¿›è¡Œè®¾è®¡çš„ï¼Œè€Œ Hive åˆ™æ˜¯ä¸ºæµ·é‡æ•°æ®åšæ•°æ®æŒ–æ˜è®¾è®¡çš„ï¼Œå®æ—¶æ€§å¾ˆå·®ï¼›å®æ—¶æ€§çš„åŒºåˆ«å¯¼è‡´ Hive çš„åº”ç”¨åœºæ™¯å’Œå…³ç³»æ•°æ®åº“æœ‰å¾ˆå¤§çš„ä¸åŒ</li>
<li>Hive å¾ˆå®¹æ˜“æ‰©å±•è‡ªå·±çš„å­˜å‚¨èƒ½åŠ›å’Œè®¡ç®—èƒ½åŠ›ï¼Œè¿™ä¸ªæ˜¯ç»§æ‰¿ Hadoop çš„ï¼Œè€Œå…³ç³»æ•°æ®åº“åœ¨è¿™ä¸ªæ–¹é¢è¦å·®å¾ˆå¤š</li>
</ul>
<h2 id="Hive-å®‰è£…é…ç½®"><a href="#Hive-å®‰è£…é…ç½®" class="headerlink" title="Hive å®‰è£…é…ç½®"></a>Hive å®‰è£…é…ç½®</h2><p>Hive å®‰è£…å‚è€ƒèµ„æ–™å¦‚ä¸‹</p>
<ul>
<li><a href="https://www.cnblogs.com/micrari/p/7067968.html" target="_blank" rel="noopener">Mac ä¸Š Hive ç¯å¢ƒæ­å»º | blog</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/70601668" target="_blank" rel="noopener">MacOS ä¸‹hiveçš„å®‰è£…ä¸é…ç½® | çŸ¥ä¹</a></li>
<li><a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a></li>
<li><a href="https://jyzhangchn.github.io/hive.html" target="_blank" rel="noopener">macä¸‹Hive+MySqlç¯å¢ƒé…ç½® | blog</a></li>
<li><a href="https://www.jianshu.com/p/5c11073d19d3" target="_blank" rel="noopener">Mac Hive é…ç½®å’Œå®‰è£… | ç®€ä¹¦</a></li>
</ul>
<p>æ­¤å¤„ï¼Œç®€å•è®°å½•Hiveçš„å®‰è£…å’Œé…ç½®æ­¥éª¤</p>
<h3 id="å®‰è£…mysql"><a href="#å®‰è£…mysql" class="headerlink" title="å®‰è£…mysql"></a>å®‰è£…mysql</h3><ol>
<li>é€šè¿‡ Homebrew å®‰è£… mysql</li>
</ol>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>mysql</span><br></pre></td></tr></table></figure>

<p>å®‰è£…ç»“æŸåï¼Œä¼šæœ‰å¦‚ä¸‹æç¤º</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">We<span class="comment">'ve installed your MySQL database without a root password. To secure it run:</span></span><br><span class="line">    mysql_secure_installation</span><br><span class="line"></span><br><span class="line">MySQL <span class="keyword">is</span> configured <span class="keyword">to</span> only allow connections <span class="keyword">from</span> localhost <span class="keyword">by</span> <span class="keyword">default</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> connect run:</span><br><span class="line">    mysql -uroot</span><br><span class="line"></span><br><span class="line"><span class="keyword">To</span> have launchd start mysql now <span class="keyword">and</span> restart at login:</span><br><span class="line">  brew services start mysql</span><br><span class="line"><span class="keyword">Or</span>, <span class="keyword">if</span> you don<span class="comment">'t want/need a background service you can just run:</span></span><br><span class="line">  mysql.server start</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¿¡æ¯æç¤ºï¼Œ</p>
<ul>
<li>è¿è¡Œ <code>brew services start mysql</code>ï¼Œå¯ä»¥åœ¨åå°å¯åŠ¨ mysql</li>
<li>è¿è¡Œ <code>mysql.server start</code>ï¼Œå¯ä»¥åœ¨å‰å°å¯åŠ¨ mysqlï¼ˆå…³é—­æ§åˆ¶å°ï¼ŒæœåŠ¡åœæ­¢ï¼‰</li>
<li>è¿è¡Œ <code>mysql_secure_installation</code>ï¼Œå¯ä»¥è¿›è¡Œå¯†ç è®¾ç½®</li>
</ul>
<ol start="2">
<li>ä½¿ç”¨ <code>mysql --version</code> æ ¡éªŒ mysql ç‰ˆæœ¬å·</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql <span class="comment">--version</span></span><br><span class="line"></span><br><span class="line">// mysql  Ver <span class="number">8.0</span><span class="number">.19</span> <span class="keyword">for</span> osx10<span class="number">.15</span> <span class="keyword">on</span> x86_64 (Homebrew)</span><br></pre></td></tr></table></figure>



<ol start="3">
<li>è®¾ç½®mysqlç§˜å¯†ï¼Œè®¾å®šå¯†ç ä¸º <code>mysql113459</code></li>
</ol>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew services <span class="built_in">start</span> mysql  <span class="comment"> //è®¾å®šå¯†ç å‰éœ€è¦å…ˆå¯åŠ¨mysql</span></span><br><span class="line"></span><br><span class="line">mysql_secure_installation</span><br><span class="line">//å¯†ç è®¾å®šä¸º mysql113459</span><br></pre></td></tr></table></figure>



<p>MySQL æ–°ç‰ˆæœ¬ä¸­å¼•å…¥äº†å¯†ç å®‰å…¨çº§åˆ«çš„æ¦‚å¿µï¼Œè®¾ç½®ä½å¼ºåº¦çš„å¯†ç æœ‰æ—¶ä¼šè¢«ç¦æ­¢ã€‚ä¸ºæ­¤å¯ä»¥ç›´æ¥æŒ‡å®šå¯†ç å®‰å…¨å¼ºåº¦ï¼Œæ‰§è¡Œä¸‹è¿°å‘½ä»¤ã€‚</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set global validate_password_policy=0;  //è®¾ç½®å¯†ç å¼ºåº¦çº§åˆ«ä¸ºlow</span><br><span class="line">mysql&gt; set global validate_password_length=1;   //è®¾ç½®å¯†ç æœ€å°é•¿åº¦ä¸º4</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW VARIABLES LIKE 'validate_password%';    //æŸ¥çœ‹å¯†ç ç›¸å…³å‚æ•°è®¾ç½®</span><br><span class="line"></span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">|<span class="string"> Variable_name                        </span>|<span class="string"> Value  </span>|</span><br><span class="line">+--------------------------------------+--------+</span><br><span class="line">|<span class="string"> validate_password.check_user_name    </span>|<span class="string"> ON     </span>|</span><br><span class="line">|<span class="string"> validate_password.dictionary_file    </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string"> validate_password.length             </span>|<span class="string"> 8      </span>|</span><br><span class="line">|<span class="string"> validate_password.mixed_case_count   </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password.number_count       </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password.policy             </span>|<span class="string"> MEDIUM </span>|</span><br><span class="line">|<span class="string"> validate_password.special_char_count </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_check_user_name    </span>|<span class="string"> ON     </span>|</span><br><span class="line">|<span class="string"> validate_password_dictionary_file    </span>|<span class="string">        </span>|</span><br><span class="line">|<span class="string"> validate_password_length             </span>|<span class="string"> 4      </span>|</span><br><span class="line">|<span class="string"> validate_password_mixed_case_count   </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_number_count       </span>|<span class="string"> 1      </span>|</span><br><span class="line">|<span class="string"> validate_password_policy             </span>|<span class="string"> LOW    </span>|</span><br><span class="line">|<span class="string"> validate_password_special_char_count </span>|<span class="string"> 1      </span>|</span><br><span class="line">+--------------------------------------+--------+</span><br></pre></td></tr></table></figure>






<p>è‹¥æ‰§è¡Œ <code>SHOW VARIABLES LIKE &#39;validate_password%&#39;;</code> é‡åˆ° <code>Unknown system variable &#39;validate_password_policy&#39;</code> æŠ¥é”™ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒ <a href="https://stackoverflow.com/questions/55237257/mysql-validate-password-policy-unknown-system-variable" target="_blank" rel="noopener">MySQL validate_password_policy unknown system variable | StackOverflow</a> è¿›è¡Œå¤„ç†ã€‚</p>
<blockquote>
<p>This problem has happened because validate_password plugin is by default NOT activated. </p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">select</span> plugin_name, plugin_status <span class="keyword">from</span> information_schema.plugins <span class="keyword">where</span> plugin_name <span class="keyword">like</span> <span class="string">'validate%'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; install plugin validate_password soname <span class="string">'validate_password.so'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> plugin_name, plugin_status <span class="keyword">from</span> information_schema.plugins <span class="keyword">where</span> plugin_name <span class="keyword">like</span> <span class="string">'validate%'</span>;</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">'validate_password%'</span>;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>mysqlå¯åŠ¨</li>
</ol>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew services <span class="built_in">start</span> mysql  <span class="comment"> //åå°å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">sudo mysql.server <span class="built_in">start</span>    <span class="comment"> //å‰å°å¯åŠ¨</span></span><br><span class="line"></span><br><span class="line">//è‹¥é‡åˆ°æƒé™é—®é¢˜ï¼Œå¯æ‰§è¡Œä¸‹è¿°å‘½ä»¤</span><br><span class="line">sudo chmod -R <span class="keyword">a</span>+rwx /usr/<span class="built_in">local</span>/var/mysql</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>mysqlå…³é—­</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql<span class="selector-class">.server</span> stop</span><br></pre></td></tr></table></figure>


<ol start="6">
<li>mysqlé‡å¯</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mysql.<span class="keyword">server</span> <span class="keyword">restart</span></span><br></pre></td></tr></table></figure>


<ol start="7">
<li>æŸ¥çœ‹é»˜è®¤æ•°æ®åº“</li>
</ol>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p    <span class="regexp">//</span>å¯†ç   mysql113459</span><br><span class="line"></span><br><span class="line">show databases</span><br><span class="line"></span><br><span class="line"><span class="keyword">exit</span>  <span class="regexp">//</span>é€€å‡ºmysqläº¤äº’CI</span><br></pre></td></tr></table></figure>

<h3 id="Hive-å®‰è£…"><a href="#Hive-å®‰è£…" class="headerlink" title="Hive å®‰è£…"></a>Hive å®‰è£…</h3><ol>
<li>é€šè¿‡ Homebrew å®‰è£… Hive</li>
</ol>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">brew </span><span class="keyword">install </span>hive</span><br></pre></td></tr></table></figure>

<p>å®‰è£…ç»“æŸåï¼Œä¼šæœ‰å¦‚ä¸‹æç¤º</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">==&gt; Caveats</span><br><span class="line">Hadoop must be <span class="keyword">in</span> your path <span class="keyword">for</span> hive executable <span class="keyword">to</span> work.</span><br><span class="line"></span><br><span class="line"><span class="keyword">If</span> you want <span class="keyword">to</span> use HCatalog with Pig, <span class="builtin-name">set</span> <span class="variable">$HCAT_HOME</span> <span class="keyword">in</span> your profile:</span><br><span class="line">  <span class="builtin-name">export</span> <span class="attribute">HCAT_HOME</span>=/usr/local/opt/hive/libexec/hcatalog</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/hive/3.1.2: 1,126 files, 231.8MB, built <span class="keyword">in</span> 7 seconds</span><br></pre></td></tr></table></figure>


<ol start="2">
<li>ä½¿ç”¨ <code>hive --version</code> æ ¡éªŒ hive ç‰ˆæœ¬å·</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">lbsMacBook-<span class="string">Pro:</span>~ lbs$ hive --version</span><br><span class="line"><span class="string">SLF4J:</span> Class path contains multiple SLF4J bindings.</span><br><span class="line"><span class="string">SLF4J:</span> Found binding <span class="keyword">in</span> [<span class="string">jar:</span><span class="string">file:</span><span class="regexp">/usr/</span>local<span class="regexp">/Cellar/</span>hive<span class="regexp">/3.1.2/</span>libexec<span class="regexp">/lib/</span>log4j-slf4j-impl<span class="number">-2.10</span><span class="number">.0</span>.jar!<span class="regexp">/org/</span>slf4j<span class="regexp">/impl/</span>StaticLoggerBinder.<span class="keyword">class</span>]</span><br><span class="line"><span class="string">SLF4J:</span> Found binding <span class="keyword">in</span> [<span class="string">jar:</span><span class="string">file:</span><span class="regexp">/Library/</span>hadoop<span class="number">-2.10</span><span class="number">.0</span><span class="regexp">/share/</span>hadoop<span class="regexp">/common/</span>lib<span class="regexp">/slf4j-log4j12-1.7.25.jar!/</span>org<span class="regexp">/slf4j/</span>impl/StaticLoggerBinder.<span class="keyword">class</span>]</span><br><span class="line"><span class="string">SLF4J:</span> See <span class="string">http:</span><span class="comment">//www.slf4j.org/codes.html#multiple_bindings for an explanation.</span></span><br><span class="line"><span class="string">SLF4J:</span> Actual binding is of type [org.apache.logging.slf4j.Log4jLoggerFactory]</span><br><span class="line">Hive <span class="number">3.1</span><span class="number">.2</span></span><br><span class="line">Git <span class="string">git:</span><span class="comment">//HW13934/Users/gates/tmp/hive-branch-3.1/hive -r 8190d2be7b7165effa62bd21b7d60ef81fb0e4af</span></span><br><span class="line">Compiled by gates on Thu Aug <span class="number">22</span> <span class="number">15</span>:<span class="number">01</span>:<span class="number">18</span> PDT <span class="number">2019</span></span><br><span class="line">From source with checksum <span class="number">0492</span>c08f784b188c349f6afb1d8d9847</span><br></pre></td></tr></table></figure>


<ol start="3">
<li>hive ç¯å¢ƒå˜é‡é…ç½®</li>
</ol>
<p>(1) æ‰“å¼€é…ç½®æ–‡ä»¶</p>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~<span class="string">/.bash_profile</span></span><br></pre></td></tr></table></figure>

<p>(2) æ›´æ–°é…ç½®æ–‡ä»¶</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">HIVE_HOME</span>=/usr/local/Cellar/hive/3.1.2 </span><br><span class="line"><span class="attribute">HCAT_HOME</span>=/usr/local/opt/hive/libexec/hcatalog</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$&#123;HIVE_HOME&#125;/bin</span><br><span class="line"></span><br><span class="line"><span class="builtin-name">export</span> HIVE_HOME</span><br><span class="line"><span class="builtin-name">export</span> HCAT_HOME</span><br></pre></td></tr></table></figure>

<p>(3) ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure>


<h3 id="ä¿®æ”¹-Hive-é»˜è®¤å…ƒæ•°æ®åº“"><a href="#ä¿®æ”¹-Hive-é»˜è®¤å…ƒæ•°æ®åº“" class="headerlink" title="ä¿®æ”¹ Hive é»˜è®¤å…ƒæ•°æ®åº“"></a>ä¿®æ”¹ Hive é»˜è®¤å…ƒæ•°æ®åº“</h3><blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHive å…ƒæ•°æ®ä¿å­˜åœ¨å†…åµŒçš„ Derby æ•°æ®åº“ä¸­ï¼Œåªèƒ½å…è®¸ä¸€ä¸ªä¼šè¯è¿æ¥ï¼Œåªé€‚åˆç®€å•çš„æµ‹è¯•ã€‚å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä½¿ç”¨ï¼Œä¸ºäº†æ”¯æŒå¤šç”¨æˆ·ä¼šè¯ï¼Œåˆ™éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å…ƒæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨ MySQL ä½œä¸ºå…ƒæ•°æ®åº“ï¼ŒHive å†…éƒ¨å¯¹ MySQL æä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚</p>
</blockquote>
<ol>
<li>Hive é»˜è®¤å…ƒæ•°æ®åº“æ˜¯ derbyã€‚ä¸ºäº†æ–¹ä¾¿ï¼Œè¿™é‡Œç»™å‡ºç”¨ mysql å‚¨å­˜å…ƒæ•°æ®çš„é…ç½®</li>
</ol>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//åˆ›å»ºæ•°æ®åº“metastore</span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">database</span> metastore; </span><br><span class="line"></span><br><span class="line">//åˆ›å»ºç”¨æˆ·åä¸ºhiveï¼Œç™»å½•å¯†ç ä¸ºHive113459...çš„è´¦æˆ·</span><br><span class="line">mysql&gt; <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">'hive'</span>@<span class="string">'localhost'</span> identified <span class="keyword">by</span> <span class="string">'Hive113459...'</span>; </span><br><span class="line"></span><br><span class="line">//ç»™å»ºå¥½çš„æ•°æ®åº“æ·»åŠ æƒé™</span><br><span class="line">grant <span class="keyword">select</span>,<span class="keyword">insert</span>,<span class="keyword">update</span>,<span class="keyword">delete</span>,<span class="keyword">alter</span>,<span class="keyword">create</span>,<span class="keyword">index</span>,references <span class="keyword">on</span> metastore.* <span class="keyword">to</span> <span class="string">'hive'</span>@<span class="string">'localhost'</span>; </span><br><span class="line"></span><br><span class="line">// åˆ·æ–°æƒé™</span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure>


<h3 id="Hive-é…ç½®"><a href="#Hive-é…ç½®" class="headerlink" title="Hive é…ç½®"></a>Hive é…ç½®</h3><ol>
<li>è¿›å…¥ Hive çš„å®‰è£…ç›®å½•ï¼Œåˆ›å»º <code>hive-site.xml</code> æ–‡ä»¶</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cd /usr/local/Cellar/hive/<span class="number">3.1</span>.<span class="number">2</span>/libexec/conf</span><br><span class="line">$ cp hive-default<span class="selector-class">.xml</span><span class="selector-class">.template</span> hive-site<span class="selector-class">.xml</span>    <span class="comment">//å¤åˆ¶æä¾›çš„æ¨¡æ¿æ–‡ä»¶</span></span><br></pre></td></tr></table></figure>

<p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯¹ä»¥ä¸‹å‡ ä¸ªå±æ€§è¿›è¡Œä¿®æ”¹ã€‚</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionURL<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>jdbc:mysql:<span class="comment">//localhost/metastore&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionDriverName<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>com.mysql.jdbc.Driver<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionUserName<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>hive(ä¸Šè¿°mysqlä¸­åˆ›å»ºçš„ç”¨æˆ·å)<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>javax.jdo.option.ConnectionPassword<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span>Hive113459...(ä¸Šè¿°mysqlä¸­åˆ›å»ºçš„ç”¨æˆ·å¯†ç )<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.exec.local.scratchdir<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.querylog.location<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.downloaded.resources.dir<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="params">&lt;property&gt;</span></span><br><span class="line">  <span class="params">&lt;name&gt;</span>hive.server2.logging.operation.log.location<span class="params">&lt;/name&gt;</span></span><br><span class="line">  <span class="params">&lt;value&gt;</span><span class="meta-keyword">/tmp/</span>hive/operation_logs<span class="params">&lt;/value&gt;</span></span><br><span class="line"><span class="params">&lt;/property&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ‹·è´ <code>mysql-connector</code> åˆ° hive çš„å®‰è£…ç›®å½•ä¸‹</li>
</ol>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ curl -L <span class="string">'http://www.mysql.com/get/Downloads/Connector-J/mysql-connector-java-8.0.15.tar.gz/from/http://mysql.he.net/'</span> | tar xz</span><br><span class="line"></span><br><span class="line">$ cp mysql-connector-java-<span class="number">8.0</span>.<span class="number">15</span>/mysql-connector-java-<span class="number">8.0</span>.<span class="number">15</span>-bin.jar /usr/local/Cellar/hive/<span class="number">3.1</span>.<span class="number">2</span>/libexec/<span class="class"><span class="keyword">lib</span>/</span></span><br></pre></td></tr></table></figure>


<ol start="3">
<li>åˆå§‹åŒ– metastore æ•°æ®åº“</li>
</ol>
<p>ç›®å‰ç›´æ¥æŸ¥çœ‹ <code>metastore</code> æ•°æ®åº“ï¼Œå¯ä»¥å‘ç°æ•°æ®åº“æ˜¯ç©ºçš„ã€‚</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">show </span>databases<span class="comment">;</span></span><br><span class="line">mysql&gt; use metastore<span class="comment">;</span></span><br><span class="line">mysql&gt; <span class="keyword">show </span>tables<span class="comment">;   // empty</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å‘½ä»¤è¡Œæ¨¡å¼ï¼ˆémysql CLIï¼‰ä¸‹æ‰§è¡Œä¸‹è¿°å‘½ä»¤ï¼Œåˆå§‹åŒ– metastore æ•°æ®åº“</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">$</span> schematool -initSchema -dbType mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">//Initialization script completed</span></span><br><span class="line"><span class="comment">//schemaTool completed</span></span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œå®Œæ¯•åï¼Œå†æ¬¡æŸ¥çœ‹æ•°æ®åº“ï¼Œä¼šå‘ç°å¦‚ä¸‹ä¿¡æ¯</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show tables;</span><br><span class="line">+-------------------------------+</span><br><span class="line">|<span class="string"> Tables_in_metastore           </span>|</span><br><span class="line">+-------------------------------+</span><br><span class="line">|<span class="string"> AUX_TABLE                     </span>|</span><br><span class="line">|<span class="string"> BUCKETING_COLS                </span>|</span><br><span class="line">|<span class="string"> CDS                           </span>|</span><br><span class="line">|<span class="string"> COLUMNS_V2                    </span>|</span><br><span class="line">|<span class="string"> COMPACTION_QUEUE              </span>|</span><br><span class="line">|<span class="string"> COMPLETED_COMPACTIONS         </span>|</span><br><span class="line">|<span class="string"> COMPLETED_TXN_COMPONENTS      </span>|</span><br><span class="line">|<span class="string"> CTLGS                         </span>|</span><br><span class="line">|<span class="string"> DATABASE_PARAMS               </span>|</span><br><span class="line">|<span class="string"> DB_PRIVS                      </span>|</span><br><span class="line">|<span class="string"> DBS                           </span>|</span><br><span class="line">|<span class="string"> DELEGATION_TOKENS             </span>|</span><br><span class="line">|<span class="string"> FUNC_RU                       </span>|</span><br><span class="line">|<span class="string"> FUNCS                         </span>|</span><br><span class="line">|<span class="string"> GLOBAL_PRIVS                  </span>|</span><br><span class="line">|<span class="string"> HIVE_LOCKS                    </span>|</span><br><span class="line">|<span class="string"> I_SCHEMA                      </span>|</span><br><span class="line">|<span class="string"> IDXS                          </span>|</span><br><span class="line">|<span class="string"> INDEX_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> KEY_CONSTRAINTS               </span>|</span><br><span class="line">|<span class="string"> MASTER_KEYS                   </span>|</span><br><span class="line">|<span class="string"> MATERIALIZATION_REBUILD_LOCKS </span>|</span><br><span class="line">|<span class="string"> METASTORE_DB_PROPERTIES       </span>|</span><br><span class="line">|<span class="string"> MIN_HISTORY_LEVEL             </span>|</span><br><span class="line">|<span class="string"> MV_CREATION_METADATA          </span>|</span><br><span class="line">|<span class="string"> MV_TABLES_USED                </span>|</span><br><span class="line">|<span class="string"> NEXT_COMPACTION_QUEUE_ID      </span>|</span><br><span class="line">|<span class="string"> NEXT_LOCK_ID                  </span>|</span><br><span class="line">|<span class="string"> NEXT_TXN_ID                   </span>|</span><br><span class="line">|<span class="string"> NEXT_WRITE_ID                 </span>|</span><br><span class="line">|<span class="string"> NOTIFICATION_LOG              </span>|</span><br><span class="line">|<span class="string"> NOTIFICATION_SEQUENCE         </span>|</span><br><span class="line">|<span class="string"> NUCLEUS_TABLES                </span>|</span><br><span class="line">|<span class="string"> PART_COL_PRIVS                </span>|</span><br><span class="line">|<span class="string"> PART_COL_STATS                </span>|</span><br><span class="line">|<span class="string"> PART_PRIVS                    </span>|</span><br><span class="line">|<span class="string"> PARTITION_EVENTS              </span>|</span><br><span class="line">|<span class="string"> PARTITION_KEY_VALS            </span>|</span><br><span class="line">|<span class="string"> PARTITION_KEYS                </span>|</span><br><span class="line">|<span class="string"> PARTITION_PARAMS              </span>|</span><br><span class="line">|<span class="string"> PARTITIONS                    </span>|</span><br><span class="line">|<span class="string"> REPL_TXN_MAP                  </span>|</span><br><span class="line">|<span class="string"> ROLE_MAP                      </span>|</span><br><span class="line">|<span class="string"> ROLES                         </span>|</span><br><span class="line">|<span class="string"> RUNTIME_STATS                 </span>|</span><br><span class="line">|<span class="string"> SCHEMA_VERSION                </span>|</span><br><span class="line">|<span class="string"> SD_PARAMS                     </span>|</span><br><span class="line">|<span class="string"> SDS                           </span>|</span><br><span class="line">|<span class="string"> SEQUENCE_TABLE                </span>|</span><br><span class="line">|<span class="string"> SERDE_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> SERDES                        </span>|</span><br><span class="line">|<span class="string"> SKEWED_COL_NAMES              </span>|</span><br><span class="line">|<span class="string"> SKEWED_COL_VALUE_LOC_MAP      </span>|</span><br><span class="line">|<span class="string"> SKEWED_STRING_LIST            </span>|</span><br><span class="line">|<span class="string"> SKEWED_STRING_LIST_VALUES     </span>|</span><br><span class="line">|<span class="string"> SKEWED_VALUES                 </span>|</span><br><span class="line">|<span class="string"> SORT_COLS                     </span>|</span><br><span class="line">|<span class="string"> TAB_COL_STATS                 </span>|</span><br><span class="line">|<span class="string"> TABLE_PARAMS                  </span>|</span><br><span class="line">|<span class="string"> TBL_COL_PRIVS                 </span>|</span><br><span class="line">|<span class="string"> TBL_PRIVS                     </span>|</span><br><span class="line">|<span class="string"> TBLS                          </span>|</span><br><span class="line">|<span class="string"> TXN_COMPONENTS                </span>|</span><br><span class="line">|<span class="string"> TXN_TO_WRITE_ID               </span>|</span><br><span class="line">|<span class="string"> TXNS                          </span>|</span><br><span class="line">|<span class="string"> TYPE_FIELDS                   </span>|</span><br><span class="line">|<span class="string"> TYPES                         </span>|</span><br><span class="line">|<span class="string"> VERSION                       </span>|</span><br><span class="line">|<span class="string"> WM_MAPPING                    </span>|</span><br><span class="line">|<span class="string"> WM_POOL                       </span>|</span><br><span class="line">|<span class="string"> WM_POOL_TO_TRIGGER            </span>|</span><br><span class="line">|<span class="string"> WM_RESOURCEPLAN               </span>|</span><br><span class="line">|<span class="string"> WM_TRIGGER                    </span>|</span><br><span class="line">|<span class="string"> WRITE_SET                     </span>|</span><br><span class="line">+-------------------------------+</span><br><span class="line">74 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>


<h3 id="å¯åŠ¨-Hive"><a href="#å¯åŠ¨-Hive" class="headerlink" title="å¯åŠ¨ Hive"></a>å¯åŠ¨ Hive</h3><p>å¯åŠ¨Hiveå‰ï¼Œéœ€è¦å…ˆè¿è¡ŒHadoopã€‚ä¹‹åè¿è¡Œ <code>hive</code> æˆ–è€… <code>hive shell</code> å¯ä»¥è¿›å…¥Hive Shell</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive </span><br><span class="line"></span><br><span class="line">//or</span><br><span class="line"> hive <span class="keyword">shell</span><span class="bash"></span></span><br><span class="line"><span class="bash"> </span></span><br><span class="line"> </span><br><span class="line">hive&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å¯è§†åŒ–å·¥å…·-DbVisualizer"><a href="#å¯è§†åŒ–å·¥å…·-DbVisualizer" class="headerlink" title="å¯è§†åŒ–å·¥å…· DbVisualizer"></a>å¯è§†åŒ–å·¥å…· DbVisualizer</h3><ul>
<li><a href="https://www.dbvis.com/download/11.0" target="_blank" rel="noopener">DbVisualizer Software</a></li>
<li><a href="http://confluence.dbvis.com/display/UG110/Installing" target="_blank" rel="noopener">DbVisualizer User Guide</a></li>
<li><a href="http://confluence.dbvis.com/display/UG110/Installing+a+JDBC+Driver" target="_blank" rel="noopener">Installing a JDBC Driver</a></li>
<li><a href="https://www.dbvis.com/features/database-drivers/" target="_blank" rel="noopener">Supported databases and JDBC drivers Download</a></li>
<li><a href="https://juejin.im/post/5d04675051882518e845cb8f" target="_blank" rel="noopener">åœ¨macä¸ŠDbVisualizerå›¾å½¢åŒ–å®¢æˆ·ç«¯é…ç½®è¿æ¥Hive | Blog</a></li>
<li><a href="https://github.com/timveil/hive-jdbc-uber-jar/releases" target="_blank" rel="noopener">hive-jdbc-uber-jar | github</a></li>
</ul>
<ol>
<li><p>ä¸‹è½½ <code>dbvis_macos_11_0_jre.dmg</code> å¹¶æ‰§è¡Œå®‰è£…</p>
</li>
<li><p>ä¹Ÿå¯ä»¥ä¸‹è½½ <code>.tar.gz</code> åŒ…è¿›è¡Œå®‰è£… </p>
</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gunzip</span> <span class="selector-tag">dbvis_unix_11_0</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xf</span> <span class="selector-tag">dbvis_unix_11_0</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç‚¹å‡» Docker ä¸­ DbVisualizerå›¾æ ‡å¯åŠ¨ï¼Œæˆ–ä½¿ç”¨å¦‚ä¸‹è„šæœ¬å¯åŠ¨</li>
</ol>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DbVisualizer/dbvis.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ä» <a href="https://github.com/timveil/hive-jdbc-uber-jar/releases" target="_blank" rel="noopener">hive-jdbc-uber-jar | github</a> ä¸‹è½½ <code>hive-jdbc-uber-jar</code>ï¼Œæ”¾ç½®åˆ° <code>/Users/lbs/.dbvis/jdbc</code> è·¯å¾„ä¸‹ï¼Œå¹¶å¯¼å…¥åˆ° DbVisualizer é…ç½®ä¸­</li>
</ol>
<ol start="5">
<li>åœ¨ DbVisualizer çš„åå¥½è®¾ç½®ä¸­çš„ <code>Specify overridden Java VM Prperties here</code> ä¸­æ·»åŠ å¦‚ä¸‹è®¾ç½®</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Dsun<span class="selector-class">.security</span><span class="selector-class">.krb5</span><span class="selector-class">.debug</span>=true</span><br><span class="line">-Djavax<span class="selector-class">.security</span><span class="selector-class">.auth</span><span class="selector-class">.useSubjectCredsOnly</span>=false</span><br></pre></td></tr></table></figure>



<h2 id="Hiveäº¤äº’å¼æ¨¡å¼-CLI"><a href="#Hiveäº¤äº’å¼æ¨¡å¼-CLI" class="headerlink" title="Hiveäº¤äº’å¼æ¨¡å¼ CLI"></a>Hiveäº¤äº’å¼æ¨¡å¼ CLI</h2><p>è¿è¡Œ <code>hive</code> æˆ–è€… <code>hive shell</code> å¯ä»¥è¿›å…¥Hive Shellã€‚Hiveçš„äº¤äº’æ¨¡å¼éµå¾ªä¸‹è¿°è§„åˆ™ã€‚</p>
<ol>
<li><code>quit</code>,<code>exit</code>:  é€€å‡ºäº¤äº’å¼shell</li>
<li><code>reset</code>: é‡ç½®é…ç½®ä¸ºé»˜è®¤å€¼</li>
<li><code>set &lt;key&gt;=&lt;value&gt;</code> : ä¿®æ”¹ç‰¹å®šå˜é‡çš„å€¼(å¦‚æœå˜é‡åæ‹¼å†™é”™è¯¯ï¼Œä¸ä¼šæŠ¥é”™)</li>
<li><code>set</code> :  è¾“å‡ºç”¨æˆ·è¦†ç›–çš„ hiveé…ç½®å˜é‡</li>
<li><code>set -v</code> : è¾“å‡ºæ‰€æœ‰Hadoopå’ŒHiveçš„é…ç½®å˜é‡</li>
<li><code>add FILE[S] *</code>, <code>add JAR[S] *</code>, <code>add ARCHIVE[S] *</code> : æ·»åŠ  ä¸€ä¸ªæˆ–å¤šä¸ª file, jar, archivesåˆ°åˆ†å¸ƒå¼ç¼“å­˜</li>
<li><code>list FILE[S]</code>, <code>list JAR[S]</code>, <code>list ARCHIVE[S]</code> : è¾“å‡ºå·²ç»æ·»åŠ åˆ°åˆ†å¸ƒå¼ç¼“å­˜çš„èµ„æº</li>
<li><code>list FILE[S] *</code>, <code>list JAR[S] *</code>,<code>list ARCHIVE[S] *</code> : æ£€æŸ¥ç»™å®šçš„èµ„æºæ˜¯å¦æ·»åŠ åˆ°åˆ†å¸ƒå¼ç¼“å­˜</li>
<li><code>delete FILE[S] *</code>, <code>delete JAR[S] *</code>, <code>delete ARCHIVE[S] *</code> : ä»åˆ†å¸ƒå¼ç¼“å­˜åˆ é™¤æŒ‡å®šçš„èµ„æº</li>
<li><code>! &lt;command&gt;</code> :  ä» Hive shell æ‰§è¡Œä¸€ä¸ª shell å‘½ä»¤</li>
<li><code>dfs &lt;dfs command&gt;</code> :  ä» Hive shell æ‰§è¡Œä¸€ä¸ª dfs å‘½ä»¤</li>
<li><code>&lt;query string&gt;</code> : æ‰§è¡Œä¸€ä¸ª Hive æŸ¥è¯¢ï¼Œç„¶åè¾“å‡ºç»“æœåˆ°æ ‡å‡†è¾“å‡º</li>
<li><code>source FILE &lt;filepath&gt;</code>:  åœ¨ CLI é‡Œæ‰§è¡Œä¸€ä¸ª hive è„šæœ¬æ–‡ä»¶</li>
<li><code>!clear;</code>: æ¸…é™¤å‘½ä»¤è¡Œ</li>
<li><code>show tables;</code>ï¼š å±•ç¤ºæ•°æ®è¡¨</li>
<li><code>desc tableName</code>ï¼šå±•ç¤ºä¸€ä¸ªæ•°æ®è¡¨çš„ç»“æ„</li>
</ol>
<p>å’ŒSQLç±»ä¼¼ï¼ŒHiveQLä¸€èˆ¬æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ï¼ˆé™¤äº†å­—ç¬¦ä¸²æ¯”è¾ƒä»¥å¤–ï¼‰ï¼Œå› æ­¤ <code>show tables;</code> ç­‰åŒäº <code>SHOW TABLES;</code>ã€‚åˆ¶è¡¨ç¬¦ï¼ˆTabï¼‰ä¼šè‡ªåŠ¨è¡¥å…¨ Hive çš„å…³é”®å­—å’Œå‡½æ•°ã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„ Hive Shell æ“ä½œ Demoï¼Œè¯¦æƒ…å‚è€ƒ <a href="http://blog.fens.me/hadoop-hive-intro/" target="_blank" rel="noopener">Hiveå®‰è£…åŠä½¿ç”¨æ”»ç•¥ | ç²‰ä¸æ—¥å¿—</a>ã€‚</p>
<ul>
<li>åˆ›å»ºæœ¬åœ°æ•°æ®æ–‡ä»¶(æ–‡æœ¬ä»¥tabåˆ†éš”)</li>
</ul>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~ vi /home/cos/demo/t_hive.txt</span><br><span class="line"></span><br><span class="line"><span class="number">16</span>      <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">61</span>      <span class="number">12</span>      <span class="number">13</span></span><br><span class="line"><span class="number">41</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">17</span>      <span class="number">21</span>      <span class="number">3</span></span><br><span class="line"><span class="number">71</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">1</span>       <span class="number">12</span>      <span class="number">34</span></span><br><span class="line"><span class="number">11</span>      <span class="number">2</span>       <span class="number">34</span></span><br></pre></td></tr></table></figure>

<ul>
<li>è¿›å…¥Hive Shellï¼Œåˆ›å»ºæ–°è¡¨</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#åˆ›å»ºæ–°è¡¨</span><br><span class="line">hive&gt; <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_hive (a <span class="type">int</span>, b <span class="type">int</span>, c <span class="type">int</span>) <span class="keyword">ROW</span> <span class="keyword">FORMAT</span> DELIMITED FIELDS TERMINATED <span class="keyword">BY</span> <span class="string">'\t'</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.489</span> seconds</span><br></pre></td></tr></table></figure>


<ul>
<li>æŸ¥çœ‹è¡¨</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line">OK</span><br><span class="line">t_hive</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.099</span> seconds</span><br></pre></td></tr></table></figure>


<ul>
<li>æ­£åˆ™åŒ¹é…è¡¨å</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive&gt;<span class="keyword">show</span> <span class="keyword">tables</span> <span class="string">'*t*'</span>;</span><br><span class="line">OK</span><br><span class="line">t_hive</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.065</span> seconds</span><br></pre></td></tr></table></figure>


<ul>
<li>æŸ¥çœ‹è¡¨æ•°æ®</li>
</ul>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span> t_hive;</span><br><span class="line">OK</span><br><span class="line"><span class="number">16</span>      <span class="number">2</span>       <span class="number">3</span></span><br><span class="line"><span class="number">61</span>      <span class="number">12</span>      <span class="number">13</span></span><br><span class="line"><span class="number">41</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">17</span>      <span class="number">21</span>      <span class="number">3</span></span><br><span class="line"><span class="number">71</span>      <span class="number">2</span>       <span class="number">31</span></span><br><span class="line"><span class="number">1</span>       <span class="number">12</span>      <span class="number">34</span></span><br><span class="line"><span class="number">11</span>      <span class="number">2</span>       <span class="number">34</span></span><br><span class="line">Time taken: <span class="number">0.264</span> seconds</span><br></pre></td></tr></table></figure>

<ul>
<li>æŸ¥çœ‹è¡¨ç»“æ„</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">desc</span> t_hive;</span><br><span class="line">OK</span><br><span class="line">a       <span class="type">int</span></span><br><span class="line">b       <span class="type">int</span></span><br><span class="line">c       <span class="type">int</span></span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.1</span> seconds</span><br></pre></td></tr></table></figure>
<ul>
<li>ä¿®æ”¹è¡¨ï¼Œå¢åŠ ä¸€ä¸ªå­—æ®µ</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> t_hive <span class="keyword">ADD</span> <span class="keyword">COLUMNS</span> (new_col String);</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.186</span> seconds</span><br><span class="line">hive&gt; <span class="keyword">desc</span> t_hive;</span><br><span class="line">OK</span><br><span class="line">a       <span class="type">int</span></span><br><span class="line">b       <span class="type">int</span></span><br><span class="line">c       <span class="type">int</span></span><br><span class="line">new_col string</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.086</span> seconds</span><br></pre></td></tr></table></figure>


<ul>
<li>åˆ é™¤è¡¨</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">DROP</span> <span class="keyword">TABLE</span> t_hadoop;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.767</span> seconds</span><br><span class="line"></span><br><span class="line">hive&gt; <span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.064</span> seconds</span><br></pre></td></tr></table></figure>


<h2 id="Beeline"><a href="#Beeline" class="headerlink" title="Beeline"></a>Beeline</h2><h3 id="HiveServer2"><a href="#HiveServer2" class="headerlink" title="HiveServer2"></a>HiveServer2</h3><p>Hive å†…ç½®äº† <code>HiveServer</code> å’Œ <code>HiveServer2</code> æœåŠ¡ï¼Œä¸¤è€…éƒ½å…è®¸å®¢æˆ·ç«¯ä½¿ç”¨å¤šç§ç¼–ç¨‹è¯­è¨€è¿›è¡Œè¿æ¥ï¼Œä½†æ˜¯ HiveServer ä¸èƒ½å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯çš„å¹¶å‘è¯·æ±‚ï¼Œæ‰€ä»¥äº§ç”Ÿäº† <code>HiveServer2</code>ã€‚</p>
<p><code>HiveServer2</code>ï¼ˆ<code>HS2</code>ï¼‰å…è®¸è¿œç¨‹å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨å„ç§ç¼–ç¨‹è¯­è¨€å‘ Hive æäº¤è¯·æ±‚å¹¶æ£€ç´¢ç»“æœï¼Œæ”¯æŒå¤šå®¢æˆ·ç«¯å¹¶å‘è®¿é—®å’Œèº«ä»½éªŒè¯ã€‚HS2 æ˜¯ç”±å¤šä¸ªæœåŠ¡ç»„æˆçš„å•ä¸ªè¿›ç¨‹ï¼Œå…¶åŒ…æ‹¬åŸºäº Thrift çš„ Hive æœåŠ¡ï¼ˆTCP æˆ– HTTPï¼‰å’Œç”¨äº Web UI çš„ Jetty Web æœåŠ¡å™¨ã€‚</p>
<p>HiveServer2 æ‹¥æœ‰è‡ªå·±çš„ CLI(<code>Beeline</code>)ï¼ŒBeeline æ˜¯ä¸€ä¸ªåŸºäº SQLLine çš„ JDBC å®¢æˆ·ç«¯ã€‚ç”±äº HiveServer2 æ˜¯ Hive å¼€å‘ç»´æŠ¤çš„é‡ç‚¹ (Hive0.15 åå°±ä¸å†æ”¯æŒ hiveserver)ï¼Œæ‰€ä»¥ Hive CLI å·²ç»ä¸æ¨èä½¿ç”¨äº†ï¼Œå®˜æ–¹æ›´åŠ æ¨èä½¿ç”¨ Beelineã€‚</p>
<ul>
<li><a href="https://juejin.im/post/5d8593905188254009777049" target="_blank" rel="noopener">Hive CLI å’Œ Beeline å‘½ä»¤è¡Œçš„åŸºæœ¬ä½¿ç”¨</a></li>
</ul>
<h3 id="Beeline-å‚æ•°"><a href="#Beeline-å‚æ•°" class="headerlink" title="Beeline å‚æ•°"></a>Beeline å‚æ•°</h3><p>Beeline æ‹¥æœ‰æ›´å¤šå¯ä½¿ç”¨å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ <code>beeline --help</code> æŸ¥çœ‹ï¼Œå®Œæ•´å‚æ•°å¦‚ä¸‹</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"> // ...</span></span><br><span class="line"><span class="comment"> // ...</span></span><br><span class="line"> </span><br><span class="line">Example:</span><br><span class="line"> <span class="number">1.</span> Connect <span class="keyword">using</span> simple authentication <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">localhost</span>:<span class="title">10000</span></span><br><span class="line"> $ beeline -u jdbc:hive2://localhost:<span class="number">10000</span> username password</span><br><span class="line"></span><br><span class="line"> <span class="number">2.</span> Connect <span class="keyword">using</span> simple authentication <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">hs</span>.<span class="title">local</span>:<span class="title">10000</span> <span class="title">using</span> -<span class="title">n</span> <span class="title">for</span> <span class="title">username</span> <span class="title">and</span> -<span class="title">p</span> <span class="title">for</span> <span class="title">password</span></span><br><span class="line"> $ beeline -n username -p password -u jdbc:hive2://hs2.<span class="built_in">local</span>:<span class="number">10012</span></span><br><span class="line"></span><br><span class="line"> <span class="number">3.</span> Connect <span class="keyword">using</span> Kerberos authentication <span class="keyword">with</span> hive/localhost@mydomain.com <span class="keyword">as</span> HiveServer2 principal</span><br><span class="line"> $ beeline -u <span class="string">"jdbc:hive2://hs2.local:10013/default;principal=hive/localhost@mydomain.com"</span></span><br><span class="line"></span><br><span class="line"> <span class="number">4.</span> Connect <span class="keyword">using</span> SSL connection <span class="built_in">to</span> HiveServer2 <span class="keyword">on</span> <span class="title">localhost</span> <span class="title">at</span> <span class="title">10000</span></span><br><span class="line"> $ beeline <span class="string">"jdbc:hive2://localhost:10000/default;ssl=true;sslTrustStore=/usr/local/truststore;trustStorePassword=mytruststorepassword"</span></span><br><span class="line"></span><br><span class="line"> <span class="number">5.</span> Connect <span class="keyword">using</span> LDAP authentication</span><br><span class="line"> $ beeline -u jdbc:hive2://hs2.<span class="built_in">local</span>:<span class="number">10013</span>/default &lt;ldap-username&gt; &lt;ldap-password&gt;</span><br></pre></td></tr></table></figure>


<p>åœ¨ Hive CLI ä¸­æ”¯æŒçš„å‚æ•°ï¼ŒBeeline éƒ½æ”¯æŒï¼Œå¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ã€‚æ›´å¤šå‚æ•°è¯´æ˜å¯ä»¥å‚è§å®˜æ–¹æ–‡æ¡£ <a href="https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline%E2%80%93NewCommandLineShell" target="_blank" rel="noopener">Beeline Command Options</a>ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>-u <database URL></td>
<td>æ•°æ®åº“åœ°å€</td>
</tr>
<tr>
<td>-n <username></td>
<td>ç”¨æˆ·å</td>
</tr>
<tr>
<td>-p <password></td>
<td>å¯†ç </td>
</tr>
<tr>
<td>-d <driver class></td>
<td>é©±åŠ¨ (å¯é€‰)</td>
</tr>
<tr>
<td>-e <query></td>
<td>æ‰§è¡Œ SQL å‘½ä»¤</td>
</tr>
<tr>
<td>-f <file></td>
<td>æ‰§è¡Œ SQL è„šæœ¬</td>
</tr>
</tbody></table>
<p>ä¾‹å¦‚ï¼Œä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¿æ¥ Hive</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $ beeline -u jdbc:hive2://localhost:10000  -n username -p password </span></span><br><span class="line">$ beeline -u <span class="string">jdbc:</span><span class="string">hive2:</span><span class="comment">//localhost:10000  -n hive -p Hive113459...</span></span><br></pre></td></tr></table></figure>

<h2 id="Ambari"><a href="#Ambari" class="headerlink" title="Ambari"></a>Ambari</h2><ul>
<li><a href="http://ambari.apache.org/1.2.2/installing-hadoop-using-ambari/content/index.html" target="_blank" rel="noopener">Ambari User Guide</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-bigdata-ambari/index.html" target="_blank" rel="noopener">Ambariâ€”â€”å¤§æ•°æ®å¹³å°çš„æ­å»ºåˆ©å™¨</a></li>
<li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-bigdata-ambari2/" target="_blank" rel="noopener">Ambariâ€”â€”å¤§æ•°æ®å¹³å°çš„æ­å»ºåˆ©å™¨ä¹‹è¿›é˜¶ç¯‡</a></li>
</ul>
<p>å’ŒHiveè¿›è¡Œäº¤äº’çš„æ–¹å¼ä¸»è¦æœ‰2ç§ï¼šå‘½ä»¤è¡Œå’ŒAmbariè§†å›¾ã€‚</p>
<p>å°± Ambari çš„ä½œç”¨æ¥è¯´ï¼Œå°±æ˜¯åˆ›å»ºã€ç®¡ç†ã€ç›‘è§† Hadoop çš„é›†ç¾¤ï¼Œä½†æ˜¯è¿™é‡Œçš„ Hadoop æ˜¯å¹¿ä¹‰ï¼ŒæŒ‡çš„æ˜¯ Hadoop æ•´ä¸ªç”Ÿæ€åœˆï¼ˆä¾‹å¦‚ Hiveï¼ŒHbaseï¼ŒSqoopï¼ŒZookeeper ç­‰ï¼‰ï¼Œè€Œå¹¶ä¸ä»…æ˜¯ç‰¹æŒ‡ Hadoopã€‚ç”¨ä¸€å¥è¯æ¥è¯´ï¼ŒAmbari å°±æ˜¯ä¸ºäº†è®© Hadoop ä»¥åŠç›¸å…³çš„å¤§æ•°æ®è½¯ä»¶æ›´å®¹æ˜“ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ã€‚</p>
<p>Ambari è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ¶æ„çš„è½¯ä»¶ï¼Œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>Ambari Server</code> å’Œ <code>Ambari Agent</code>ã€‚ç®€å•æ¥è¯´ï¼Œ</p>
<ul>
<li>ç”¨æˆ·é€šè¿‡ Ambari Server é€šçŸ¥ Ambari Agent å®‰è£…å¯¹åº”çš„è½¯ä»¶</li>
<li>Agent ä¼šå®šæ—¶åœ°å‘é€å„ä¸ªæœºå™¨æ¯ä¸ªè½¯ä»¶æ¨¡å—çš„çŠ¶æ€ç»™ Ambari Server</li>
<li>æœ€ç»ˆè¿™äº›çŠ¶æ€ä¿¡æ¯ä¼šå‘ˆç°åœ¨ Ambari çš„ GUIï¼Œæ–¹ä¾¿ç”¨æˆ·äº†è§£åˆ°é›†ç¾¤çš„å„ç§çŠ¶æ€ï¼Œå¹¶è¿›è¡Œç›¸åº”çš„ç»´æŠ¤</li>
</ul>
<h2 id="Hiveå®æˆ˜Demo"><a href="#Hiveå®æˆ˜Demo" class="headerlink" title="Hiveå®æˆ˜Demo"></a>Hiveå®æˆ˜Demo</h2><ul>
<li><a href="http://blog.fens.me/hadoop-hive-10g/" target="_blank" rel="noopener">Hiveå¯¼å…¥10Gæ•°æ®çš„æµ‹è¯• | ç²‰ä¸æ—¥å¿—</a></li>
<li><a href="http://blog.fens.me/finance-rhive-repurchase/" target="_blank" rel="noopener">ç”¨RHiveä»å†å²æ•°æ®ä¸­æå–é€†å›è´­ä¿¡æ¯ | ç²‰ä¸æ—¥å¿—</a></li>
</ul>
<h2 id="Hiveæ¶æ„"><a href="#Hiveæ¶æ„" class="headerlink" title="Hiveæ¶æ„"></a>Hiveæ¶æ„</h2><p>å°½ç®¡Hiveä½¿ç”¨èµ·æ¥ç±»ä¼¼SQLï¼Œä½†å®ƒä»ç„¶ä¸æ˜¯SQLï¼Œå°¤å…¶ä½“ç°åœ¨å¤„ç†é€Ÿåº¦æ–¹é¢ã€‚åº•å±‚çš„HiveæŸ¥è¯¢ä»ç„¶æ˜¯ä»¥ MapReduce ä½œä¸šçš„å½¢å¼è¿è¡Œã€‚MapReduceæ˜¯æ‰¹å¤„ç†ï¼Œè€ŒSQLåˆ™æ˜¯ä¸€ç§äº¤äº’å¼å¤„ç†è¯­éŸ³ã€‚</p>
<h3 id="HCatalog"><a href="#HCatalog" class="headerlink" title="HCatalog"></a>HCatalog</h3><p>HCatalog æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„å…ƒæ•°æ®æœåŠ¡ï¼Œå…è®¸ä¸åŒçš„å·¥å…·å¦‚ Pigã€MapReduce ç­‰é€šè¿‡ HCatalog ç›´æ¥è®¿é—®å­˜å‚¨åœ¨ HDFS ä¸Šçš„åº•å±‚æ–‡ä»¶ã€‚</p>
<p>HCatalog æœ¬è´¨ä¸Šæ˜¯æ•°æ®è®¿é—®å·¥å…·ï¼ˆå¦‚Hiveæˆ–Pigï¼‰å’Œåº•å±‚æ–‡ä»¶ä¹‹é—´çš„æŠ½è±¡å±‚ã€‚</p>
<h2 id="Hive-æ•°æ®ç±»å‹"><a href="#Hive-æ•°æ®ç±»å‹" class="headerlink" title="Hive æ•°æ®ç±»å‹"></a>Hive æ•°æ®ç±»å‹</h2><ul>
<li><a href="https://cwiki.apache.org/confluence/display/Hive#Home-UserDocumentation" target="_blank" rel="noopener">User Documentation - Apache Hive</a></li>
</ul>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><ul>
<li>tinyint/smallint/int/bigintï¼šæ•´æ•°ç±»å‹</li>
<li>float/doubleï¼šæµ®ç‚¹æ•°ç±»å‹</li>
<li>booleanï¼šå¸ƒå°”ç±»å‹</li>
<li>stringï¼šå­—ç¬¦ä¸²ç±»å‹</li>
</ul>
<p><code>string</code> ç±»å‹ä¸‹åˆåŒ…æ‹¬ å˜é•¿å­—ç¬¦ä¸² <code>VARCHAR</code> å’Œ å®šé•¿å­—ç¬¦ä¸² <code>CHAR</code>ã€‚ä¸‹é¢ç»™å‡ºä¾‹å­ï¼Œè¯´æ˜ä¸¤è€…åŒºåˆ«</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive &gt; <span class="keyword">create</span> <span class="keyword">table</span> test1</span><br><span class="line">     &gt; (vname <span class="type">varchar</span>(<span class="number">20</span>), cname <span class="type">char</span>(<span class="number">20</span>));</span><br><span class="line">     &gt; <span class="keyword">desc</span> test1;</span><br><span class="line">     </span><br><span class="line">vname   <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">cname   <span class="type">char</span>(<span class="number">20</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œ<code>varchar(20)</code> è¡¨ç¤ºæœ€å¤§é•¿åº¦ä¸º20ï¼Œå®é™…é•¿åº¦å¯èƒ½ä¸è¶³20ã€‚<code>char(20)</code> è¡¨ç¤ºé•¿åº¦å›ºå®šä¸º20ã€‚</p>
<h3 id="å¤æ‚æ•°æ®ç±»å‹"><a href="#å¤æ‚æ•°æ®ç±»å‹" class="headerlink" title="å¤æ‚æ•°æ®ç±»å‹"></a>å¤æ‚æ•°æ®ç±»å‹</h3><ul>
<li>Arrayï¼šæ•°ç»„ï¼Œç”±ä¸€ç³»åˆ—ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ç»„æˆ</li>
<li>Mapï¼šé›†åˆï¼ŒåŒ…å« <code>key-&gt;value</code> é”®å€¼å¯¹ï¼Œå¯ä»¥é€šè¿‡ <code>key</code> æ¥è®¿é—®å…ƒç´ </li>
<li>Structï¼šç»“æ„ç±»å‹ï¼Œå¯ä»¥åŒ…å«ä¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å¯ä»¥é€šè¿‡ â€œç‚¹è¯­æ³•â€ çš„æ–¹å¼è®¿é—®</li>
</ul>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; create table student</span><br><span class="line">    &gt; (sid <span class="built_in">int</span>,</span><br><span class="line">    &gt; sname <span class="built_in">string</span>,</span><br><span class="line">    &gt; grade1 <span class="built_in">array<span class="keyword">&lt;<span class="built_in">float</span>&gt;</span></span>,</span><br><span class="line">    &gt; grade2 map&lt;<span class="built_in">string</span>,<span class="built_in">float</span>&gt;</span><br><span class="line">    &gt; info struct&lt;name:<span class="built_in">string</span>, age:<span class="built_in">int</span>&gt;);</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">0.246</span> seconds</span><br><span class="line"></span><br><span class="line">hive&gt; desc student;</span><br><span class="line">OK</span><br><span class="line">sid                 	<span class="built_in">int</span></span><br><span class="line">sname               	<span class="built_in">string</span></span><br><span class="line">grade1               	<span class="built_in">array<span class="keyword">&lt;<span class="built_in">float</span>&gt;</span></span></span><br><span class="line">grade2                  map&lt;<span class="built_in">string</span>,<span class="built_in">float</span>&gt;</span><br><span class="line">info                    struct&lt;name:<span class="built_in">string</span>, age:<span class="built_in">int</span>&gt;</span><br><span class="line">Time taken: <span class="number">0.077</span> seconds, Fetched: <span class="number">5</span> row(s)</span><br></pre></td></tr></table></figure>


<h3 id="æ—¶é—´ç±»å‹"><a href="#æ—¶é—´ç±»å‹" class="headerlink" title="æ—¶é—´ç±»å‹"></a>æ—¶é—´ç±»å‹</h3><ul>
<li>Dateï¼šä» Hive 0.12.0 å¼€å§‹æ”¯æŒ</li>
<li>Timestampï¼šä» Hive 0.8.0 å¼€å§‹æ”¯æŒ</li>
</ul>
<h2 id="Hive-æ–‡ä»¶æ ¼å¼"><a href="#Hive-æ–‡ä»¶æ ¼å¼" class="headerlink" title="Hive æ–‡ä»¶æ ¼å¼"></a>Hive æ–‡ä»¶æ ¼å¼</h2><p>Hive æ”¯æŒ4ç§æ–‡ä»¶æ ¼å¼</p>
<ol>
<li><code>TextFile</code> ï¼ˆé»˜è®¤æ ¼å¼ï¼‰ï¼šåŸºäºè¡Œåˆ—æ··åˆçš„æ€æƒ³</li>
<li><code>SequenceFile</code> ï¼šåŸºäºè¡Œå­˜å‚¨</li>
<li><code>RCFile</code> ï¼šåŸºäºè¡Œå­˜å‚¨</li>
<li>è‡ªå®šä¹‰</li>
</ol>
<p>åŸºäº HDFS çš„è¡Œå­˜å‚¨å…·å¤‡å¿«é€Ÿæ•°æ®åŠ è½½å’ŒåŠ¨æ€è´Ÿè½½çš„é«˜é€‚åº”èƒ½åŠ›ï¼Œå› ä¸ºè¡Œå­˜å‚¨ä¿è¯äº†ç›¸åŒè®°å½•çš„æ‰€æœ‰åŸŸéƒ½åœ¨åŒä¸€ä¸ªé›†ç¾¤èŠ‚ç‚¹ã€‚ä½†æ˜¯å®ƒä¸èƒ½æ»¡è¶³å¿«é€Ÿçš„æŸ¥è¯¢å“åº”æ—¶é—´çš„è¦æ±‚ï¼Œå› ä¸ºå½“æŸ¥è¯¢ä»…ä»…é’ˆå¯¹æ‰€æœ‰åˆ—ä¸­çš„å°‘æ•°å‡ åˆ—æ—¶ï¼Œä»–å°±ä¸èƒ½è·³è¿‡ä¸éœ€è¦çš„åˆ—ï¼Œç›´æ¥å®šä½åˆ°æ‰€éœ€çš„åˆ—ã€‚æ­¤å¤–ï¼Œè¡Œå­˜å‚¨ä¹Ÿä¸æ˜“è·å¾—ä¸€ä¸ªè¾ƒé«˜çš„å‹ç¼©æ¯”ã€‚</p>
<h3 id="TextFile"><a href="#TextFile" class="headerlink" title="TextFile"></a>TextFile</h3><p>TextFile æ˜¯é»˜è®¤æ ¼å¼ï¼Œæ•°æ®ä¸åšå‹ç¼©ï¼Œç£ç›˜å¼€é”€å¤§ï¼Œæ•°æ®è§£æå¼€é”€å¤§ã€‚å¯ç»“åˆ Gzipï¼ŒBzip2ä½¿ç”¨ã€‚ä½†ä½¿ç”¨è¿™æ–¹å¼ï¼ŒHive ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œä»è€Œæ— æ³•å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œæ“ä½œã€‚</p>
<h3 id="SequenceFile"><a href="#SequenceFile" class="headerlink" title="SequenceFile"></a>SequenceFile</h3><p>SequenceFile æ˜¯Hadoop API æä¾›çš„ä¸€ç§äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒï¼Œå…¶å…·æœ‰ä½¿ç”¨æ–¹ä¾¿ï¼Œå¯åˆ†å‰²ï¼Œå¯å‹ç¼©çš„ç‰¹ç‚¹ã€‚ SequenceFile æ”¯æŒä¸‰ç§å‹ç¼©é€‰æ‹©ï¼š<code>NONE</code>, <code>RECORD</code>, <code>BLOCK</code>ã€‚<code>RECORD</code> å‹ç¼©ç‡è¾ƒä½ï¼Œä¸€èˆ¬å»ºè®®ä½¿ç”¨ <code>BLOCK</code> å‹ç¼©ã€‚</p>
<h3 id="RCFile"><a href="#RCFile" class="headerlink" title="RCFile"></a>RCFile</h3><p>RCFile æ˜¯ Facebook å¼€å‘çš„ä¸€ä¸ªé›†è¡Œå­˜å‚¨å’Œåˆ—å­˜å‚¨çš„ä¼˜ç‚¹äºä¸€èº«ï¼Œå‹ç¼©æ¯”æ›´é«˜ï¼Œè¯»å–åˆ—æ›´å¿«ã€‚</p>
<p>RCFile å­˜å‚¨ç»“æ„éµå¾ªâ€œå…ˆæ°´å¹³åˆ’åˆ†ï¼Œå†å‚ç›´åˆ’åˆ†â€çš„è®¾è®¡ç†å¿µã€‚RCFileä¿è¯åŒä¸€è¡Œçš„æ•°æ®ä½äºåŒä¸€èŠ‚ç‚¹ï¼Œå› æ­¤å…ƒç»„é‡æ„çš„å¼€é”€å¾ˆä½ã€‚å…¶æ¬¡ï¼Œåƒåˆ—å­˜å‚¨ä¸€æ ·ï¼ŒRCFile èƒ½å¤Ÿåˆ©ç”¨åˆ—ç»´åº¦çš„æ•°æ®å‹ç¼©ï¼Œå¹¶ä¸”èƒ½è·³è¿‡ä¸å¿…è¦çš„åˆ—è¯»å–ã€‚</p>
<blockquote>
<p>åœ¨ RC File çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥æ”¹è¿›ï¼Œå¼•å…¥äº† ORC ï¼ˆ<code>Optimized Record Columnar</code>ï¼‰ï¼ŒORC ä¸»è¦åœ¨å‹ç¼©ç¼–ç ã€æŸ¥è¯¢æ€§èƒ½ä¸Šè¿›è¡Œäº†å‡çº§ã€‚</p>
</blockquote>
<h3 id="è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼"><a href="#è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼" class="headerlink" title="è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼"></a>è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼</h3><p>å½“ç”¨æˆ·çš„æ•°æ®æ–‡ä»¶æ ¼å¼ä¸èƒ½è¢«å½“å‰Hiveè¯†åˆ«çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼ï¼Œé€šè¿‡å®ç° <code>InputFormat</code> å’Œ <code>OutputFormat</code> è‡ªå®šä¹‰è¾“å…¥/è¾“å‡ºæ ¼å¼ã€‚</p>
<h2 id="Hiveçš„æ•°æ®å­˜å‚¨"><a href="#Hiveçš„æ•°æ®å­˜å‚¨" class="headerlink" title="Hiveçš„æ•°æ®å­˜å‚¨"></a>Hiveçš„æ•°æ®å­˜å‚¨</h2><p>Hive çš„å­˜å‚¨æ˜¯å»ºç«‹åœ¨ Hadoop æ–‡ä»¶ç³»ç»Ÿä¹‹ä¸Šçš„ã€‚Hive æœ¬èº«æ²¡æœ‰ä¸“é—¨çš„æ•°æ®å­˜å‚¨æ ¼å¼ï¼Œä¹Ÿä¸èƒ½ä¸ºæ•°æ®å»ºç«‹ç´¢å¼•ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥éå¸¸è‡ªç”±åœ°ç»„ç»‡ Hive ä¸­çš„è¡¨ï¼Œåªéœ€è¦åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å‘Šè¯‰ Hive æ•°æ®ä¸­çš„åˆ—åˆ†éš”ç¬¦å°±å¯ä»¥è§£ææ•°æ®äº†ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæ‰“å¼€ <code>http://localhost:50070/</code>ï¼Œé€‰æ‹©é¡¶éƒ¨åˆ†ç±»æ ä¸­çš„ <code>Utilities -&gt; Browse the file system</code>ï¼Œå¯ä»¥æŸ¥çœ‹åˆ° Hive ä¸­åˆ›å»ºçš„æ•°æ®åº“è¡¨å¯¹åº”çš„æ–‡ä»¶ï¼ˆå­˜å‚¨åœ¨ <code>/user/hive/warehouse</code> è·¯å¾„ä¸‹ï¼‰ã€‚</p>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-hive-hdfs-1.png" alt=""></p>
<h3 id="Hiveçš„æ•°æ®æ¨¡å‹"><a href="#Hiveçš„æ•°æ®æ¨¡å‹" class="headerlink" title="Hiveçš„æ•°æ®æ¨¡å‹"></a>Hiveçš„æ•°æ®æ¨¡å‹</h3><p>Hive ä¸­ä¸»è¦åŒ…æ‹¬ 4 ç§æ•°æ®æ¨¡å‹</p>
<ol>
<li>è¡¨ï¼ˆTableï¼‰</li>
<li>å¤–éƒ¨è¡¨ï¼ˆExternal Tableï¼‰</li>
<li>åˆ†åŒºï¼ˆPartitionï¼‰</li>
<li>æ¡¶ï¼ˆBucketï¼‰</li>
</ol>
<p>Hive çš„è¡¨å’Œæ•°æ®åº“ä¸­çš„è¡¨åœ¨æ¦‚å¿µä¸Šæ²¡æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Œåœ¨ Hive ä¸­æ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å­˜å‚¨ç›®å½•ã€‚è€Œå¤–éƒ¨è¡¨æŒ‡å‘å·²ç»åœ¨ HDFS ä¸­å­˜åœ¨çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºåˆ†åŒºã€‚</p>
<p>Hive ä¸­çš„æ¯ä¸ªåˆ†åŒºéƒ½å¯¹åº”æ•°æ®åº“ä¸­ç›¸åº”åˆ†åŒºåˆ—çš„ä¸€ä¸ªç´¢å¼•ï¼Œä½†æ˜¯å…¶å¯¹åˆ†åŒºçš„ç»„ç»‡æ–¹å¼å’Œä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸åŒã€‚</p>
<p>æ¡¶åœ¨æŒ‡å®šåˆ—è¿›è¡Œ Hash è®¡ç®—æ—¶ï¼Œä¼šæ ¹æ®å“ˆå¸Œå€¼åˆ‡åˆ†æ•°æ®ï¼Œä½¿æ¯ä¸ªæ¡¶å¯¹åº”ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<h4 id="è¡¨"><a href="#è¡¨" class="headerlink" title="è¡¨"></a>è¡¨</h4><p>è¡¨å¯ä»¥ç»†åˆ†ä¸º</p>
<ol>
<li>Table å†…éƒ¨è¡¨</li>
<li>Partition åˆ†åŒºè¡¨</li>
<li>External Table å¤–éƒ¨è¡¨</li>
<li>Bucket Table æ¡¶è¡¨</li>
</ol>
<h4 id="è§†å›¾-View"><a href="#è§†å›¾-View" class="headerlink" title="è§†å›¾ View"></a>è§†å›¾ View</h4><ul>
<li>è§†å›¾æ˜¯ä¸€ç§è™šè¡¨ï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘æ¦‚å¿µï¼ŒHive æš‚ä¸æ”¯æŒç‰©åŒ–è§†å›¾</li>
<li>è§†å›¾å¯ä»¥è·¨è¶Šå¤šå¼ è¡¨</li>
<li>è§†å›¾å»ºç«‹åœ¨å·²æœ‰è¡¨çš„åŸºç¡€ä¸Šï¼Œè§†å›¾èµ–ä»¥å»ºç«‹çš„è¿™äº›è¡¨ç§°ä¸ºåŸºè¡¨</li>
<li>è§†å›¾å¯ä»¥ç®€åŒ–å¤æ‚çš„æŸ¥è¯¢</li>
<li>è§†å›¾ VIEW æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒ <code>LOAD/INSERT/ALTER</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>ALTER VIEW</code> æ”¹å˜ VIEW å®šä¹‰</li>
<li>Hive æ”¯æŒè¿­ä»£è§†å›¾</li>
</ul>
<h2 id="Hive-æ•°æ®æ“ä½œ"><a href="#Hive-æ•°æ®æ“ä½œ" class="headerlink" title="Hive æ•°æ®æ“ä½œ"></a>Hive æ•°æ®æ“ä½œ</h2><blockquote>
<p>åœ¨æ‰§è¡Œæ“ä½œå‰ï¼Œè¯·ç¡®ä¿ <code>localhost:50070</code> é¡µé¢è®¿é—®åˆ°çš„ <code>Live Node</code> ä¸ªæ•°å¤§äº0ã€‚</p>
</blockquote>
<h3 id="å‘è¡¨ä¸­è£…è½½æ•°æ®"><a href="#å‘è¡¨ä¸­è£…è½½æ•°æ®" class="headerlink" title="å‘è¡¨ä¸­è£…è½½æ•°æ®"></a>å‘è¡¨ä¸­è£…è½½æ•°æ®</h3><ul>
<li><a href="https://blog.csdn.net/jclian91/article/details/78481673" target="_blank" rel="noopener">Hiveä¹‹å¯¼å…¥å¤–éƒ¨æ•°æ® | CSDN</a></li>
<li><a href="http://www.tracefact.net/tech/067.html" target="_blank" rel="noopener">Hive å†™å…¥æ•°æ®åˆ°Hiveè¡¨(å‘½ä»¤è¡Œ)</a></li>
</ul>
<h4 id="Demo-Insertæ’å…¥æ•°æ®"><a href="#Demo-Insertæ’å…¥æ•°æ®" class="headerlink" title="Demo-Insertæ’å…¥æ•°æ®"></a>Demo-Insertæ’å…¥æ•°æ®</h4><ol>
<li>åˆ›å»º <code>hiveDemo</code> æ•°æ®åº“å¹¶ä½¿ç”¨è¯¥æ•°æ®åº“</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> datbase <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> hiveDemo;</span><br><span class="line"><span class="keyword">show</span> <span class="keyword">databases</span>;</span><br><span class="line"><span class="keyword">use</span> hiveDemo;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å»ºè¡¨/æŸ¥çœ‹/åˆ é™¤ æ•°æ®è¡¨</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span>;</span><br><span class="line"></span><br><span class="line">hive&gt; show tables;</span><br><span class="line"></span><br><span class="line">hive&gt; drop table golds_log;</span><br><span class="line"></span><br><span class="line">hive&gt; desc golds_log;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ <code>Insert...Values</code> è¯­å¥å†™å…¥æ•°æ®</li>
</ol>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert into table golds_log values</span><br><span class="line">(<span class="number">3645356</span>,'wds<span class="number">765432</span>1(<span class="number">417175</span>2)','æ–°äººæ³¨å†Œå¥–åŠ±',<span class="number">1700</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">2016869</span>,'dqyx<span class="number">12345678</span>9(<span class="number">237669</span>9)','å‚åŠ ä¸€åœºæ¯”èµ›',<span class="number">1140</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">3630468</span>,'dke<span class="number">377661</span>1(<span class="number">415606</span>4)','å¤§è½¬ç›˜å¥–åŠ±',<span class="number">1200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">995267</span>,'a<span class="number">25441318</span>9(<span class="number">122941</span>7)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">795276</span>,'li<span class="number">876286</span>6(<span class="number">971402</span>)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">1200</span>,<span class="number">1526027152</span>);</span><br></pre></td></tr></table></figure>



<p>æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœè¾“å‡ºï¼Œè¯´æ˜åœ¨æ‰§è¡Œ <code>Insert...values</code> è¯­å¥æ—¶ï¼Œåº•å±‚æ˜¯åœ¨æ‰§è¡Œ MapReduce ä½œä¸šã€‚</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Query ID = lbs_20200422053833_55b98d5a-ba4c<span class="number">-470</span>d<span class="number">-909</span>a<span class="number">-098213</span>d1d937</span><br><span class="line">Total jobs = <span class="number">3</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> of <span class="number">3</span></span><br><span class="line">Number of reduce tasks determined at compile time: <span class="number">1</span></span><br><span class="line">In order to change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span><br><span class="line">In order to limit the maximum number of reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max=&lt;number&gt;</span><br><span class="line">In order to <span class="keyword">set</span> a constant number of reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces=&lt;number&gt;</span><br><span class="line">Starting Job = job_1587504428431_0001, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0001/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0001</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">14</span>,<span class="number">966</span> Stage<span class="number">-1</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">21</span>,<span class="number">154</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">05</span>:<span class="number">39</span>:<span class="number">27</span>,<span class="number">296</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">100</span>%</span><br><span class="line">Ended Job = job_1587504428431_0001</span><br><span class="line">Stage<span class="number">-4</span> <span class="keyword">is</span> selected by condition resolver.</span><br><span class="line">Stage<span class="number">-3</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Stage<span class="number">-5</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Moving data to directory hdfs:<span class="comment">//localhost:9000/user/hive/warehouse/hivedemo.db/golds_log/.hive-staging_hive_2020-04-22_05-38-33_916_330193107719508203-1/-ext-10000</span></span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   HDFS Read: <span class="number">20647</span> HDFS Write: <span class="number">764</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">54.82</span> seconds</span><br></pre></td></tr></table></figure>




<p>æ­¤æ—¶åœ¨ <code>http://localhost:50070/</code> é¡µé¢æŸ¥çœ‹ <code>Utillities -&gt; Browser the file system</code>ï¼Œåœ¨ <code>/user/hive/warehouse/hivedemo.db/golds_log</code> è·¯å¾„ä¸‹å¯ä»¥çœ‹åˆ°ä¸€ä¸ª <code>000000_0</code> çš„æ–‡ä»¶ï¼Œä¸‹è½½åˆ°æœ¬åœ°ï¼ŒæŸ¥çœ‹å…¶å†…å®¹ä¸º</p>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-1.png" alt=""></p>
<figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">3645356 </span>wds7654321(<span class="number">4171752</span>) æ–°äººæ³¨å†Œå¥–åŠ± <span class="number">1700</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">2016869 </span>dqyx123456789(<span class="number">2376699</span>) å‚åŠ ä¸€åœºæ¯”èµ› <span class="number">1140</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">3630468 </span>dke3776611(<span class="number">4156064</span>) å¤§è½¬ç›˜å¥–åŠ± <span class="number">1200</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">995267 </span>a254413189(<span class="number">1229417</span>) å¦å¦æ‹¼åç¿»ç‰Œ <span class="number">200</span> <span class="number">1526027152</span></span><br><span class="line"><span class="symbol">795276 </span>li8762866(<span class="number">971402</span>) å¦å¦æ‹¼åç¿»ç‰Œ <span class="number">1200</span> <span class="number">1526027152</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>000000_0</code> æ–‡ä»¶æ˜¯ä¸€ä¸ªæ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼ˆHiveä¸­é»˜è®¤çš„æ–‡ä»¶å­˜å‚¨æ ¼å¼ï¼‰ï¼Œå¯ä»¥ç”¨ VSCode æ‰“å¼€ã€‚</p>
</blockquote>
<ol start="4">
<li>ç»§ç»­æ‰§è¡Œ2æ¬¡ <code>Insert...values</code> å‘½ä»¤ï¼Œå†æ¬¡è®¿é—® <code>http://localhost:50070/explorer.html#/user/hive/warehouse/hivedemo.db/golds_log</code> é¡µé¢ï¼Œå¯ä»¥å‘ç°æœ‰3ä¸ªæ–‡ä»¶ï¼Œå³<strong>æ¯æ¬¡ä»»åŠ¡éƒ½ç”Ÿæˆäº†å•ç‹¬çš„æ•°æ®æ–‡ä»¶ã€‚</strong></li>
</ol>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-2.png" alt=""></p>
<p><strong>Hiveä¸­ï¼Œæ¯æ¬¡æ‰§è¡Œ <code>Insert</code> è¯­å¥ï¼ˆåº•å±‚æ‰§è¡Œ MapReduce ä»»åŠ¡ï¼‰éƒ½ä¼šç”Ÿæˆç‹¬ç«‹çš„æ•°æ®æ–‡ä»¶ã€‚å¯¹äº HDFS æ¥è¯´ï¼Œä¼˜åŠ¿æ˜¯å­˜å‚¨å°‘é‡å¤§æ–‡ä»¶ï¼Œä¸æ˜¯å­˜å‚¨å¤§é‡å°æ–‡ä»¶ã€‚</strong></p>
<p>è€Œå¯¹äºæˆ‘ä»¬çš„åº”ç”¨è€Œè¨€ï¼Œæ¯ 10 åˆ†é’Ÿå°±ä¼šåŒæ­¥ä¸€æ¬¡æ•°æ®åˆ° Hive ä»“åº“ï¼Œå¦‚æ­¤ä¸€æ¥ä¼šç”Ÿæˆæ— æ•°çš„å°æ–‡ä»¶ï¼Œç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚æ‰€ä»¥ç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šå¦‚ä½•åˆå¹¶å°æ–‡ä»¶ï¼Ÿ</p>
<h4 id="Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶"><a href="#Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶" class="headerlink" title="Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶"></a>Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶</h4><p>åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šè¡¨å­˜å‚¨çš„æ–‡ä»¶ç±»å‹ï¼ˆ<code>file format</code>ï¼‰ï¼Œé»˜è®¤çš„æ–‡ä»¶ç±»å‹æ˜¯ <code>Textfile</code>ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä¸‹è½½ç”Ÿæˆçš„ <code>000000_0</code> æ–‡ä»¶åï¼Œä½¿ç”¨ç¼–è¾‘å™¨å¯ä»¥ç›´æ¥æŸ¥çœ‹å…¶å†…å®¹ã€‚</p>
<p>Hive æä¾›äº†ä¸€ä¸ª <code>ALTER TABLE table_name CONCATENATE</code> è¯­å¥ï¼Œç”¨äºåˆå¹¶å°æ–‡ä»¶ã€‚ä½†æ˜¯åªæ”¯æŒ <code>RCFILE</code> å’Œ <code>ORC</code>æ–‡ä»¶ç±»å‹ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœæƒ³åˆå¹¶å°æ–‡ä»¶ï¼Œå¯ä»¥åˆ é™¤è¡¨ï¼Œç„¶åå†ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤é‡å»º</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; drop <span class="keyword">table</span> golds_log;</span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">STORED AS RCFile;</span><br></pre></td></tr></table></figure>



<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert into table golds_log values</span><br><span class="line">(<span class="number">3645356</span>,'wds<span class="number">765432</span>1(<span class="number">417175</span>2)','æ–°äººæ³¨å†Œå¥–åŠ±',<span class="number">1700</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">2016869</span>,'dqyx<span class="number">12345678</span>9(<span class="number">237669</span>9)','å‚åŠ ä¸€åœºæ¯”èµ›',<span class="number">1140</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">3630468</span>,'dke<span class="number">377661</span>1(<span class="number">415606</span>4)','å¤§è½¬ç›˜å¥–åŠ±',<span class="number">1200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">995267</span>,'a<span class="number">25441318</span>9(<span class="number">122941</span>7)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">200</span>,<span class="number">1526027152</span>),</span><br><span class="line">(<span class="number">795276</span>,'li<span class="number">876286</span>6(<span class="number">971402</span>)','å¦å¦æ‹¼åç¿»ç‰Œ',<span class="number">1200</span>,<span class="number">1526027152</span>);</span><br></pre></td></tr></table></figure>

<p>é‡å¤ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæ‰§è¡Œ 3 æ¬¡ <code>insert</code> è¯­å¥ï¼Œæ¯æ¬¡æ’å…¥ 5 æ¡æ•°æ®ã€‚åˆ·æ–° WebUIï¼Œä¼šçœ‹åˆ°å’Œå‰é¢ä¸€æ ·äº§ç”Ÿ 3 ä¸ªæ–‡ä»¶ã€‚</p>
<blockquote>
<p>Tip: å¦‚æœæ­¤æ—¶å†å°† <code>000000_0</code> æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œç”¨æ–‡æœ¬ç¼–è¾‘å™¨æˆ–è€… VSCode æ‰“å¼€æŸ¥çœ‹ï¼Œå‘ç°å·²ç»æ˜¯ä¹±ç äº†ã€‚å› ä¸ºå®ƒå·²ç»ä¸å†æ˜¯æ–‡æœ¬æ–‡ä»¶äº†ã€‚</p>
</blockquote>
<p>æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œåˆå¹¶</p>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter <span class="keyword">table</span> golds_log <span class="comment">concatenate</span>;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Starting Job = job_1587504428431_0006, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0006/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0006</span><br><span class="line">Hadoop job information <span class="keyword">for</span> <span class="literal">null</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">0</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">10</span>:<span class="number">40</span>,<span class="number">875</span> <span class="literal">null</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">10</span>:<span class="number">47</span>,<span class="number">012</span> <span class="literal">null</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line">Ended Job = job_1587504428431_0006</span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-<span class="literal">null</span>: Map: <span class="number">1</span>   HDFS Read: <span class="number">3137</span> HDFS Write: <span class="number">632</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">43.978</span> seconds</span><br></pre></td></tr></table></figure>



<p>åˆ·æ–°WebUIï¼Œä¼šå‘ç°æ–‡ä»¶å·²ç»åˆå¹¶äº†ï¼Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶å­˜åœ¨ã€‚</p>
<p>æœ€åï¼Œä½¿ç”¨ <code>SELECT</code> è¯­å¥æŸ¥çœ‹æ•°æ®è¡¨çš„å†…å®¹ã€‚</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span>  golds_log;</span><br><span class="line"></span><br><span class="line">OK</span><br><span class="line"><span class="number">3645356</span>	wds7654321(<span class="number">4171752</span>)	æ–°äººæ³¨å†Œå¥–åŠ±	<span class="number">1700</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>	dqyx123456789(<span class="number">2376699</span>)	å‚åŠ ä¸€åœºæ¯”èµ›	<span class="number">1140</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>	dke3776611(<span class="number">4156064</span>)	å¤§è½¬ç›˜å¥–åŠ±	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>	a254413189(<span class="number">1229417</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>	li8762866(<span class="number">971402</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3645356</span>	wds7654321(<span class="number">4171752</span>)	æ–°äººæ³¨å†Œå¥–åŠ±	<span class="number">1700</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>	dqyx123456789(<span class="number">2376699</span>)	å‚åŠ ä¸€åœºæ¯”èµ›	<span class="number">1140</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>	dke3776611(<span class="number">4156064</span>)	å¤§è½¬ç›˜å¥–åŠ±	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>	a254413189(<span class="number">1229417</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>	li8762866(<span class="number">971402</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3645356</span>	wds7654321(<span class="number">4171752</span>)	æ–°äººæ³¨å†Œå¥–åŠ±	<span class="number">1700</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>	dqyx123456789(<span class="number">2376699</span>)	å‚åŠ ä¸€åœºæ¯”èµ›	<span class="number">1140</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>	dke3776611(<span class="number">4156064</span>)	å¤§è½¬ç›˜å¥–åŠ±	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">995267</span>	a254413189(<span class="number">1229417</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">795276</span>	li8762866(<span class="number">971402</span>)	å¦å¦æ‹¼åç¿»ç‰Œ	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line">Time taken: <span class="number">0.133</span> seconds, Fetched: <span class="number">15</span> row(s)</span><br></pre></td></tr></table></figure>


<h4 id="Demo-Load-å¯¼å…¥å¤–éƒ¨æ•°æ®"><a href="#Demo-Load-å¯¼å…¥å¤–éƒ¨æ•°æ®" class="headerlink" title="Demo-Load å¯¼å…¥å¤–éƒ¨æ•°æ®"></a>Demo-Load å¯¼å…¥å¤–éƒ¨æ•°æ®</h4><p>ä¸‹é¢ç»™å‡ºä¸€ä¸ªå®ä¾‹ï¼Œå¦‚ä½•å°†æœ¬åœ°æ•°æ®æ–‡ä»¶ <code>test.txt</code> å¯¼å…¥åˆ° Hive æ•°æ®è¡¨ä¸­ã€‚</p>
<ol>
<li>æœ¬åœ°æ•°æ®æ–‡ä»¶ <code>test.txt</code> å†…å®¹å¦‚ä¸‹</li>
</ol>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3645356</span>|wds7654321(<span class="number">4171752</span>)|æ–°äººæ³¨å†Œå¥–åŠ±|<span class="number">1700</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>|dqyx123456789(<span class="number">2376699</span>)|å‚åŠ ä¸€åœºæ¯”èµ›|<span class="number">1140</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>|dke3776611(<span class="number">4156064</span>)|å¤§è½¬ç›˜å¥–åŠ±|<span class="number">1200</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">3642022</span>|é»‘å¨ƒ<span class="number">123456</span>(<span class="number">4168266</span>)|æ–°äººæ³¨å†Œå¥–åŠ±|<span class="number">500</span>|<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>|dqyx123456789(<span class="number">2376699</span>)|å¤§è½¬ç›˜å¥–åŠ±|<span class="number">1500</span>|<span class="number">1526027152</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åˆ›å»ºæ•°æ®è¡¨ï¼Œä¸æœ¬åœ° <code>test.txt</code> çš„æ•°æ®ç±»å‹ä¸€è‡´</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">ROW FORMAT DELIMITED FIELDS TERMINATED BY <span class="character">'|'</span>;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æœ€é‡è¦çš„ä¸€å¥å°±æ˜¯ <code>ROW FORMAT DELIMITED FIELDS TERMINATED BY &#39;|&#39;</code>ï¼Œè¯´æ˜è¡¨çš„å­—æ®µç”±ç¬¦å· <code>&quot;|&quot;</code> è¿›è¡Œåˆ†éš”ã€‚</p>
<blockquote>
<p>Tip: <code>test.txt</code> ä¸­åŒ…å«æœ‰ä¸­æ–‡ï¼Œç¡®ä¿æ–‡ä»¶æ ¼å¼æ˜¯ <code>utf-8</code>ï¼ˆ<code>GB2312</code> å¯¼å…¥åä¼šæœ‰ä¹±ç ï¼‰</p>
</blockquote>
<ol start="3">
<li>æŸ¥çœ‹æ•°æ®è¡¨çš„ç»“æ„</li>
</ol>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">describe</span> golds_log;</span><br><span class="line"></span><br><span class="line"><span class="keyword">describe</span> formatted student1;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æŸ¥çœ‹æ•°æ®è¡¨å†…å®¹ï¼ˆæ­¤æ—¶ä¸ºç©ºï¼‰</li>
</ol>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> student1;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>å¯¼å…¥æœ¬åœ°æ•°æ®</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">load</span> data <span class="keyword">local</span> inpath <span class="string">'/Users/lbs/Downloads/test.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> golds_log;</span><br><span class="line"></span><br><span class="line">Loading data <span class="keyword">to</span> <span class="keyword">table</span> hivedemo.golds_log</span><br><span class="line">OK</span><br><span class="line"><span class="type">Time</span> taken: <span class="number">0.139</span> seconds</span><br></pre></td></tr></table></figure>

<p>ä½ ä¼šå‘ç°ä½¿ç”¨ <code>load</code> è¯­å¥å†™å…¥æ•°æ®æ¯” <code>insert</code> è¯­å¥è¦å¿«è®¸å¤šå€ï¼Œå› ä¸º HIVE å¹¶ä¸å¯¹ <code>scheme</code> è¿›è¡Œæ ¡éªŒï¼Œä»…ä»…æ˜¯å°†æ•°æ®æ–‡ä»¶æŒªåˆ° HDFS ç³»ç»Ÿä¸Šï¼Œä¹Ÿæ²¡æœ‰æ‰§è¡Œ MapReduce ä½œä¸šã€‚æ‰€ä»¥ä»å¯¼å…¥æ•°æ®çš„è§’åº¦è€Œè¨€ï¼Œä½¿ç”¨ load è¦ä¼˜äºä½¿ç”¨ insertâ€¦valuesã€‚</p>
<ol start="6">
<li>å†æ¬¡æ•°æ®è¡¨å†…å®¹</li>
</ol>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; select * <span class="keyword">from</span> golds_log;</span><br><span class="line">OK</span><br><span class="line"><span class="number">3645356</span>	wds7654321(<span class="number">4171752</span>)	æ–°äººæ³¨å†Œå¥–åŠ±	<span class="number">1700</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>	dqyx123456789(<span class="number">2376699</span>)	å‚åŠ ä¸€åœºæ¯”èµ›	<span class="number">1140</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3630468</span>	dke3776611(<span class="number">4156064</span>)	å¤§è½¬ç›˜å¥–åŠ±	<span class="number">1200</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">3642022</span>	é»‘å¨ƒ<span class="number">123456</span>(<span class="number">4168266</span>)	æ–°äººæ³¨å†Œå¥–åŠ±	<span class="number">500</span>	<span class="number">1526027152</span></span><br><span class="line"><span class="number">2016869</span>	dqyx123456789(<span class="number">2376699</span>)	å¤§è½¬ç›˜å¥–åŠ±	<span class="number">1500</span>	<span class="number">1526027152</span></span><br><span class="line">Time taken: <span class="number">0.087</span> seconds, Fetched: <span class="number">5</span> row(s)</span><br></pre></td></tr></table></figure>


<ol start="7">
<li>åå¤å¯¼å…¥ 3 æ¬¡åï¼Œæ‰“å¼€ Web UIï¼Œåˆ·æ–°åï¼Œå‘ç°å’Œä½¿ç”¨ Insert è¯­å¥æ—¶ä¸€æ ·ï¼Œæ¯æ¬¡ load è¯­å¥éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼ŒåŒæ ·å­˜åœ¨å°æ–‡ä»¶çš„é—®é¢˜ã€‚</li>
</ol>
<p><img src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/BigData2020/hadoop-namenode-manage-web-3.png" alt=""></p>
<p>å’Œå‰é¢çš„æ–¹æ³•ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¡¨çš„å­˜å‚¨ç±»å‹æ”¹ä¸º RCFileï¼Œç„¶åå†è¿›è¡Œåˆå¹¶ï¼Œä½†æ˜¯å› ä¸ºä½¿ç”¨ load è¯­å¥çš„æ—¶å€™ï¼Œè¦å¯¼å…¥çš„æ–‡ä»¶ç±»å‹æ˜¯ txtï¼Œå’Œè¡¨çš„å­˜å‚¨ç±»å‹ä¸ä¸€è‡´ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œåªèƒ½æ›²çº¿æ•‘å›½äº†ï¼šå°†ä¸»è¡¨åˆ›å»ºä¸º RCFile ç±»å‹ï¼Œå†åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œç±»å‹æ˜¯ Textfileï¼Œç„¶å load æ—¶å¯¼å…¥åˆ°ä¸´æ—¶è¡¨ï¼Œç„¶åå†ä½¿ç”¨ä¸‹ä¸€èŠ‚è¦ä»‹ç»çš„ <code>Insert...select</code> è¯­å¥ï¼Œå°†æ•°æ®ä»ä¸´æ—¶è¡¨å¯¼å…¥åˆ°ä¸»è¡¨ã€‚</p>
<h4 id="Demo-ä½¿ç”¨-Insertâ€¦Select-è¯­å¥å†™å…¥æ•°æ®"><a href="#Demo-ä½¿ç”¨-Insertâ€¦Select-è¯­å¥å†™å…¥æ•°æ®" class="headerlink" title="Demo-ä½¿ç”¨ Insertâ€¦Select è¯­å¥å†™å…¥æ•°æ®"></a>Demo-ä½¿ç”¨ Insertâ€¦Select è¯­å¥å†™å…¥æ•°æ®</h4><ol>
<li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥åˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œä¸´æ—¶è¡¨çš„åç§°ä¸º <code>golds_log_tmp</code>ã€‚ä¸´æ—¶è¡¨åœ¨å½“å‰ä¼šè¯(<code>session</code>)ç»“æŸåä¼šè¢« HIVE è‡ªåŠ¨åˆ é™¤ï¼Œä¸´æ—¶è¡¨å¯ä»¥ä¿å­˜åœ¨SSDã€å†…å­˜æˆ–è€…æ˜¯æ–‡ä»¶ç³»ç»Ÿä¸Šã€‚</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create TEMPORARY Table golds<span class="constructor">_log_tmp(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">ROW FORMAT DELIMITED  FIELDS TERMINATED BY <span class="character">'|'</span>;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥åˆ›å»ºä¸»è¡¨</li>
</ol>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; drop <span class="keyword">table</span> golds_log;</span><br></pre></td></tr></table></figure>

<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Create Table golds<span class="constructor">_log(<span class="params">user_id</span> <span class="params">bigint</span>, <span class="params">accounts</span> <span class="params">string</span>, <span class="params">change_type</span> <span class="params">string</span>, <span class="params">golds</span> <span class="params">bigint</span>, <span class="params">log_time</span> <span class="params">int</span>)</span></span><br><span class="line">STORED AS RCFile;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ä¸‹é¢çš„è¯­å¥å°†æ•°æ®å¯¼å…¥åˆ°ä¸´æ—¶è¡¨</li>
</ol>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; <span class="keyword">load</span> data <span class="keyword">local</span> inpath <span class="string">'/Users/lbs/Downloads/test.txt'</span> <span class="keyword">into</span> <span class="keyword">table</span> golds_log_tmp;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ä½¿ç”¨insertâ€¦selectè¯­å¥å°†æ•°æ®ä»ä¸´æ—¶è¡¨è½¬ç§»åˆ°ä¸»è¡¨</li>
</ol>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; Insert <span class="built_in">int</span>o table golds_log select * <span class="keyword">from</span> golds_log_tmp;</span><br><span class="line"></span><br><span class="line">Query ID = lbs_20200422063734_475e168a<span class="number">-5016</span><span class="number">-4</span>ba7-a67f<span class="number">-9</span>c7f76373f98</span><br><span class="line">Total jobs = <span class="number">1</span></span><br><span class="line">Launching Job <span class="number">1</span> <span class="keyword">out</span> of <span class="number">1</span></span><br><span class="line">Number of reduce tasks determined at compile time: <span class="number">1</span></span><br><span class="line">In order to change the average load <span class="keyword">for</span> a reducer (<span class="keyword">in</span> bytes):</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.bytes.per.reducer=&lt;number&gt;</span><br><span class="line">In order to limit the maximum number of reducers:</span><br><span class="line">  <span class="keyword">set</span> hive.exec.reducers.max=&lt;number&gt;</span><br><span class="line">In order to <span class="keyword">set</span> a constant number of reducers:</span><br><span class="line">  <span class="keyword">set</span> mapreduce.job.reduces=&lt;number&gt;</span><br><span class="line">Starting Job = job_1587504428431_0007, Tracking URL = http:<span class="comment">//localhost:8088/proxy/application_1587504428431_0007/</span></span><br><span class="line">Kill Command = /Library/hadoop<span class="number">-2.10</span><span class="number">.0</span>/bin/mapred job  -kill job_1587504428431_0007</span><br><span class="line">Hadoop job information <span class="keyword">for</span> Stage<span class="number">-1</span>: number of mappers: <span class="number">1</span>; number of reducers: <span class="number">1</span></span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">10</span>,<span class="number">330</span> Stage<span class="number">-1</span> map = <span class="number">0</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">16</span>,<span class="number">479</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">0</span>%</span><br><span class="line"><span class="number">2020</span><span class="number">-04</span><span class="number">-22</span> <span class="number">06</span>:<span class="number">38</span>:<span class="number">21</span>,<span class="number">572</span> Stage<span class="number">-1</span> map = <span class="number">100</span>%,  reduce = <span class="number">100</span>%</span><br><span class="line">Ended Job = job_1587504428431_0007</span><br><span class="line">Stage<span class="number">-4</span> <span class="keyword">is</span> selected by condition resolver.</span><br><span class="line">Stage<span class="number">-3</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Stage<span class="number">-5</span> <span class="keyword">is</span> filtered <span class="keyword">out</span> by condition resolver.</span><br><span class="line">Moving data to directory hdfs:<span class="comment">//localhost:9000/user/hive/warehouse/hivedemo.db/golds_log/.hive-staging_hive_2020-04-22_06-37-34_112_939503175258871139-1/-ext-10000</span></span><br><span class="line">Loading data to table hivedemo.golds_log</span><br><span class="line">MapReduce Jobs Launched: </span><br><span class="line">Stage-Stage<span class="number">-1</span>: Map: <span class="number">1</span>  Reduce: <span class="number">1</span>   HDFS Read: <span class="number">18494</span> HDFS Write: <span class="number">794</span> SUCCESS</span><br><span class="line">Total MapReduce CPU Time Spent: <span class="number">0</span> msec</span><br><span class="line">OK</span><br><span class="line">Time taken: <span class="number">48.647</span> seconds</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>insert...select</code> è¯­å¥åº•å±‚ä¹Ÿä¼šæ‰§è¡Œä¸€ä¸ª MapReduce ä½œä¸šï¼Œé€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚</p>
<ol start="5">
<li>åœ¨å¤šæ¬¡æ‰§è¡Œ <code>insert...select</code> åï¼Œ<code>golds_log</code> ä¸‹ä»ç„¶ä¼šç”Ÿæˆå¤šä¸ªå°æ–‡ä»¶ï¼Œæ­¤æ—¶ï¼Œåªè¦æ‰§è¡Œä¸€ä¸‹åˆå¹¶å°æ–‡ä»¶çš„è¯­å¥å°±å¯ä»¥äº†</li>
</ol>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hive&gt; alter <span class="keyword">table</span> golds_log <span class="comment">concatenate</span>;</span><br></pre></td></tr></table></figure>



<h2 id="Hive-æ•°æ®æŸ¥è¯¢"><a href="#Hive-æ•°æ®æŸ¥è¯¢" class="headerlink" title="Hive æ•°æ®æŸ¥è¯¢"></a>Hive æ•°æ®æŸ¥è¯¢</h2><h3 id="è¡¨æ“ä½œ"><a href="#è¡¨æ“ä½œ" class="headerlink" title="è¡¨æ“ä½œ"></a>è¡¨æ“ä½œ</h3><p>Hiveçš„æ•°æ®è¡¨åˆ†ä¸º2ç§ï¼šå†…éƒ¨è¡¨å’Œå¤–éƒ¨è¡¨</p>
<ol>
<li>å†…éƒ¨è¡¨ï¼šHiveåˆ›å»ºå¹¶é€šè¿‡ LOAD DATA INPATH è¿›æ•°æ®åº“çš„è¡¨ï¼Œè¿™ç§è¡¨å¯ä»¥ç†è§£ä¸ºæ•°æ®å’Œè¡¨ç»“æ„éƒ½ä¿å­˜åœ¨ä¸€èµ·çš„æ•°æ®è¡¨ã€‚å½“é€šè¿‡ <code>DROP TABLE table_name</code> åˆ é™¤å…ƒæ•°æ®ä¸­è¡¨ç»“æ„çš„åŒæ—¶ï¼Œè¡¨ä¸­çš„æ•°æ®ä¹ŸåŒæ ·ä¼šä» HDFS ä¸­è¢«åˆ é™¤ã€‚</li>
<li>å¤–éƒ¨è¡¨ï¼šåœ¨è¡¨ç»“æ„åˆ›å»ºä»¥å‰ï¼Œæ•°æ®å·²ç»ä¿å­˜åœ¨HDFSä¸­ï¼Œé€šè¿‡åˆ›å»ºè¡¨ç»“æ„ï¼Œå°†æ•°æ®æ ¼å¼åŒ–åˆ°è¡¨çš„ç»“æ„é‡Œã€‚å½“é€šè¿‡ <code>DROP TABLE table_name</code> æ“ä½œçš„æ—¶å€™ï¼ŒHive ä»…ä»…åˆ é™¤å…ƒæ•°æ®çš„è¡¨ç»“æ„ï¼Œè€Œä¸åˆ é™¤HDFSä¸Šçš„æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œç›¸æ¯”å†…éƒ¨è¡¨ï¼Œå¤–éƒ¨è¡¨å¯ä»¥æ›´æ”¾å¿ƒåœ°å¤§èƒ†ä½¿ç”¨ã€‚</li>
</ol>
<ul>
<li>åˆ›å»ºè¡¨æ—¶ï¼Œ<code>LIKE</code> å…è®¸ç”¨æˆ·å¤åˆ¶ç°æœ‰çš„è¡¨ç»“æ„ï¼Œä½†ä¸æ˜¯å¤åˆ¶æ•°æ®</li>
</ul>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LIKE</span> existing_table_name</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ›å»ºè¡¨æ—¶ï¼Œä½¿ç”¨ <code>EXTERNAL</code> å£°æ˜å¤–éƒ¨è¡¨</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">EXTERNAL</span> <span class="keyword">TABLE</span> tablename <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tablename</span><br></pre></td></tr></table></figure>

<ul>
<li>æ•°æ®è¡¨åœ¨åˆ é™¤æ—¶å€™ï¼Œå†…éƒ¨è¡¨ä¼šè¿æ•°æ®ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–éƒ¨è¡¨åªåˆ é™¤è¡¨ç»“æ„ï¼Œæ•°æ®è¿˜æ˜¯ä¿ç•™çš„ã€‚</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="built_in">table_name</span></span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨è¡¨æŸ¥è¯¢æ—¶å€™ï¼Œä½¿ç”¨ <code>ALL</code> å’Œ <code>DISTINCT</code> é€‰é¡¹åŒºåˆ†å¯¹é‡å¤è®°å½•çš„å¤„ç†ã€‚é»˜è®¤æ˜¯ <code>ALL</code>,è¡¨ç¤ºæŸ¥è¯¢æ‰€æœ‰è®°å½•ï¼Œ<code>DISTINCT</code> è¡¨ç¤ºå»æ‰é‡å¤çš„è®°å½•ã€‚</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">ALL</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> age, grade <span class="keyword">FROM</span> <span class="keyword">table</span>;</span><br></pre></td></tr></table></figure>


<ul>
<li>Hive ä¸æ”¯æŒ <code>HAVING</code> å­å¥ï¼Œå¯ä»¥å°† HAVING å­å¥è½¬åŒ–ä¸ºä¸€ä¸ªå­æŸ¥è¯¢ã€‚</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//Hive ä¸æ”¯æŒ HAVING å­å¥</span><br><span class="line"><span class="keyword">SELECT</span>  col1 <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> col1 <span class="keyword">HAVING</span> <span class="keyword">SUM</span>(col2) &gt; <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å¯ä»¥æ”¹ä¸ºä¸‹è¿°å­æŸ¥è¯¢æ ¼å¼  Hiveæ”¯æŒä¸‹è¿°å‘½å</span><br><span class="line"><span class="keyword">SELECT</span>  col1 <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> col1, <span class="keyword">SUM</span>(col2) <span class="keyword">AS</span> col2 <span class="keyword">sum</span> <span class="keyword">FROM</span> <span class="keyword">table</span> <span class="keyword">GROUP</span> BU col1) table2 <span class="keyword">WHERE</span> table2.col2sum &gt; <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h3 id="è§†å›¾æ“ä½œ"><a href="#è§†å›¾æ“ä½œ" class="headerlink" title="è§†å›¾æ“ä½œ"></a>è§†å›¾æ“ä½œ</h3><p>è§†å›¾ VIEW æ˜¯åªè¯»çš„ï¼Œä¸æ”¯æŒ <code>LOAD/INSERT/ALTER</code>ã€‚å¯ä»¥ä½¿ç”¨ <code>ALTER VIEW</code> æ”¹å˜ VIEW å®šä¹‰</p>
<p>ä¸‹é¢ä»‹ç»ä¸‹è§†å›¾VIEWå¸¸è§çš„æ“ä½œè¯­å¥</p>
<ul>
<li>åˆ›å»º VIEW </li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] view_name</span><br></pre></td></tr></table></figure>

<ul>
<li>åˆ é™¤ VIEW </li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> [<span class="keyword">IF</span> <span class="keyword">EXISTS</span>] view_name</span><br></pre></td></tr></table></figure>


<h3 id="ç´¢å¼•æ“ä½œ"><a href="#ç´¢å¼•æ“ä½œ" class="headerlink" title="ç´¢å¼•æ“ä½œ"></a>ç´¢å¼•æ“ä½œ</h3><p>ç´¢å¼•æ˜¯æ ‡å‡†çš„æ•°æ®åº“æŠ€æœ¯ã€‚Hive 0.7 ç‰ˆæœ¬ä¹‹åæ”¯æŒç´¢å¼•ã€‚</p>

    </div>

    
    
    
        <div class="reward-container">
  <div></div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    æ‰“èµ
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.jpg" alt="Liu Baoshuai å¾®ä¿¡æ”¯ä»˜">
        <p>å¾®ä¿¡æ”¯ä»˜</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Liu Baoshuai æ”¯ä»˜å®">
        <p>æ”¯ä»˜å®</p>
      </div>

  </div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/BigData/" rel="tag"> <i class="fa fa-tag"></i> BigData</a>
              <a href="/tags/Hadoop/" rel="tag"> <i class="fa fa-tag"></i> Hadoop</a>
              <a href="/tags/Hive/" rel="tag"> <i class="fa fa-tag"></i> Hive</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/21/hadoop-basic-1/" rel="prev" title="Hadoopå…¥é—¨ç¯‡â€”â€”ä¼ªåˆ†å¸ƒæ¨¡å¼å®‰è£… & WordCountè¯é¢‘ç»Ÿè®¡">
      <i class="fa fa-chevron-left"></i> Hadoopå…¥é—¨ç¯‡â€”â€”ä¼ªåˆ†å¸ƒæ¨¡å¼å®‰è£… & WordCountè¯é¢‘ç»Ÿè®¡
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#å­¦ä¹ èµ„æ–™æ±‡æ€»"><span class="nav-number">1.</span> <span class="nav-text">å­¦ä¹ èµ„æ–™æ±‡æ€»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Overview"><span class="nav-number">2.</span> <span class="nav-text">Overview</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«"><span class="nav-number">2.1.</span> <span class="nav-text">Hiveå’Œå…³ç³»å‹æ•°æ®åº“çš„åŒºåˆ«</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive-å®‰è£…é…ç½®"><span class="nav-number">3.</span> <span class="nav-text">Hive å®‰è£…é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å®‰è£…mysql"><span class="nav-number">3.1.</span> <span class="nav-text">å®‰è£…mysql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hive-å®‰è£…"><span class="nav-number">3.2.</span> <span class="nav-text">Hive å®‰è£…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä¿®æ”¹-Hive-é»˜è®¤å…ƒæ•°æ®åº“"><span class="nav-number">3.3.</span> <span class="nav-text">ä¿®æ”¹ Hive é»˜è®¤å…ƒæ•°æ®åº“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hive-é…ç½®"><span class="nav-number">3.4.</span> <span class="nav-text">Hive é…ç½®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯åŠ¨-Hive"><span class="nav-number">3.5.</span> <span class="nav-text">å¯åŠ¨ Hive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¯è§†åŒ–å·¥å…·-DbVisualizer"><span class="nav-number">3.6.</span> <span class="nav-text">å¯è§†åŒ–å·¥å…· DbVisualizer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hiveäº¤äº’å¼æ¨¡å¼-CLI"><span class="nav-number">4.</span> <span class="nav-text">Hiveäº¤äº’å¼æ¨¡å¼ CLI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Beeline"><span class="nav-number">5.</span> <span class="nav-text">Beeline</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HiveServer2"><span class="nav-number">5.1.</span> <span class="nav-text">HiveServer2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Beeline-å‚æ•°"><span class="nav-number">5.2.</span> <span class="nav-text">Beeline å‚æ•°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ambari"><span class="nav-number">6.</span> <span class="nav-text">Ambari</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hiveå®æˆ˜Demo"><span class="nav-number">7.</span> <span class="nav-text">Hiveå®æˆ˜Demo</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hiveæ¶æ„"><span class="nav-number">8.</span> <span class="nav-text">Hiveæ¶æ„</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HCatalog"><span class="nav-number">8.1.</span> <span class="nav-text">HCatalog</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive-æ•°æ®ç±»å‹"><span class="nav-number">9.</span> <span class="nav-text">Hive æ•°æ®ç±»å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#åŸºæœ¬æ•°æ®ç±»å‹"><span class="nav-number">9.1.</span> <span class="nav-text">åŸºæœ¬æ•°æ®ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¤æ‚æ•°æ®ç±»å‹"><span class="nav-number">9.2.</span> <span class="nav-text">å¤æ‚æ•°æ®ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ—¶é—´ç±»å‹"><span class="nav-number">9.3.</span> <span class="nav-text">æ—¶é—´ç±»å‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive-æ–‡ä»¶æ ¼å¼"><span class="nav-number">10.</span> <span class="nav-text">Hive æ–‡ä»¶æ ¼å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TextFile"><span class="nav-number">10.1.</span> <span class="nav-text">TextFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SequenceFile"><span class="nav-number">10.2.</span> <span class="nav-text">SequenceFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RCFile"><span class="nav-number">10.3.</span> <span class="nav-text">RCFile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼"><span class="nav-number">10.4.</span> <span class="nav-text">è‡ªå®šä¹‰æ–‡ä»¶æ ¼å¼</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hiveçš„æ•°æ®å­˜å‚¨"><span class="nav-number">11.</span> <span class="nav-text">Hiveçš„æ•°æ®å­˜å‚¨</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Hiveçš„æ•°æ®æ¨¡å‹"><span class="nav-number">11.1.</span> <span class="nav-text">Hiveçš„æ•°æ®æ¨¡å‹</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#è¡¨"><span class="nav-number">11.1.1.</span> <span class="nav-text">è¡¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è§†å›¾-View"><span class="nav-number">11.1.2.</span> <span class="nav-text">è§†å›¾ View</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive-æ•°æ®æ“ä½œ"><span class="nav-number">12.</span> <span class="nav-text">Hive æ•°æ®æ“ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å‘è¡¨ä¸­è£…è½½æ•°æ®"><span class="nav-number">12.1.</span> <span class="nav-text">å‘è¡¨ä¸­è£…è½½æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Demo-Insertæ’å…¥æ•°æ®"><span class="nav-number">12.1.1.</span> <span class="nav-text">Demo-Insertæ’å…¥æ•°æ®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶"><span class="nav-number">12.1.2.</span> <span class="nav-text">Demo-åˆå¹¶æ•°æ®åº“å°æ–‡ä»¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Demo-Load-å¯¼å…¥å¤–éƒ¨æ•°æ®"><span class="nav-number">12.1.3.</span> <span class="nav-text">Demo-Load å¯¼å…¥å¤–éƒ¨æ•°æ®</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Demo-ä½¿ç”¨-Insertâ€¦Select-è¯­å¥å†™å…¥æ•°æ®"><span class="nav-number">12.1.4.</span> <span class="nav-text">Demo-ä½¿ç”¨ Insertâ€¦Select è¯­å¥å†™å…¥æ•°æ®</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive-æ•°æ®æŸ¥è¯¢"><span class="nav-number">13.</span> <span class="nav-text">Hive æ•°æ®æŸ¥è¯¢</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#è¡¨æ“ä½œ"><span class="nav-number">13.1.</span> <span class="nav-text">è¡¨æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è§†å›¾æ“ä½œ"><span class="nav-number">13.2.</span> <span class="nav-text">è§†å›¾æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç´¢å¼•æ“ä½œ"><span class="nav-number">13.3.</span> <span class="nav-text">ç´¢å¼•æ“ä½œ</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Liu Baoshuai"
      src="https://image-bed-20181207-1257458714.cos.ap-shanghai.myqcloud.com/Blog-20190315/blog-logo-1.jpg">
  <p class="site-author-name" itemprop="name">Liu Baoshuai</p>
  <div class="site-description" itemprop="description">Record and become better myself</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lbs0912" title="GitHub â†’ https://github.com/lbs0912" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/mailto:lbs1203940926@163.com" title="E-Mail â†’ mailto:lbs1203940926@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.im/user/59af7aa96fb9a0248f4aaeab" title="æ˜é‡‘åšå®¢ â†’ https://juejin.im/user/59af7aa96fb9a0248f4aaeab" rel="noopener" target="_blank"><i class="fa fa-fw fa-free-code-camp"></i>æ˜é‡‘åšå®¢</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/2329754491" title="å¾®åš â†’ https://weibo.com/2329754491" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>å¾®åš</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liu Baoshuai</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=gksxcfwJlMV3zkhz1pQc7pl2-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : 'gksxcfwJlMV3zkhz1pQc7pl2-gzGzoHsz',
            'X-LC-Key'    : 'kjOanp812G7TIGMSQpPCVIhj',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>












  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://liubaoshuaiBlog.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://lbs0912.github.io/2020/04/22/hive-basic-1/";
    this.page.identifier = "2020/04/22/hive-basic-1/";
    this.page.title = "Hiveå…¥é—¨ç¯‡â€”â€”Hiveå®‰è£…é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œè¡¨æ“ä½œ";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://liubaoshuaiBlog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
